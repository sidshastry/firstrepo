webpackJsonp([5],{104:function(e,t,n){"use strict";n.d(t,"a",function(){return w});var r=n(11),a=(n.n(r),n(54)),i=(n.n(a),n(84)),s=(n.n(i),n(101)),o=(n.n(s),n(77)),c=(n.n(o),n(0)),u=n.n(c),l=n(1),d=n.n(l),h=n(6),v=n.n(h),f=n(3),p=n.n(f),g=n(7),y=n.n(g),b=n(5),m=n.n(b),k=n(2),_=(n(345),n(45)),x=function(e){function t(){return u()(this,t),v()(this,p()(t).apply(this,arguments))}return y()(t,e),d()(t,[{key:"get",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=e.payload;return Object(k.a)(r),void 0!==r[t]?r[t]:n}},{key:"create",value:function(e,t){k.a.string(e),k.a.object(t);var n=Date.now();return{_id:this._classSequentialUUID(),type:e,payload:t,timestampMS:n}}},{key:"clone",value:function(e){var t=this._clone(e);return t._id=this._classSequentialUUID(),t}},{key:"transmute",value:function(e,t){Object(k.a)(e),k.a.string(t);var n=this.clone(e);return n.type=t,n}},{key:"transmuteReduce",value:function(e){Object(k.a)(e);var t=this.actionTypeForAction(e);k.a.string(t);var n=this.reduceActionTypeForActionType(t);k.a.string(n);var r=this.clone(e);return r.type=n,r}},{key:"reduceActionTypeForActionType",value:function(e){return k.a.string(e),"".concat(e,"_REDUCE")}},{key:"actionTypeForAction",value:function(e){k.a.object(e);var t=e.type;return k.a.string(t),t}},{key:"actionTypeForAction",value:function(e){k.a.object(e);var t=e.type;return k.a.string(t),t}},{key:"isResultAction",value:function(e){k.a.object(e);var t=this.actionTypeForAction(e);k.a.string(t);var n=this.isResultActionType(t);return k.a.boolean(n),n}},{key:"isResultActionType",value:function(e){return k.a.string(e),!!this.isSucceededActionType(e)||!!this.isFailedActionType(e)}},{key:"isSucceededAction",value:function(e){k.a.object(e);var t=this.actionTypeForAction(e);k.a.string(t);var n=this.isSucceededActionType(t);return k.a.boolean(n),n}},{key:"isSucceededActionType",value:function(e){return k.a.string(e),e.endsWith("_SUCCEEDED")}},{key:"baseActionTypeFromSucceededActionType",value:function(e){return Object(k.a)(this.isSucceededActionType(e)),e.slice(0,e.length-"_SUCCEEDED".length)}},{key:"succeededActionTypeForAction",value:function(e){k.a.object(e);var t=this.actionTypeForAction(e);k.a.string(t);var n=this.succeededActionTypeForActionType(t);return k.a.string(n),n}},{key:"succeededActionTypeForActionType",value:function(e){return k.a.string(e),Object(k.a)(!1===this.isSucceededActionType(e)),Object(k.a)(!1===this.isFailedActionType(e)),"".concat(e).concat("_SUCCEEDED")}},{key:"succeededActionTypesForActionTypes",value:function(e){var t=this;return k.a.array(e),e.map(function(e){return t.succeededActionTypeForActionType(e)})}},{key:"isFailedAction",value:function(e){k.a.object(e);var t=this.actionTypeForAction(e);k.a.string(t);var n=this.isFailedActionType(t);return k.a.boolean(n),n}},{key:"isFailedActionType",value:function(e){return k.a.string(e),e.endsWith("_FAILED")}},{key:"baseActionTypeFromFailedActionType",value:function(e){return Object(k.a)(this.isFailedActionType(e)),e.slice(0,e.length-"_FAILED".length)}},{key:"failedActionTypeForAction",value:function(e){k.a.object(e);var t=this.actionTypeForAction(e);k.a.string(t);var n=this.failedActionTypeForActionType(t);return k.a.string(n),n}},{key:"failedActionTypeForActionType",value:function(e){return k.a.string(e),Object(k.a)(!1===this.isSucceededActionType(e)),Object(k.a)(!1===this.isFailedActionType(e)),"".concat(e).concat("_FAILED")}},{key:"resultActionTypesForAction",value:function(e){k.a.object(e);var t=this.succeededActionTypeForAction(e);k.a.string(t);var n=this.failedActionTypeForAction(e);return k.a.string(n),[t,n]}},{key:"hasResultActionTypes",value:function(e){if(k.a.object(e),this.isResultAction(e))return!1;var t=this.actionTypeForAction(e);return k.a.string(t),!!this.succeededActionTypeForActionType(t)&&!!this.failedActionTypeForActionType(t)}}]),t}(_.a);m()(x,"CLASS",function(){return"ActionUtilsClass"});var w=new x},116:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return X});var r=n(21),a=(n.n(r),n(22)),i=(n.n(a),n(25)),s=(n.n(i),n(11)),o=(n.n(s),n(41)),c=(n.n(o),n(145)),u=(n.n(c),n(12)),l=(n.n(u),n(48)),d=(n.n(l),n(8)),h=(n.n(d),n(20)),v=(n.n(h),n(17)),f=(n.n(v),n(18)),p=(n.n(f),n(43)),g=(n.n(p),n(19)),y=(n.n(g),n(49)),b=n.n(y),m=n(40),k=n.n(m),_=n(62),x=n.n(_),w=n(23),I=n.n(w),A=n(50),S=n.n(A),E=n(24),C=(n.n(E),n(0)),j=n.n(C),O=n(1),D=n.n(O),T=n(5),M=n.n(T),F=n(411),L=(n.n(F),n(413)),N=(n.n(L),n(415)),P=(n.n(N),n(416),n(2)),R=n(61),B=n(158),U=n(346),W=n(730),H=n(732),G=n(733),V=null,$=[],z={},q={},J={},Y={},Q="global",X=new(function(){function t(){j()(this,t),M()(this,"bootstrapped",!1)}return D()(t,[{key:"isBootstrapped",value:function(){return!0===this.bootstrapped}},{key:"bootstrap",value:function(){var e,t,n,r=this,a=arguments;return I.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:if(e=a.length>0&&void 0!==a[0]?a[0]:{},P.a.object(e),!this.bootstrapped){i.next=4;break}return i.abrupt("return");case 4:return this._createGlobalModule(e),t=angular.module,angular.module=function(e,n,a){return e===Q?r.globalModule:t(e,n,a)},i.next=9,I.a.awrap(this._waitDocumentReady());case 9:n=e.modules||[],angular.bootstrap(document,[Q].concat(S()(n))),this.bootstrapped=!0;case 12:case"end":return i.stop()}},null,this)}},{key:"_waitDocumentReady",value:function(){return I.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){return angular.element(document).ready(function(){return e()})}));case 1:case"end":return e.stop()}})}},{key:"_createGlobalModule",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};function t(t,n,r,a,i){R.a.isProduction()&&a.debugInfoEnabled(!1),!0===e.html5Mode&&t.html5Mode({enabled:!0,requireBase:!1}),Object(P.a)(B.a.isBootstrapped(),"must bootstrap redux before bootstrapping angular");var s=B.a.ensureStore();P.a.object(s);var o=s.getStore();P.a.object(o),i.provideStore(o),V._controller=V.controller,V._service=V.service,V._factory=V.factory,V._value=V.value,V._directive=V.directive,V.controller=function(e,t){return n.register(e,t),this},V.service=function(e,t){return r.service(e,t),this},V.factory=function(e,t){return r.factory(e,t),this},V.value=function(e,t){return r.value(e,t),this},V.directive=function(e,t){return a.directive(e,t),this},V.constant=function(e,t){return r.constant(e,t),this}}P.a.object(e),Object(P.a)(null===V,"tried to create global module twice"),t.$inject=["$locationProvider","$controllerProvider","$provide","$compileProvider","$ngReduxProvider"],(V=angular.module(Q,["ngRedux","angular-bind-html-compile","ngSanitize"])).config(t),V.filter("translate",U.c),V.directive("translate",U.b),V.directive("lazySrc",W.a),V.directive("whenVisible",H.a),V.directive("ngClick",G.a);for(var n=0,r=$;n<r.length;n++){(0,r[n])()}return $=null,V}},{key:"getInjector",value:function(){var e=angular.element(document).injector();return Object(P.a)(e,"angular injector is not available yet"),e}},{key:"hasDependency",value:function(e){return this.getInjector().has(e)}},{key:"getDependency",value:function(e){return this.getInjector().get(e)}},{key:"isFilterRegistered",value:function(e){return P.a.string(e),void 0!==z[e]}},{key:"isFilter",value:function(e){return e&&"function"==typeof e}},{key:"registerFilter",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Object(P.a)(this.isFilter(e)),P.a.object(n),!1!==this.isBootstrapped()||!0===n.force){var r=n.filterId;P.a.string(r),this.isFilterRegistered(r)||(this.globalModule.filter(r,e),z[r]=e)}else $.push(function(){return t.registerFilter(e,x()({},n,{force:!0}))})}},{key:"unregisterFilter",value:function(e){Object(P.a)(this.isFilter(e))}},{key:"isFactory",value:function(e){return e&&"function"==typeof e}},{key:"isFactoryRegistered",value:function(e){return P.a.string(e),void 0!==q[e]}},{key:"registerFactory",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Object(P.a)(this.isFactory(e)),P.a.object(n),!1!==this.isBootstrapped()||!0===n.force){var r=n.factoryId;P.a.string(r),this.isFactoryRegistered(r)||(this.globalModule.factory(r,e),q[r]=e)}else $.push(function(){return t.registerFactory(e,x()({},n,{force:!0}))})}},{key:"unregisterFactory",value:function(e){Object(P.a)(this.isFactory(e))}},{key:"isDirective",value:function(e){return e&&"function"==typeof e}},{key:"isDirectiveRegistered",value:function(e){return P.a.string(e),void 0!==J[e]}},{key:"registerDirectiveController",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(P.a)(e),P.a.object(t);var n=e.__directive;P.a.function(n),this.registerDirective(n,t)}},{key:"isControllerRegistered",value:function(e){return P.a.string(e),void 0!==Y[e]}},{key:"_registerController",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(P.a.function(e),P.a.object(n),!1!==this.isBootstrapped()||!0===n.force){var r=n.controllerId;P.a.string(r),this.isControllerRegistered(r)||(this.globalModule.controller(r,e),Y[r]=e)}else $.push(function(){return t._registerController(e,x()({},n,{force:!0}))})}},{key:"registerDirective",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Object(P.a)(this.isDirective(e)),P.a.object(n),!1!==this.isBootstrapped()||!0===n.force){var r=n.directiveId||this.directiveIdFromDirective(e);this.isDirectiveRegistered(r)||(this.globalModule.directive(r,e),J[r]=e)}else $.push(function(){return t.registerDirective(e,x()({},n,{force:!0}))})}},{key:"unregisterDirective",value:function(e){Object(P.a)(this.isDirective(e));var t=this.directiveIdFromDirective(e);Object(P.a)(t);var n=this.elementsForDirectiveId(t),r=!0,a=!1,i=void 0;try{for(var s,o=n[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var c=s.value;this.destroyDirectiveElement(c)}}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}}},{key:"destroyDirectiveElement",value:function(e){var t=this.scopeFromElement(e);Object(P.a)(t),this.destroyDirectiveScope(t),e.remove()}},{key:"destroyDirectiveScope",value:function(e){Object(P.a)(e),e.$destroy()}},{key:"deployDirectiveController",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(P.a)(e),P.a.object(t);var n=e.__directive;return P.a.function(n),this.deployDirective(n,t)}},{key:"deployDirective",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(P.a)(this.isDirective(t)),P.a.object(n);var r=!0===n.softFailIfTargetNotAvailable;this.registerDirective(t);var a=this.directiveIdFromDirective(t);P.a.string(a),Object(P.a)(this.isDirectiveRegistered(a));var i=this.directiveSpecForDirective(t);P.a.object(i);var s=n.target||i._target;if(null==s)return null;var o="object"===k()(s)?s.selector:s;P.a.string(o);var c=e(o);if(0===c.length&&!0===r)return null;Object(P.a)(c&&c.length>0,"cannot deploy directive '".concat(a,"', destination does not exist: ").concat(o));var u=this.tagFromDirectiveId(a);if(Object(P.a)(u),this.isDirectiveSingleton(t)){var l=this.elementsForDirectiveId(a);Object(P.a)(0===l.length,"singleton directive already exists in DOM: ".concat(a))}var d=void 0!==n.params?n.params:{};P.a.object(d);var h=this.getDependency("$rootScope"),v=this.getDependency("$compile")(u)(h);Object(P.a)(v);for(var f=0,p=Object.entries(d);f<p.length;f++){var g=b()(p[f],2),y=g[0],m=g[1];v.data(y,m)}var _="object"===k()(s)?s.operation:null;if(null==_&&(_="append"),"append"===_)c.append(v);else{if("prepend"!==_)throw"unexpected directive target operation: ".concat(_);c.prepend(v)}return v}},{key:"createDirectiveSpec",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.controller;Object(P.a)(t);var n=t.directiveId;Object(P.a)(n);var r=this,a=x()({controllerAs:"vm",restrict:"E",scope:{},directiveId:n,link:function(e,t,n,i){t.attr("data-angular-directive",!0),r.setScopeInElement(t,e),e.vm.element=t,e.vm.onLink(),e.vm.directiveSpec=a}},e);return a}},{key:"scopeFromElement",value:function(t){return Object(P.a)(t),e(t).data("angular-scope")}},{key:"setScopeInElement",value:function(e,t){Object(P.a)(e,t);var n=this.scopeFromElement(e);Object(P.a)(null==n),e.data("angular-scope",t)}},{key:"tagNameFromDirectiveId",value:function(e){return P.a.string(e),e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}},{key:"tagFromDirectiveId",value:function(e){P.a.string(e);var t=this.tagNameFromDirectiveId(e);return"<".concat(t,"></").concat(t,">")}},{key:"directiveIdFromDirective",value:function(e){Object(P.a)(this.isDirective(e));var t=e();P.a.object(t);var n=t.directiveId;return P.a.string(n),n}},{key:"elementsForDirectiveId",value:function(t){var n=this;P.a.string(t);var r=this.tagNameFromDirectiveId(t),a=e(r),i=[];return a.each(function(t,r){var a=e(r);null!=n.scopeFromElement(a)&&i.push(a)}),i}},{key:"isDirectiveSingleton",value:function(e){Object(P.a)(this.isDirective(e));var t=e();return this.isDirectiveSpecSingleton(t)}},{key:"isDirectiveSpecSingleton",value:function(e){return Object(P.a)(e),!1!==e._singleton}},{key:"directiveSpecForDirective",value:function(e){return e()}},{key:"removeDirectiveElement",value:function(e){this.destroyElementSubtreeDirectives(e);var t=this.scopeFromElement(e);t&&t.$destroy(),e.remove()}},{key:"destroyElementSubtreeDirectives",value:function(t){var n=this;t.find("[data-angular-directive]").each(function(t,r){var a=e(r),i=n.scopeFromElement(a);i&&i.$destroy()})}},{key:"globalModule",get:function(){return P.a.object(V,"tried to fetch global module before creating"),V}}]),t}());window.__AngularWrapper=X}).call(t,n(13))},126:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return B});var r=n(21),a=(n.n(r),n(22)),i=(n.n(a),n(25)),s=(n.n(i),n(11)),o=(n.n(s),n(12)),c=(n.n(o),n(337)),u=(n.n(c),n(8)),l=(n.n(u),n(262)),d=(n.n(l),n(20)),h=(n.n(d),n(18)),v=(n.n(h),n(19)),f=(n.n(v),n(23)),p=n.n(f),g=n(24),y=(n.n(g),n(62)),b=n.n(y),m=n(40),k=n.n(m),_=n(0),x=n.n(_),w=n(1),I=n.n(w),A=n(6),S=n.n(A),E=n(3),C=n.n(E),j=n(34),O=n.n(j),D=n(7),T=n.n(D),M=n(5),F=n.n(M),L=n(339),N=n(2),P=n(336),R=function(t){function n(){var e,t;x()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return t=S()(this,(e=C()(n)).call.apply(e,[this].concat(a))),F()(O()(t),"singleton",!0),F()(O()(t),"DIRECTIONS",Object.freeze({Top:"top",Right:"right",Bottom:"bottom",Left:"left",TopLeft:"top-left",TopRight:"top-right",BottomLeft:"bottom-left",BottomRight:"bottom-right",Center:"center"})),t}return T()(n,t),I()(n,[{key:"setTemporaryCSS",value:function(t,n,r){var a=e(t),i=a.css(n),s="__setTemporaryCSS(".concat(n,")");a.data(s,i),a.css(n,r)}},{key:"rollbackTemporaryCSS",value:function(t,n){var r=e(t),a="__setTemporaryCSS(".concat(n,")"),i=r.data(a);r.css(n,i)}},{key:"isWindowInsideIFrame",value:function(e){N.a.object(e);try{return e.self!==e.top}catch(e){return!0}}},{key:"isPosition",value:function(e){return null!=e&&("object"===k()(e)&&(void 0!==e.top&&void 0!==e.left||(void 0!==e.top&&void 0!==e.right||(void 0!==e.bottom&&void 0!==e.left||void 0!==e.bottom&&void 0!==e.right))))}},{key:"isFrame",value:function(e){return null!=e&&("object"===k()(e)&&(void 0===e.bottom&&(void 0===e.right&&(void 0!==e.top&&(void 0!==e.left&&(void 0!==e.width&&void 0!==e.height))))))}},{key:"frameForElement",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=void 0!==n.coordinates&&n.coordinates,a=e(t);N.a.domElement(a);var i=a.offset(),s=i.top,o=i.left,c=o,u=s,l=void 0!==n.width?n.width:a.outerWidth(),d=void 0!==n.height?n.height:a.outerHeight();return r?{y:u,x:c,width:l,height:d}:{top:s,left:o,width:l,height:d}}},{key:"applyToFrame",value:function(e,t){return Object(N.a)(this.isFrame(e)),b()({},e,t)}},{key:"positionFromFrame",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(N.a)(this.isFrame(e));var n=void 0!==t.containerFrame?t.containerFrame:this.frameForElement("body"),r=void 0!==t.containerAnchor?t.containerAnchor:this.DIRECTIONS.TopLeft;return Object(N.a)(this.isFrame(n)),N.a.inEnum(r,this.DIRECTIONS),r===this.DIRECTIONS.TopLeft?{top:void 0!==e.top?e.top:n.height-e.bottom-e.height,left:void 0!==e.left?e.left:n.width-e.right-e.width}:r===this.DIRECTIONS.TopRight?{top:void 0!==e.top?e.top:n.height-e.bottom-e.height,right:void 0!==e.right?e.right:n.width-e.left-e.width}:r===this.DIRECTIONS.BottomRight?{bottom:void 0!==e.bottom?e.bottom:n.height-e.top-e.height,right:void 0!==e.right?e.right:n.width-e.left-e.width}:r===this.DIRECTIONS.BottomLeft?{bottom:void 0!==e.bottom?e.bottom:n.height-e.top-e.height,left:void 0!==e.left?e.left:n.width-e.right-e.width}:void Object(N.a)(!1,"unexpected container anchor: ".concat(r))}},{key:"frameForPoint",value:function(e,t,n){Object(N.a)(this.isFrame(e)),N.a.inEnum(t,this.DIRECTIONS);var r=e.width,a=e.height;return t===this.DIRECTIONS.Top?{top:n.top,left:n.left-parseInt(r/2),width:r,height:a}:t===this.DIRECTIONS.TopLeft?{top:n.top,left:n.left,width:r,height:a}:t===this.DIRECTIONS.TopRight?{top:n.top,left:n.left-r,width:r,height:a}:t===this.DIRECTIONS.Bottom?{top:n.top-a,left:n.left-parseInt(r/2),width:r,height:a}:t===this.DIRECTIONS.BottomLeft?{top:n.top-a,left:n.left,width:r,height:a}:t===this.DIRECTIONS.BottomRight?{top:n.top-a,left:n.left-r,width:r,height:a}:void Object(N.a)(!1,"unexpected direction: ".concat(direction))}},{key:"positionForPointWithinFrame",value:function(e,t){Object(N.a)(this.isFrame(e)),N.a.inEnum(t,this.DIRECTIONS);var n={top:e.top,left:e.left};return t===this.DIRECTIONS.Top?n.left+=parseInt(e.width/2):t===this.DIRECTIONS.TopRight?n.left+=e.width:t===this.DIRECTIONS.Right?(n.top+=parseInt(e.height/2),n.left+=e.width):t===this.DIRECTIONS.BottomRight?(n.top+=e.height,n.left+=e.width):t===this.DIRECTIONS.Bottom?(n.top+=e.height,n.left+=parseInt(e.width/2)):t===this.DIRECTIONS.BottomLeft?n.top+=e.height:t===this.DIRECTIONS.Left?n.top+=parseInt(e.height/2):t===this.DIRECTIONS.TopLeft||(t===this.DIRECTIONS.Center?(n.top+=parseInt(e.height/2),n.left+=parseInt(e.width/2)):Object(N.a)(!1,"unexpected direction: ".concat(t))),n}},{key:"anchorPositionForElement",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};N.a.domElement(t),N.a.domElement(n);var a=void 0!==r.hints?r.hints:{},i=void 0!==r.anchorPoint?r.anchorPoint:this.DIRECTIONS.BottomLeft,s=void 0!==r.anchoredPoint?r.anchoredPoint:this.DIRECTIONS.BottomLeft,o=void 0!==r.container?r.container:"body",c=void 0!==r.containerAnchor?r.containerAnchor:this.DIRECTIONS.TopLeft,u=this.frameForElement(t),l=this.positionForPointWithinFrame(u,i),d=this.frameForElement(n,{width:a.anchoredWidth});d=this.applyToFrame(d,l),d=this.frameForPoint(d,s,l);var h=e(o),v=this.frameForElement(h);return d=this.positionFrameToFitContainerFrame(d,v),this.positionFromFrame(d,{containerFrame:v,containerAnchor:c})}},{key:"positionFrameToFitContainerFrame",value:function(e,t){Object(N.a)(this.isFrame(e)),Object(N.a)(this.isFrame(t));var n=e.width,r=e.height,a=e.top,i=e.left,s=i+n,o=a+r,c=t.width,u=t.height,l=t.top,d=t.left,h=d+c,v=l+u;return s>h&&(s-=s-h),o>v&&(o-=o-v),(a=o-r)<l&&(a+=l-a),(i=s-n)<d&&(i+=d-i),b()({},e,{top:a,left:i})}},{key:"elementFromPoint",value:function(t,n){N.a.number(t),N.a.number(n);var r=document.elementFromPoint(t,n);return null==r?null:e(r)}},{key:"intersectionForPoint",value:function(t,n,r){var a=this;if(null==t)return[];var i=e(t),s=null;return i.each(function(t,i){if(!1!==a._isPointWithinDOMElement(i,n,r))return s=e(i),!1}),s}},{key:"intersectionsForPoint",value:function(t,n,r){var a=this;if(null==t)return[];var i=e(t),s=[];return i.each(function(t,i){if(!1!==a._isPointWithinDOMElement(i,n,r)){var o=e(i);s.push(o)}}),s}},{key:"isPointWithinElement",value:function(e,t,n){return this.intersectionsForPoint(e,t,n).length>0}},{key:"isPointWithinTopElement",value:function(t,n,r){var a=e(t),i=B.elementFromPoint(n,r);if(null==i)return!1;var s=i.closest(a).length>0,o=i.is(a);return s||o}},{key:"blur",value:function(t){var n=e(t);n.blur(),this.logger.debug("blurred element: ",n)}},{key:"waitVisible",value:function(t){var n,r;return p.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:return n=e(t),Object(N.a)(n.length>0),r=n[0],a.abrupt("return",new Promise(function(e){var t=new L.a(function(n){var a=!0,i=!1,s=void 0;try{for(var o,c=n[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){if(0!==o.value.intersectionRatio)return t.unobserve(r),t.disconnect(),void e()}}catch(e){i=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(i)throw s}}});t.observe(r)}));case 4:case"end":return a.stop()}})}},{key:"_isPointWithinDOMElement",value:function(e,t,n){var r=e.getBoundingClientRect();return t>=r.left&&t<=r.left+r.width&&n>=r.top&&n<=r.top+r.height}},{key:"waitSelectorVisible",value:function(e){var t,n,r,a=this,i=arguments;return p.a.async(function(s){for(;;)switch(s.prev=s.next){case 0:return t=i.length>1&&void 0!==i[1]?i[1]:{},N.a.object(t),n=void 0!==t.timeout?t.timeout:20,N.a.integer(n),r=new Promise(function(r){var i;return p.a.async(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,p.a.awrap(a.waitSelectorAvailable(e,t));case 2:i=s.sent;case 3:if(!a.isSelectorVisible(i)){s.next=7;break}return s.abrupt("return",r(i));case 7:return s.next=9,p.a.awrap(a._delay(n));case 9:s.next=3;break;case 11:case"end":return s.stop()}})}),s.abrupt("return",r);case 6:case"end":return s.stop()}})}},{key:"waitSelectorHidden",value:function(t){var n,r,a=this,i=arguments;return p.a.async(function(s){for(;;)switch(s.prev=s.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:25,N.a.integer(n),r=new Promise(function(r){var i,s;return p.a.async(function(o){for(;;)switch(o.prev=o.next){case 0:if(i=e(t),s=a.isSelectorVisible(i),!!s){o.next=6;break}return o.abrupt("return",r(i));case 6:return o.next=8,p.a.awrap(a._delay(n));case 8:o.next=0;break;case 10:case"end":return o.stop()}})}),s.abrupt("return",r);case 4:case"end":return s.stop()}})}},{key:"waitSelectorAvailable",value:function(t){var n,r,a=this,i=arguments;return p.a.async(function(s){for(;;)switch(s.prev=s.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},N.a.object(n),r=new Promise(function(r){var i,s,o,c,u,l,d,h;return p.a.async(function(v){for(;;)switch(v.prev=v.next){case 0:if(i=null,!(s=n.shadowRootSelector)){v.next=11;break}return delete(o=b()({},n)).shadowRootSelector,v.next=7,p.a.awrap(a.waitSelectorAvailable(s,o));case 7:c=v.sent,u=c[0],l=u.shadowRoot,i=e(l);case 11:d=void 0!==n.timeout?n.timeout:20,N.a.integer(d);case 13:if(!((h=i?e(t,i):e(t)).length>0)){v.next=17;break}return v.abrupt("return",r(h));case 17:return v.next=19,p.a.awrap(a._delay(d));case 19:v.next=13;break;case 21:case"end":return v.stop()}})}),s.abrupt("return",r);case 4:case"end":return s.stop()}})}},{key:"waitIframeLoaded",value:function(e){var t,n,r,a,i,s,o=this,c=arguments;return p.a.async(function(u){for(;;)switch(u.prev=u.next){case 0:return t=c.length>1&&void 0!==c[1]?c[1]:{},n=void 0!==t.loadedChecker?t.loadedChecker:null,r=void 0!==t.retries?t.retries:0,a=void 0!==t.retryUrl?t.retryUrl:null,i=void 0!==t.waitSelectorMode?t.waitSelectorMode:"visible",s=new Promise(function(s,c){var u,l;return p.a.async(function(d){for(;;)switch(d.prev=d.next){case 0:if(u=null,"visible"!==i){d.next=8;break}return d.next=4,p.a.awrap(o.waitSelectorVisible(e,t));case 4:u=d.sent,N.a.object(u),d.next=16;break;case 8:if("available"!==i){d.next=15;break}return d.next=11,p.a.awrap(o.waitSelectorAvailable(e,t));case 11:u=d.sent,N.a.object(u),d.next=16;break;case 15:Object(N.a)(!1,"unexpected wait selector mode: ".concat(i));case 16:if(!!(!n||!n(u))){d.next=19;break}return d.abrupt("return",s(u));case 19:l=u[0],Object(N.a)(l),u.load(function(){try{if(n)if(!1===n(u))throw new Error("failed to load, loaded checker failed");s(u)}catch(e){a&&r>0?(r-=1,o.logger.warn("iframe failed to load, retrying '".concat(a,"', ").concat(r," left")),u.attr("src",a)):(o.logger.error("iframe failed to load"),c(e))}});case 22:case"end":return d.stop()}})}),u.abrupt("return",s);case 7:case"end":return u.stop()}})}},{key:"isSelectorVisible",value:function(t){var n=e(t);return 0!==n.length&&!1!==n.is(":visible")}},{key:"getSelectedNodes",value:function(){for(var t=document.getSelection().getRangeAt(0),n=document.createNodeIterator(t.commonAncestorContainer,NodeFilter.SHOW_ALL,{acceptNode:function(e){return NodeFilter.FILTER_ACCEPT}}),r=[];n.nextNode();)if(0!==r.length||n.referenceNode===t.startContainer){var a=n.referenceNode,i=e(a);if(r.push(i),a===t.endContainer)break}return r}},{key:"_delay",value:function(){var e,t=arguments;return p.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return e=t.length>0&&void 0!==t[0]?t[0]:25,n.abrupt("return",new Promise(function(t){return setTimeout(t,e)}));case 2:case"end":return n.stop()}})}},{key:"logger",get:function(){return P.a.scope=this,P.a}}]),n}(n(230).a);F()(R,"CLASS",function(){return"DOMUtilsClass"});var B=new R}).call(t,n(13))},128:function(e,t,n){"use strict";n.d(t,"a",function(){return N});var r=n(21),a=(n.n(r),n(22)),i=(n.n(a),n(25)),s=(n.n(i),n(11)),o=(n.n(s),n(26)),c=(n.n(o),n(12)),u=(n.n(c),n(60)),l=(n.n(u),n(8)),d=(n.n(l),n(20)),h=(n.n(d),n(30)),v=(n.n(h),n(18)),f=(n.n(v),n(19)),p=(n.n(f),n(23)),g=n.n(p),y=n(24),b=(n.n(y),n(0)),m=n.n(b),k=n(1),_=n.n(k),x=n(6),w=n.n(x),I=n(3),A=n.n(I),S=n(7),E=n.n(S),C=n(5),j=n.n(C),O=n(2),D=n(45),T=!1,M={},F={},L=function(e){function t(){return m()(this,t),w()(this,A()(t).apply(this,arguments))}return E()(t,e),_()(t,[{key:"performTask",value:function(e,t){var n,r;return g.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:return n=F[e],r=n||t(),Object(O.a)(r),F[e]=r,a.prev=4,a.next=7,g.a.awrap(r);case 7:return a.abrupt("return",a.sent);case 8:return a.prev=8,delete F[e],a.finish(8);case 11:case"end":return a.stop()}},null,null,[[4,,8,11]])}},{key:"loadChunk",value:function(e){var t,n,r,a=arguments;return g.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:return t=a.length>1&&void 0!==a[1]?a[1]:{},n=this._get(t,"chunkId","".concat(this._classSequentialUUID())),3,1e3,i.next=6,g.a.awrap(this.retry(e,{promiseId:n,retries:3,retryDelay:1e3}));case 6:return r=i.sent,i.abrupt("return",r);case 8:case"end":return i.stop()}},null,this)}},{key:"retry",value:function(e){var t,n,r,a,i,s,o,c,u,l,d,h,v,f,p,y,b=arguments;return g.a.async(function(m){for(;;)switch(m.prev=m.next){case 0:t=b.length>1&&void 0!==b[1]?b[1]:{},n=this._get(t,"retries",2),O.a.integer(n),r=this._get(t,"retryDelay",1e3),O.a.integer(r),a=this._get(t,"maxRetryDelay",3e3),O.a.integer(a),i=this._get(t,"promiseId","promise"),O.a.string(i),s=this._get(t,"shouldRetryCallback"),c=o=n+1,Object(O.a)(o>=1,"unexpected total tries: ".concat(o)),u=null;case 14:if(!(c>0)){m.next=61;break}return(l=(o-c+1)*r)>a&&(l=a),m.prev=18,m.next=21,g.a.awrap(e());case 21:if(d=m.sent,!(--c>0&&s&&s(d))){m.next=29;break}return this.logger.warn("should retry callback rejected promise '".concat(i,"', retrying in ").concat(l,"ms, ").concat(c," retries left")),m.next=27,g.a.awrap(this.wait(l));case 27:return this.logger.warn("retrying '".concat(i,"' after ").concat(l,"ms delay, ").concat(c," retries left")),m.abrupt("continue",14);case 29:return(h=o-c)>1&&this.logger.warn("resolved promise '".concat(i,"' after trying ").concat(h," times")),m.abrupt("return",d);case 34:if(m.prev=34,m.t0=m.catch(18),u=m.t0,v="string"==typeof m.t0?m.t0:m.t0.message.toLowerCase(),f=v.includes("failed to load image"),p=v.includes("loading chunk")&&v.includes("failed"),y=v.includes("failed to fetch"),!1!==p||!1!==y||!1!==f){m.next=43;break}return m.abrupt("break",61);case 43:return m.next=45,g.a.awrap(this._isInternetOnline());case 45:if(m.t1=m.sent,!1!==m.t1){m.next=54;break}return this.logger.warn("failed to resolve promise '".concat(i,"', internet is down"),m.t0),m.next=50,g.a.awrap(this.restoreInternetFlow());case 50:this.logger.warn("internet is back, retrying promise ".concat(i,", ").concat(c," retries left")),c--,m.next=59;break;case 54:return this.logger.warn("failed to resolve promise '".concat(i,"', retrying in ").concat(l,"ms, ").concat(c," retries left"),m.t0),m.next=57,g.a.awrap(this.wait(l));case 57:this.logger.warn("retrying '".concat(i,"' after ").concat(l,"ms delay, ").concat(c," retries left")),c--;case 59:m.next=14;break;case 61:throw this.logger.error("failed to resolve promise '".concat(i,"' after ").concat(n," retries")),Object(O.a)(u,"last exception not found"),u;case 64:case"end":return m.stop()}},null,this,[[18,34]])}},{key:"debounceAcumulateArray",value:function(e,t,n){var r,a,i,s,o,c,u,l;return g.a.async(function(d){for(;;)switch(d.prev=d.next){case 0:for(O.a.string(e),O.a.array(t),O.a.integer(n),r=void 0!==M[e]?M[e]:[],a=!0,i=!1,s=void 0,d.prev=7,o=t[Symbol.iterator]();!(a=(c=o.next()).done);a=!0)u=c.value,r.push(u);d.next=15;break;case 11:d.prev=11,d.t0=d.catch(7),i=!0,s=d.t0;case 15:d.prev=15,d.prev=16,a||null==o.return||o.return();case 18:if(d.prev=18,!i){d.next=21;break}throw s;case 21:return d.finish(18);case 22:return d.finish(15);case 23:M[e]=r,l=r;case 25:return l=M[e],d.next=28,g.a.awrap(this.wait(n));case 28:if(M[e]===r&&r.length>l.length){d.next=25;break}case 29:return delete M[e],d.abrupt("return",l);case 31:case"end":return d.stop()}},null,this,[[7,11,15,23],[16,,18,22]])}},{key:"restoreInternetFlow",value:function(){return g.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.logger.log("internet is down, asking user to reconnect"),!0===T){e.next=15;break}T=!0;case 3:return e.next=5,g.a.awrap(this._isInternetOnline());case 5:if(e.t0=e.sent,!1!==e.t0){e.next=12;break}return alert("Your Internet connection seems to be down. Please confirm you have Internet connectivity and then click OK to continue."),e.next=10,g.a.awrap(this.wait(150));case 10:e.next=3;break;case 12:T=!1,e.next=20;break;case 15:if(!T){e.next=20;break}return e.next=18,g.a.awrap(this.wait(1e3));case 18:e.next=15;break;case 20:this.logger.log("internet is restored");case 21:case"end":return e.stop()}},null,this)}},{key:"_isInternetOnline",value:function(){var e=this;return g.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.navigator||!1!==window.navigator.onLine){t.next=5;break}return this.logger.debug("isInternetOnline: window.navigator.onLine reported false"),t.abrupt("return",!1);case 5:return t.abrupt("return",this.performTask("AsyncUtils._isInternetOnline",function(){return g.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.awrap(fetch("/api/v2/ping"));case 3:return e.logger.debug("isInternetOnline: /ping reachable"),t.abrupt("return",!0);case 7:return t.prev=7,t.t0=t.catch(0),e.logger.debug("isInternetOnline: /ping not reacheable",t.t0),t.abrupt("return",!1);case 11:case"end":return t.stop()}},null,null,[[0,7]])}));case 6:case"end":return t.stop()}},null,this)}},{key:"_logActiveTaskIds",value:function(){var e=Object.keys(F);this.logger.info("Active Task IDS: ".concat(JSON.stringify(e,null,4)))}},{key:"wait",value:function(e){return g.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return O.a.integer(e),t.next=3,g.a.awrap(new Promise(function(t){return setTimeout(t,e)}));case 3:case"end":return t.stop()}})}},{key:"waitCondition",value:function(e){var t,n,r=arguments;return g.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:t=r.length>1&&void 0!==r[1]?r[1]:{},O.a.function(e),n=this._get(t,"delay",50),O.a.integer(n);case 4:if(!0!==e()){a.next=8;break}return a.abrupt("return");case 8:return a.next=10,g.a.awrap(this.wait(n));case 10:a.next=4;break;case 12:case"end":return a.stop()}},null,this)}}]),t}(D.a);j()(L,"CLASS",function(){return"AsyncUtilsClass"});var N=new L;window.__AsyncUtils=N},144:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(262),a=(n.n(r),n(17)),i=(n.n(a),n(77)),s=(n.n(i),n(39)),o=(n.n(s),n(78)),c=(n.n(o),n(40)),u=n.n(c),l=n(0),d=n.n(l),h=n(1),v=n.n(h),f=new(function(){function e(){d()(this,e)}return v()(e,[{key:"isObject",value:function(e){return void 0!==e&&(null!==e&&"object"===u()(e))}},{key:"isFunction",value:function(e){return void 0!==e&&(null!==e&&"function"==typeof e)}},{key:"isString",value:function(e){return void 0!==e&&"string"==typeof e}},{key:"isInteger",value:function(e){return!1!==this.isNumber(e)&&parseInt(e)===e}},{key:"isPositiveInteger",value:function(e){return!1!==this.isInteger(e)&&!(e<0)}},{key:"isDictionary",value:function(e){return"object"===u()(e)}},{key:"isNumber",value:function(e){return!isNaN(e)&&"number"==typeof e}},{key:"isNumberPositive",value:function(e){return!1!==this.isNumber(e)&&e>=0}},{key:"isDataUrl",value:function(e){if(!1===this.isString(e))return!1;var t=e.split(",");if(2!==t.length)return!1;var n=t[0];return!1!==n.startsWith("data:")&&!1!==n.endsWith("base64")}},{key:"isPromise",value:function(e){return!1!==this.isObject(e)&&!1!==this.isFunction(e.then)}}]),e}())},158:function(e,t,n){"use strict";n.d(t,"a",function(){return Y});var r=n(21),a=(n.n(r),n(22)),i=(n.n(a),n(25)),s=(n.n(i),n(11)),o=(n.n(s),n(12)),c=(n.n(o),n(54)),u=(n.n(c),n(584)),l=(n.n(u),n(60)),d=(n.n(l),n(8)),h=(n.n(d),n(20)),v=(n.n(h),n(18)),f=(n.n(v),n(19)),p=(n.n(f),n(23)),g=n.n(p),y=n(24),b=(n.n(y),n(6)),m=n.n(b),k=n(3),_=n.n(k),x=n(34),w=n.n(x),I=n(7),A=n.n(I),S=n(5),E=n.n(S),C=n(0),j=n.n(C),O=n(1),D=n.n(O),T=n(2),M=n(195),F=n(585),L=n(588),N=n(61),P=n(45),R=n(694),B=n(695),U=n(697),W=n(705),H=n(104),G=n(711),V="global",$={},z={},q=function(){function e(t,n,r){j()(this,e),T.a.string(t),T.a.object(n),T.a.function(r),Object(T.a)(t===V),this.storeId=t,this.store=n,this.sagaMiddleware=r}return D()(e,[{key:"getStore",value:function(){return this.store}},{key:"getSagaMiddleware",value:function(){return this.sagaMiddleware}}]),e}(),J=function(e){function t(){var e,n;j()(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=m()(this,(e=_()(t)).call.apply(e,[this].concat(a))),E()(w()(n),"bootstrapped",!1),n}return A()(t,e),D()(t,[{key:"isBootstrapped",value:function(){return!0===this.bootstrapped}},{key:"bootstrap",value:function(){return g.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.bootstrapped){e.next=2;break}return e.abrupt("return");case 2:this.registerActions(U.a),this.registerReducers(W.a),this.bootstrapped=!0;case 5:case"end":return e.stop()}},null,this)}},{key:"storeById",value:function(e){return Object(T.a)(e===V),$[e]}},{key:"createStore",value:function(e,t){T.a.string(e),T.a.object(t),Object(T.a)(void 0===$[e]);var n=Object(F.a)({onError:function(e,t){t.sagaStack;e instanceof G.a&&(e=e.getCoreException()),console.error(e),window.__Sentry&&window.__Sentry.captureException(e)}}),r=N.a.isDevelopment()&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:M.d,a=[];a.push(Object(M.a)(L.a)),a.push(Object(M.a)(n));var i=Object(M.e)(function(e,t){return B.a.reduce(e,t)},t,r.apply(void 0,a)),s=new q(e,i,n);return $[e]=s,s}},{key:"ensureStore",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};T.a.object(e);var t=V;T.a.string(t);var n=this.storeById(t);return n?Object.keys(e).length>0&&this.put(U.a.set("",e)):(n=this.createStore(t,e),this.subscribe(function(e){z[t]=e})),n}},{key:"registerActions",value:function(e){e=Array.isArray(e)?e:[e],!1===R.a.isInitialized()&&R.a.init();var t=!0,n=!1,r=void 0;try{for(var a,i=e[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var s=a.value;R.a.register(s.id(),s)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}},{key:"registerReducers",value:function(e){e=Array.isArray(e)?e:[e],!1===B.a.isInitialized()&&B.a.init();var t=!0,n=!1,r=void 0;try{for(var a,i=e[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var s=a.value;B.a.register(s.id(),s)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}},{key:"subscribe",value:function(e){var t=this;return this.store.subscribe(function(){var n=t.store.getState();T.a.object(n),e(n)})}},{key:"state",value:function(){return this.select()}},{key:"select",value:function(){var e=z[V];return T.a.object(e),e}},{key:"get",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=this.state();return this._get(t,e)}},{key:"put",value:function(e){this.logger.log("dispatching ".concat(e.type),e.payload),this.store.dispatch(e)}},{key:"take",value:function(e){var t,n,r,a,i=this,s=arguments;return g.a.async(function(o){for(;;)switch(o.prev=o.next){case 0:return t=s.length>1&&void 0!==s[1]?s[1]:{},n=this._get(t,"scope"),e=Array.isArray(e)?e:[e],r=[],a=function(){return r.map(function(e){return e()})},n&&n.addUnsubscriber(a),o.abrupt("return",new Promise(function(t){var n=function(e){a(),t(e)},s=!0,o=!1,c=void 0;try{for(var u,l=e[Symbol.iterator]();!(s=(u=l.next()).done);s=!0){var d=u.value,h=i.bind(d,n);r.push(h)}}catch(e){o=!0,c=e}finally{try{s||null==l.return||l.return()}finally{if(o)throw c}}}).catch(function(){return a()}));case 7:case"end":return o.stop()}},null,this)}},{key:"takeSucceeded",value:function(e){var t,n,r,a,i=arguments;return g.a.async(function(s){for(;;)switch(s.prev=s.next){case 0:return t=i.length>1&&void 0!==i[1]?i[1]:{},n=Array.isArray(e)?e:[e],T.a.object(t),r=n.map(function(e){return H.a.succeededActionTypeForActionType(e)}),s.next=6,g.a.awrap(this.take(r,t));case 6:return a=s.sent,s.abrupt("return",a);case 8:case"end":return s.stop()}},null,this)}},{key:"putAndWait",value:function(e){var t,n,r,a,i=this,s=arguments;return g.a.async(function(o){for(;;)switch(o.prev=o.next){case 0:return t=s.length>1&&void 0!==s[1]?s[1]:{},n=H.a.actionTypeForAction(e),T.a.string(n),r=H.a.succeededActionTypeForActionType(n),T.a.string(r),a=this._get(t,"resultActionType",r),T.a.string(a),o.abrupt("return",new Promise(function(n){i.take(a,t).then(function(e){return n(e)}),i.put(e)}));case 8:case"end":return o.stop()}},null,this)}},{key:"store",get:function(){var e=$[V];T.a.object(e);var t=e.getStore();return T.a.object(t),t}}]),t}(P.a);E()(J,"CLASS",function(){return"ReduxWrapperClass"});var Y=new J;window.__ReduxWrapper=Y},169:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"c",function(){return s}),n.d(t,"b",function(){return c});var r=n(57),a=(n.n(r),n(17)),i=(n.n(a),n(754));n.n(i);function s(){return-1!==(IDE.getProjectTags()||[]).indexOf("micropython")||-1!==window.location.search.indexOf("mode=microbit")}function o(){var e=IDE.getProjectTags()||[];return!s()&&(-1!==e.indexOf("hifive")||-1!==window.location.search.indexOf("mode=hifive"))}function c(){return s()||o()}},170:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n(0),a=n.n(r),i=n(1),s=n.n(i),o=n(6),c=n.n(o),u=n(3),l=n.n(u),d=n(7),h=n.n(d),v=n(5),f=n.n(v),p=n(386),g=n(820),y=n(822),b=n(240),m=function(e){function t(){return a()(this,t),c()(this,l()(t).apply(this,arguments))}return h()(t,e),s()(t,[{key:"redux",get:function(){return p.a.scope=this,p.a}},{key:"extensionActions",get:function(){return this._extension.extensionActions}},{key:"extensionState",get:function(){return this._extension.extensionState}}]),t}(Object(y.a)(Object(g.a)(b.a)));f()(m,"CLASS",function(){return"IDEExtensionPayloadClass"})},187:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return p});var r=n(62),a=n.n(r),i=n(40),s=n.n(i),o=n(0),c=n.n(o),u=n(1),l=n.n(u),d=n(5),h=n.n(d),v=n(2),f=function(){function t(){c()(this,t),h()(this,"SELECTOR","#init-data"),h()(this,"initData",{}),h()(this,"_initData",null);var n=e(this.SELECTOR);if(n&&n.length>0){var r=n.html(),i=JSON.parse(r);i&&"object"===s()(i)&&(this.initData=i),this._initData=a()({},this.initData)}n.remove()}return l()(t,[{key:"reset",value:function(){this.initData={}}},{key:"has",value:function(e){return v.a.string(e),void 0!==this.initData[e]}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;v.a.string(e);var n=void 0!==this.initData[e]?this.initData[e]:t;return""===n?null:"true"===n||"false"!==n&&n}},{key:"set",value:function(e,t){v.a.string(e),Object(v.a)(void 0!==t),this.initData[e]=t}},{key:"pop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;v.a.string(e);var n=this.get(e,t);return delete this.initData[e],n}}]),t}();h()(f,"CLASS",function(){return"InitDataClass"});var p=new f}).call(t,n(13))},2:function(e,t,n){"use strict";t.a=I;var r=n(21),a=(n.n(r),n(22)),i=(n.n(a),n(25)),s=(n.n(i),n(11)),o=(n.n(s),n(26)),c=(n.n(o),n(12)),u=(n.n(c),n(8)),l=(n.n(u),n(91)),d=(n.n(l),n(17)),h=(n.n(d),n(30)),v=(n.n(h),n(18)),f=(n.n(v),n(184)),p=(n.n(f),n(19)),g=(n.n(p),n(40)),y=n.n(g),b=n(261),m=n.n(b),k=n(144),_=n(61),x=n(92);function w(e){try{return JSON.stringify(e)}catch(e){return"$$unserializable"}}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)throw console.trace(t),"function"==typeof(t=t||function(){return"assertion failed: ".concat(w(e))})&&(t=t()),_.a.isDevelopment(),new Error(t)}I.string=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=void 0!==n.blank&&n.blank;I("string"==typeof e,t=t||function(){return"assertion failed: expected string but found: ".concat(w(e))}),I(k.a.isString(e),t),I(!1===r||e,t)},I.boolean=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;t=t||function(){return"assertion failed: expected boolean but found: ".concat(w(e))},I([!0,!1].includes(e),t)},I.integer=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;I("number"==typeof e,t=t||function(){return"assertion failed: expected integer but found: ".concat(w(e))}),I(k.a.isInteger(e),t)},I.integerPositive=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;t=t||function(){return"assertion failed: expected positive integer but found: ".concat(w(e))},I(k.a.isPositiveInteger(e),t)},I.number=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;t=t||function(){return"assertion failed: expected number but found: ".concat(w(e))},I(k.a.isNumber(e),t)},I.numberPositive=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;t=t||function(){return"assertion failed: expected positive number but found: ".concat(w(e))},I(k.a.isNumberPositive(e),t)},I.function=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;I("function"==typeof e,t=t||function(){return"assertion failed: expected function but found: ".concat(w(e))})},I.object=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;t=t||function(){return"assertion failed: expected object but found: ".concat(w(e))},I(!1===[null,void 0].includes(e),t),I("object"===y()(e),t),I(!1===Array.isArray(e),t)},I.domElement=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;t=t||function(){return"assertion failed: expected dom element but found: ".concat(w(e))},I.object(e,t),I(1===e.length,t)},I.domElements=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;t=t||function(){return"assertion failed: expected dom elements but found: ".concat(w(e))},I.object(e,t),I(e.length>=1,t)},I.inEnum=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;n=n||function(){return"assertion failed: expected enumeration but found: ".concat(w(e))},I.object(t),I(Object.values(t).includes(e),n)},I.array=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;n=n||function(){return"assertion failed: expected array but found: ".concat(w(e))},I(Array.isArray(e),n),void 0!==t&&I(e.length===t,n)},I.dictionary=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;t=t||function(){return"assertion failed: expected dictionary but found: ".concat(w(e))},I(k.a.isDictionary(e),t)},I.dataUrl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;arguments.length>2&&void 0!==arguments[2]&&arguments[2];t=t||function(){return"assertion failed: expected data url but found: ".concat(w(e))},I(k.a.isDataUrl(e),t)},I.enum=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;n=n||function(){return"assertion failed: expected enum but found: ".concat(w(e))},I(t instanceof x.a),I(t.in(e),n)},I.equals=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;I(e===t,n=n||function(){return"assertion failed: values are not equal: value1 = ".concat(w(e),"; value2 = ").concat(w(t))})},I.sameContent=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;n=n||function(){return"assertion failed: values are not equal: value1 = ".concat(w(e),"; value2 = ").concat(w(t))},I(m()(e,t),n)},I.uniqueAttribute=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;n=n||function(){return"assertion failed: duplicate attribute found: attribute = ".concat(w(t),"; values = ").concat(w(e))},I.array(e),I("string"==typeof t||"function"==typeof t);var r={},a=!0,i=!1,s=void 0;try{for(var o,c=e[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var u=o.value,l="function"==typeof t?t(u):u[t];I(void 0===r[l],n),r[l]=!0}}catch(e){i=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(i)throw s}}},I.mongoObjectIdString=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;I.string(e,t),I(e.match(/^[0-9a-fA-F]{24}$/),t)},I.notEmpty=function(e){I([null,void 0,""],arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)}},230:function(e,t,n){"use strict";n.d(t,"a",function(){return A});var r=n(84),a=(n.n(r),n(38)),i=(n.n(a),n(8)),s=(n.n(i),n(20)),o=(n.n(s),n(17)),c=(n.n(o),n(77)),u=(n.n(c),n(43)),l=(n.n(u),n(23)),d=n.n(l),h=n(24),v=(n.n(h),n(0)),f=n.n(v),p=n(1),g=n.n(p),y=n(5),b=n.n(y),m=n(670),k=n(55),_=n(2),x=n(61),w={},I=0,A=function(){function e(){if(f()(this,e),b()(this,"__instanceId",I++),b()(this,"__initializing",!1),b()(this,"__initialized",!1),b()(this,"__destroying",!1),b()(this,"__destroyed",!1),this.constructor.singleton){var t=this.className;_.a.string(t),Object(_.a)(void 0===w[t]),w[t]=!0}if(Object(_.a)(this.constructor.CLASS),x.a.isDevelopment()){var n=this.constructor.name;n!==this.className&&console.error("invalid string class name found for class: ".concat(n))}k.a.add("objects:constructed",1)}return g()(e,[{key:"id",value:function(){return this.classSlug}},{key:"init",value:function(){var e=this;Object(_.a)(!1===this.__destroying,function(){return"init called on class during its destruction: ".concat(e.className)}),Object(_.a)(!1===this.__initializing),Object(_.a)(!1===this.__initialized),this.__initializing=!0,this.onInit.apply(this,arguments),this.__initialized=!0,this.__initializing=!1,this.__destroyed=!1,this.onInitialized()}},{key:"ensureInit",value:function(){var e=this;return d.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){if(e.isInitialized())t();else if(e.isInitializing())var n=e.bind("initialized",function(){n(),t()});else e.init(),t()}));case 1:case"end":return t.stop()}})}},{key:"onInit",value:function(){}},{key:"onInitialized",value:function(){k.a.add("objects:initialized",1),k.a.add("objects:active",1)}},{key:"destroy",value:function(){this.__destroyed||(Object(_.a)(!1===this.__destroying),this.__destroying=!0,this.onDestroy(),this.__initialized=!1,this.__destroying=!1,this.__destroyed=!0)}},{key:"onDestroy",value:function(){k.a.add("objects:active",-1),k.a.add("objects:destroyed",1)}},{key:"ensureDestroy",value:function(){this.isDestroyed()||this.isDestroying()||this.destroy()}},{key:"isInitialized",value:function(){return!0===this.__initialized}},{key:"isInitializing",value:function(){return!0===this.__initializing}},{key:"isDestroyed",value:function(){return!0===this.__destroyed}},{key:"isDestroying",value:function(){return!0===this.__destroying}},{key:"classSlug",get:function(){var e=this.constructor;if(e.__classSlug)return e.__classSlug;var t=this.className;return t.endsWith("Class")&&(t=t.slice(0,t.length-5)),t=(t=t.replace(/\W+/g,"-").replace(/([a-z\d])([A-Z])/g,"$1-$2")).toLowerCase(),e.__classSlug=t,t}},{key:"instanceId",get:function(){return this.__instanceId}},{key:"className",get:function(){return this.constructor.className}},{key:"classNameCamelCase",get:function(){return this.constructor.classNameCamelCase}}],[{key:"singleton",get:function(){return this.__singleton},set:function(e){Object(_.a)(void 0===this.__singleton),_.a.boolean(e),this.__singleton=e}},{key:"className",get:function(){return this.CLASS()}},{key:"classNameCamelCase",get:function(){if(this.__classNameCamelCase)return this.__classNameCamelCase;var e=this.className,t=Object(m.a)(e);return this.__classNameCamelCase=t,t}}]),e}();b()(A,"CLASS",function(){return"BaseClass"})},231:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(41),a=(n.n(r),n(40)),i=n.n(a),s=n(0),o=n.n(s),c=n(1),u=n.n(c),l=n(2),d=new(function(){function e(){o()(this,e)}return u()(e,[{key:"listFromMap",value:function(e,t){return Object(l.a)(e&&"object"===i()(e)),Object(l.a)(t&&"string"==typeof t),void 0!==e[t]?e[t]:[]}},{key:"addToMapList",value:function(e,t,n){Object(l.a)(e&&"object"===i()(e)),Object(l.a)(t&&"string"==typeof t);var r=void 0!==e[t]?e[t]:[];r.push(n),e[t]=r}},{key:"removeFromMapList",value:function(e,t,n){Object(l.a)(e&&"object"===i()(e)),Object(l.a)(t&&"string"==typeof t);var r=void 0!==e[t]?e[t]:[];r=r.filter(function(e){return e!==n}),e[t]=r,0===r.length&&delete e[t]}}]),e}())},232:function(e,t,n){"use strict";n.d(t,"a",function(){return P});var r=n(21),a=(n.n(r),n(22)),i=(n.n(a),n(25)),s=(n.n(i),n(11)),o=(n.n(s),n(12)),c=(n.n(o),n(48)),u=(n.n(c),n(8)),l=(n.n(u),n(20)),d=(n.n(l),n(18)),h=(n.n(d),n(19)),v=(n.n(h),n(23)),f=n.n(v),p=n(24),g=(n.n(p),n(49)),y=n.n(g),b=n(40),m=n.n(b),k=n(0),_=n.n(k),x=n(1),w=n.n(x),I=n(6),A=n.n(I),S=n(3),E=n.n(S),C=n(34),j=n.n(C),O=n(7),D=n.n(O),T=n(5),M=n.n(T),F=n(2),L=n(45),N=n(231),P=function(e){function t(){var e,n;_()(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=A()(this,(e=E()(t)).call.apply(e,[this].concat(a))),M()(j()(n),"idAssetMap",{}),M()(j()(n),"ownerIdSymbolIdsMap",{}),M()(j()(n),"symbolIdOwnerIdMap",{}),n}return D()(t,e),w()(t,[{key:"isRegistered",value:function(e){return F.a.string(e),void 0!==this.idAssetMap[e]}},{key:"register",value:function(e,t,n){if("object"===m()(e)){var r=e,a=t||{};F.a.object(a);for(var i=0,s=Object.entries(r);i<s.length;i++){var o=y()(s[i],2),c=o[0],u=o[1];this._register(c,u,a)}}else{var l=e;F.a.string(l);var d=t;Object(F.a)(d);var h=n||{};F.a.object(h),this._register(l,d,h)}}},{key:"_register",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};F.a.string(e),Object(F.a)(t);var r=this._get(n,"ownerId");Object(F.a)(void 0===this.idAssetMap[e],"asset already registered: ".concat(e)),this.idAssetMap[e]=t,r&&(N.a.addToMapList(this.ownerIdSymbolIdsMap,r,e),this.symbolIdOwnerIdMap[e]=r),this.trigger("registered",e)}},{key:"unregister",value:function(e){F.a.string(e),Object(F.a)(void 0!==this.idAssetMap[e],"asset not registered: ".concat(e));var t=this.idAssetMap[e];delete this.idAssetMap[e];var n=this.symbolIdOwnerIdMap[e];return n&&(N.a.removeFromMapList(this.ownerIdSymbolIdsMap,n,e),delete this.symbolIdOwnerIdMap[e]),this.trigger("unregistered",e),t}},{key:"unregisterAllOwnedById",value:function(e){F.a.string(e);var t=N.a.listFromMap(this.ownerIdSymbolIdsMap,e),n=!0,r=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var o=i.value;this.unregister(o)}}catch(e){r=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}delete this.ownerIdSymbolIdsMap[e]}},{key:"getById",value:function(e){return F.a.string(e),this.idAssetMap[e]}},{key:"waitRegistered",value:function(e){var t,n=this;return f.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(t=this.getById(e))){r.next=3;break}return r.abrupt("return",t);case 3:return r.abrupt("return",new Promise(function(t){var r=n.bind("registered",function(a){if(a===e){r();var i=n.getById(e);Object(F.a)(i),t(i)}})}));case 4:case"end":return r.stop()}},null,this)}}]),t}(L.a);M()(P,"CLASS",function(){return"RegistryClass"})},235:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n(0),a=n.n(r),i=n(6),s=n.n(i),o=n(3),c=n.n(o),u=n(7),l=n.n(u),d=n(712),h=function(e){function t(e){var n;return a()(this,t),(n=s()(this,c()(t).call(this,e))).message=e,n}return l()(t,e),t}(n.n(d)()(Error))},237:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(11),a=(n.n(r),n(91)),i=(n.n(a),n(0)),s=n.n(i),o=n(1),c=n.n(o),u=n(5),l=n.n(u),d=n(2),h=n(731),v=function(){function e(){s()(this,e),l()(this,"cacheIdCacheMap",{})}return c()(e,[{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d.a.string(e),d.a.object(t);var n=this.get(e);if(n)return n;var r=new(void 0!==t.cacheClass?t.cacheClass:h.a)(e,t);return this.cacheIdCacheMap[e]=r,r}},{key:"get",value:function(e){return d.a.string(e),this.cacheIdCacheMap[e]}},{key:"destroy",value:function(e){d.a.string(e);var t=this.cacheIdCacheMap[e];d.a.object(t),t.clear(),delete this.cacheIdCacheMap[e]}},{key:"stats",value:function(){console.info("###### CACHE STATS #######");for(var e=0,t=Object.values(this.cacheIdCacheMap);e<t.length;e++){var n=t[e];if(0!==n.size){var r=n.stats();console.info("CACHE ".concat(r.id,", size = ").concat(r.size,", hits = ").concat(r.hits,", misses = ").concat(r.misses,", hitRate = ").concat(r.hitRate))}}}}]),e}();l()(v,"CLASS",function(){return"CacheFactoryClass"});var f=new v;window.__CacheFactory=f},240:function(e,t,n){"use strict";n.d(t,"a",function(){return y});var r=n(0),a=n.n(r),i=n(1),s=n.n(i),o=n(6),c=n.n(o),u=n(3),l=n.n(u),d=n(7),h=n.n(d),v=n(5),f=n.n(v),p=n(126),g=n(386),y=function(e){function t(){return a()(this,t),c()(this,l()(t).apply(this,arguments))}return h()(t,e),s()(t,[{key:"sendWindowMessage",value:function(e){if(!1!==p.a.isWindowInsideIFrame(window)){var t=this.className,n=JSON.stringify({owner:t,message:e});window.parent.postMessage(n,"*")}}},{key:"redux",get:function(){return g.a.scope=this,g.a}}]),t}(n(45).a);f()(y,"CLASS",function(){return"IDEClass"})},336:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return x});var r=n(11),a=(n.n(r),n(101)),i=(n.n(a),n(5)),s=n.n(i),o=n(0),c=n.n(o),u=n(1),l=n.n(u),d=n(6),h=n.n(d),v=n(3),f=n.n(v),p=n(7),g=n.n(p),y=n(2),b=n(126),m=n(92),k=n(61),_=new(function(e){function t(){return c()(this,t),h()(this,f()(t).apply(this,arguments))}return g()(t,e),l()(t,[{key:"ENUM",get:function(){return{ERROR:1,WARN:2,INFO:3,LOG:4,DEBUG:5}}}]),t}(m.a)),x=new(function(){function t(){c()(this,t),s()(this,"__scope",null),s()(this,"groupId",0),s()(this,"groupIdMap",{}),s()(this,"LogLevels",_)}return l()(t,[{key:"bind",value:function(e,t){var n=this,r=this._namespacedEventName(e);return this.observer.bind(r,t),function(){n.unbind(e,t)}}},{key:"trigger",value:function(e,t){var n=this._namespacedEventName(e);this.observer.trigger(n,t)}},{key:"unbind",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this._namespacedEventName(e);this.observer.unbind(n,t)}},{key:"start",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=void 0!==n.timeout?n.timeout:null,a=void 0!==n.logLevel?n.logLevel:_.DEBUG,i=this._generateGroupId(),s=this._message(e);Object(y.a)(void 0===this.groupIdMap[i],function(){return"starting log group that was started before and not stopped: ".concat(s)});var o=Date.now(),c={start:o,_message:s};return this.groupIdMap[i]=c,r&&(c.timeoutId=setTimeout(function(){return t.debug("".concat(s," - timed out after ").concat(r,"ms"))},r)),this._log(a,null,!1,"%c".concat(s," - start"),"background: lightgray; color: black"),i}},{key:"end",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y.a.integer(e),y.a.object(t);var n=void 0!==t.logLevel?t.logLevel:_.DEBUG,r=this.groupIdMap[e];Object(y.a)(r),r.timeoutId&&clearTimeout(r.timeoutId);var a=r._message;y.a.string(a);var i=r.start;y.a.integer(i);var s=Date.now(),o=s-i;delete this.groupIdMap[e],this._log(n,null,!1,"%c".concat(a," - end - (duration = ").concat(o,"ms)"),"background: green; color: white")}},{key:"debug",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this._log.apply(this,[_.DEBUG,null,!0,e].concat(n))}},{key:"log",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this._log.apply(this,[_.LOG,null,!0,e].concat(n))}},{key:"info",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this._log.apply(this,[_.INFO,null,!0,e].concat(n))}},{key:"warn",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this._log.apply(this,[_.WARN,null,!0,e].concat(n))}},{key:"error",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this._log.apply(this,[_.ERROR,null,!0,e].concat(n))}},{key:"time",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this._log.apply(this,[_.DEBUG,"time",e].concat(n)),e}},{key:"timeEnd",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this._log.apply(this,[_.DEBUG,"timeEnd",e].concat(n))}},{key:"_log",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3?arguments[3]:void 0;if(y.a.enum(e,_),!1!==this.isEnabled()){var a=n?this._message(r):r;y.a.string(a),window.__Sentry&&window.__Sentry.addBreadcrumb({message:a,level:window.__Sentry.Severity.Info});for(var i=arguments.length,s=new Array(i>4?i-4:0),o=4;o<i;o++)s[o-4]=arguments[o];this.trigger("log",[e,a].concat(s)),!1!==this.isOutputEnabledForLogLevel(e)&&(t=t||this._consoleMethodForLogLevel(e),y.a.function(t),t.apply(console,[a].concat(s)))}}},{key:"_message",value:function(e){if(null===this.ownerId)return e;var t="[".concat(this.ownerId,"] - ").concat(e);return t}},{key:"isEnabled",value:function(){return!!k.a.isTesting()||!b.a.isWindowInsideIFrame(window)}},{key:"isOutputEnabledForLogLevel",value:function(e){return y.a.enum(e,_),!k.a.isTesting()&&!(this.logLevel<e)}},{key:"_consoleMethodForLogLevel",value:function(e){var t={};return t[_.ERROR]=console.error,t[_.WARN]=console.warn,t[_.INFO]=console.info,t[_.LOG]=console.log,t[_.DEBUG]=console.debug,t[e]}},{key:"_namespacedEventName",value:function(e){return"__logger:"+e}},{key:"_generateGroupId",value:function(){return this.groupId+=1,this.groupId}},{key:"logLevel",get:function(){if(void 0!==this._logLevel)return this._logLevel;this.logLevel=k.a.isProduction()?_.INFO:_.DEBUG},set:function(e){this._logLevel=e}},{key:"scope",get:function(){return Object(y.a)(this.__scope),this.__scope},set:function(e){Object(y.a)(e),this.__scope=e}},{key:"observer",get:function(){return e(document)}},{key:"ownerId",get:function(){return this.scope.classSlug}}]),t}());window.__Logger=x}).call(t,n(13))},345:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n(71),a=(n.n(r),n(84)),i=(n.n(a),n(0)),s=n.n(i),o=n(1),c=n.n(o),u=n(50),l=n.n(u),d=n(690),h=n.n(d),v=n(2),f=n(55),p={},g=l()("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"),y=g.length,b=l()(Array(10)),m=new(function(){function e(){s()(this,e),this.uniqueIdMap={}}return c()(e,[{key:"sequentialId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._generateUniqueId(this._sequentialId,e)}},{key:"shortUUID",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._generateUniqueId(this._shortUUID,e)}},{key:"shortUniqueId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._generateUniqueId(this._shortUniqueId,e)}},{key:"_generateUniqueId",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=f.a.addTimeStart("generateUniqueId"),n=null;do{n=e.apply(this)}while(void 0!==this.uniqueIdMap[n]);return v.a.string(n),this.uniqueIdMap[n]=!0,f.a.addTimeEnd(t),n}},{key:"_shortUUID",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=h()();return e=e.slice(0,8)}},{key:"_shortUniqueId",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var e=0;e<10;e++)b[e]=g[Math.floor(Math.random()*y)];return b.join("")}},{key:"_sequentialId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=void 0!==e.namespace?e.namespace:"default",n=void 0!==p[t]?p[t]:0;return n+=1,p[t]=n,"".concat(n)}}]),e}())},346:function(e,t,n){"use strict";n.d(t,"c",function(){return M}),n.d(t,"b",function(){return F}),n.d(t,"a",function(){return N});var r=n(11),a=(n.n(r),n(41)),i=(n.n(a),n(99)),s=(n.n(i),n(26)),o=(n.n(s),n(57)),c=(n.n(o),n(12)),u=(n.n(c),n(54)),l=(n.n(u),n(60)),d=(n.n(l),n(8)),h=(n.n(d),n(20)),v=(n.n(h),n(17)),f=(n.n(v),n(18)),p=(n.n(f),n(43)),g=(n.n(p),n(39)),y=(n.n(g),n(103)),b=(n.n(y),n(100)),m=(n.n(b),n(19)),k=(n.n(m),n(23)),_=n.n(k),x=n(24),w=(n.n(x),n(0)),I=n.n(w),A=n(1),S=n.n(A),E=n(5),C=n.n(E),j=n(2),O=n(236),D=(n.n(O),n(716)),T="en_US",M=function(){return function(e,t){return t?Object(O.c)("".concat(t)).gettext(e):Object(O.gettext)(e)}},F=function(e,t,n){var r="translateParams";var a=function(e,t,n){var a=Object.keys(t).filter(function(e){return t=r,0===e.indexOf(t)&&e!==r;var t});if(!a.length)return null;var i=e.$new(),s=[];return a.forEach(function(a){var o=e.$watch(t[a],function(e){var t=function(e){return(t=e.replace(r,"")).charAt(0).toLowerCase()+t.substr(1);var t}(a);i[t]=e,n(i)});s.push(o)}),e.$on("$destroy",function(){s.forEach(function(e){return e()}),i.$destroy()}),i};return{restrict:"A",terminal:!0,compile:function(r,i){var s=r.html().trim();return{post:function(r,i,o){var c=e(o.translateN),u=!0,l=null,d=function(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;o.translatePlural?((r=l||(l=r.$new())).$count=c(r),e=o.translateContext?Object(O.c)("".concat(o.translateContext)).ngettext(Object(O.msgid)([s]),o.translatePlural,r.$count):Object(O.ngettext)(Object(O.msgid)([s]),o.translatePlural,r.$count)):e=o.translateContext?Object(O.c)("".concat(o.translateContext)).gettext(s):Object(O.gettext)(s);var d=i.contents();if(d||e){u&&t(d)(r);var h=angular.element(document.createTextNode(e));t(h)(a||r);var v=h.contents();n.enter(v,i),n.leave(d)}},h=a(r,o,d);d(h),u=!1,o.translateN&&r.$watch(o.translateN,function(){d(h)})}}}}};F.$inject=["$parse","$compile","$animate"];var L=function(){function e(){I()(this,e),this.localeData={},this.currentLocale=T}return S()(e,[{key:"fetchCurrentUserLocale",value:function(){var e,t,n,r;return _.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(e=document.documentElement.lang)){a.next=3;break}return a.abrupt("return",e);case 3:return a.next=5,_.a.awrap(fetch("/api/locale",{credentials:"same-origin"}));case 5:return t=a.sent,a.next=8,_.a.awrap(t.json());case 8:return n=a.sent,r=n.data,a.abrupt("return",r.lang);case 11:case"end":return a.stop()}})}},{key:"addLocaleData",value:function(e,t){return this.localeData[e]||(this.localeData[e]={}),Object(D.a)(this.localeData[e],t),Object(O.addLocale)(e,this.localeData[e])}},{key:"fetchLocaleData",value:function(e,t){var n;return _.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:return n=Array.isArray(e)?e:[e],r.next=3,_.a.awrap(Promise.all(n.map(function(e){var n="/i18n/".concat(e,"-").concat(t,".po.json");return fetch(n,{credentials:"same-origin"}).then(function(e){return e.json()})})));case 3:r.sent.forEach(function(e){return N.addLocaleData(t,e)});case 5:case"end":return r.stop()}})}},{key:"useLocale",value:function(e){return this.currentLocale=e,Object(O.useLocale)(e)}},{key:"useLocales",value:function(e){return this.currentLocale=e[0],Object(O.useLocales)(e)}},{key:"getDefaultLocale",value:function(){return T}},{key:"getCurrentLocale",value:function(){return this.currentLocale}},{key:"getCurrentLanguage",value:function(){return this.currentLocale.replace("_","-").split("-")[0]}},{key:"getLocaleName",value:function(e){var t={de:"Deutsch",es:"Espaol","es-ES":"Espaol (Latin America)","es-MX":"Espaol (Mexico)",fr:"Franais",it:"Italiano",ja:"",ko:"",nl:"Nederlands",pt:"Portugus","pt-BR":"Portugus (Brazil)",sv:"Svenska",th:"",zh:"","zh-CN":"","zh-HK":"",en:"English"};return t[e]?t[e]:e}},{key:"getImageUrl",value:function(e,t){return this.currentLocale===T?t:e[this.currentLocale]||t}},{key:"isEn",value:function(){return 0===N.getCurrentLocale().indexOf("en")}},{key:"loadCurrentUserLocaleData",value:function(e){var t;return _.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return j.a.array(e),n.next=3,_.a.awrap(N.fetchCurrentUserLocale());case 3:if(t=n.sent,!1!==["es"].includes(t)){n.next=6;break}return n.abrupt("return");case 6:return n.next=8,_.a.awrap(N.fetchLocaleData(e,t));case 8:N.useLocale(t);case 9:case"end":return n.stop()}})}}]),e}();C()(L,"CLASS",function(){return"I18nUtilsClass"});var N=new L},351:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var r=n(0),a=n.n(r),i=n(1),s=n.n(i),o=n(6),c=n.n(o),u=n(3),l=n.n(u),d=n(7),h=n.n(d),v=new(function(e){function t(){return a()(this,t),c()(this,l()(t).apply(this,arguments))}return h()(t,e),s()(t,[{key:"ENUM",get:function(){return{LINK:"LINK",IMAGE:"IMAGE",ACTOR:"ACTOR",SCRIPT:"SCRIPT",CODE:"CODE",NOTEBOOK_COURSE_CONTENT:"NOTEBOOK_COURSE_CONTENT",CLASS_ASSIGNMENT_COURSE:"CLASS_ASSIGNMENT_COURSE",CLASS_ASSIGNMENT_LESSON:"CLASS_ASSIGNMENT_LESSON",SYSTEM_HINT:"SYSTEM_HINT",COACHING_INBOX_THREAD_STATE:"COACHING_INBOX_THREAD_STATE",COACHING_LESSON_GRADE:"COACHING_LESSON_GRADE"}}}]),t}(n(92).a))},352:function(e,t,n){"use strict";var r=n(12),a=(n.n(r),n(71)),i=(n.n(a),n(84)),s=(n.n(i),n(353)),o=(n.n(s),n(8)),c=(n.n(o),n(17)),u=(n.n(c),n(43)),l=(n.n(u),n(357)),d=(n.n(l),n(359)),h=(n.n(d),n(360)),v=(n.n(h),n(361)),f=(n.n(v),n(362)),p=(n.n(f),n(363)),g=(n.n(p),n(364)),y=(n.n(g),n(365)),b=(n.n(y),n(366)),m=(n.n(b),n(367)),k=(n.n(m),n(368)),_=(n.n(k),n(369)),x=(n.n(_),n(370)),w=(n.n(x),n(371)),I=(n.n(w),n(372)),A=(n.n(I),n(373)),S=(n.n(A),n(374)),E=(n.n(S),n(375)),C=(n.n(E),n(376)),j=(n.n(C),n(377)),O=(n.n(j),n(378)),D=(n.n(O),n(379)),T=(n.n(D),n(380)),M=(n.n(T),n(381)),F=(n.n(M),n(790)),L=n.n(F),N=8192,P=4,R=0,B=1,U=16,W=77,H=80,G=":::::::::::::::::::::::::::::::::::::::::::\n";t.a={extractPyStrFromIntelHex:function(e,t){var n="",r=L.a.fromHex(t);if(r.has(e)){var a=r.slice(e,N).get(e);a[R]===W&&a[B]===H&&(n=(n=function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}(a.slice(P))).replace(/\0/g,""))}return n},injectPyStrIntoIntelHex:function(e,t,n){var r=function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(n),a=P+r.length;a+=U-a%U;var i=new Uint8Array(a);i[0]=W,i[1]=H,i[2]=255&r.length,i[3]=r.length>>8&255,i.set(r,P),t=function(e){return e.replace(G,"")}(t);var s=L.a.fromHex(t);return s.set(e,i),s.asHexString()+"\n"}}},382:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={DISCONNECTED:0,CONNECTED:1,REQUESTINGDEVICE:2,REQUESTINGUSBDEVICE:7,CONNECTING:3,DISCONNECTING:4,SENDING:5,COMPLETED:6,ERROR:-1,REQUIRES_AUTH:-2,UNSUPPORTED:-3}},383:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return J});var r=n(21),a=(n.n(r),n(22)),i=(n.n(a),n(25)),s=(n.n(i),n(11)),o=(n.n(s),n(41)),c=(n.n(o),n(384)),u=(n.n(c),n(26)),l=(n.n(u),n(12)),d=(n.n(l),n(54)),h=(n.n(d),n(385)),v=(n.n(h),n(48)),f=(n.n(v),n(60)),p=(n.n(f),n(8)),g=(n.n(p),n(20)),y=(n.n(g),n(233)),b=(n.n(y),n(30)),m=(n.n(b),n(18)),k=(n.n(m),n(19)),_=(n.n(k),n(49)),x=n.n(_),w=n(23),I=n.n(w),A=n(50),S=n.n(A),E=n(24),C=(n.n(E),n(0)),j=n.n(C),O=n(1),D=n.n(O),T=n(6),M=n.n(T),F=n(3),L=n.n(F),N=n(34),P=n.n(N),R=n(7),B=n.n(R),U=n(5),W=n.n(U),H=n(2),G=(n(235),n(240)),V=n(814),$=n(231),z=n(128),q=function(t){function n(){var e,t;j()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return t=M()(this,(e=L()(n)).call.apply(e,[this].concat(a))),W()(P()(t),"booting",!1),W()(P()(t),"booted",!1),W()(P()(t),"enablingExtensionIdsMap",{}),W()(P()(t),"disablingExtensionIdsMap",{}),W()(P()(t),"extensionIdLoadedPayloadMap",{}),W()(P()(t),"extensionIdExtensionMap",{}),W()(P()(t),"capabilityExtensionIdsMap",{}),W()(P()(t),"allowedCapabilityExtensionIdsMap",{}),W()(P()(t),"hardDependencyIdExtensionIdsMap",{}),W()(P()(t),"enabledExtensionIdOptionsMap",{}),W()(P()(t),"enabledExtensionIdCapabilitiesMap",{}),W()(P()(t),"injectedExtensionIdTargetExtensionIdsMap",{}),W()(P()(t),"targetExtensionIdInjectedExtensionIdsMap",{}),t}return B()(n,t),D()(n,[{key:"boot",value:function(e){var t,n,r,a,i,s,o,c=arguments;return I.a.async(function(u){for(;;)switch(u.prev=u.next){case 0:if(t=c.length>1&&void 0!==c[1]?c[1]:{},!this.isBooting()){u.next=3;break}throw"extension manager is already booting";case 3:if(!this.isBooted()){u.next=5;break}throw"extension manager is already booting";case 5:return this.booting=!0,this.trigger("booting"),n=this.logger.start("boot"),r=this.getDependencyIdsDeep(e,{ignoreLazy:!0}),a=[e].concat(S()(r)),i=S()(new Set(a)),this.logger.debug("BOOTING EXTENSIONS: ".concat(JSON.stringify(i))),s=this.preloadPayloads(e),o=this.enable(e,t),u.next=16,I.a.awrap(Promise.all([s,o]));case 16:this.booting=!1,this.booted=!0,this.trigger("booted"),this.logger.end(n);case 20:case"end":return u.stop()}},null,this)}},{key:"reboot",value:function(e){var t,n,r;return I.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:return Object(H.a)(this.isBooted(),"extension manager was never booted, cannot reboot"),Object(H.a)(!1===this.isBooting(),"extension manager is already booting"),this.booting=!0,this.trigger("booting"),t=this.logger.start("rebooting"),n=this.preloadPayloads(e),r=V.a.ensureExtensions(e),a.next=9,I.a.awrap(Promise.all([n,r]));case 9:this.booting=!1,this.booted=!0,this.trigger("booted"),this.logger.end(t);case 13:case"end":return a.stop()}},null,this)}},{key:"isBooting",value:function(){return!0===this.booting}},{key:"isBooted",value:function(){return!0===this.booted}},{key:"waitBooted",value:function(){var e=this;return new Promise(function(t){if(e.isBooted())return t();var n=e.bind("booted",function(){n(),t()})})}},{key:"isRegistered",value:function(e){return void 0!==this.extensionIdExtensionMap[e]}},{key:"register",value:function(e){var t=this.logger.start("extensions registration"),n=e.id();if(void 0!==this.extensionIdExtensionMap[n])throw"extension was already registered: ".concat(n);this.extensionIdExtensionMap[n]=e;var r=e._capabilities();for(var a in r)$.a.addToMapList(this.capabilityExtensionIdsMap,a,n);var i=e._allowedCapabilities();for(var s in i)$.a.addToMapList(this.allowedCapabilityExtensionIdsMap,s,n);var o=e._dependencies();for(var c in o){var u=o[c];!1!==(void 0!==u.hard&&u.hard)&&$.a.addToMapList(this.hardDependencyIdExtensionIdsMap,c,n)}this.logger.log("'".concat(n,"' - registered")),this.logger.end(t)}},{key:"isEnabling",value:function(e){return Object(H.a)(this.isRegistered(e)),void 0!==this.enablingExtensionIdsMap[e]}},{key:"isEnabled",value:function(e){return Object(H.a)(this.isRegistered(e)),void 0!==this.enabledExtensionIdOptionsMap[e]}},{key:"isOrphan",value:function(e){var t=this;Object(H.a)(this.isRegistered(e));var n=[],r=this.getEnabledExtensionIds(),a=!0,i=!1,s=void 0;try{for(var o,c=r[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var u=o.value;n=[].concat(S()(n),S()(this.getDependencyIdsDeep(u)))}}catch(e){i=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(i)throw s}}var l=!1===(n=n.filter(function(e){return t.isEnabled(e)})).includes(e);return l}},{key:"preloadPayloads",value:function(e){var t,n,r,a,i,s,o,c,u,l;return I.a.async(function(d){for(;;)switch(d.prev=d.next){case 0:for(t=[],n=this.loadPayload(e),t.push(n),r=this.getDependencyIdsDeep(e),a=!0,i=!1,s=void 0,d.prev=7,o=r[Symbol.iterator]();!(a=(c=o.next()).done);a=!0)u=c.value,l=this.loadPayload(u),t.push(l);d.next=15;break;case 11:d.prev=11,d.t0=d.catch(7),i=!0,s=d.t0;case 15:d.prev=15,d.prev=16,a||null==o.return||o.return();case 18:if(d.prev=18,!i){d.next=21;break}throw s;case 21:return d.finish(18);case 22:return d.finish(15);case 23:return d.next=25,I.a.awrap(Promise.all(t));case 25:return d.abrupt("return",d.sent);case 26:case"end":return d.stop()}},null,this,[[7,11,15,23],[16,,18,22]])}},{key:"getDependencyIdsDeep",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Array.isArray(e)?e:[e],r=[],a=!0,i=!1,s=void 0;try{for(var o,c=n[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var u=o.value,l=this._getDependencyIdsDeep(u,[],t);r=r.concat(l)}}catch(e){i=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(i)throw s}}return S()(new Set(r))}},{key:"_getDependencyIdsDeep",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.extensionById(e,{assert:!0})._dependencies(),a=0,i=Object.entries(r);a<i.length;a++){var s=x()(i[a],2),o=s[0],c=s[1];!0===n.ignoreLazy&&!0===c.lazy||(t.push(o),this._getDependencyIdsDeep(o,t))}return t}},{key:"enableBulk",value:function(e){var t,n,r,a,i,s,o,c,u;return I.a.async(function(l){for(;;)switch(l.prev=l.next){case 0:H.a.array(e),t=[],n=!0,r=!1,a=void 0,l.prev=5,i=e[Symbol.iterator]();case 7:if(n=(s=i.next()).done){l.next=18;break}if(o=s.value,!J.isEnabled(o)){l.next=11;break}return l.abrupt("continue",15);case 11:c=J.preloadPayloads(o),u=J.enable(o),t.push(c),t.push(u);case 15:n=!0,l.next=7;break;case 18:l.next=24;break;case 20:l.prev=20,l.t0=l.catch(5),r=!0,a=l.t0;case 24:l.prev=24,l.prev=25,n||null==i.return||i.return();case 27:if(l.prev=27,!r){l.next=30;break}throw a;case 30:return l.finish(27);case 31:return l.finish(24);case 32:return l.next=34,I.a.awrap(Promise.all(t));case 34:return l.abrupt("return",l.sent);case 35:case"end":return l.stop()}},null,null,[[5,20,24,32],[25,,27,31]])}},{key:"disableBulk",value:function(e){var t,n,r,a,i,s,o,c;return I.a.async(function(u){for(;;)switch(u.prev=u.next){case 0:H.a.array(e),t=[],n=!0,r=!1,a=void 0,u.prev=5,i=e[Symbol.iterator]();case 7:if(n=(s=i.next()).done){u.next=16;break}if(o=s.value,!J.isDisabled(o)){u.next=11;break}return u.abrupt("continue",13);case 11:c=J.disable(o),t.push(c);case 13:n=!0,u.next=7;break;case 16:u.next=22;break;case 18:u.prev=18,u.t0=u.catch(5),r=!0,a=u.t0;case 22:u.prev=22,u.prev=23,n||null==i.return||i.return();case 25:if(u.prev=25,!r){u.next=28;break}throw a;case 28:return u.finish(25);case 29:return u.finish(22);case 30:return u.next=32,I.a.awrap(Promise.all(t));case 32:return u.abrupt("return",u.sent);case 33:case"end":return u.stop()}},null,null,[[5,18,22,30],[23,,25,29]])}},{key:"enable",value:function(t){var n,r=this,a=arguments;return I.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},i.next=3,I.a.awrap(new Promise(function(a){var i,s,o,c,u,l,d,h,v,f,p,g,y,b,m,k,_,x,w,A,S,E,C,j,O,D,T,M,F,L,N,P,R,B,U,W,G,V,$,z,q,Y;return I.a.async(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(i=void 0!==n.capabilitiesWhitelist?n.capabilitiesWhitelist:null,s=void 0!==n.capabilitiesBlacklist?n.capabilitiesBlacklist:null,!r.isEnabling(t)){Q.next=5;break}return o=r.bind("enabled",function(e){e.id()===t&&(o(),a(e))}),Q.abrupt("return");case 5:if(c=r.extensionById(t,{assert:!0}),!r.isEnabled(t)){Q.next=9;break}return a(c),Q.abrupt("return");case 9:return r.enablingExtensionIdsMap[t]=!0,Q.next=12,I.a.awrap(r.disableIncompatibleExtensions(t,{requesterExtensionId:t}));case 12:return u=r.incompatibleExtensionIdsForExtensionId(t),(l=u.filter(function(e){return r.isEnabled(e)||r.isEnabling(e)})).length>0&&Object(H.a)(!1,"failed to enable ".concat(t,", incompatible extensions enabled / enabling ").concat(l)),d=r.logger.start("'".concat(t,"' - enable")),h=r.logger.start("'".concat(t,"' - pre-enable"),{timeout:1e3}),Q.next=19,I.a.awrap(c.preEnable());case 19:return r.logger.end(h),Q.prev=20,v=r.logger.start("'".concat(t,"' - loading payload"),{timeout:1e3}),Q.next=24,I.a.awrap(r.loadPayload(t));case 24:r.logger.end(v),Q.next=32;break;case 27:throw Q.prev=27,Q.t0=Q.catch(20),delete r.enablingExtensionIdsMap[t],r.logger.error("failed to enable '".concat(t,"' - failed to load payload"),Q.t0),"failed to enable '".concat(t,"' - failed to load payload: ").concat(Q.t0.message);case 32:return f=r.logger.start("'".concat(t,"' - enabling extension dependencies")),Q.next=35,I.a.awrap(r.enableDependencies(t));case 35:return p=Q.sent,g=p.map(function(e){return r.injectExtension(c,e)}),Q.next=39,I.a.awrap(Promise.all(g));case 39:return r.logger.end(f),y=r.logger.start("'".concat(t,"' - enabling internals"),{timeout:1e3}),Q.next=43,I.a.awrap(c.enable(n));case 43:r.logger.end(y),r.enabledExtensionIdOptionsMap[t]=n,b=c._capabilities(),b=Object.keys(b),i&&(b=b.filter(function(e){return i.includes(e)})),s&&(b=b.filter(function(e){return!1===s.includes(e)})),r.enabledExtensionIdCapabilitiesMap[t]=b,e("body").addClass(t),m=[],k=c._allowedCapabilities(),Q.t1=I.a.keys(k);case 54:if((Q.t2=Q.t1()).done){Q.next=78;break}for(_=Q.t2.value,x=r.enabledExtensionsByCapability(_),w=!0,A=!1,S=void 0,Q.prev=60,E=x[Symbol.iterator]();!(w=(C=E.next()).done);w=!0)j=C.value,O=r.injectExtension(c,j),m.push(O);Q.next=68;break;case 64:Q.prev=64,Q.t3=Q.catch(60),A=!0,S=Q.t3;case 68:Q.prev=68,Q.prev=69,w||null==E.return||E.return();case 71:if(Q.prev=71,!A){Q.next=74;break}throw S;case 74:return Q.finish(71);case 75:return Q.finish(68);case 76:Q.next=54;break;case 78:return Q.next=80,I.a.awrap(Promise.all(m));case 80:D=[],T=!0,M=!1,F=void 0,Q.prev=84,L=b[Symbol.iterator]();case 86:if(T=(N=L.next()).done){Q.next=111;break}for(P=N.value,R=r.enabledExtensionIdsByAcceptedCapability(P),B=!0,U=!1,W=void 0,Q.prev=92,G=R[Symbol.iterator]();!(B=(V=G.next()).done);B=!0)$=V.value,z=J.extensionById($,{assert:!0}),q=r.injectExtension(z,c,{reason:"(capability: ".concat(P,")")}),D.push(q);Q.next=100;break;case 96:Q.prev=96,Q.t4=Q.catch(92),U=!0,W=Q.t4;case 100:Q.prev=100,Q.prev=101,B||null==G.return||G.return();case 103:if(Q.prev=103,!U){Q.next=106;break}throw W;case 106:return Q.finish(103);case 107:return Q.finish(100);case 108:T=!0,Q.next=86;break;case 111:Q.next=117;break;case 113:Q.prev=113,Q.t5=Q.catch(84),M=!0,F=Q.t5;case 117:Q.prev=117,Q.prev=118,T||null==L.return||L.return();case 120:if(Q.prev=120,!M){Q.next=123;break}throw F;case 123:return Q.finish(120);case 124:return Q.finish(117);case 125:return Q.next=127,I.a.awrap(Promise.all(D));case 127:return Y=r.logger.start("'".concat(t,"' - post-enable"),{timeout:1e3}),Q.next=130,I.a.awrap(c.postEnable());case 130:r.logger.end(Y),delete r.enablingExtensionIdsMap[t],r.trigger("enabled",[c]),r.logger.end(d),a(c);case 135:case"end":return Q.stop()}},null,null,[[20,27],[60,64,68,76],[69,,71,75],[84,113,117,125],[92,96,100,108],[101,,103,107],[118,,120,124]])}));case 3:return i.abrupt("return",i.sent);case 4:case"end":return i.stop()}})}},{key:"loadPayload",value:function(e){var t,n=this;return I.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:return t="".concat(this.id(),":").concat(e),r.next=3,I.a.awrap(z.a.performTask(t,function(){var t;return I.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(!0!==n.extensionIdLoadedPayloadMap[e]){r.next=2;break}return r.abrupt("return");case 2:return t=n.extensionById(e,{assert:!0}),r.next=5,I.a.awrap(t.loadPayload());case 5:n.extensionIdLoadedPayloadMap[e]=!0;case 6:case"end":return r.stop()}})}));case 3:case"end":return r.stop()}},null,this)}},{key:"enableDependencies",value:function(e){var t,n,r,a,i,s,o=this;return I.a.async(function(c){for(;;)switch(c.prev=c.next){case 0:t=[],n=this.extensionById(e),r=n._dependencies(),a=function(n){var a=r[n];if(!0===a.lazy)return"continue";var i=new Promise(function(t){var r,i,s;return I.a.async(function(c){for(;;)switch(c.prev=c.next){case 0:if(!o.isEnabled(n)){c.next=7;break}o.logger.log("'".concat(e,"' - dependency '").concat(n,"' already enabled")),r=o.enabledExtensionById(n),Object(H.a)(r),t(r),c.next=13;break;case 7:return i=o.logger.start("'".concat(e,"' - enabling dependency '").concat(n,"'")),c.next=10,I.a.awrap(o.enable(n,a));case 10:s=c.sent,o.logger.end(i),t(s);case 13:case"end":return c.stop()}})});t.push(i)},c.t0=I.a.keys(r);case 5:if((c.t1=c.t0()).done){c.next=12;break}if(i=c.t1.value,"continue"!==a(i)){c.next=10;break}return c.abrupt("continue",5);case 10:c.next=5;break;case 12:return c.next=14,I.a.awrap(Promise.all(t));case 14:return s=c.sent,c.abrupt("return",s);case 16:case"end":return c.stop()}},null,this)}},{key:"injectExtension",value:function(e,t){var n,r=this,a=arguments;return I.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:return n=a.length>2&&void 0!==a[2]?a[2]:{},i.abrupt("return",new Promise(function(a){var i,s,o,c,u,l;return I.a.async(function(d){for(;;)switch(d.prev=d.next){case 0:if(i=void 0!==n.reason?n.reason:null,s=void 0===n.assertEnabled||n.assertEnabled,o=e.id(),c=t.id(),!s||!1!==r.isEnabled(c)){d.next=6;break}throw"cannot inject disabled extension: ".concat(c);case 6:if(!r.isExtensionIdInjectedInExtensionId(c,o)){d.next=9;break}return a(),d.abrupt("return");case 9:return u=r.logger.start("inject dependency '".concat(c,"' into '").concat(o,"'")+(i||"")),$.a.addToMapList(r.targetExtensionIdInjectedExtensionIdsMap,o,c),$.a.addToMapList(r.injectedExtensionIdTargetExtensionIdsMap,c,o),l=r.enabledExtensionIdOptionsMap[c],d.next=15,I.a.awrap(e.injectExtension(t,l));case 15:t.trigger("injectedInto",[e]),r.trigger("injected",[e,t]),r.logger.end(u),a();case 19:case"end":return d.stop()}})}));case 2:case"end":return i.stop()}})}},{key:"isDisabling",value:function(e){return Object(H.a)(this.isRegistered(e)),void 0!==this.disablingExtensionIdsMap[e]}},{key:"isDisabled",value:function(e){return!1===this.isEnabled(e)}},{key:"disable",value:function(t){var n=this,r=arguments;return I.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:if(r.length>1&&void 0!==r[1]?r[1]:{},"extension-trackers"!==t){a.next=3;break}return a.abrupt("return");case 3:return a.abrupt("return",new Promise(function(r){var a,i,s,o,c,u,l,d,h,v,f,p,g,y,b,m,k,_,x,w;return I.a.async(function(A){for(;;)switch(A.prev=A.next){case 0:if(a=n.extensionById(t,{assert:!0}),!1!==n.isEnabled(t)){A.next=4;break}return r(a),A.abrupt("return");case 4:if(!n.isDisabling(t)){A.next=7;break}return i=n.bind("disabled",function(e){e.id()===t&&(i(),r(e))}),A.abrupt("return");case 7:return n.disablingExtensionIdsMap[t]=!0,s=n.enabledDependantExtensionIdsForExtensionId(t),A.next=11,I.a.awrap(n.disableBulk(s));case 11:return o=n.logger.start("'".concat(t,"' - disable"),{timeout:1e3}),A.next=14,I.a.awrap(a.preDisable());case 14:c=n.targetExtensionIdsForInjectedExtensionId(t),u=!0,l=!1,d=void 0,A.prev=18,h=c[Symbol.iterator]();case 20:if(u=(v=h.next()).done){A.next=28;break}return f=v.value,p=n.extensionById(f,{assert:!0}),A.next=25,I.a.awrap(n.uninjectExtension(p,a));case 25:u=!0,A.next=20;break;case 28:A.next=34;break;case 30:A.prev=30,A.t0=A.catch(18),l=!0,d=A.t0;case 34:A.prev=34,A.prev=35,u||null==h.return||h.return();case 37:if(A.prev=37,!l){A.next=40;break}throw d;case 40:return A.finish(37);case 41:return A.finish(34);case 42:return A.next=44,I.a.awrap(a.disable());case 44:g=n.injectedExtensionIdsForExtensionId(t),y=!0,b=!1,m=void 0,A.prev=48,k=g[Symbol.iterator]();case 50:if(y=(_=k.next()).done){A.next=58;break}return x=_.value,w=n.extensionById(x,{assert:!0}),A.next=55,I.a.awrap(n.removeInjectedExtension(a,w));case 55:y=!0,A.next=50;break;case 58:A.next=64;break;case 60:A.prev=60,A.t1=A.catch(48),b=!0,m=A.t1;case 64:A.prev=64,A.prev=65,y||null==k.return||k.return();case 67:if(A.prev=67,!b){A.next=70;break}throw m;case 70:return A.finish(67);case 71:return A.finish(64);case 72:return delete n.enabledExtensionIdOptionsMap[t],delete n.enabledExtensionIdCapabilitiesMap[t],delete n.extensionIdLoadedPayloadMap[t],e("body").removeClass(t),A.next=78,I.a.awrap(a.postDisable());case 78:delete n.disablingExtensionIdsMap[t],n.trigger("disabled",[a]),n.logger.end(o),r(a);case 82:case"end":return A.stop()}},null,null,[[18,30,34,42],[35,,37,41],[48,60,64,72],[65,,67,71]])}));case 4:case"end":return a.stop()}})}},{key:"uninjectExtension",value:function(e,t){var n,r,a,i;return I.a.async(function(s){for(;;)switch(s.prev=s.next){case 0:return n=e.id(),r=t.id(),a=this.logger.start("uninject '".concat(r,"' from '").concat(n,"'")),i=this.enabledExtensionIdOptionsMap[r],s.next=6,I.a.awrap(e.uninjectExtension(t,i));case 6:this.trigger("uninjected",[e,t]),this.removeInjectedExtension(e,t),this.logger.end(a);case 9:case"end":return s.stop()}},null,this)}},{key:"removeInjectedExtension",value:function(e,t){var n=e.id(),r=t.id();$.a.removeFromMapList(this.targetExtensionIdInjectedExtensionIdsMap,n,r),$.a.removeFromMapList(this.injectedExtensionIdTargetExtensionIdsMap,r,n)}},{key:"disableIncompatibleExtensions",value:function(e){var t,n,r,a,i=this,s=arguments;return I.a.async(function(o){for(;;)switch(o.prev=o.next){case 0:return t=s.length>1&&void 0!==s[1]?s[1]:{},n=this.incompatibleExtensionIdsForExtensionId(e),r=n.filter(function(e){return i.isEnabled(e)}),a=r.map(function(e){return i.disable(e,t)}),o.next=6,I.a.awrap(Promise.all(a));case 6:case"end":return o.stop()}},null,this)}},{key:"toggleEnabled",value:function(e){return I.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isEnabled(e)){t.next=5;break}return t.next=3,I.a.awrap(this.disable(e));case 3:t.next=7;break;case 5:return t.next=7,I.a.awrap(this.enable(e));case 7:case"end":return t.stop()}},null,this)}},{key:"extensionById",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return void 0!==t.assert&&t.assert&&Object(H.a)(void 0!==this.extensionIdExtensionMap[e],"extension not registered: "+e),this.extensionIdExtensionMap[e]}},{key:"enabledExtensionById",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(H.a)(e),!1===this.isEnabled(e)?null:this.extensionById(e,t)}},{key:"extensionsByQuery",value:function(e){var t=this;return H.a.object(e),this.extensions.filter(function(n){return t.extensionMatchesQuery(n,e)})}},{key:"extensionMatchesQuery",value:function(e,t){if(H.a.object(e),H.a.object(t),t.id&&t.id!==e.id())return!1;if(t.capabilities){var n=e._capabilities(),r=!0,a=!1,i=void 0;try{for(var s,o=t.capabilities[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){if(void 0===n[s.value])return!1}}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}}return!0}},{key:"enabledExtensionsByQuery",value:function(e){var t=this;return this.extensionsByQuery(e).filter(function(e){return t.isEnabled(e.id())})}},{key:"extensionIdsByCapability",value:function(e){return void 0!==this.capabilityExtensionIdsMap[e]?this.capabilityExtensionIdsMap[e]:[]}},{key:"extensionsByCapability",value:function(e){var t=this;return this.extensionIdsByCapability(e).map(function(e){return t.extensionById(e,{assert:!0})})}},{key:"getEnabledExtensionIds",value:function(){return Object.keys(this.enabledExtensionIdOptionsMap)}},{key:"enabledExtensionIdsByCapability",value:function(e){var t=this,n=Array.isArray(e)?e:[e],r=[],a=!0,i=!1,s=void 0;try{for(var o,c=n[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var u=o.value,l=void 0!==this.capabilityExtensionIdsMap[u]?this.capabilityExtensionIdsMap[u]:[];r=[].concat(S()(r),S()(l))}}catch(e){i=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(i)throw s}}return r.filter(function(e){return t.isEnabled(e)})}},{key:"enabledExtensionsByCapability",value:function(e){var t=this;return this.enabledExtensionIdsByCapability(e).map(function(e){return t.extensionById(e,{assert:!0})})}},{key:"enabledExtensionByCapability",value:function(e){var t=this.enabledExtensionsByCapability(e);if(0===t.length)return null;Object(H.a)(1===t.length,"found more than one extension enabled with capability: ".concat(e));var n=t[0];return Object(H.a)(n),n}},{key:"enabledExtensionIdsByAcceptedCapability",value:function(e){var t=this;return(void 0!==this.allowedCapabilityExtensionIdsMap[e]?this.allowedCapabilityExtensionIdsMap[e]:[]).filter(function(e){return t.isEnabled(e)})}},{key:"enabledDependantExtensionIdsForExtensionId",value:function(e){var t=this;return $.a.listFromMap(this.hardDependencyIdExtensionIdsMap,e).filter(function(e){return t.isEnabled(e)})}},{key:"isExtensionIdCompatibleWithExtensionId",value:function(e,t){var n=J.extensionById(e),r=n._capabilities(),a=n._incompatibleCapabilities(),i=J.extensionById(t),s=i._capabilities(),o=i._incompatibleCapabilities();for(var c in r)if(void 0!==o[c])return!1;for(var u in s)if(void 0!==a[u])return!1;return!0}},{key:"incompatibleExtensionIdsForExtensionId",value:function(e){var t=[],n=this.extensions,r=!0,a=!1,i=void 0;try{for(var s,o=n[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var c=s.value.id();this.isExtensionIdCompatibleWithExtensionId(e,c)||t.push(c)}}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return t=t.filter(function(t){return t!==e}),t=S()(new Set(t))}},{key:"enabledIncompatibleExtensionIdsForExtensionId",value:function(e){var t=this.incompatibleExtensionIdsForExtensionId(e);return t=t.filter(function(e){return J.isEnabled(e)})}},{key:"getIncompatibleExtensionIds",value:function(){var e=this,t=this.getEnabledExtensionIds().map(function(t){return e.incompatibleExtensionIdsForExtensionId(t)});return t=t.flat(),t=S()(new Set(t))}},{key:"isExtensionIdInjectedInExtensionId",value:function(e,t){return this.injectedExtensionIdsForExtensionId(t).includes(e)}},{key:"injectedExtensionIdsForExtensionId",value:function(e){var t=this.targetExtensionIdInjectedExtensionIdsMap[e];return void 0===t?[]:t}},{key:"targetExtensionIdsForInjectedExtensionId",value:function(e){var t=this.injectedExtensionIdTargetExtensionIdsMap[e];return void 0===t?[]:t}},{key:"waitExtensionEnabled",value:function(e){var t,n,r,a,i,s=arguments;return I.a.async(function(o){for(;;)switch(o.prev=o.next){case 0:if(t=s.length>1&&void 0!==s[1]?s[1]:{},n={id:e},t.single=!0,H.a.object(n),H.a.object(t),r=this._get(t,"single",!1),a=this.enabledExtensionsByQuery(n),r&&a.length>1&&Object(H.a)(!1,"unexpected number of extensions in _waitExtensionEnabled ".concat(JSON.stringify(n))),!r||1!==a.length){o.next=12;break}return o.abrupt("return",a[0]);case 12:if(!(a.length>0)){o.next=14;break}return o.abrupt("return",a);case 14:return o.next=16,I.a.awrap(this.waitExtensionManagerEvent("enabled",n));case 16:if(H.a.string(e),i=this.enabledExtensionById(e),H.a.object(i),!r){o.next=23;break}return o.abrupt("return",i);case 23:return o.abrupt("return",[i]);case 24:case"end":return o.stop()}},null,this)}},{key:"waitExtensionManagerEvent",value:function(e,t){var n,r=this,a=arguments;return I.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:return n=a.length>2&&void 0!==a[2]?a[2]:{},H.a.string(e),H.a.object(t),H.a.object(n),i.abrupt("return",new Promise(function(n){var a=r.bind(e,function(e){if(!1!==r.extensionMatchesQuery(e,t)){a();var i=e.id();n(i)}})}));case 5:case"end":return i.stop()}})}},{key:"extensionIds",get:function(){return Object.keys(this.extensionIdExtensionMap)}},{key:"extensions",get:function(){return this.extensionIds.map(function(e){return J.extensionById(e)})}},{key:"enabledExtensionsIds",get:function(){return Object.keys(this.enabledExtensionIdOptionsMap)}},{key:"enabledExtensions",get:function(){return this.enabledExtensionsIds.map(function(e){return J.extensionById(e)})}}]),n}(G.a);W()(q,"CLASS",function(){return"ExtensionManagerClass"});var J=new q;window.__ExtensionManager=J}).call(t,n(13))},386:function(e,t,n){"use strict";n.d(t,"a",function(){return L});var r=n(21),a=(n.n(r),n(22)),i=(n.n(a),n(25)),s=(n.n(i),n(11)),o=(n.n(s),n(12)),c=(n.n(o),n(8)),u=(n.n(c),n(20)),l=(n.n(u),n(18)),d=(n.n(l),n(19)),h=(n.n(d),n(23)),v=n.n(h),f=n(24),p=(n.n(f),n(62)),g=n.n(p),y=n(0),b=n.n(y),m=n(1),k=n.n(m),_=n(6),x=n.n(_),w=n(3),I=n.n(w),A=n(34),S=n.n(A),E=n(7),C=n.n(E),j=n(5),O=n.n(j),D=n(2),T=n(158),M=n(104),F=function(e){function t(){var e,n;b()(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=x()(this,(e=I()(t)).call.apply(e,[this].concat(a))),O()(S()(n),"__scope",null),n}return C()(t,e),k()(t,[{key:"state",value:function(){return T.a.state()}},{key:"put",value:function(e){var t=Array.isArray(e)?e:[e],n=!0,r=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var o=i.value,c=this.scope.className,u=g()({},o,{sender:c});T.a.put(u)}}catch(e){r=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}}},{key:"getFromAction",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return D.a.object(e),D.a.string(t),M.a.get(e,t,n)}},{key:"take",value:function(e){var t,n=arguments;return v.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:return(t=n.length>1&&void 0!==n[1]?n[1]:{}).scope=this.scope,r.next=4,v.a.awrap(T.a.take(e,t));case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}},null,this)}},{key:"putAndWait",value:function(e){var t,n=arguments;return v.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:return(t=n.length>1&&void 0!==n[1]?n[1]:{}).scope=this.scope,r.next=4,v.a.awrap(T.a.putAndWait(e,t));case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}},null,this)}},{key:"subscribe",value:function(e){var t=T.a.subscribe(e);return this.addUnsubscriber(t),t}},{key:"scope",get:function(){return Object(D.a)(this.__scope),this.__scope},set:function(e){Object(D.a)(e),this.__scope=e}}]),t}(n(45).a);O()(F,"CLASS",function(){return"ScopedReduxProxyClass"});var L=new F},387:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(26),a=(n.n(r),n(30)),i=(n.n(a),n(0)),s=n.n(i),o=n(1),c=n.n(o),u=n(6),l=n.n(u),d=n(3),h=n.n(d),v=n(7),f=n.n(v),p=new(function(e){function t(){return s()(this,t),l()(this,h()(t).apply(this,arguments))}return f()(t,e),c()(t,[{key:"isPotentialDowntimeStatusCode",value:function(e){return[this.REQUEST_TIMEOUT,this.TOO_MANY_REQUESTS,this.BAD_GATEWAY,this.SERVICE_UNAVAILABLE,this.GATEWAY_TIMEOUT].includes(e)}},{key:"ENUM",get:function(){return{CONTINUE:100,SWITCHING_PROTOCOLS:101,PROCESSING:102,OK:200,CREATED:201,ACCEPTED:202,NON_AUTHORITATIVE_INFORMATION:203,NO_CONTENT:204,RESET_CONTENT:205,PARTIAL_CONTENT:206,MULTI_STATUS:207,ALREADY_REPORTED:208,IM_USED:226,MULTIPLE_CHOICES:300,MOVED_PERMANENTLY:301,FOUND:302,SEE_OTHER:303,NOT_MODIFIED:304,USE_PROXY:305,SWITCH_PROXY:306,TEMPORARY_REDIRECT:307,PERMANENT_REDIRECT:308,BAD_REQUEST:400,UNAUTHORIZED:401,PAYMENT_REQUIRED:402,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,NOT_ACCEPTABLE:406,PROXY_AUTHENTICATION_REQUIRED:407,REQUEST_TIMEOUT:408,CONFLICT:409,GONE:410,LENGTH_REQUIRED:411,PRECONDITION_FAILED:412,PAYLOAD_TOO_LARGE:413,URI_TOO_LONG:414,UNSUPPORTED_MEDIA_TYPE:415,RANGE_NOT_SATISFIABLE:416,EXPECTATION_FAILED:417,I_AM_A_TEAPOT:418,MISDIRECTED_REQUEST:421,UNPROCESSABLE_ENTITY:422,LOCKED:423,FAILED_DEPENDENCY:424,UPGRADE_REQUIRED:426,PRECONDITION_REQUIRED:428,TOO_MANY_REQUESTS:429,REQUEST_HEADER_FIELDS_TOO_LARGE:431,UNAVAILABLE_FOR_LEGAL_REASONS:451,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,HTTP_VERSION_NOT_SUPPORTED:505,VARIANT_ALSO_NEGOTIATES:506,INSUFFICIENT_STORAGE:507,LOOP_DETECTED:508,NOT_EXTENDED:510,NETWORK_AUTHENTICATION_REQUIRED:511}}}]),t}(n(92).a))},392:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var t=n(11),r=(n.n(t),n(26)),a=(n.n(r),n(60)),i=(n.n(a),n(8)),s=(n.n(i),n(20)),o=(n.n(s),n(17)),c=(n.n(o),n(39)),u=(n.n(c),n(23)),l=n.n(u),d=n(24),h=(n.n(d),n(2)),v=n(116),f=n(158),p=n(734),g=n(351);n(735);function y(e){var t=e.split(".");return{py:"python",html:"xml",htmls:"xml",htm:"xml",htx:"xml",css:"css",less:"css",scss:"css",sass:"css",jsx:"javascript",js:"javascript",json:"javascript",java:"java",txt:"plaintext",md:"markdown",markdown:"markdown",ini:"plaintext",cfg:"plaintext",csv:"plaintext"}[t[t.length-1]]||"plaintext"}function b(){var e,t,n,r,a;return l.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:e=null,t=window.brackets.getModule("editor/EditorManager"),n=window.brackets.getModule("view/MainViewManager"),r=function(){if(void 0!==window.parent.__setPostContainerClipboardHints){var t={},n=e._codeMirror;h.a.object(n);var r=n.getCursor(!0);h.a.object(r);var a=n.getCursor(!1);h.a.object(a);var i=p.a.getPreviousLine(n,r.line,{skipEmptyLines:!0}),s=p.a.getNextLine(n,a.line,{skipEmptyLines:!0});i&&(t.previous=i),s&&(t.next=s);var o=g.a.CODE;h.a.string(o);var c=e.getSelectedText(),u=e.getFile();h.a.object(u);var l=u._name;h.a.string(l);var d=y(l);h.a.string(d);var v={fileName:l,language:d,selection:{start:r,end:a}};Object.keys(t).length>0&&(v.boundaries=t);var f={attachmentType:o,code:c,editor:v};window.parent.__setPostContainerClipboardHints(f)}},null,null,null,a=function(){e&&e._codeMirror.off("copy",r),(e=t.getCurrentFullEditor())&&e._codeMirror.on("copy",r)},n.on("currentFileChange",a),a();case 10:case"end":return i.stop()}})}function m(){var e;return l.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:k(e={}),window.parent.__highlightCode=function(t,n){return _(t,n,e)};case 3:case"end":return t.stop()}})}function k(e){var t,n,r,a,i,s,o,c;return l.a.async(function(u){for(;;)switch(u.prev=u.next){case 0:t=null,n=window.brackets.getModule("editor/EditorManager"),r=window.brackets.getModule("view/MainViewManager"),a=function(t){"cursorActivity"!==t||!0!==e._skipClearHighlightsOnCursorChange?x(e):delete e._skipClearHighlightsOnCursorChange},i=null,s=null,o=null,c=function(){if(t&&(t._codeMirror.off("change",i),t._codeMirror.off("mousedown",s),t._codeMirror.off("cursorActivity",o)),t=n.getCurrentFullEditor()){var r=t.getFile()._name;h.a.string(r),r!==e.currentHighlightedFileName&&x(e),i=function(){return a("change")},s=function(){return a("mousedown")},o=function(){return a("cursorActivity")},t._codeMirror.on("change",i),t._codeMirror.on("mousedown",s),t._codeMirror.on("cursorActivity",o)}},r.on("currentFileChange",c),c();case 10:case"end":return u.stop()}})}function _(e,t,n){var r,a,i,s,o,c,u,d,v,f,g,y,b,m,k,_,I,S,E,C,j,O,D,T,M,F,L,N,P,R;return l.a.async(function(B){for(;;)switch(B.prev=B.next){case 0:return h.a.string(e),h.a.object(t),h.a.object(n),x(n,{skipClearFeedHighlights:!0}),r=t.fileName,h.a.string(r),a=t.selection,h.a.object(a),i=a.start,h.a.object(i),s=a.end,h.a.object(s),n.currentHighlightedFileName=r,B.next=15,l.a.awrap(w(r));case 15:for(o=[],c=window.brackets.getModule("editor/EditorManager"),u=c.getCurrentFullEditor(),d=u._codeMirror,h.a.object(d),v=d.getSearchCursor(e);v.findNext();)f=v.from(),g=v.to(),y={start:f,end:g},b=Math.abs(i.line-y.start.line),t.boundaries?(m=p.a.getPreviousLine(d,f.line,{skipEmptyLines:!0}),k=p.a.getNextLine(d,g.line,{skipEmptyLines:!0}),_=m?m.code:null,I=k?k.code:null,S=t.boundaries.previous?t.boundaries.previous.code:null,E=t.boundaries.next?t.boundaries.next.code:null,C=_===S||I===E,_===S&&I===E?o.push({type:"bounded:full",selection:y,distance:b}):C?o.push({type:"bounded:partial",selection:y,distance:b}):o.push({type:"unbounded",selection:y,distance:b})):o.push({type:"unbounded",selection:y,distance:b});if(0!==o.length){B.next=26;break}return A("No match found"),x(n),B.abrupt("return");case 26:j=null,O=0,D=o;case 28:if(!(O<D.length)){B.next=49;break}if(0!==(T=D[O]).distance){B.next=33;break}return j=T,B.abrupt("break",49);case 33:if(null!==j){B.next=36;break}return j=T,B.abrupt("continue",46);case 36:if(M=!1,"bounded:full"===T.type&&["bounded:partial","unbounded"].includes(j.type)&&(M=!0),"bounded:partial"===T.type&&["unbounded"].includes(j.type)&&(M=!0),F=T.type===j.type,!M){B.next=43;break}return j=T,B.abrupt("continue",46);case 43:if(!(F&&T.distance<j.distance)){B.next=46;break}return j=T,B.abrupt("continue",46);case 46:O++,B.next=28;break;case 49:L=j.selection,h.a.object(L),N=0===j.distance?"rgba(115,219,0,.25)":"rgba(255,219,0,.25)",n.currentHighlight=d.markText(L.start,L.end,{css:"background: ".concat(N)}),P=L.start.line,h.a.integer(P),R=L.start.ch,h.a.integer(R),n._skipClearHighlightsOnCursorChange=!0,u.setCursorPos(P,R,!0),u.focus();case 60:case"end":return B.stop()}})}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h.a.object(e),h.a.object(t),e.currentHighlight&&e.currentHighlight.clear(),delete e.currentHighlight,delete e.currentHighlightedFileName,!0!==t.skipClearFeedHighlights&&void 0!==window.parent.__clearFeedHighlights&&window.parent.__clearFeedHighlights()}function w(t){var n,r,a,i,s,o;return l.a.async(function(c){for(;;)switch(c.prev=c.next){case 0:if(h.a.string(t),n=e("#editor").attr("data-project-id"),r="/project/".concat(n,"/").concat(t),a=window.brackets.getModule("editor/EditorManager"),i=a.getCurrentFullEditor(),s=i.getFile(),o=s._path,h.a.string(o),r!==o){c.next=10;break}return c.abrupt("return");case 10:return c.abrupt("return",new Promise(function(e,t){Bramble.getFileSystem().stat(r,function(n,a){if(n)return console.warn(n),void t(n);window.brackets.getModule("command/CommandManager").execute("file.open",{fullPath:r}).done(function(){return e()})})}));case 11:case"end":return c.stop()}})}var I=null;function A(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h.a.string(t),h.a.object(n);var r=void 0!==n.timeout?n.timeout:2e3,a=e(".bramble-ide__flash-banner");a.html(t),a.addClass("bramble-ide__flash-banner--visible"),I&&clearTimeout(I),I=setTimeout(function(){e(".bramble-ide__flash-banner").removeClass("bramble-ide__flash-banner--visible")},r)}var S=e(document);S.on("bramble-ready",function(){l.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:b(),m();case 2:case"end":return e.stop()}})}),window.__triggerBrambleReady=function(){return S.trigger("bramble-ready")},l.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.awrap(f.a.bootstrap());case 2:return e.next=4,l.a.awrap(v.a.bootstrap());case 4:case"end":return e.stop()}})}.call(t,n(13))},45:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return ne});var r=n(21),a=(n.n(r),n(22)),i=(n.n(a),n(25)),s=(n.n(i),n(11)),o=(n.n(s),n(99)),c=(n.n(o),n(26)),u=(n.n(c),n(12)),l=(n.n(u),n(311)),d=(n.n(l),n(8)),h=(n.n(d),n(91)),v=(n.n(h),n(20)),f=(n.n(v),n(17)),p=(n.n(f),n(30)),g=(n.n(p),n(18)),y=(n.n(g),n(39)),b=(n.n(y),n(100)),m=(n.n(b),n(19)),k=(n.n(m),n(312)),_=(n.n(k),n(23)),x=n.n(_),w=n(24),I=(n.n(w),n(0)),A=n.n(I),S=n(1),E=n.n(S),C=n(6),j=n.n(C),O=n(3),D=n.n(O),T=n(82),M=n.n(T),F=n(7),L=n.n(F),N=n(5),P=n.n(N),R=n(2),B=n(55),U=n(215),W=n.n(U),H=n(261),G=n.n(H),V=n(594),$=n.n(V),z=n(597),q=n(610),J=n(664),Y=n.n(J),Q=n(336),X=n(689),K=n(345),Z=n(693),ee=n(230),te={},ne=function(t){function n(){var e;return A()(this,n),(e=j()(this,D()(n).call(this))).__instanceId=e._classSequentialUUID(),e.__objectURLs=[],e}return L()(n,t),E()(n,[{key:"init",value:function(){for(var e,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];(e=M()(D()(n.prototype),"init",this)).call.apply(e,[this].concat(r)),this.trigger("initialized")}},{key:"uuid",value:function(){return this.constructor.uuid()}},{key:"onDestroy",value:function(){M()(D()(n.prototype),"onDestroy",this).call(this),this.observer.unbindAll();var e=!0,t=!1,r=void 0;try{for(var a,i=this.__objectURLs[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var s=a.value;URL.revokeObjectURL(s)}}catch(e){t=!0,r=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}}},{key:"bind",value:function(e,t){return this.observer.bind(e,t)}},{key:"trigger",value:function(e,t){this.observer.trigger(e,t)}},{key:"unbind",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.observer.unbind(e,t)}},{key:"unbindAll",value:function(){this.observer.unbindAll()}},{key:"addUnsubscriber",value:function(e){this.observer.addUnsubscriber(e),B.a.add("observers:subscribed",1),B.a.add("observers:active",1)}},{key:"removeUnsubscriber",value:function(e){this.observer.removeUnsubscriber(e),B.a.add("observers:unsubscribed",1),B.a.add("observers:active",-1)}},{key:"getParentClassName",value:function(){var e=this.getParentClassNames();return e.length>0?e[0]:null}},{key:"getParentClassNames",value:function(){var e=this.className;if(void 0!==te[e])return te[e];for(var t=0,n=[],r=this.constructor;r&&(Object(R.a)(t<100,"infinite loop detected while retrieving parent class names"),void 0!==r.CLASS);){var a=r.CLASS();r=Object.getPrototypeOf(r),a!==e&&!1===n.includes(a)&&n.push(a),t+=1}return te[e]=n,n}},{key:"createObjectURL",value:function(e){var t=URL.createObjectURL(e);return this.__objectURLs.push(t),t}},{key:"domBind",value:function(t,n,r){var a=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=n;Object(R.a)(t),R.a.string(s),R.a.function(r);var o={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"};i.disableTouchEventMapping||(s="",n.split(" ").forEach(function(e){var t=o[e];s+=t?"".concat(e," ").concat(t," "):"".concat(e," ")}));var c=function(t){var n=e(this),a=t;if(!i.disableTouchEventMapping){if(o[a.type]&&Z.a.supportsTouchEvents())return;if(Object.values(o).includes(a.type)){var s=a.originalEvent.changedTouches[0],c=Object(z.a)(o)[a.type];(a=new MouseEvent(c,{bubbles:!0,cancelable:!0,screenX:s.screenX,screenY:s.screenY,clientX:s.clientX,clientY:s.clientY}))._originalTarget=t.target,a._originalTouchEvent=t}}return r(a,n)},u=e(t);i.selector?u.on(s,i.selector,c):u.bind(s,c);var l=function e(){i.selector?u.off(s,i.selector,c):u.unbind(s,c),a.removeUnsubscriber(e)};return this.addUnsubscriber(l),(void 0!==i.unsubscribers?i.unsubscribers:[]).push(l),l}},{key:"setTimeout",value:function(e,t){var n=this;R.a.function(e),R.a.number(t);var r=window.setTimeout(e,t),a=function e(){window.clearTimeout(r),n.removeUnsubscriber(e)};return this.addUnsubscriber(a),a}},{key:"setInterval",value:function(e,t){var n=this;R.a.function(e),R.a.number(t);var r=window.setInterval(e,t),a=function e(){window.clearInterval(r),n.removeUnsubscriber(e)};return this.addUnsubscriber(a),a}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return this._get(this,e,t)}},{key:"_get",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return R.a.object(e),R.a.string(t),W.a.get(e,t,n)}},{key:"set",value:function(e,t){this._set(this,e,t)}},{key:"_set",value:function(e,t,n){R.a.object(e),R.a.string(t),Object(R.a)(void 0!==n),W.a.set(e,t,n)}},{key:"del",value:function(e){this._del(this,e)}},{key:"_del",value:function(e,t){R.a.object(e),R.a.string(t),W.a.del(e,t)}},{key:"hash",value:function(e){var t=B.a.addTimeStart("hash"),n="string"==typeof e?e:JSON.stringify(e),r=$()(n),a="".concat(r);return B.a.addTimeEnd(t),a}},{key:"clone",value:function(){return this._clone(this)}},{key:"_clone",value:function(e){var t=B.a.addTimeStart("clone"),n=Object(q.a)(e);return B.a.addTimeEnd(t),n}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return this._get(this,e,t)}},{key:"equals",value:function(e){return this._equals(this,e)}},{key:"_equals",value:function(e,t){return G()(e,t)}},{key:"delay",value:function(e){return x.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return R.a.integer(e),t.next=3,x.a.awrap(new Promise(function(t){return setTimeout(t,e)}));case 3:case"end":return t.stop()}})}},{key:"wait",value:function(e){return x.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return R.a.integer(e),t.next=3,x.a.awrap(new Promise(function(t){return setTimeout(t,e)}));case 3:case"end":return t.stop()}})}},{key:"waitCondition",value:function(e){var t,n,r=arguments;return x.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:t=r.length>1&&void 0!==r[1]?r[1]:{},R.a.function(e),n=this._get(t,"delay",50),R.a.integer(n);case 4:if(!0!==e()){a.next=8;break}return a.abrupt("return");case 8:return a.next=10,x.a.awrap(this.wait(n));case 10:a.next=4;break;case 12:case"end":return a.stop()}},null,this)}},{key:"getCookie",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;R.a.string(e);var n=Y.a.get(e);return void 0===n?t:n}},{key:"setCookie",value:function(e,t){R.a.string(e),Y.a.set(e,t)}},{key:"getBrowserCache",value:function(e,t){var n,r=arguments;return x.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>2&&void 0!==r[2]?r[2]:void 0,e.abrupt("return",n);case 2:case"end":return e.stop()}})}},{key:"setBrowserCache",value:function(e,t,n){return x.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}})}},{key:"_classSequentialUUID",value:function(){return this.constructor._classSequentialUUID()}},{key:"logger",get:function(){return Q.a.scope=this,Q.a}},{key:"observer",get:function(){return X.a.scope=this,X.a}}],[{key:"uuid",value:function(){var e=K.a.shortUniqueId();return e}},{key:"_classSequentialUUID",value:function(){var e=this.className,t=K.a.sequentialId({namespace:e});return"".concat(e,":").concat(t)}}]),n}(ee.a);P()(ne,"CLASS",function(){return"CoreClass"})}).call(t,n(13))},55:function(e,t,n){"use strict";n.d(t,"a",function(){return I});var r=n(11),a=(n.n(r),n(99)),i=(n.n(a),n(26)),s=(n.n(i),n(101)),o=(n.n(s),n(48)),c=(n.n(o),n(77)),u=(n.n(c),n(30)),l=(n.n(u),n(78)),d=(n.n(l),n(100)),h=(n.n(d),n(62)),v=n.n(h),f=n(49),p=n.n(f),g=n(0),y=n.n(g),b=n(1),m=n.n(b),k=n(5),_=n.n(k),x=n(2),w=n(61),I=new(function(){function e(){y()(this,e),_()(this,"statId",0),_()(this,"timerKeyMaxEndTimeMap",{}),_()(this,"timerIdKeyMap",{}),_()(this,"timerIdTimeMap",{}),_()(this,"snapshot",{}),_()(this,"counters",{})}return m()(e,[{key:"isBooting",value:function(){return void 0!==window.__BOOTING}},{key:"reset",value:function(){this.snapshot={},this.counters={}}},{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Object(x.a)(!1===e.includes("."),"invalid stat key '".concat(e,"', cannot include '.'")),x.a.string(e);var n=void 0!==this.counters[e]?this.counters[e]:0;if(this.counters[e]=n+t,!1!==this.isBooting()){var r="".concat(this.BOOT_KEY_PREFIX,":").concat(e),a=void 0!==this.counters[r]?this.counters[r]:0;this.counters[r]=a+t}}},{key:"addTimeStart",value:function(e){x.a.string(e);var t=this._generateStatId();return this.timerIdKeyMap[t]=e,this.timerIdTimeMap[t]=Date.now(),t}},{key:"addTimeEnd",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};x.a.integer(e),x.a.object(t);var n=this.timerIdKeyMap[e],r=this.timerKeyMaxEndTimeMap[n]||0,a=this.timerIdTimeMap[e];r&&a<r&&(a=r);var i=Date.now();i>r&&(this.timerKeyMaxEndTimeMap[n]=i);var s=i-a;s=s>0?s:0,delete this.timerIdKeyMap[e],delete this.timerIdTimeMap[n];var o="".concat(n,":").concat(this.TIME_KEY_SUFFIX);return this.add(o,s),s}},{key:"log",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(x.a.object(e),!1!==w.a.isDevelopment()&&!w.a.isTesting()){var t=void 0===e.includeDiff||e.includeDiff,n=void 0!==e.includePrefix?e.includePrefix:null,r=void 0!==e.includeSuffix?e.includeSuffix:null,a=void 0!==e.excludePrefix?e.excludePrefix:null,i=void 0!==e.excludeSuffix?e.excludeSuffix:null,s=this.stats,o=this._diff(s,this.snapshot);this.snapshot=s;for(var c={},u=0,l=Object.entries(s);u<l.length;u++){var d=p()(l[u],2),h=d[0],v=d[1];if((!n||!1!==h.startsWith(n))&&!(r&&!1===h.endsWith(r)||a&&h.startsWith(a)||i&&h.endsWith(i))){var f=o[h];c[h]=!0===t&&f?v+" ("+(f>=0?"+"+f:"-"+f)+")":v}}console.table(c)}}},{key:"getBootStatsMap",value:function(){for(var e={},t=0,n=Object.entries(this.stats);t<n.length;t++){var r=p()(n[t],2),a=r[0],i=r[1];!1!==a.startsWith(this.BOOT_KEY_PREFIX)&&(!1!==a.endsWith(this.TIME_KEY_SUFFIX)&&(e[a]=i))}return e}},{key:"_diff",value:function(e,t){for(var n={},r=0,a=Object.entries(e);r<a.length;r++){var i=p()(a[r],2),s=i[0],o=i[1],c=t[s];void 0!==c&&(n[s]=o-c)}return n}},{key:"getAngularJSWatchers",value:function(e){function t(e){return e&&e.$$watchers||[]}return function e(n){var r=t(n.data().$isolateScope),a=t(n.data().$scope).concat(r);return angular.forEach(n.children(),function(t){a=a.concat(e(angular.element(t)))}),a}(e=angular.element(e||document.documentElement))}},{key:"_generateStatId",value:function(){return this.statId+=1,this.statId}},{key:"BOOT_KEY_PREFIX",get:function(){return"__boot"}},{key:"TIME_KEY_SUFFIX",get:function(){return"__time"}},{key:"stats",get:function(){var e=this.getAngularJSWatchers().length;return v()({},this.counters,{watchers:e})}}]),e}());window.__Stats=I},61:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var r=n(26),a=(n.n(r),n(30)),i=(n.n(a),n(78)),s=(n.n(i),n(0)),o=n.n(s),c=n(1),u=n.n(c),l=n(2),d=n(187),h=["www.tynker.com","camps.tynker.com","sylvan.tynker.com","www.hifiveinventor.com"],v=new(function(){function e(){o()(this,e);Object(l.a)(["development","production"].includes("production"),"Webpack TYNKER_ENVIRONMENT variable not found"),this._environment="production"}return u()(e,[{key:"getEnvironment",value:function(){return this._environment}},{key:"isDevelopment",value:function(){return"development"===this.getEnvironment()}},{key:"isProduction",value:function(){return"production"===this.getEnvironment()}},{key:"isProductionServer",value:function(){for(var e=window.location.href,t=0,n=h;t<n.length;t++){var r="https://".concat(n[t]);if(e.startsWith(r))return!0}return!1}},{key:"isDevelopmentServer",value:function(){return!this.isProductionServer()}},{key:"isTesting",value:function(){return!0===d.a.get("__testScript",!1)||null!=window.location.href&&!!window.location.href.includes("__testScript=true")}},{key:"isDebugging",value:function(){return!1}}]),e}())},689:function(e,t,n){"use strict";n.d(t,"a",function(){return k});var r=n(21),a=(n.n(r),n(22)),i=(n.n(a),n(25)),s=(n.n(i),n(41)),o=(n.n(s),n(12)),c=(n.n(o),n(8)),u=(n.n(c),n(18)),l=(n.n(u),n(19)),d=(n.n(l),n(50)),h=n.n(d),v=n(0),f=n.n(v),p=n(1),g=n.n(p),y=n(5),b=n.n(y),m=n(2),k=new(function(){function e(){f()(this,e),b()(this,"__scope",null)}return g()(e,[{key:"bind",value:function(e,t){var n=this;Object(m.a)(e),Object(m.a)(t);var r=this._getEventCallbacks(e);r.push(t),this.eventCallbacksMap[e]=r;var a=function r(){n.unbind(e,t),n.removeUnsubscriber(r)};return this.addUnsubscriber(a),a}},{key:"trigger",value:function(e,t){Object(m.a)(e);var n=this._getEventCallbacks(e),r=!0,a=!1,i=void 0;try{for(var s,o=n[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var c=s.value;Array.isArray(t)?c.apply(void 0,h()(t)):c(t)}}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}}},{key:"unbind",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(m.a)(e);var n=this._getEventCallbacks(e);(n=t?n.filter(function(e){return e!==t}):[]).length>0?this.eventCallbacksMap[e]=n:delete this.eventCallbacksMap[e]}},{key:"unbindAll",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,a=this.unsubscribers[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){(0,r.value)()}}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}this.unsubscribers=[],this.eventCallbacksMap={}}},{key:"addUnsubscriber",value:function(e){Object(m.a)(e),this.unsubscribers.push(e)}},{key:"removeUnsubscriber",value:function(e){this.unsubscribers=this.unsubscribers.filter(function(t){return t!==e})}},{key:"_getEventCallbacks",value:function(e){return void 0!==this.eventCallbacksMap[e]?this.eventCallbacksMap[e]:[]}},{key:"scope",get:function(){return Object(m.a)(this.__scope),this.__scope},set:function(e){Object(m.a)(e),this.__scope=e}},{key:"eventCallbacksMap",get:function(){var e=this.scope;return e.__observerEventCallbacksMap=e.__observerEventCallbacksMap||{},e.__observerEventCallbacksMap},set:function(e){this.scope.__observerEventCallbacksMap=e}},{key:"unsubscribers",get:function(){var e=this.scope;return e.__observerUnsubscribers=e.__observerUnsubscribers||[],e.__observerUnsubscribers},set:function(e){this.scope.__observerUnsubscribers=e}}]),e}())},693:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(71),a=(n.n(r),n(17)),i=(n.n(a),n(39)),s=(n.n(i),n(0)),o=n.n(s),c=n(1),u=n.n(c),l=new(function(){function e(){o()(this,e)}return u()(e,[{key:"supportsTouchEvents",value:function(){var e=" -webkit- -moz- -o- -ms- ".split(" ");return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)||function(e){return window.matchMedia(e).matches}(["(",e.join("touch-enabled),("),"heartz",")"].join(""))}}]),e}())},694:function(e,t,n){"use strict";n.d(t,"a",function(){return E});var r=n(21),a=(n.n(r),n(22)),i=(n.n(a),n(25)),s=(n.n(i),n(12)),o=(n.n(s),n(8)),c=(n.n(o),n(18)),u=(n.n(c),n(19)),l=(n.n(u),n(0)),d=n.n(l),h=n(1),v=n.n(h),f=n(6),p=n.n(f),g=n(3),y=n.n(g),b=n(82),m=n.n(b),k=n(7),_=n.n(k),x=n(5),w=n.n(x),I=n(2),A=n(231),S=function(e){function t(){var e;return d()(this,t),(e=p()(this,y()(t).call(this))).actionTypeActionsIdMap={},e.actionsIdActionTypes={},e}return _()(t,e),v()(t,[{key:"register",value:function(e,n){m()(y()(t.prototype),"register",this).call(this,e,n);var r=n.actionTypes(),a=!0,i=!1,s=void 0;try{for(var o,c=r[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var u=o.value;Object(I.a)(void 0===this.actionTypeActionsIdMap[u]),this.actionTypeActionsIdMap[u]=e,A.a.addToMapList(this.actionsIdActionTypes,e,u)}}catch(e){i=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(i)throw s}}this.logger.log("registered ".concat(e))}},{key:"unregister",value:function(e){m()(y()(t.prototype),"unregister",this).call(this,e);var n=this.actionsIdActionTypes[e];I.a.array(n);var r=!0,a=!1,i=void 0;try{for(var s,o=n[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var c=s.value;Object(I.a)(void 0!==this.actionTypeActionsIdMap[c]),delete this.actionTypeActionsIdMap[c]}}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}delete this.actionsIdActionTypes[e],this.logger.log("unregistered ".concat(e))}},{key:"isActionTypeRegistered",value:function(e){return I.a.string(e),void 0!==this.actionTypeActionsIdMap[e]}}]),t}(n(232).a);w()(S,"CLASS",function(){return"ActionsRegistryClass"});var E=new S;window.__ActionsRegistry=E},695:function(e,t,n){"use strict";n.d(t,"a",function(){return N});var r=n(21),a=(n.n(r),n(22)),i=(n.n(a),n(25)),s=(n.n(i),n(11)),o=(n.n(s),n(41)),c=(n.n(o),n(12)),u=(n.n(c),n(48)),l=(n.n(u),n(8)),d=(n.n(l),n(18)),h=(n.n(d),n(19)),v=(n.n(h),n(49)),f=n.n(v),p=n(0),g=n.n(p),y=n(1),b=n.n(y),m=n(6),k=n.n(m),_=n(34),x=n.n(_),w=n(3),I=n.n(w),A=n(82),S=n.n(A),E=n(7),C=n.n(E),j=n(5),O=n.n(j),D=n(696),T=n(2),M=n(55),F=n(61),L=function(e){function t(){var e,n;g()(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=k()(this,(e=I()(t)).call.apply(e,[this].concat(a))),O()(x()(n),"actionTypeReducerCalls",{}),n}return C()(t,e),b()(t,[{key:"register",value:function(e,n){S()(I()(t.prototype),"register",this).call(this,e,n);var r=n,a=n.reducers();T.a.object(a);for(var i=0,s=Object.entries(a);i<s.length;i++){var o=f()(s[i],2),c=o[0],u=o[1];Object(T.a)(c&&"string"==typeof c&&"undefined"!==c,"invalid action type '".concat(c,"' in reducer '").concat(e,"'")),Object(T.a)(u&&"function"==typeof u);var l=this.actionTypeReducerCalls[c]||[];l.push({method:u,methodScope:r}),this.actionTypeReducerCalls[c]=l}this.logger.log("registered ".concat(e))}},{key:"unregister",value:function(e){for(var n=this,r=S()(I()(t.prototype),"unregister",this).call(this,e).reducers(),a=function(){var e=f()(s[i],2),t=e[0],r=e[1];Object(T.a)(t&&"string"==typeof t),Object(T.a)(r&&"function"==typeof r);var a=n.actionTypeReducerCalls[t]||[];a=a.filter(function(e){var t=e.method;e.methodScope;return t!==r}),n.actionTypeReducerCalls[t]=a},i=0,s=Object.entries(r);i<s.length;i++)a();this.logger.log("unregistered ".concat(e))}},{key:"reduce",value:function(e,t){var n=this,r=M.a.addTimeStart("ReducerRegistry:reduce"),a=Object(D.a)(e,function(e){var r=n.actionTypeReducerCalls[t.type]||[],a=!0,i=!1,s=void 0;try{for(var o,c=r[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var u=o.value,l=u.method;u.methodScope.callReducerMethod(l,e,t)}}catch(e){i=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(i)throw s}}});M.a.addTimeEnd(r);if(F.a.isDebugging())try{JSON.stringify(a)}catch(e){Object(T.a)(!1)}return a!==e?a:e}}]),t}(n(232).a);O()(L,"CLASS",function(){return"ReducerRegistryClass"});var N=new L},697:function(e,t,n){"use strict";n.d(t,"a",function(){return y});var r=n(0),a=n.n(r),i=n(1),s=n.n(i),o=n(6),c=n.n(o),u=n(3),l=n.n(u),d=n(7),h=n.n(d),v=n(5),f=n.n(v),p=n(2),g=function(e){function t(){return a()(this,t),c()(this,l()(t).apply(this,arguments))}return h()(t,e),s()(t,[{key:"set",value:function(e,t){return p.a.string(e),this.action(this.SET,{path:e,value:t})}},{key:"SET",get:function(){return this.actionType("SET")}}]),t}(n(698).a);f()(g,"CLASS",function(){return"StateActionsClass"});var y=new g},698:function(e,t,n){"use strict";n.d(t,"a",function(){return R});var r=n(21),a=(n.n(r),n(22)),i=(n.n(a),n(25)),s=(n.n(i),n(699)),o=(n.n(s),n(12)),c=(n.n(o),n(700)),u=(n.n(c),n(311)),l=(n.n(u),n(8)),d=(n.n(l),n(17)),h=(n.n(d),n(233)),v=(n.n(h),n(18)),f=(n.n(v),n(43)),p=(n.n(f),n(19)),g=(n.n(p),n(62)),y=n.n(g),b=n(0),m=n.n(b),k=n(1),_=n.n(k),x=n(6),w=n.n(x),I=n(34),A=n.n(I),S=n(3),E=n.n(S),C=n(82),j=n.n(C),O=n(7),D=n.n(O),T=n(5),M=n.n(T),F=n(2),L=n(55),N=n(703),P=n(104),R=function(e){function t(){var e;return m()(this,t),e=w()(this,E()(t).call(this)),M()(A()(e),"singleton",!0),L.a.add("actions:constructed",1),e}return D()(t,e),_()(t,[{key:"onInit",value:function(){j()(E()(t.prototype),"onInit",this).call(this),L.a.add("actions:active",1),L.a.add("actions:initialized",1)}},{key:"onDestroy",value:function(){j()(E()(t.prototype),"onDestroy",this).call(this),L.a.add("actions:active",-1),L.a.add("actions:destroyed",1)}},{key:"actionType",value:function(e){return e}},{key:"action",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};F.a.string(e),F.a.object(t);var n=P.a.create(e,t);return n}},{key:"actionTypes",value:function(){var e=this,t=new Set;!function n(r){if(r){var a=Object.getOwnPropertyNames(r),i=!0,s=!1,o=void 0;try{for(var c,u=a[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var l=c.value;if("constructor"!==l&&l.toUpperCase()===l&&"IDE"!==l){var d=e[l];"string"==typeof d&&t.add(d)}}}catch(e){s=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(s)throw o}}n(Object.getPrototypeOf(r))}}(Object.getPrototypeOf(this));var n=Array.from(t);return n}},{key:"actions",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};F.a.object(t);var n=new Set;!function e(t){if(t){var r=Object.getOwnPropertyNames(t),a=!0,i=!1,s=void 0;try{for(var o,c=r[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var u=o.value;if("constructor"!==u&&u.toUpperCase()===u){var l=u.toLowerCase();l=l.replace(/_/g,"-");var d=t[l=N.a.dashToCamelcase(l)];d&&(Object(F.a)(d instanceof Function),n.add(l))}}}catch(e){i=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(i)throw s}}e(Object.getPrototypeOf(t))}}(Object.getPrototypeOf(this));for(var r=Array.from(n),a=this.className,i=t.senderType,s={},o=function(){var n=u[c],r=e[n];s[n]=function(n,s,o,c,u){var l=r.apply(e,[n,s,o,c,u]),d=y()({},l,{sender:a});return i&&(d.senderType=t.senderType),d}},c=0,u=r;c<u.length;c++)o();return s}}]),t}(n(45).a);M()(R,"CLASS",function(){return"ActionsClass"})},703:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(17),a=(n.n(r),n(43)),i=(n.n(a),n(103)),s=(n.n(i),n(0)),o=n.n(s),c=n(1),u=n.n(c),l=new(function(){function e(){o()(this,e)}return u()(e,[{key:"slugify",value:function(e){var t=e.trim().toLowerCase();return t=(t=t.replace(/[^a-zA-Z0-9]/g,"-")).replace(/--+/g,"-")}},{key:"dashToCamelcase",value:function(e){return e.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})}},{key:"camelcaseToDash",value:function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})}}]),e}())},705:function(e,t,n){"use strict";n.d(t,"a",function(){return C});var r,a,i,s,o=n(48),c=(n.n(o),n(706)),u=(n.n(c),n(49)),l=n.n(u),d=n(0),h=n.n(d),v=n(1),f=n.n(v),p=n(6),g=n.n(p),y=n(3),b=n.n(y),m=n(7),k=n.n(m),_=n(5),x=n.n(_),w=n(707),I=n.n(w),A=n(2),S=n(708),E=n(710),C=new(r=Object(S.a)(),s=i=function(e){function t(){return h()(this,t),g()(this,b()(t).apply(this,arguments))}return k()(t,e),f()(t,[{key:"set",value:function(e,t){var n=t.state,r=this.getFromAction(e,"path");A.a.string(r);var a=this.getFromAction(e,"value");if(""===r){A.a.object(a);for(var i=0,s=Object.entries(a);i<s.length;i++){var o=l()(s[i],2),c=o[0],u=o[1];n[c]=u}}else this._set(n,r,a)}}]),t}(E.a),x()(i,"CLASS",function(){return"StateReducerClass"}),a=s,I()(a.prototype,"set",[r],Object.getOwnPropertyDescriptor(a.prototype,"set"),a.prototype),a)},708:function(e,t,n){"use strict";t.a=function(e){return function(t,n,r){e=e||function(e){var t=Object(c.a)(e).split(" ").join("_").toUpperCase();e.startsWith("_")&&(t="_".concat(t));return t}(n),o.a.string(e);var a=t[n];return o.a.function(a),void 0===t._actionTypeDecoratedReducerMethodMap&&(t._actionTypeDecoratedReducerMethodMap={}),t._actionTypeDecoratedReducerMethodMap[e]=a,r}};var r=n(71),a=(n.n(r),n(17)),i=(n.n(a),n(39)),s=(n.n(i),n(78)),o=(n.n(s),n(2)),c=n(709)},710:function(e,t,n){"use strict";n.d(t,"a",function(){return E});var r=n(48),a=(n.n(r),n(62)),i=n.n(a),s=n(49),o=n.n(s),c=n(0),u=n.n(c),l=n(1),d=n.n(l),h=n(6),v=n.n(h),f=n(34),p=n.n(f),g=n(3),y=n.n(g),b=n(82),m=n.n(b),k=n(7),_=n.n(k),x=n(5),w=n.n(x),I=n(2),A=n(104),S=n(55),E=function(e){function t(){var e;return u()(this,t),e=v()(this,y()(t).call(this)),w()(p()(e),"singleton",!0),S.a.add("reducers:constructed",1),e}return _()(t,e),d()(t,[{key:"onInit",value:function(){m()(y()(t.prototype),"onInit",this).call(this),S.a.add("reducers:active",1),S.a.add("reducers:initialized",1)}},{key:"onDestroy",value:function(){m()(y()(t.prototype),"onDestroy",this).call(this),S.a.add("reducers:active",-1),S.a.add("reducers:destroyed",1)}},{key:"reducers",value:function(){var e={};if(this._actionTypeDecoratedReducerMethodMap)for(var t=0,n=Object.entries(this._actionTypeDecoratedReducerMethodMap);t<n.length;t++){var r=o()(n[t],2),a=r[0],i=r[1];I.a.string(a),I.a.function(i);var s=this.namespacedActionType(a);I.a.string(s),e[s]=i}return e}},{key:"getReducerMethodParams",value:function(e){return{state:e}}},{key:"callReducerMethod",value:function(e,t,n){var r=this.getReducerMethodParams(t),a=n.payload;for(var s in I.a.object(a),a)Object(I.a)(void 0===r[s],"cannot use reserved key in action payload: ".concat(s));var o=i()({},r,a);e.call(this,n,o)}},{key:"getFromAction",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return Object(I.a)(e&&t),A.a.get(e,t,n)}},{key:"namespacedActionType",value:function(e){return I.a.string(e),e}}]),t}(n(45).a);w()(E,"CLASS",function(){return"ReducerClass"})},711:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r=n(38),a=(n.n(r),n(0)),i=n.n(a),s=n(1),o=n.n(s),c=n(6),u=n.n(c),l=n(3),d=n.n(l),h=n(7),v=n.n(h),f=n(235),p=n(104),g=function(e){function t(e){var n;i()(this,t);var r="redux action failed: ".concat(JSON.stringify(e));return(n=u()(this,d()(t).call(this,r))).name="ReduxActionFailedException",n.action=e,n}return v()(t,e),o()(t,[{key:"getInnerException",value:function(){return p.a.get(this.action,"exception")}},{key:"getCoreException",value:function(){for(var e=this.getInnerException();e instanceof t;){var n=e.getInnerException();if(null==n)break;e=n}return e}}]),t}(f.a)},730:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(126),a=n(237),i=function(){return{restrict:"A",link:function(e,t,n){var i=n.lazySrc;if(i){var s=angular.element(t);s.attr("src","data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),r.a.waitVisible(s).then(function(){s.attr("src",i),s.addClass("lazy-src--resolved");var e=s[0];e.onload=function(){s.addClass("lazy-src--loaded");var t=n.lazyCacheId,r=t?a.a.get(t):null;null!=r&&r.set(i,e)},e.onerror=function(){return s.addClass("lazy-src--error")}})}}}}},731:function(e,t,n){"use strict";n.d(t,"a",function(){return k});var r=n(21),a=(n.n(r),n(22)),i=(n.n(a),n(25)),s=(n.n(i),n(12)),o=(n.n(s),n(84)),c=(n.n(o),n(349)),u=(n.n(c),n(350)),l=(n.n(u),n(8)),d=(n.n(l),n(18)),h=(n.n(d),n(19)),v=(n.n(h),n(0)),f=n.n(v),p=n(1),g=n.n(p),y=n(5),b=n.n(y),m=n(2),k=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f()(this,e),b()(this,"id",null),b()(this,"cache",{}),b()(this,"keys",[]),b()(this,"size",0),b()(this,"maxSize",Number.MAX_SAFE_INTEGER),b()(this,"purgeSize",10),b()(this,"hits",0),b()(this,"misses",0),b()(this,"hitRate",0),m.a.string(t),m.a.object(n),this.id=t,n.maxSize&&(this.maxSize=n.maxSize),n.purgeSize&&(this.purgeSize=n.purgeSize),this.clear()}return g()(e,[{key:"clear",value:function(){this.cache={},this.keys=[],this.size=0,this.hits=0,this.misses=0,this.hitRate=0}},{key:"has",value:function(e){var t=void 0!==this.cache[e];return t?(this.hits+=1,this._updateHitRate()):(this.misses+=1,this._updateHitRate()),t}},{key:"get",value:function(e){return this.has(e)?this.cache[e]:null}},{key:"set",value:function(e,t){this.purge(),!1===this.has(e)&&(this.size+=1,this.keys.push(e)),this.cache[e]=t}},{key:"unset",value:function(e){delete this.cache[e],this.size-=1}},{key:"purge",value:function(){if(!(this.size<=this.maxSize)){var e=this.keys.slice(0,this.purgeSize+1);this.keys=this.keys.slice(this.purgeSize,this.keys.length);var t=!0,n=!1,r=void 0;try{for(var a,i=e[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var s=a.value;delete this.cache[s]}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}this.size-=this.purgeSize}}},{key:"_updateHitRate",value:function(){var e=this.hits+this.misses;this.hitRate=this.hits/e*100}},{key:"stats",value:function(){var e={id:this.id,size:this.size,hits:this.hits,misses:this.misses,hitRate:this.hitRate};return e}}]),e}();b()(k,"CLASS",function(){return"CacheClass"})},732:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(21),a=(n.n(r),n(22)),i=(n.n(a),n(25)),s=(n.n(i),n(12)),o=(n.n(s),n(8)),c=(n.n(o),n(18)),u=(n.n(c),n(19)),l=(n.n(u),n(339)),d=function(e){return{restrict:"A",link:function(t,n,r){var a=null,i=angular.element(n)[0];(a=new l.a(function(n){var s=!0,o=!1,c=void 0;try{for(var u,l=n[Symbol.iterator]();!(s=(u=l.next()).done);s=!0)0!==u.value.intersectionRatio&&(e(r.whenVisible)(t),a.unobserve(i),a.disconnect())}catch(e){o=!0,c=e}finally{try{s||null==l.return||l.return()}finally{if(o)throw c}}})).observe(i)}}};d.$inject=["$parse"]},733:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return r});var r=function(t){return{restrict:"A",priority:-100,link:function(t,n,r){n.bind("click",function(t){e(document).trigger("_tracking.click",t)})}}};r.$inject=["$rootScope","$compile","$animate"]}).call(t,n(13))},734:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(103),a=(n.n(r),n(0)),i=n.n(a),s=n(1),o=n.n(s),c=n(2),u=new(function(){function e(){i()(this,e)}return o()(e,[{key:"getPreviousLine",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};c.a.object(e),c.a.integer(t),Object(c.a)(t>=0),c.a.object(n);var r=void 0!==n.skipEmptyLines&&n.skipEmptyLines;if(c.a.boolean(r),!0!==r){var a=t-1;return a<0?null:{code:e.getLine(a),line:a}}for(var i=null,s=t-1;s>=0;){if(i=(i=e.getLine(s)).trim())return{code:i,line:s};s--}}},{key:"getNextLine",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};c.a.object(e),c.a.integer(t),Object(c.a)(t>=0),c.a.object(n);var r=void 0!==n.skipEmptyLines&&n.skipEmptyLines;if(c.a.boolean(r),!0!==r){var a=t+1;return a>=e.lineCount()?null:{code:e.getLine(a),line:a}}for(var i=null,s=t+1,o=e.lineCount();s<o;){if(i=(i=e.getLine(s)).trim())return{code:i,line:s};s++}}}]),e}())},735:function(e,t,n){"use strict";var r=n(736),a=(n.n(r),n(116)),i=n(738),s=n(739),o=n(742),c=n(746),u=n(749),l=n(757),d=n(762),h=n(765),v=n(768),f=n(771),p=n(774),g=n(776),y=n(777),b=n(778),m=n(779),k=n(781),_=n(797),x=n(806);a.a.registerDirective(i.a,{directiveId:"brambleIdeQuickdocs"}),a.a.registerDirective(s.a,{directiveId:"brambleIdeMenuOptions"}),a.a.registerDirective(c.a,{directiveId:"brambleIdeMenuPaintTool"}),a.a.registerDirective(o.a,{directiveId:"brambleIdeMenuSave"}),a.a.registerDirective(u.a,{directiveId:"brambleIdeMenuSnippets"}),a.a.registerDirective(l.a,{directiveId:"brambleIdeMenuMedia"}),a.a.registerDirective(d.a,{directiveId:"brambleIdeMenuMediaLibrary"}),a.a.registerDirective(h.a,{directiveId:"brambleIdeMenuDevice"}),a.a.registerDirective(v.a,{directiveId:"brambleIdeMenuPost"}),a.a.registerDirective(f.a,{directiveId:"brambleIdePreviewTabs"}),a.a.registerDirective(p.a,{directiveId:"brambleIdeInstructions"}),a.a.registerDirective(g.a,{directiveId:"brambleIdeComments"}),a.a.registerDirective(y.a,{directiveId:"brambleIdeLeaveDialog"}),a.a.registerDirective(b.a,{directiveId:"brambleIdeSelectiveAutoUpdate"}),a.a.registerDirective(k.a,{directiveId:"brambleIdeMicrobit"}),a.a.registerDirective(_.a,{directiveId:"brambleIdeHifive"}),a.a.registerFactory(m.a,{factoryId:"brambleIdeMenu"}),a.a.registerDirectiveController(x.a,{directiveId:"toolbarFeedsButton"})},736:function(e,t){},738:function(e,t,n){"use strict";(function(e){function n(){var t=this;t.init=function(e,t){!function(e){var t=e.getModule("thirdparty/CodeMirror/lib/codemirror"),n=e.getModule("command/CommandManager"),r=e.getModule("editor/EditorManager"),a=e.getModule("editor/PopoverWidget"),i=function(){var e=r.getCurrentFullEditor(),i=e._codeMirror,s=e.getCursorPos(),o=i.charCoords(s),c={editor:e,content:"<span class='popover-help-icon'></span>",xpos:o.left,ytop:o.top,ybot:o.bottom,onClick:function(){n.execute("navigate.toggleQuickDocs"),a.hide()}},u=i.getCursor(),l=i.getViewport();l.from=Math.min(l.from,u.line),l.to=Math.max(u.line+1,l.to);var d=t.findMatchingTag(i,u,l),h=!!d;h&&a.show(c)},s=function(){var e=r.getCurrentFullEditor();if(e){var t=e._codeMirror;t.off("cursorActivity",i),t.on("cursorActivity",i)}};r.on("activeEditorChange",s),s()}(t)},e(document).on("bramble-ready",function(){var e=window.bramble,n=window.brackets;t.init(e,n)})}t.a=function(){return{bindToController:{},controller:n,controllerAs:"vm",restrict:"E",scope:{}}},n.$inject=[]}).call(t,n(13))},739:function(e,t,n){"use strict";(function(e){t.a=function(){return{bindToController:{},controller:o,controllerAs:"vm",restrict:"E",scope:{},template:n(741)}};var r=n(38),a=(n.n(r),n(17)),i=(n.n(a),n(39)),s=(n.n(i),n(740));n.n(s);function o(t,n){var r=this;function a(t){brackets.getModule("preferences/PreferencesManager").get("loopProtect")?e("#loop-protect-toggle").addClass("switch-enabled"):e("#loop-protect-toggle").removeClass("switch-enabled"),e("#editor-option-loop-protect").click(function(){var n=e("#loop-protect-toggle");return n.hasClass("switch-enabled")?(n.removeClass("switch-enabled"),t.disableLoopProtect()):(n.addClass("switch-enabled"),t.enableLoopProtect()),!1})}r.currentFileType=null,r.toggleMenu=function(){r.menu.toggle()},r.init=function(i,s){r.menu=n.init(e("#bramble-ide-menu-options"),e("#bramble-ide-menu-options-container")),function(t){var n=function(n){"light-theme"===n?(t.useLightTheme(),e("#editor-theme-light-button").addClass("is-active"),e("#editor-theme-dark-button").removeClass("is-active")):"dark-theme"===n&&(t.useDarkTheme(),e("#editor-theme-light-button").removeClass("is-active"),e("#editor-theme-dark-button").addClass("is-active"))};e("#editor-option-theme").click(function(){"dark-theme"===t.getTheme()?n("light-theme"):n("dark-theme")}),"light-theme"===t.getTheme()?n("light-theme"):n("dark-theme")}(i),function(t){e("#editor-decrease-fontsize-button").click(function(){t.decreaseFontSize()}),e("#editor-increase-fontsize-button").click(function(){t.increaseFontSize()})}(i),function(t){var n=function(t){t?e("#wrap-lines-toggle").addClass("switch-enabled"):e("#wrap-lines-toggle").removeClass("switch-enabled")};e("#editor-option-wrap-long-lines").click(function(){var e;return e=!t.getWordWrap(),t[e?"enableWordWrap":"disableWordWrap"](function(){return n(e)}),!1}),n(t.getWordWrap())}(i),function(t){t.getAllowWhiteSpace()?e("#show-whitespace-toggle").addClass("switch-enabled"):e("#show-whitespace-toggle").removeClass("switch-enabled");e("#editor-option-show-whitespace").click(function(){var n=e("#show-whitespace-toggle"),r=n.hasClass("switch-enabled");return r?(n.removeClass("switch-enabled"),t.disableWhiteSpace()):(n.addClass("switch-enabled"),t.enableWhiteSpace()),!1})}(i),function(t){(t.getAutoCloseTags()||{}).whenClosing?e("#auto-close-tags-toggle").addClass("switch-enabled"):e("#auto-close-tags-toggle").removeClass("switch-enabled");e("#editor-option-auto-close-tags").click(function(){var n=e("#auto-close-tags-toggle"),r=n.hasClass("switch-enabled");return r?(n.removeClass("switch-enabled"),t.configureAutoCloseTags({whenOpening:!1,whenClosing:!1,indentTags:[]})):(n.addClass("switch-enabled"),t.configureAutoCloseTags({whenOpening:!0,whenClosing:!0,indentTags:[]})),!1})}(i),function(t){t.getOpenSVGasXML()?e("#edit-svg-toggle").addClass("switch-enabled"):e("#edit-svg-toggle").removeClass("switch-enabled");e("#editor-option-edit-svg").click(function(){var n=e("#edit-svg-toggle"),r=!n.hasClass("switch-enabled");return r?(n.addClass("switch-enabled"),t.openSVGasXML()):(n.removeClass("switch-enabled"),t.openSVGasImage()),!1})}(i),a(i),function(e,n){var a=n.getModule("view/MainViewManager"),i=function(n,a){var i=a?a.name:e.getFilename();i&&(r.currentFileType=i.split(".").pop()),t.$evalAsync()};a.on("currentFileChange",i),i()}(i,s)},e(document).on("bramble-ready",function(){var e=window.bramble,t=window.brackets;r.init(e,t)})}o.$inject=["$scope","brambleIdeMenu"]}).call(t,n(13))},740:function(e,t){},741:function(e,t){e.exports='<div class="bramble-ide-menu-options">\n    <a id="bramble-ide-menu-options" class="tool fa fa-cog" ng-click="vm.toggleMenu()" href="#"></a>\n\n    <div id="bramble-ide-menu-options-container" class="bramble-ide-menu is-closed">\n        <ul>\n            <li id="editor-option-theme">\n                <span>Theme</span>\n                <div class="bramble-ide-menu-buttons">\n                    <a id="editor-theme-dark-button" class="bramble-ide-menu-button fa fa-moon-o" href="#"></a>\n                    <a id="editor-theme-light-button" class="bramble-ide-menu-button fa fa-sun-o" href="#"></a>\n                </div>\n            </li>\n\n            <li>\n                <span>Font size</span>\n                <div class="bramble-ide-menu-buttons">\n                    <a id="editor-decrease-fontsize-button" class="bramble-ide-menu-button fa fa-minus" href="#"></a>\n                    <a id="editor-increase-fontsize-button" class="bramble-ide-menu-button fa fa-plus" href="#"></a>\n                </div>\n            </li>\n\n            <li id="editor-option-wrap-long-lines">\n                <span>Wrap long lines</span>\n                <div class="bramble-ide-menu-buttons switch-toggle switch-enabled" id="wrap-lines-toggle">\n                    <div class="toggle-backing"></div>\n                    <div class="toggle-button"></div>\n                </div>\n            </li>\n\n            <li id="editor-option-show-whitespace">\n                <span>Show whitespace</span>\n                <div class="bramble-ide-menu-buttons switch-toggle switch-enabled" id="show-whitespace-toggle">\n                    <div class="toggle-backing"></div>\n                    <div class="toggle-button"></div>\n                </div>\n            </li>\n\n            <li id="editor-option-edit-svg" ng-show="vm.currentFileType === \'svg\'">\n                <span>Edit SVG images as code</span>\n                <div class="bramble-ide-menu-buttons switch-toggle switch-enabled" id="edit-svg-toggle">\n                    <div class="toggle-backing"></div>\n                    <div class="toggle-button"></div>\n                </div>\n            </li>\n\n            <li id="editor-option-auto-close-tags" ng-show="vm.currentFileType === \'html\'">\n                <span>Auto close tags</span>\n                <div class="bramble-ide-menu-buttons switch-toggle switch-enabled" id="auto-close-tags-toggle">\n                    <div class="toggle-backing"></div>\n                    <div class="toggle-button"></div>\n                </div>\n            </li>\n\n            <li id="editor-option-loop-protect" ng-show="vm.currentFileType === \'html\' || vm.currentFileType === \'js\'">\n                <span>Loop Protection</span>\n                <div class="bramble-ide-menu-buttons switch-toggle switch-enabled" id="loop-protect-toggle">\n                    <div class="toggle-backing"></div>\n                    <div class="toggle-button"></div>\n                </div>\n            </li>\n        </ul>\n    </div>\n</div>\n'},742:function(e,t,n){"use strict";(function(e){t.a=function(){return{bindToController:{},controller:o,controllerAs:"vm",restrict:"E",scope:{},template:n(745)}};var r=n(145),a=(n.n(r),n(743)),i=(n.n(a),n(744)),s=n.n(i);function o(t,n){var r=this;r.currentFileType=null,r.init=function(t,a){var i=window.parent.document.getElementById("save-options"),o=e(i);r.menu=n.init(o,e("#bramble-ide-menu-save-container")),function(t){IDE.isAutoSaveEnabled()?e("#auto-save").addClass("switch-enabled"):e("#auto-save").removeClass("switch-enabled");e("#editor-option-auto-save").click(function(){var t=e("#auto-save"),n=!t.hasClass("switch-enabled");return n?(t.addClass("switch-enabled"),IDE.setAutoSave(!0)):(t.removeClass("switch-enabled"),IDE.setAutoSave(!1)),!1})}(),function(t,n){IDE.isAutoSaveEnabled()?e("#save-as").addClass("switch-enabled"):e("#save-as").removeClass("switch-enabled");e("#editor-option-save-as").click(function(){r.menu.close();var e,t=n.getModule("widgets/Dialogs"),a=s.a,i=(document.getElementById(r.PROJECT_NAME_INPUT_ID),t.showModalDialogUsingTemplate(a,!0)),o=i.getElement().find("#".concat(r.PROJECT_NAME_INPUT_ID));return o.on("keyup",function(t){e=t.target.value}),i.done(function(t){t===r.SAVE_BUTTON_ID&&e&&IDE.saveProjectAs(e)}),!1})}(0,a),o.on("click",function(e){r.menu.toggle()})},r.SAVE_BUTTON_ID="save-dialog-save",r.PROJECT_NAME_INPUT_ID="save-dialog-project-name",e(document).on("bramble-ready",function(){var e=window.bramble,t=window.brackets;r.IDE=window.IDE,r.init(e,t)})}o.$inject=["$scope","brambleIdeMenu"]}).call(t,n(13))},743:function(e,t){},744:function(e,t){e.exports='<div class="template modal">\n    <div class="modal-dialog modal-lg" role="document">\n        <div class="modal-header">\n            <h1 class="dialog-title" id="dialog-title">Save as</h1>\n        </div>\n        <div class="modal-body modal-save-as">\n            <div class="dialog-message"><label for="project-name">Project Name</label></div>\n            <input id="save-dialog-project-name" name="project-name" class="project-name" type="text" />\n        </div>\n        <div class="modal-footer">\n            <button class="dialog-button btn " data-button-id="save-dialog-cancel">Cancel</button>\n            <button class="dialog-button btn primary" data-button-id="save-dialog-save">Save</button>\n        </div>\n    </div>\n</div>\n'},745:function(e,t){e.exports='<div class="bramble-ide-menu-save">\n    <div id="bramble-ide-menu-save-container" class="bramble-ide-menu is-closed">\n        <ul>\n            <li id="editor-option-save-as" class="option-link">\n                <span>Save as...</span>\n            </li>\n            <li id="editor-option-auto-save">\n                <span>Auto save</span>\n                <div  class="bramble-ide-menu-buttons switch-toggle switch-enabled" id="auto-save">\n                    <div class="toggle-backing"></div>\n                    <div class="toggle-button"></div>\n                </div>\n            </li>\n        </ul>\n    </div>\n</div>\n'},746:function(e,t,n){"use strict";(function(e){t.a=function(){return{bindToController:{},controller:u,controllerAs:"vm",restrict:"E",scope:{},template:n(748)}};var r=n(8),a=(n.n(r),n(20)),i=(n.n(a),n(23)),s=n.n(i),o=n(24),c=(n.n(o),n(747));n.n(c);function u(){var t=this;t.init=function(){},t.showPaintTool=function(){var e;return s.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.awrap(window.__ExtensionManager.enable("extension-paint"));case 2:e=t.sent,window.__ReduxWrapper.put(e.extensionActions.createActor());case 4:case"end":return t.stop()}})},e(document).on("bramble-ready",function(){t.Bramble=window.Bramble,t.bramble=window.bramble,t.brackets=window.brackets,t.projectId=e("#editor").attr("data-project-id"),t.IDE=window.IDE,t.init()})}u.$inject=[]}).call(t,n(13))},747:function(e,t){},748:function(e,t){e.exports='<div class="bramble-ide-menu-paint-tool">\n    <a id="bramble-ide-menu-paint-tool" class="tool fa fa-picture-o" href="#" ng-click="vm.showPaintTool()"></a>\n</div>\n'},749:function(e,t,n){"use strict";(function(e){t.a=function(){return{bindToController:{},controller:l,controllerAs:"vm",restrict:"E",scope:{},template:n(756)}};var r=n(41),a=(n.n(r),n(57)),i=(n.n(a),n(38)),s=(n.n(i),n(750)),o=(n.n(s),n(751)),c=n(752),u=n(169);function l(t,n){var r=this;r.init=function(a,i){r.menu=n.init(e("#bramble-ide-menu-snippets"),e(".bramble-ide-menu-snippets-container")),function(e){var n=e.getModule("editor/EditorManager"),a=function(){var e=n.getCurrentFullEditor();if(e){var a,i=e.getFile();if(i)a=-1!==i.name.indexOf(".py")?function(e){return"python"===e.type||u.c&&"micropython"===e.type}:function(e){return"python"!==e.type&&"micropython"!==e.type},r.categories=o.a.filter(a),r.activeCategoryType=r.categories[0].type,r.activeSnippetId=r.snippets.filter(a)[0].id,t.$evalAsync()}};n.on("activeEditorChange",a),a()}(i)},r.selectCategory=function(e){r.activeCategoryType=e.type,r.activeSnippetId=r.snippets.filter(function(e){return e.type===r.activeCategoryType})[0].id},r.selectSnippet=function(e){r.activeSnippetId=e.id},r.insertSnippet=function(e){bramble.addCodeSnippet(e.code),r.menu.close()},r.toggleMenu=function(){r.menu.toggle()},r.categories=o.a,r.snippets=c.a,r.activeCategoryType=r.categories[0].type,r.activeSnippetId=r.snippets[0].id,e(document).on("bramble-ready",function(){var e=window.bramble,t=window.brackets;r.init(e,t)})}l.$inject=["$scope","brambleIdeMenu"]}).call(t,n(13))},750:function(e,t){},751:function(e,t,n){"use strict";t.a=[{type:"python",label:"Python"},{type:"micropython",label:"MicroPython"},{type:"html",label:"HTML"},{type:"css",label:"CSS"},{type:"js",label:"JS"}]},752:function(e,t,n){"use strict";var r=n(238),a=n.n(r),i=n(753),s=n.n(i);function o(){var e=a()(["\n            pin0.is_touched()\n            pin1.is_touched()\n            pin2.is_touched()\n        "]);return o=function(){return e},e}function c(){var e=a()(["\n            pin0.write_digital()\n            pin1.write_digital()\n            pin2.write_digital()\n        "]);return c=function(){return e},e}function u(){var e=a()(["\n            pin0.read_digital()\n            pin1.read_digital()\n            pin2.read_digital()\n        "]);return u=function(){return e},e}function l(){var e=a()(["\n            music.pitch(422)\n        "]);return l=function(){return e},e}function d(){var e=a()(["\n            music.play('d#4:2')\n        "]);return d=function(){return e},e}function h(){var e=a()(["\n            import music\n        "]);return h=function(){return e},e}function v(){var e=a()(["\n            radio.receive_full()\n        "]);return v=function(){return e},e}function f(){var e=a()(["\n            radio.receive()\n        "]);return f=function(){return e},e}function p(){var e=a()(["\n            radio.send('Hello!')\n        "]);return p=function(){return e},e}function g(){var e=a()(["\n            radio.on()\n        "]);return g=function(){return e},e}function y(){var e=a()(["\n            import radio\n        "]);return y=function(){return e},e}function b(){var e=a()(["\n            compass.heading()\n        "]);return b=function(){return e},e}function m(){var e=a()(["\n            compass.calibrate()\n        "]);return m=function(){return e},e}function k(){var e=a()(["\n            accelerometer.current_gesture()\n        "]);return k=function(){return e},e}function _(){var e=a()(["\n            accelerometer.get_x()\n            accelerometer.get_y()\n            accelerometer.get_z()\n        "]);return _=function(){return e},e}function x(){var e=a()(["\n            reset()\n        "]);return x=function(){return e},e}function w(){var e=a()(["\n            temperature()\n        "]);return w=function(){return e},e}function I(){var e=a()(["\n            sleep(100)\n        "]);return I=function(){return e},e}function A(){var e=a()(["\n            button_a.was_pressed()\n            button_b.was_pressed()\n        "]);return A=function(){return e},e}function S(){var e=a()(["\n            button_a.is_pressed()\n            button_b.is_pressed()\n        "]);return S=function(){return e},e}function E(){var e=a()(["\n            display.clear()\n        "]);return E=function(){return e},e}function C(){var e=a()(['\n            display.show(Image("09090:09090:00000:90009:09990"))\n        ']);return C=function(){return e},e}function j(){var e=a()(["\n            display.show(9)\n        "]);return j=function(){return e},e}function O(){var e=a()(['\n            display.show("Hello, World!")\n        ']);return O=function(){return e},e}function D(){var e=a()(['\n            display.scroll("Hello, World!")\n        ']);return D=function(){return e},e}function T(){var e=a()(['\n            var myButton = document.querySelector("#myButton");\n\n            myButton.addEventListener("click", function() {\n                console.log("You clicked!");\n            });\n        ']);return T=function(){return e},e}function M(){var e=a()(['\n            var myHeader = document.querySelector("#myHeader");\n            myHeader.style.backgroundColor = "salmon";\n        ']);return M=function(){return e},e}function F(){var e=a()(['\n            function display(name) {\n                console.log("Hello, " + name);\n            }\n\n            display("John");\n        ']);return F=function(){return e},e}function L(){var e=a()(["\n            var i = 1;\n\n            while (i <= 10) {\n                console.log(i);\n                i = i + 1;\n            }\n        "]);return L=function(){return e},e}function N(){var e=a()(['\n            var colors = ["red", "blue", "green", "yellow"];\n            var color;\n\n            for (var i = 0; i < colors.length; i++) {\n                color = colors[i];\n                console.log(color);\n            }\n        ']);return N=function(){return e},e}function P(){var e=a()(['\n            var name = "John";\n\n            switch(name) {\n                case "John":\n                    console.log("Hello, " + name);\n                    break;\n                case "Mary":\n                    console.log("Welcome, " + name);\n                    break;\n                default:\n                    // Do something if no condition was met\n                    console.log("Hello, stranger!");\n            }\n        ']);return P=function(){return e},e}function R(){var e=a()(['\n            var name = "John";\n\n            if (name === "John") {\n                console.log("Hello, " + name);\n            } else if (name === "Mary") {\n                console.log("Welcome, " + name);\n            } else {\n                console.log("Hello, stranger!");\n            }\n        ']);return R=function(){return e},e}function B(){var e=a()(['\n            var student = {\n                name: "John",\n                grade: 89\n            };\n        ']);return B=function(){return e},e}function U(){var e=a()(['\n            var colors = ["red", "blue", "green", "yellow"];\n        ']);return U=function(){return e},e}function W(){var e=a()(["\n            // This is a comment\n        "]);return W=function(){return e},e}function H(){var e=a()(["\n            .animated {\n                animation-name: myAnimation;\n                animation-duration: 2s;\n                animation-iteration-count: infinite;\n            }\n\n            @keyframes myAnimation {\n                0% { background-color: red; }\n                50% { background-color: orange; }\n                100% { background-color: yellow; }\n            }\n        "]);return H=function(){return e},e}function G(){var e=a()(["\n            @media screen and (max-width: 360px) {\n                /* My styles for small screens (like smartphones) */\n            }\n\n            @media screen and (min-width: 361px) and (max-width: 1020px) {\n                /* My styles for medium screens (like tablets) */\n            }\n\n            @media screen and (min-width: 1021px) {\n                /* My styles for large screens (like desktops) */\n            }\n        "]);return G=function(){return e},e}function V(){var e=a()(["\n            /* Normal */\n            a:link {\n                color: blue;\n                text-decoration: underline;\n            }\n\n            /* Visited */\n            a:visited {\n                color: violet;\n                text-decoration: none;\n            }\n\n            /* Hovered */\n            a:hover {\n                color: pink;\n            }\n        "]);return V=function(){return e},e}function $(){var e=a()(["\n            #myId {\n                background-color: purple;\n            }\n        "]);return $=function(){return e},e}function z(){var e=a()(["\n            .myClass {\n                background-color: cyan;\n            }\n        "]);return z=function(){return e},e}function q(){var e=a()(["\n            p {\n                font-size: 40px;\n            }\n        "]);return q=function(){return e},e}function J(){var e=a()(["\n            /* This is a comment */\n        "]);return J=function(){return e},e}function Y(){var e=a()(['\n            <audio>\n                <source src="audio.mp3" type="audio/mpeg">\n            </audio>\n        ']);return Y=function(){return e},e}function Q(){var e=a()(['\n            <video width="320" height="240">\n                <source src="video.mp4" type="video/mp4">\n            </video>\n        ']);return Q=function(){return e},e}function X(){var e=a()(['\n            \x3c!-- Add this tag to your HTML file inside the <head> tag --\x3e\n            <link href="style.css" rel="stylesheet">\n        ']);return X=function(){return e},e}function K(){var e=a()(['\n            \x3c!-- Add this tag to your HTML file above the </body> tag --\x3e\n            <script src="script.js"><\/script>\n        ']);return K=function(){return e},e}function Z(){var e=a()(["\n            <ul>\n                <li>Apples</li>\n                <li>Oranges</li>\n                <li>Bananas</li>\n            </ul>\n        "]);return Z=function(){return e},e}function ee(){var e=a()(["\n            <ol>\n                <li>First item</li>\n                <li>Second item</li>\n                <li>Third item</li>\n            </ol>\n        "]);return ee=function(){return e},e}function te(){var e=a()(["\n            <table>\n              <tr>\n                <th>Name</th>\n                <th>Age</th>\n              </tr>\n              <tr>\n                <td>John</td>\n                <td>12</td>\n              </tr>\n              <tr>\n                <td>Mary</td>\n                <td>14</td>\n              </tr>\n            </table>\n        "]);return te=function(){return e},e}function ne(){var e=a()(['\n            import turtle\n\n            spiral = turtle.Turtle()\n            spiral.pencolor("blue")\n\n            for i in range(40):\n              spiral.forward(i * 10)\n              spiral.right(144)\n\n            turtle.done()\n        ']);return ne=function(){return e},e}function re(){var e=a()(['\n            answer = input("Enter a number: ")\n            if answer < 4:\n               print("too small")\n            elif answer > 10:\n                print("too big")\n            else:\n                print("just right")\n        ']);return re=function(){return e},e}function ae(){var e=a()(['\n            if age < 18:\n                print("child")\n            else:\n                print("adult")\n        ']);return ae=function(){return e},e}function ie(){var e=a()(['\n            if age < 18 :\n                print("child")\n        ']);return ie=function(){return e},e}function se(){var e=a()(["\n            i = 1\n            # This for loop prints from 1 to 10\n            while i <= 10:\n                print(i)\n                i += 1\n        "]);return se=function(){return e},e}function oe(){var e=a()(['\n            colors = ["red", "blue", "green", "yellow"]\n            for color in colors:\n                print(color)\n        ']);return oe=function(){return e},e}function ce(){var e=a()(["\n            # This for loop prints from 0 to 9\n            for i in range(10):\n                print(i)\n        "]);return ce=function(){return e},e}function ue(){var e=a()(['\n            student =  { "name" : "john", "grade" : 89 }\n            print(student["name"])\n        ']);return ue=function(){return e},e}function le(){var e=a()(['\n            def display(name):\n              print("Hello, " + name)\n\n            display("John")\n        ']);return le=function(){return e},e}function de(){var e=a()(["\n            '''\n               Multi line comments\n               Add more lines here\n            '''\n        "]);return de=function(){return e},e}var he=[{type:"python",id:"python-print",label:"Print",code:'print("Hello, World!")'},{type:"python",id:"python-comment",label:"Comment",code:"# This is a comment"},{type:"python",id:"python-multiline-comment",label:"Multi line comment",code:s()(de())},{type:"python",id:"python-input",label:"Input",code:'age = input("How old are you? ")'},{type:"python",id:"python-basic-function",label:"Basic Function",code:s()(le())},{type:"python",id:"python-list",label:"List",code:'colors = ["red", "blue", "green", "yellow"]'},{type:"python",id:"python-dictionary",label:"Dictionary",code:s()(ue())},{type:"python",id:"python-for-loop-with-numbers",label:"For Loop with numbers",code:s()(ce())},{type:"python",id:"python-for-loop-with-lists",label:"For Loop with lists",code:s()(oe())},{type:"python",id:"python-while-loop",label:"While loop",code:s()(se())},{type:"python",id:"python-if",label:"If",code:s()(ie())},{type:"python",id:"python-if-else",label:"If Else",code:s()(ae())},{type:"python",id:"python-If-elif-else",label:"If Elif Else",code:s()(re())},{type:"python",id:"python-turtle-example",label:"Turtle example",code:s()(ne())},{type:"html",id:"html-comment",label:"Comment",code:"\x3c!-- This is a comment --\x3e"},{type:"html",id:"html-table",label:"Table",code:s()(te())},{type:"html",id:"html-ordered-list",label:"Ordered List",code:s()(ee())},{type:"html",id:"html-unordered-list",label:"Unordered List",code:s()(Z())},{type:"html",id:"html-script",label:"Include a JavaScript file",code:s()(K())},{type:"html",id:"html-external-stylesheet",label:"Include a CSS file",code:s()(X())},{type:"html",id:"html-video",label:"Video Player",code:s()(Q())},{type:"html",id:"html-audio",label:"Audio Player",code:s()(Y())},{type:"css",id:"css-comment",label:"Comment",code:s()(J())},{type:"css",id:"css-tag-name-selector",label:"Element Type Selector",code:s()(q())},{type:"css",id:"css-class-selector",label:"Class Selector",code:s()(z())},{type:"css",id:"css-id-selector",label:"ID Selector",code:s()($())},{type:"css",id:"css-link-styling",label:"Link Styles",code:s()(V())},{type:"css",id:"css-media-queries",label:"Media Queries",code:s()(G())},{type:"css",id:"css-kfa",label:"Keyframe Animation",code:s()(H())},{type:"js",id:"js-comment",label:"Comment",code:s()(W())},{type:"js",id:"js-array",label:"Array",code:s()(U())},{type:"js",id:"js-object",label:"Object",code:s()(B())},{type:"js",id:"js-if-else",label:"If Else Statement",code:s()(R())},{type:"js",id:"js-switch",label:"Switch Statement",code:s()(P())},{type:"js",id:"js-for-loop",label:"For Loop",code:s()(N())},{type:"js",id:"js-while-loop",label:"While Loop",code:s()(L())},{type:"js",id:"js-empty-function",label:"A Basic Function",code:s()(F())},{type:"js",id:"js-change-style",label:"Change CSS Property",code:s()(M())},{type:"js",id:"js-click-handler",label:"Add a Click Event",code:s()(T())},{type:"micropython",id:"mpy-microbit",label:"Micro:bit"},{type:"micropython",id:"mpy-display",label:"Display"},{type:"micropython",id:"mpy-buttons",label:"Buttons"},{type:"micropython",id:"mpy-temperature",label:"Temperature"},{type:"micropython",id:"mpy-accelerometer",label:"Accelerometer"},{type:"micropython",id:"mpy-compass",label:"Compass"},{type:"micropython",id:"mpy-radio",label:"Radio"},{type:"micropython",id:"mpy-music",label:"Music"},{type:"micropython",id:"mpy-io-pins",label:"I/O Pins"},{type:"micropython",id:"mpy-scroll-text",groupId:"mpy-display",label:"Scroll Text",code:s()(D())},{type:"micropython",id:"mpy-show-text",groupId:"mpy-display",label:"Show Text",code:s()(O())},{type:"micropython",id:"mpy-show-number",groupId:"mpy-display",label:"Show a Number",code:s()(j())},{type:"micropython",id:"mpy-show-image",groupId:"mpy-display",label:"Show an Image",code:s()(C())},{type:"micropython",id:"mpy-clear-display",groupId:"mpy-display",label:"Clear Display",code:s()(E())},{type:"micropython",id:"mpy-check-if-button-is-currently-pressed",groupId:"mpy-buttons",label:"Check if Button is currently pressed",code:s()(S())},{type:"micropython",id:"mpy-check-if-button-was-pressed-before",groupId:"mpy-buttons",label:"Check if Button was pressed before",code:s()(A())},{type:"micropython",id:"mpy-pause-code",groupId:"mpy-microbit",label:"Pause code",code:s()(I())},{type:"micropython",id:"mpy-get-temperature",groupId:"mpy-temperature",label:"Get Temperature",code:s()(w())},{type:"micropython",id:"mpy-restart-the-microbit",groupId:"mpy-microbit",label:"Restart the micro:bit",code:s()(x())},{type:"micropython",id:"mpy-get-accelerometer-values",groupId:"mpy-accelerometer",label:"Get Accelerometer Values",code:s()(_())},{type:"micropython",id:"mpy-get-accelerometer-gesture",groupId:"mpy-accelerometer",label:"Get Accelerometer Gesture",code:s()(k())},{type:"micropython",id:"mpy-calibrate-compass",groupId:"mpy-compass",label:"Calibrate Compass",code:s()(m())},{type:"micropython",id:"mpy-get-compass-heading-direction",groupId:"mpy-compass",label:"Get Compass Heading/Direction",code:s()(b())},{type:"micropython",id:"mpy-import-the-radio-library",groupId:"mpy-radio",label:"Import the radio library",code:s()(y())},{type:"micropython",id:"mpy-turn-on-radio",groupId:"mpy-radio",label:"Turn on Radio",code:s()(g())},{type:"micropython",id:"mpy-send-message-with-radio",groupId:"mpy-radio",label:"Send Message with Radio",code:s()(p())},{type:"micropython",id:"mpy-get-received-message-from-radio",groupId:"mpy-radio",label:"Get Received Message from Radio",code:s()(f())},{type:"micropython",id:"mpy-get-full-received-message",groupId:"mpy-radio",label:"Get Full Received Message",code:s()(v())},{type:"micropython",id:"mpy-import-the-music-library",groupId:"mpy-music",label:"Import the music library",code:s()(h())},{type:"micropython",id:"mpy-play-a-musical-note",groupId:"mpy-music",label:"Play a Musical Note",code:s()(d())},{type:"micropython",id:"mpy-play-a-certain-frequency",groupId:"mpy-music",label:"Play a Certain Frequency",code:s()(l())},{type:"micropython",id:"mpy-check-if-current-is-flowing-in-pin",groupId:"mpy-io-pins",label:"Check if current is flowing in pin",code:s()(u())},{type:"micropython",id:"mpy-send-a-current-to-a-pin",groupId:"mpy-io-pins",label:"Send a current to a pin",code:s()(c())},{type:"micropython",id:"mpy-detect-if-a-pin-is-being-touched",groupId:"mpy-io-pins",label:"Detect if a pin is being touched",code:s()(o())}];t.a=he},756:function(e,t){e.exports='<div class="bramble-ide-menu-snippets">\n    <a id="bramble-ide-menu-snippets" class="tool fa fa-code" ng-click="vm.toggleMenu()" href="#"></a>\n\n    <div class="bramble-ide-menu-snippets-container bramble-ide-menu is-closed">\n        <div class="bramble-ide-menu-snippets-content">\n            <header>\n                <h2 class="snippets-menu-title">Code Snippets</h2>\n                <div class="snippets-categories">\n                    <span ng-repeat="category in vm.categories" data-type="{{category.type}}"\n                        ng-class="{active: category.type === vm.activeCategoryType}"\n                        ng-click="vm.selectCategory(category)">\n                            {{category.label}}\n                    </span>\n                </div>\n            </header>\n\n            <div class="snippets">\n                <ul class="snippets-list">\n                    <li ng-repeat="snippet in vm.snippets" data-type="{{snippet.type}}" data-snippet-id="{{snippet.id}}"\n                        ng-class="{selected: snippet.id === vm.activeSnippetId, \'is-hidden\': snippet.type !== vm.activeCategoryType || snippet.groupId}"\n                        ng-click="vm.selectSnippet(snippet)">\n                            {{snippet.label}}\n                    </li>\n                </ul>\n\n                <div class="snippets-preview-pane">\n                    <div ng-repeat="snippet in vm.snippets" data-type="{{snippet.type}}"\n                         data-snippet-id="{{snippet.id}}" class="snippets-preview"\n                         ng-class="{\'is-hidden\': !snippet.code || (snippet.id !== vm.activeSnippetId && snippet.groupId !== vm.activeSnippetId)}">\n                            <strong class="snippets-preview-pane-label" ng-if="snippet.groupId">{{snippet.label}}</strong>\n                            <pre>{{snippet.code}}</pre>\n                            <button class="snippets-insert-button" ng-click="vm.insertSnippet(snippet)">Insert</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'},757:function(e,t,n){"use strict";(function(e){t.a=function(){return{bindToController:{},controller:u,controllerAs:"vm",restrict:"E",scope:{},template:n(761)}};var r=n(11),a=(n.n(r),n(38)),i=(n.n(a),n(17)),s=(n.n(i),n(758)),o=(n.n(s),n(759)),c=n(760);function u(t,n){var r=this,a="project";r.init=function(){r.FileSystem=r.Bramble.getFileSystem(),r.FilerUtils=r.brackets.getModule("filesystem/impls/filer/FilerUtils"),r.mimeFromExt=r.brackets.getModule("filesystem/impls/filer/lib/content").mimeFromExt,r.FileSystemCache=r.brackets.getModule("filesystem/impls/filer/FileSystemCache"),r.ProjectManager=r.brackets.getModule("project/ProjectManager"),r.menu=n.init(e("#bramble-ide-menu-media"),e(".bramble-ide-menu-media-container"))},r.toggleMenu=function(){r.menu.toggle()},r.handleMediaClick=function(e){var n="/".concat(a,"/").concat(r.projectId,"/").concat(e.name),i=function(a){!function(e,t,n){r.FileSystem.writeFile(e,t,{encoding:null},function(e){if(e)return console.error("[Bramble] Failed to write image to filesystem with: ",e);r.FileSystemCache.refresh(function(e){if(e)return console.error("[Bramble] Failed to refresh filesystem cache with: ",e);r.ProjectManager.refreshFileTree(),console.log("[Bramble] New media file written successfully"),n()})})}(n,a,function(){t(function(){e.loading=!1,r.IDE.setDirty(!0)})})};switch(e.type){case"audio":return function(e,t){(new(window.AudioContext||window.webkitAudioContext)).createBufferSource();var n=new XMLHttpRequest;n.open("GET",e.src,!0),n.responseType="blob",n.onload=function(){var e=n.response,a=new FileReader,i=/base64,(.+)/;a.readAsDataURL(e),a.onloadend=function(){var e=a.result,n=r.FilerUtils.base64ToBuffer(i.exec(e)[1]);t(n)}},e.loading=!0,n.send()}(e,i);default:return function(e,t){var n=r.mimeFromExt(r.Bramble.Filer.Path.extname(e.name)),a=/base64,(.+)/,i=new Image,s=document.createElement("canvas"),o=s.getContext("2d");i.onload=function(){s.width=i.width,s.height=i.height,o.drawImage(i,0,0);var e=s.toDataURL(n),c=r.FilerUtils.base64ToBuffer(a.exec(e)[1]);t(c)},e.loading=!0,i.crossOrigin="anonymous",i.src=e.src}(e,i)}},r.selectCategory=function(e){r.activeCategoryId=e.id},r.media=o.a,r.categories=c.a,r.activeCategoryId=c.a[0].id,e(document).on("bramble-ready",function(){r.Bramble=window.Bramble,r.bramble=window.bramble,r.brackets=window.brackets,r.projectId=e("#editor").attr("data-project-id"),r.IDE=window.IDE,r.init()})}u.$inject=["$timeout","brambleIdeMenu"]}).call(t,n(13))},758:function(e,t){},759:function(e,t,n){"use strict";var r=n(11),a=(n.n(r),n(54)),i=(n.n(a),n(50)),s=n.n(i),o="https://images.tynker.com/code-editor/media-library",c=["aerial","buildings","buildings-2","cactus","cave","city-lights","desert","forest","glass","marble-macro","underwater","universe","urban","western","winter","thailand","tree-sunset","river","boat-in-water","lake-and-mountains","kitty-summer","max-playing","max-winter","chocolates","dog-reading","rainy-day","snowboard","bird-1","bird-2","bird-3","bird-4","bird-5","bird-6"].map(function(e){return{name:"".concat(e,".jpg"),src:"".concat(o,"/photos/").concat(e,".jpg"),thumbSrc:"".concat(o,"/photos/").concat(e,"-thumbnail.jpg"),category:"photos",type:"image"}}),u=["texture1","texture2","texture3","texture4","texture5","texture6","texture7","texture8","texture9","texture10"].map(function(e){return{name:"".concat(e,".jpg"),src:"".concat(o,"/textures/").concat(e,".jpg"),thumbSrc:"".concat(o,"/textures/").concat(e,"-thumbnail.jpg"),category:"textures",type:"image"}}),l=["gradient1","gradient2","gradient3","gradient4","gradient5","gradient6","gradient7"].map(function(e){return{name:"".concat(e,".jpg"),src:"".concat(o,"/gradients/").concat(e,".jpg"),thumbSrc:"".concat(o,"/gradients/").concat(e,"-thumbnail.jpg"),category:"gradients",type:"image"}}),d=["grass","gravel","rock","water","tree","mage"].map(function(e){return{name:"".concat(e,".png"),src:"".concat(o,"/miscellaneous/").concat(e,".png"),thumbSrc:"".concat(o,"/miscellaneous/").concat(e,".png?thumb"),category:"miscellaneous",type:"image"}}),h=[].concat(s()(c),s()(u),s()(l),s()(d));t.a=h},760:function(e,t,n){"use strict";t.a=[{id:"photos",label:"Photos"},{id:"textures",label:"Textures"},{id:"gradients",label:"Gradients"},{id:"miscellaneous",label:"Miscellaneous"}]},761:function(e,t){e.exports='<div class="bramble-ide-menu-media">\n    <a id="bramble-ide-menu-media" class="tool fa fa-picture-o" ng-click="vm.toggleMenu()" href="#"></a>\n\n    <div class="bramble-ide-menu-media-container bramble-ide-menu is-closed">\n        <div class="bramble-ide-menu-media-content">\n            <header class="bramble-ide-menu-media-header">\n                <h2 class="bramble-ide-menu-media-title">Media Library</h2>\n            </header>\n\n            <div class="bramble-ide-menu-media-main">\n                <ul class="bramble-ide-menu-media-main-list">\n                    <li ng-repeat="category in vm.categories" ng-click="vm.selectCategory(category)"\n                        ng-class="{selected: category.id === vm.activeCategoryId}">\n                        {{ category.label }}\n                    </li>\n                </ul>\n\n                <ul class="bramble-ide-menu-media-main-preview">\n                    <li ng-repeat="media in vm.media"\n                        class="is-{{media.type}}"\n                        title="{{media.name}}"\n                        ng-class="{\'is-hidden\': media.category !== vm.activeCategoryId, \'is-loading\': media.loading}"\n                        ng-style="{\'background-image\': media.type == \'image\' ? \'url({{ media.thumbSrc || media.src }})\' : \'\'}"\n                        ng-click="vm.handleMediaClick(media)">\n                    </li>\n                </ul>\n            </div>\n        </div>\n    </div>\n</div>\n'},762:function(e,t,n){"use strict";(function(e){t.a=function(){return{bindToController:{},controller:u,controllerAs:"vm",restrict:"E",scope:{},template:n(764)}};var r=n(8),a=(n.n(r),n(20)),i=(n.n(a),n(23)),s=n.n(i),o=n(24),c=(n.n(o),n(763));n.n(c);function u(){var t=this;t.init=function(){},t.showMediaLibrary=function(){var e;return s.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.awrap(window.__ExtensionManager.enable("extension-media-library"));case 2:e=t.sent,window.__ReduxWrapper.put(e.ModalMediaLibraryActions.showAddActor());case 4:case"end":return t.stop()}})},e(document).on("bramble-ready",function(){t.Bramble=window.Bramble,t.bramble=window.bramble,t.brackets=window.brackets,t.projectId=e("#editor").attr("data-project-id"),t.IDE=window.IDE,t.init()})}u.$inject=[]}).call(t,n(13))},763:function(e,t){},764:function(e,t){e.exports='<div class="bramble-ide-menu-media-library">\n    <a id="bramble-ide-menu-media-library" class="tool fa fa-picture-o" href="#" ng-click="vm.showMediaLibrary()"></a>\n</div>\n'},765:function(e,t,n){"use strict";(function(e){t.a=function(){return{bindToController:{},controller:s,controllerAs:"vm",restrict:"E",scope:{},template:n(767)}};var r=n(57),a=(n.n(r),n(38)),i=(n.n(a),n(766));n.n(i);function s(t){var n=this,r={desktop:"desktop",mobile:"mobile"};function a(e){e===r.mobile?bramble.useMobilePreview():"desktop"===e&&bramble.useDesktopPreview(),n.activeMode=e}n.MODES=r,n.showButtons=!1,n.activeMode=null,n.init=function(e,i){!function(e,i){var s=i.getModule("editor/EditorManager"),o=function(){var i=s.getCurrentFullEditor();if(i){var o=i.getFile();o&&(-1===o.name.indexOf(".html")||e.getTutorialVisible()?(a(r.desktop),n.showButtons=!1):e.getPreviewMode()&&(a(e.getPreviewMode()),n.showButtons=!0),t.$evalAsync())}};s.on("activeEditorChange",o),e.on("tutorialVisibilityChange",o),o()}(e,i)},n.activateMode=a,e(document).on("bramble-ready",function(){var e=window.bramble,t=window.brackets;n.init(e,t)})}s.$inject=["$scope"]}).call(t,n(13))},766:function(e,t){},767:function(e,t){e.exports='<div class="bramble-ide-menu-device">\n    <div class="bramble-ide-menu-device-buttons" ng-show="vm.showButtons">\n        <a id="preview-pane-nav-desktop" class="bramble-ide-menu-device-button fa fa-desktop"\n           ng-class="{\'is-inactive\': vm.activeMode !== vm.MODES.desktop}"\n           ng-click="vm.activateMode(vm.MODES.desktop)" href="#"></a>\n        <a id="preview-pane-nav-mobile" class="bramble-ide-menu-device-button fa fa-mobile"\n           ng-class="{\'is-inactive\': vm.activeMode !== vm.MODES.mobile}"\n           ng-click="vm.activateMode(vm.MODES.mobile)" href="#"></a>\n    </div>\n</div>'},768:function(e,t,n){"use strict";(function(e){t.a=function(){return{bindToController:{},controller:a,controllerAs:"vm",restrict:"E",scope:{},template:n(770)}};var r=n(769);n.n(r);function a(){var t=this;t.init=function(){},t.copy=function(){window.__highlightLines()},e(document).on("bramble-ready",function(){t.Bramble=window.Bramble,t.bramble=window.bramble,t.brackets=window.brackets,t.projectId=e("#editor").attr("data-project-id"),t.IDE=window.IDE,t.init()})}a.$inject=[]}).call(t,n(13))},769:function(e,t){},770:function(e,t){e.exports='<div class="bramble-ide-menu-post">\n    <a id="bramble-ide-menu-post" class="tool fa fa-clipboard" href="#" ng-click="vm.copy()"></a>\n</div>\n'},771:function(e,t,n){"use strict";(function(e){t.a=function(){return{bindToController:{},controller:i,controllerAs:"vm",restrict:"E",scope:{},template:n(773)}};var r=n(772),a=(n.n(r),n(169));function i(){var t=this;function n(){t.highlightedTab=t.TABS.tutorial}t.TABS={tutorial:"tutorial",preview:"preview"},t.init=function(){t.LiveDevelopment=t.brackets.getModule("LiveDevelopment/LiveDevMultiBrowser"),t.bramble.getTutorialExists()&&(t.showTutorialTab=!0,t.showPreviewTab=!t.isMicroPythonMode(),n(),t.bramble.showTutorial(function(){t.bramble.useDesktopPreview()}),e("#refresh").on("click",function(e){t.onPreviewClick()}))},t.highlightedTab=t.TABS.tutorial,t.onPreviewClick=function(){if(!t.bramble.getTutorialVisible())return;t.bramble.hideTutorial(),t.highlightedTab=t.TABS.preview,t.bramble.refreshPreview()},t.onTutorialClick=function(){if(t.bramble.getTutorialVisible())return;n(),t.bramble.showTutorial(function(){t.LiveDevelopment.close().done(t.LiveDevelopment.open)})},t.showTutorialTab=!1,t.showPreviewTab=!1,t.isMicroPythonMode=a.b,e(document).on("bramble-ready",function(){t.brackets=window.brackets,t.bramble=window.bramble,t.init()})}i.$inject=[]}).call(t,n(13))},772:function(e,t){},773:function(e,t){e.exports='<div class="bramble-ide-preview-tabs">\n    <div class="preview-tutorial-toggle" ng-show="vm.showTutorialTab">\n        <span id="tutorial-title" class="preview-pane-nav-title"\n            ng-class="{\'preview-title-highlighted\': vm.highlightedTab === vm.TABS.tutorial}"\n            ng-click="vm.onTutorialClick()">Tutorial</span>\n        <span id="preview-title" class="preview-pane-nav-title"\n            ng-if="vm.showPreviewTab"\n            ng-class="{\'preview-title-highlighted\': vm.highlightedTab === vm.TABS.preview}"\n            ng-click="vm.onPreviewClick()">Preview</span>\n    </div>\n</div>'},774:function(e,t,n){"use strict";(function(e){t.a=function(){return{bindToController:{},controller:f,controllerAs:"vm",restrict:"E",scope:{}}};var r=n(11),a=(n.n(r),n(145)),i=(n.n(a),n(57)),s=(n.n(i),n(239)),o=(n.n(s),n(17)),c=(n.n(o),n(127)),u=(n.n(c),n(43)),l=(n.n(u),n(39)),d=(n.n(l),n(103)),h=(n.n(d),n(775)),v=n.n(h);function f(){var t=this,n="#bramble-iframe-browser",r="iframe",a="_tutorial/index.html",i="/js/dist/bramble_ide_instructions_legacy.css";function s(n){var r=e(this),a=e("#editor").attr("data-project-id"),i=t.brackets.getModule("command/CommandManager"),s=t.brackets.getModule("editor/EditorManager"),o=r.data("ideLinkFile").split(a).pop(),c="/project/".concat(a,"/").concat(o);i.execute("file.open",{fullPath:c}).done(function(){var e=s.getCurrentFullEditor(),t=0,n=0;if(r.data("ideLinkLine"))t=r.data("ideLinkLine")-1,n=r.data("ideLinkCol")||0;else if(r.data("ideLinkRef")){var a=new RegExp(r.data("ideLinkRef"),"i"),i=e._codeMirror.getSearchCursor(a);if(i.findNext()){var o=i.from();t=o.line,n=o.ch}}e.setCursorPos(t,n,!0),e.focus()})}function o(n){var r=e(n.target).text().trim(),a=t.brackets.getModule("editor/EditorManager").getActiveEditor();if(a){var i=a.getCursorPos();t.bramble.addCodeSnippet(r+"\n",function(){var e=a._codeMirror.getDoc(),t=a.getCursorPos(),n=e.markText(i,t,{css:"background: rgba(255,219,0,.5)"});setTimeout(function(){return n.clear()},100)})}}function c(n){n.preventDefault();var r=t.brackets.getModule("widgets/Dialogs"),a=(t.brackets.getModule("widgets/DefaultDialogs"),t.brackets.getModule("strings"),e(n.target).data("ide-modal")),i=v.a.replace("[[src]]",a);r.showModalDialogUsingTemplate(i,!0)}t.loaded=!1,t.tutorialScrollPos=0,t.init=function(){var u=e(r).contents();u.find(n).on("load",function(){!function(r){var u=r.find(n),l=u.contents(),d=u.attr("src");if(!d||-1===d.indexOf(a))return;l.on("click","[data-ide-link-file]",s),l.on("click","[data-ide-snippet]",o),l.on("click","[data-ide-modal]",c),function(e){e.find("head").append('<link rel="stylesheet" type="text/css" href="'.concat(i,'">'))}(l),function(t){t.find("[data-example]").each(function(t,n){var r=e(n),a="collapsed"===r.data("example");a?r.addClass("is-collapsed"):r.removeClass("is-collapsed"),r.click(function(e){(r.hasClass("is-collapsed")||e.target===e.currentTarget)&&r.toggleClass("is-collapsed")})})}(l),function(e){if(t.loaded)return;t.bramble.on("tutorialVisibilityChange",function(r){if(!r.visible){var a=e.find(n),i=a.contents();t.tutorialScrollPos=i.scrollTop()}})}(r),function(e){e.scrollTop(t.tutorialScrollPos)}(l),t.loaded=!0}(u)})},e(document).on("bramble-ready",function(){t.bramble=window.bramble,t.brackets=window.brackets,t.init()})}f.$inject=[]}).call(t,n(13))},775:function(e,t){e.exports='<div class="template modal" style="width:80vw">\n    <iframe src="[[src]]" style="display:block; border:none; width:100%; height:60vh"></iframe>\n\n    <div class="modal-footer">\n        <button class="dialog-button btn">Close</button>\n    </div>\n</div>\n'},776:function(e,t,n){"use strict";(function(e){t.a=function(){return{bindToController:{},controller:h,controllerAs:"vm",restrict:"E",scope:{}}};var r=n(145),a=(n.n(r),n(99)),i=(n.n(a),n(57)),s=(n.n(i),n(239)),o=(n.n(s),n(17)),c=(n.n(o),n(127)),u=(n.n(c),n(39)),l=(n.n(u),n(103)),d=(n.n(l),n(100));n.n(d);function h(){var t=this,n="_tutorial/index.html",r=9999999;function a(n,r,a,i,s,o){var c=function(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=e("<div></div>"),s=e("<div></div>"),o=e("<div></div>"),c=e("<div></div>");return c.css({position:"absolute",top:0,left:-10,width:10,backgroundColor:"currentColor",opacity:"0.5",bottom:0}),o.css({display:"inline-block",fontWeight:"bold",fontSize:"1.25em","margin-bottom":"1rem",opacity:"0.5"}),s.css({display:"inline-block",fontSize:"1.25em","margin-right":"0.5rem","margin-left":"-1rem","min-width":"0.45rem",opacity:"0.5"}),i.css({position:"relative",backgroundColor:"rgba(0,0,0,.15)",padding:"0.7rem 0.9rem 0.8rem 2rem",margin:"0.3rem 0.6rem 1rem",lineHeight:1.75,"white-space":"pre-wrap"}),e("<div />").text(r).appendTo(s),o.html(t+" "+a),i.append(c),i.append(s),i.append(o),e("<div />").text(n).appendTo(i),i}(a,i,s,o),u=n.addLineWidget(r,c.get(0),{above:!0});t.lineWidgets.push(u)}function i(e,n){if(!n||-1!==["paste","undo","redo"].indexOf(n.origin)){var i=t.comments[t.currentFilename]||[];if(0!==i.length){var s=e.getDoc(),o=e.getScrollInfo(),c=o.left,u=o.top;t.lineWidgets.forEach(function(e){return e.clear()}),t.markedTexts.forEach(function(e){return e.clear()}),i.forEach(function(n){var i;if(n.line)i={line:n.line-1,ch:0};else if(n.ref){var o=new RegExp(n.ref,"i"),c=e.getSearchCursor(o);if(!c.findNext())return;(i=c.from()).line-=n.total}var u={line:i.line+n.total-1,ch:r},l=s.getRange(i,u);if(n.multiline){var d=l.trim();if(n.symbol&&d.substring(0,n.symbol.length)!==n.symbol)return;if(n.closeSymbol&&-1===d.indexOf(n.closeSymbol,d.length-n.closeSymbol.length))return}else{var h=!0;if(l.split("\n").forEach(function(e){return h=h&&-1!==e.indexOf(n.symbol)}),!h)return}n.trim&&(l=l.trim()),n.trim&&(l=l.trim()),a(s,u.line,n.title,l,n.symbol,n.closeSymbol),function(e,n,r){var a=e.markText(n,r,{collapsed:!0});t.markedTexts.push(a)}(s,{line:i.line-1,ch:r},u)}),e.scrollTo(c,u)}}}t.init=function(){if(!t.authorMode&&t.bramble.getTutorialExists()){var r=e("iframe").contents();r.find("#bramble-iframe-browser").on("load",function(){!function(r){var a=r.find("#bramble-iframe-browser"),s=a.contents(),o=a.attr("src");if(!o||-1===o.indexOf(n))return;!function(n){if(t.commentsLoaded)return;var r=n.find("div[data-ide-comments]");t.comments={},r.find("div[data-ide-comment-file]").each(function(n,r){var a=e(r),i=a.data("ideCommentFile");t.comments[i]=t.comments[i]||[],t.comments[i].push({line:a.data("ideCommentLine"),total:a.data("ideCommentTotal")||1,ref:a.data("ideCommentRef"),symbol:a.data("ideCommentSymbol")||"",closeSymbol:a.data("ideCommentCloseSymbol")||"",title:a.data("ideCommentTitle")||"Note",trim:a.data("ideCommentTrim")||!1,multiline:a.data("ideCommentMultiline")||!1})}),t.commentsLoaded=!0,a=t.brackets.getModule("editor/EditorManager"),s=function(){var e=a.getCurrentFullEditor();if(e){var n=e.getFile();if(n){t.currentFilename=n._name;var r=e._codeMirror;i(r),r.off("change",i),r.on("change",i)}}},a.on("activeEditorChange",s),s();var a,s}(s)}(r)})}},t.currentFilename=null,t.commentsLoaded=!1,t.comments={},t.lineWidgets=[],t.markedTexts=[],e(document).on("bramble-ready",function(){t.brackets=window.brackets,t.bramble=window.bramble,t.authorMode=window._showTutorialFile&&t.bramble.getTutorialExists(),t.init()})}h.$inject=[]}).call(t,n(13))},777:function(e,t,n){"use strict";(function(e){function n(){var t=this;function n(e,n){var r=t.brackets.getModule("widgets/Dialogs"),a=t.brackets.getModule("widgets/DefaultDialogs"),i=t.brackets.getModule("strings");r.showModalDialog(a.DIALOG_ID_SAVE_CLOSE,"Please Confirm","You have unsaved changes. Save before leaving?",[{className:r.DIALOG_BTN_CLASS_LEFT,id:r.DIALOG_BTN_DONTSAVE,text:i.DONT_SAVE},{className:r.DIALOG_BTN_CLASS_NORMAL,id:r.DIALOG_BTN_CANCEL,text:i.CANCEL},{className:r.DIALOG_BTN_CLASS_PRIMARY,id:r.DIALOG_BTN_OK,text:i.SAVE}]).done(function(t){t===r.DIALOG_BTN_OK?e():t===r.DIALOG_BTN_DONTSAVE&&n()})}t.init=function(){Bramble.confirmLeave=n},t.confirmLeave=n,e(document).on("bramble-ready",function(){t.brackets=window.brackets,t.bramble=window.bramble,t.Bramble=window.Bramble,t.init()})}t.a=function(){return{bindToController:{},controller:n,controllerAs:"vm",restrict:"E",scope:{}}},n.$inject=[]}).call(t,n(13))},778:function(e,t,n){"use strict";(function(e){t.a=function(){return{bindToController:{},controller:o,controllerAs:"vm",restrict:"E",scope:{}}};var r=n(57),a=(n.n(r),n(38)),i=(n.n(a),n(17)),s=(n.n(i),n(39));n.n(s);function o(t,n){var r=this;r.init=function(e,t){var n,r=t.getModule("preferences/PreferencesManager"),i=t.getModule("view/MainViewManager"),s=r.get("autoUpdate"),o=function(t,r){var i=r?r.name:e.getFilename();i&&(n=i.split(".").pop()),-1!==a.indexOf(n)?s||(s=!0,e.enableAutoUpdate()):s&&(s=!1,e.disableAutoUpdate())};i.on("currentFileChange",o),o()};var a=["css"];e(document).on("bramble-ready",function(){var e=window.bramble,t=window.brackets;r.init(e,t)})}o.$inject=[]}).call(t,n(13))},779:function(e,t,n){"use strict";(function(e){t.a=a;var r=n(780);n.n(r);function a(){return{init:function(e,t){return new i(e,t)}}}function i(t,n){var r,a=this;function i(e){27===e.which&&(e.stopPropagation(),e.preventDefault(),a.close())}a.setPosition=function(){var e=n.width(),r=t.width(),a=Math.max(0,t.offset().left-e/2+r/2);n.css("left",a)},a.close=function(t){t&&t.stopPropagation();if(!a.isOpen)return;n.hide(),r.remove(),r.off("click",a.close),e(document).off("keyup",i),e(window).off("resize",a.close),a.isOpen=!1},a.show=function(){a.setPosition(),r=e("<div class='bramble-ide-menu-underlay'></div>"),n.after(r),r.on("click",a.close),e(document).on("keyup",i),e(window).on("resize",a.close),a.isOpen=!0,n.show()},a.toggle=function(){a.isOpen?a.close():a.show()},a.isOpen=!1}a.$inject=[]}).call(t,n(13))},780:function(e,t){},781:function(e,t,n){"use strict";(function(e){t.a=function(){return{bindToController:{},controller:g,controllerAs:"vm",restrict:"E",scope:{},template:n(796)}};var r=n(38),a=(n.n(r),n(17)),i=(n.n(a),n(43)),s=(n.n(i),n(782)),o=(n.n(s),n(783)),c=n.n(o),u=n(784),l=n.n(u),d=n(352),h=n(169),v=n(791),f="/ide/code/bin/microbit.hex",p=253952;function g(t){var n=this;n.init=function(){if(n.isMicrobitMode=Object(h.c)(),!n.isMicrobitMode)return;console.log("Running Microbit mode..."),n.fetchFirmware(),e("#refresh").hide()},n.handleDownload=function(){if(!n.firmwareHexData)return console.error("Firmware not fetched yet...");var e=n.getUserCode();if(!e)return;Object(v.a)(n.getCurrentFilename().replace(".py",".hex"),{hexGenerator:function(){return n.generateFullHexStr(n.firmwareHexData,e)},showInstructions:n.showDownloadInstructions})},n.showDownloadInstructions=function(){if(n.downloadInstructionsShown)return;n.downloadInstructionsShown=!0;var e=n.brackets.getModule("widgets/Dialogs"),t=c.a;e.showModalDialogUsingTemplate(t,!0)},n.showFlashInstructions=function(){if(n.flashInstructionsShown)return;n.flashInstructionsShown=!0;var e=n.brackets.getModule("widgets/Dialogs"),t=l.a;e.showModalDialogUsingTemplate(t,!0)},n.isMicrobitMode=!1,n.flashInstructionsShown=!1,n.downloadInstructionsShown=!1,n.handleFlash=function(){var e=n.getUserCode();if(!e)return;Object(v.b)({hexGenerator:function(){return n.generateFullHexStr(n.firmwareHexData,e)},showInstructions:n.showFlashInstructions,onStart:function(){console.log("Flashing..."),t(function(){return n.flashButtonLabel="Deploying"})},onDone:function(){console.log("Finished flashing!"),t(function(){return n.flashButtonLabel="Deployed!"}),t(function(){return n.flashButtonLabel=n.defaultFlashButtonLabel},2e3)},onError:function(e){console.log("Error flashing:",e),t(function(){return n.flashButtonLabel="Error"}),t(function(){return n.flashButtonLabel=n.defaultFlashButtonLabel},2e3)}})},n.generateFullHexStr=function(e,t){return d.a.injectPyStrIntoIntelHex(p,e,t)},n.getUserCode=function(){var e=n.brackets.getModule("editor/EditorManager").getActiveEditor();if(!e)return;return e._codeMirror.getValue()},n.fetchFirmware=function(){e.get(f,function(e){n.firmwareHexData=e})},n.getCurrentFilename=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"microbit.py",t=brackets.getModule("editor/EditorManager").getCurrentFullEditor();if(!t)return e;var n=t.getFile();return n?n.name:e},n.supportsWebUSB=v.c,n.firmwareHexData=null,n.device=null,n.defaultFlashButtonLabel="Deploy",n.flashButtonLabel=n.defaultFlashButtonLabel,e(document).on("bramble-ready",function(){n.brackets=window.brackets,n.bramble=window.bramble,n.Bramble=window.Bramble,n.init()})}g.$inject=["$timeout"]}).call(t,n(13))},782:function(e,t){},783:function(e,t){e.exports='<div class="template modal">\n    <div class="modal-dialog modal-lg" role="document">\n        <div class="modal-header">\n            <h1 class="dialog-title" id="dialog-title">Download to your micro:bit</h1>\n        </div>\n        <div class="modal-body modal-instructions">\n            <ol>\n                <li>\n                    <img src="/code/project/styles/images/micropython/method-1-step-1.png" alt="Step 1" />\n                    <span class="modal-step-title">\n                        <span class="modal-step-counter">1</span>\n                        Download\n                    </span>\n                    <span class="modal-step-description">\n                        Download has started\n                    </span>\n                </li>\n                <li>\n                    <img src="/code/project/styles/images/micropython/method-1-step-2.png" alt="Step 2" />\n                    <span class="modal-step-title">\n                        <span class="modal-step-counter">2</span>\n                        Connect\n                    </span>\n                    <span class="modal-step-description">\n                        Connect Micro:bit via USB\n                    </span>\n                </li>\n                <li>\n                    <img src="/code/project/styles/images/micropython/method-1-step-3.png" alt="Step 3" />\n                    <span class="modal-step-title">\n                        <span class="modal-step-counter">3</span>\n                        Copy &amp; Paste File\n                    </span>\n                    <span class="modal-step-description">\n                        Copy the downloaded file to Micro:bit USB drive\n                    </span>\n                </li>\n            </ol>\n        </div>\n        <div class="modal-footer">\n            <button class="dialog-button btn">Close</button>\n        </div>\n    </div>\n</div>\n'},784:function(e,t){e.exports='<div class="template modal">\n    <div class="modal-dialog modal-lg" role="document">\n        <div class="modal-header">\n            <h1 class="dialog-title" id="dialog-title">Deploy to your micro:bit</h1>\n        </div>\n        <div class="modal-body modal-instructions">\n            <ol>\n                <li>\n                    <img src="/code/project/styles/images/micropython/method-2-step-1.png" alt="Step 1" />\n                    <span class="modal-step-title">\n                        <span class="modal-step-counter">1</span>\n                        Connect\n                    </span>\n                    <span class="modal-step-description">\n                        Connect Micro:bit via USB\n                    </span>\n                </li>\n                <li>\n                    <img src="/code/project/styles/images/micropython/method-2-step-2.png" alt="Step 2" />\n                    <span class="modal-step-title">\n                        <span class="modal-step-counter">2</span>\n                        Select\n                    </span>\n                    <span class="modal-step-description">\n                        Select the device in the list and click Continue\n                    </span>\n                </li>\n                <li>\n                    <img src="/code/project/styles/images/micropython/method-2-step-3.png" alt="Step 3" />\n                    <span class="modal-step-title">\n                        <span class="modal-step-counter">3</span>\n                        Pair\n                    </span>\n                    <span class="modal-step-description">\n                        Pair your Micro:bit by selecting it in your browser\n                    </span>\n                </li>\n            </ol>\n        </div>\n        <div class="modal-footer">\n            <button class="dialog-button btn">Close</button>\n        </div>\n    </div>\n</div>\n'},791:function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"b",function(){return o}),n.d(t,"a",function(){return c});var r=n(792),a=(n.n(r),n(793)),i=(n.n(a),!!navigator.usb),s=null;function o(e){var t=e.hexGenerator,n=e.showInstructions,o=e.onStart,c=e.onDone,u=e.onError;if(!i)return console.log("WebUSB is not supported in this browser.");n&&n();var l=function(e){s=e;var n=new r.WebUSB(s),i=new a.DAPLink(n);return i.disconnect().catch(function(){}),i.connect().then(function(){var e=t(),n=(new TextEncoder).encode(e).buffer;return o(),i.flash(n)}).then(function(){return c(),i.disconnect()}).catch(function(e){u(e),s=null})};if(s)return l(s);navigator.usb.requestDevice({filters:[{vendorId:3368,productId:516}]}).then(l).catch(function(e){u(e),s=null})}function c(e,t){var n=t.hexGenerator,r=t.showInstructions;r&&r();var a=n(),i=document.createElement("a");document.body.appendChild(i),i.download=e,i.href="data:text/plain;charset=utf8,".concat(encodeURIComponent(a)),i.click(),i.remove()}},796:function(e,t){e.exports='<div class="bramble-ide-microbits" ng-if="vm.isMicrobitMode">\n  <a class="button" href="#" ng-click="vm.handleDownload()">\n      <i class="fa fa-download"></i> Download\n  </a>\n\n  <a class="button" ng-class="{\'is-active\' : vm.flashButtonLabel != vm.defaultFlashButtonLabel}"\n     href="#" ng-click="vm.handleFlash()" ng-if="vm.supportsWebUSB">\n      <i class="fa fa-upload"></i>\n      {{ vm.flashButtonLabel }}\n  </a>\n\n  <form id="bramble-ide-microbits-form" method="post" action="/api/v2/microbit/generate">\n      <input type="hidden" name="script" />\n  </form>\n</div>\n'},797:function(e,t,n){"use strict";(function(e){t.a=function(){return{bindToController:{},controller:g,controllerAs:"vm",restrict:"E",scope:{},template:n(805)}};var r=n(38),a=(n.n(r),n(17)),i=(n.n(a),n(43)),s=(n.n(i),n(798)),o=(n.n(s),n(799)),c=n.n(o),u=n(800),l=n.n(u),d=n(352),h=n(169),v=n(801),f="/ide/code/bin/micropython-hifive.hex",p=537387008;function g(t){var n=this;n.init=function(){if(n.isHifiveMode=Object(h.a)(),!n.isHifiveMode)return;console.log("Running HiFive mode..."),n.fetchFirmware(),e("#refresh").hide()},n.handleDownload=function(){if(!n.firmwareHexData)return console.error("Firmware not fetched yet...");var e=n.getUserCode();if(!e)return;Object(v.a)(n.getCurrentFilename().replace(".py",".hex"),{hexGenerator:function(){return n.generateFullHexStr(n.firmwareHexData,e)},showInstructions:n.showDownloadInstructions})},n.showDownloadInstructions=function(){var e=n.brackets.getModule("widgets/Dialogs"),t=c.a;e.cancelModalDialogIfOpen("template"),e.showModalDialogUsingTemplate(t,!0)},n.showFlashInstructions=function(){var e=n.brackets.getModule("widgets/Dialogs"),t=l.a;e.cancelModalDialogIfOpen("template"),e.showModalDialogUsingTemplate(t,!0)},n.showProgress=function(t){if(t)n.progressShown?e(".progress-container .progress-bar").width(t+"%"):(n.progressShown=!0,e(".template.modal").css("display","block"));else{e(".template.modal").css("display","");var r=n.brackets.getModule("widgets/Dialogs");r.cancelModalDialogIfOpen("template"),n.progressShown=!1}},n.isHifiveMode=!1,n.flashInstructionsShown=!1,n.downloadInstructionsShown=!1,n.progressShown=!1,n.handleFlash=function(){var e=n.getUserCode();if(!e)return;Object(v.b)({hexGenerator:function(){return n.generateFullHexStr(n.firmwareHexData,e)},showInstructions:n.showFlashInstructions,showProgress:n.showProgress,onStart:function(){console.log("Flashing..."),t(function(){return n.flashButtonLabel="Deploying"})},onDone:function(){console.log("Finished flashing!"),t(function(){return n.flashButtonLabel="Deployed!"}),t(function(){return n.flashButtonLabel=n.defaultFlashButtonLabel},2e3)},onError:function(e){console.log("Error flashing:",e),t(function(){return n.flashButtonLabel="Error"}),t(function(){return n.flashButtonLabel=n.defaultFlashButtonLabel},2e3)}})},n.generateFullHexStr=function(e,t){return d.a.injectPyStrIntoIntelHex(p,e,t)},n.getUserCode=function(){var e=n.brackets.getModule("editor/EditorManager").getActiveEditor();if(!e)return;return e._codeMirror.getValue()},n.fetchFirmware=function(){e.get(f,function(e){n.firmwareHexData=e})},n.getCurrentFilename=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"hifive.py",t=brackets.getModule("editor/EditorManager").getCurrentFullEditor();if(!t)return e;var n=t.getFile();return n?n.name:e},n.supportsWebUSB=v.c,n.firmwareHexData=null,n.device=null,n.defaultFlashButtonLabel="Deploy",n.flashButtonLabel=n.defaultFlashButtonLabel,e(document).on("bramble-ready",function(){n.brackets=window.brackets,n.bramble=window.bramble,n.Bramble=window.Bramble,n.init()})}g.$inject=["$timeout"]}).call(t,n(13))},798:function(e,t){},799:function(e,t){e.exports='<div class="template modal">\n    <div class="modal-dialog modal-lg" role="document">\n        <div class="modal-header">\n            <h1 class="dialog-title" id="dialog-title">Download to your HiFive</h1>\n        </div>\n        <div class="modal-body modal-instructions">\n            <ol>\n                <li>\n                    <img src="/code/project/styles/images/hifive/method-1-step-1.png" alt="Step 1" />\n                    <span class="modal-step-title">\n                        <span class="modal-step-counter">1</span>\n                        Download\n                    </span>\n                    <span class="modal-step-description">\n                        Download has started\n                    </span>\n                </li>\n                <li>\n                    <img src="/code/project/styles/images/hifive/method-1-step-2.png" alt="Step 2" />\n                    <span class="modal-step-title">\n                        <span class="modal-step-counter">2</span>\n                        Connect\n                    </span>\n                    <span class="modal-step-description">\n                        Connect HiFive via USB\n                    </span>\n                </li>\n                <li>\n                    <img src="/code/project/styles/images/hifive/method-1-step-3.png" alt="Step 3" />\n                    <span class="modal-step-title">\n                        <span class="modal-step-counter">3</span>\n                        Copy &amp; Paste File\n                    </span>\n                    <span class="modal-step-description">\n                        Copy the downloaded file to HiFive USB drive\n                    </span>\n                </li>\n            </ol>\n        </div>\n        <div class="modal-footer">\n            <button class="dialog-button btn">Close</button>\n        </div>\n    </div>\n</div>\n'},800:function(e,t){e.exports='<div class="template modal">\n    <div class="modal-dialog modal-lg" role="document">\n        <div class="modal-header">\n            <h1 class="dialog-title" id="dialog-title">Deploy to your HiFive</h1>\n        </div>\n        <div class="modal-body modal-instructions">\n            <ol>\n                <li>\n                    <img src="/code/project/styles/images/hifive/method-2-step-1.png" alt="Step 1" />\n                    <span class="modal-step-title">\n                        <span class="modal-step-counter">1</span>\n                        Connect\n                    </span>\n                    <span class="modal-step-description">\n                        Connect HiFive via USB\n                    </span>\n                </li>\n                <li>\n                    <img src="/code/project/styles/images/hifive/method-2-step-2.png" alt="Step 2" />\n                    <span class="modal-step-title">\n                        <span class="modal-step-counter">2</span>\n                        Select\n                    </span>\n                    <span class="modal-step-description">\n                        Select the device in the list and click Continue\n                    </span>\n                </li>\n                <li>\n                    <img src="/code/project/styles/images/hifive/method-2-step-3.png" alt="Step 3" />\n                    <span class="modal-step-title">\n                        <span class="modal-step-counter">3</span>\n                        Pair\n                    </span>\n                    <span class="modal-step-description">\n                        Pair your HiFive by selecting it in your browser\n                    </span>\n                </li>\n            </ol>\n        </div>\n        <div class="modal-footer">\n            <button class="dialog-button btn">Close</button>\n        </div>\n    </div>\n</div>\n'},801:function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"b",function(){return s}),n.d(t,"a",function(){return o});var r=n(382),a=n(802),i=!!navigator.usb;function s(e){var t=e.hexGenerator,n=e.showInstructions,s=e.showProgress,o=e.onStart,c=e.onDone,u=e.onError;if(!i)return console.log("WebUSB is not supported in this browser.");n&&n();var l=new a.a(function(e,t){e==r.a.SENDING?s&&s(100*t):e!=r.a.COMPLETED&&e!=r.a.ERROR&&e!=r.a.DISCONNECTED&&e!=r.a.REQUIRES_AUTH&&e!=r.a.UNSUPPORTED||s&&s()}),d=t(),h=function(){l.upload(d).then(function(){console.log("Upload successful!")})};if(l._usbDevice)return h();l.reset(),l.start().then(function(){o(),l._state===r.a.CONNECTED?(c(),h()):l._state!=r.a.ERROR&&l._state!=r.a.UNSUPPORTED||(console.error("Failed state: ",l._state),l.reset(),u())})}function o(e,t){var n=t.hexGenerator,r=t.showInstructions;r&&r();var a=n(),i=document.createElement("a");document.body.appendChild(i),i.download=e,i.href="data:text/plain;charset=utf8,".concat(encodeURIComponent(a)),i.click(),i.remove()}},802:function(e,t,n){"use strict";n.d(t,"a",function(){return R});var r=n(12),a=(n.n(r),n(353)),i=(n.n(a),n(101)),s=(n.n(i),n(8)),o=(n.n(s),n(20)),c=(n.n(o),n(127)),u=(n.n(c),n(357)),l=(n.n(u),n(359)),d=(n.n(l),n(360)),h=(n.n(d),n(361)),v=(n.n(h),n(362)),f=(n.n(v),n(363)),p=(n.n(f),n(364)),g=(n.n(p),n(365)),y=(n.n(g),n(366)),b=(n.n(y),n(367)),m=(n.n(b),n(368)),k=(n.n(m),n(369)),_=(n.n(k),n(370)),x=(n.n(_),n(371)),w=(n.n(x),n(372)),I=(n.n(w),n(373)),A=(n.n(I),n(374)),S=(n.n(A),n(375)),E=(n.n(S),n(376)),C=(n.n(E),n(377)),j=(n.n(C),n(378)),O=(n.n(j),n(379)),D=(n.n(O),n(380)),T=(n.n(D),n(381)),M=(n.n(T),n(0)),F=n.n(M),L=n(1),N=n.n(L),P=n(382),R=(n(803),n(804),function(){function e(t){F()(this,e),this.EMU_CMD_GET_PROBE_INFO=28,this.EMU_CMD_GET_CAPS_EX=237,this.EMU_CMD_GET_PROBE_INFO_CMD_GET_CAPS=0,this.EMU_PROBE_INFO_SUB_CMD_WRITE_MSD_IMG_CHUNK=5,this.EMU_PROBE_INFO_SUB_CMD_WRITE_MSD_IMG_END=6,this.EMU_CAP_EX_GET_PROBE_INFO=64,this.EMU_PROBE_INFO_CAP_MSD_IMG=2,this._device=null,this._usbPromise=null,this._interfaceNumber=null,this._outEndpoint=null,this._inEndpoint=null,this._buffer=null,this._dataToWrite=null,this._bytesWritten=0,this.ConnectorStates=P.a,this._progressCallback=t,this._state=P.a.DISCONNECTED,this.watchdogTimeout=0}return N()(e,[{key:"updateProgress",value:function(e,t){e&&(this._state=e),this._progressCallback&&this._progressCallback(this._state,t)}},{key:"isWebUSBEnabled",value:function(){return!!navigator.usb}},{key:"start",value:function(){var e=this;return this.isWebUSBEnabled()?this._usbDevice?(this.updateProgress(P.a.CONNECTED),Promise.resolve()):this._usbPromise?this._usbPromise:(console.log("Requesting USB Device..."),this.updateProgress(P.a.REQUESTINGUSBDEVICE),this._usbPromise=navigator.usb.requestDevice({filters:[{vendorId:4966}]}).then(function(t){return e._usbDevice=t,console.log("Connecting to USB device..."),e.updateProgress(P.a.CONNECTING),t.open()}).then(function(t){return console.log("Getting configuration..."),null===e._usbDevice.configuration?e._usbDevice.selectConfiguration(1):t}).then(function(t){for(var n=e._usbDevice.configuration.interfaces,r=null,a=null,i=!1,s="",o=0;o<n.length;o++){r=n[o];for(var c=0;c<r.alternates.length;c++)if(255==(a=r.alternates[c]).interfaceClass){i=!0;break}if(i)break}s="";return i?2!=a.endpoints.length&&(i=!1,s="USB interface doesn't provide needed in/out endpoints"):s="No matching USB interface found",i?(e._interfaceNumber=r.interfaceNumber,"out"==a.endpoints[0]?(e._outEndpoint=a.endpoints[0].endpointNumber,e._inEndpoint=a.endpoints[1].endpointNumber):(e._inEndpoint=a.endpoints[0].endpointNumber,e._outEndpoint=a.endpoints[1].endpointNumber),Promise.resolve(0)):(e.updateProgress(P.a.ERROR,s),Promise.reject(s))}).then(function(t){return e._usbDevice.claimInterface(e._interfaceNumber)}).then(function(t){return e.updateProgress(P.a.CONNECTED),e._usbDevice.selectAlternateInterface(e._interfaceNumber,0)}).catch(function(t){console.log("Error:",t),e.updateProgress(P.a.ERROR,t.toString())}),this._usbPromise):(this.updateProgress(P.a.UNSUPPORTED),Promise.resolve())}},{key:"stop",value:function(){window.clearTimeout(this.watchdogTimeout),this._usbDevice.close(),this.reset(),this.updateProgress(P.a.DISCONNECTED)}},{key:"reset",value:function(){this._usbDevice=null,this._usbPromise=null,this._interfaceNumber=null,this._outEndpoint=null,this._inEndpoint=null,this._buffer=null,this._dataToWrite=null,this._bytesWritten=0}},{key:"passcode",value:function(e){return Promise.resolve(!0)}},{key:"upload",value:function(e){var t=this;return this.updateProgress(P.a.SENDING,0),this._dataToWrite=new TextEncoder("utf-8").encode(e),this._bytesWritten=0,this.start().then(function(){t._buffer=null;var e=new Uint8Array(1);e[0]=t.EMU_CMD_GET_CAPS_EX,t.send(e);var n=t;t.receive(function(e){t.checkCapsEx(e)},function(e){n.error(e)})})}},{key:"send",value:function(e,t,n){var r=this._usbDevice.transferOut(this._outEndpoint,e);return r.then(t,n),r}},{key:"receive",value:function(e,t){var n=this._usbDevice.transferIn(this._inEndpoint,64);return n.then(e,t),n}},{key:"checkAllBytesReceived",value:function(e,t,n,r){if(this._buffer){e=new Uint8Array(e.buffer);var a=new Uint8Array(this._buffer.length+e.length);a.set(this._buffer,0),a.set(e,this._buffer.length),this._buffer=a}else this._buffer=new Uint8Array(e.buffer);return!(this._buffer.length<t)||(this.receive(n,r),!1)}},{key:"checkCapsEx",value:function(e){var t=this,n=this;if(this.checkAllBytesReceived(e.data,32,function(e){t.checkCapsEx(e)},function(e){n.error(e)}))if(this._buffer[this.EMU_CAP_EX_GET_PROBE_INFO>>3]>>(7&this.EMU_CAP_EX_GET_PROBE_INFO)&1){this._buffer=null,(e=new Uint8Array(2))[0]=this.EMU_CMD_GET_PROBE_INFO,e[1]=this.EMU_CMD_GET_PROBE_INFO_CMD_GET_CAPS,this.send(e);n=this;this.receive(function(e){t.checkCapsGetProbeInfo(e)},function(e){n.error(e)})}else this.error("This J-Link does not support file flash download")}},{key:"checkCapsGetProbeInfo",value:function(e){var t=this,n=this;this.checkAllBytesReceived(e.data,4,function(e){t.checkCapsGetProbeInfo(e)},function(e){n.error(e)})&&((this._buffer[0]|this._buffer[1]<<8|this._buffer[2]<<16|this._buffer[3]<<24)>>this.EMU_PROBE_INFO_CAP_MSD_IMG&1?this.sendImgChunk():this.error("This J-Link does not support file flash download"))}},{key:"sendImgChunk",value:function(){var e=this;this._buffer=null;var t=this._dataToWrite.byteLength-this._bytesWritten;t>4096&&(t=4096);var n=new Uint8Array(6+t);n[0]=this.EMU_CMD_GET_PROBE_INFO,n[1]=this.EMU_PROBE_INFO_SUB_CMD_WRITE_MSD_IMG_CHUNK,n[2]=255&t,n[3]=t>>8&255,n[4]=t>>16&255,n[5]=t>>24&255;for(var r=0;r<t;r++)n[6+r]=this._dataToWrite[this._bytesWritten+r];var a=this;this.send(n,function(t){e._bytesWritten+=t.bytesWritten-6,e.updateProgress(P.a.SENDING,e._bytesWritten/e._dataToWrite.byteLength),console.log("total sent: "+e._bytesWritten+" / "+e._dataToWrite.byteLength),e._dataToWrite.byteLength>e._bytesWritten?e.sendImgChunk():(e.updateProgress(P.a.COMPLETED),e.sendImgEnd())},function(e){a.error(e)})}},{key:"sendImgEnd",value:function(){var e=this;this._buffer=null;var t=new Uint8Array(2);t[0]=this.EMU_CMD_GET_PROBE_INFO,t[1]=this.EMU_PROBE_INFO_SUB_CMD_WRITE_MSD_IMG_END,this.send(t);var n=this;this.receive(function(t){e.checkProgResult(t)},function(e){n.error(e)})}},{key:"checkProgResult",value:function(e){var t=this,n=this;if(this.checkAllBytesReceived(e.data,4,function(e){t.checkProgResult(e)},function(e){n.error(e)})){var r=this._buffer[0]|this._buffer[1]<<8|this._buffer[2]<<16|this._buffer[3]<<24;r&&this._bytesWritten<r+4||(console.log("disconnect"),this.stop())}}},{key:"stopWatchdog",value:function(){window.clearTimeout(this.watchdogTimeout)}},{key:"startWatchdog",value:function(e){var t=this;this.watchdogTimeout=window.setTimeout(function(){t._watchdog()},e)}},{key:"_watchdog",value:function(e){this.updateProgress(P.a.ERROR,"Timed out")}},{key:"error",value:function(){var e;(e=console).error.apply(e,arguments),this.updateProgress(P.a.ERROR,"Error")}}]),e}())},803:function(e,t,n){"use strict"},804:function(e,t,n){"use strict"},805:function(e,t){e.exports='<div class="bramble-ide-hifive" ng-if="vm.isHifiveMode">\n  <a class="button" href="#" ng-click="vm.handleDownload()">\n      <i class="fa fa-download"></i> Download\n  </a>\n\n  <a class="button" ng-class="{\'is-active\' : vm.flashButtonLabel != vm.defaultFlashButtonLabel}"\n     href="#" ng-click="vm.handleFlash()" ng-if="vm.supportsWebUSB">\n      <i class="fa fa-upload"></i>\n      {{ vm.flashButtonLabel }}\n  </a>\n\n    <div class="template modal">\n        <div class="modal-dialog modal-lg" role="document">\n            <div class="modal-header">\n                <h1 class="dialog-title" id="dialog-title">Uploading...</h1>\n            </div>\n            <div class="modal-body">\n                <div class="progress-container">\n                    <div class="progress-bar"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},806:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return ne});var r,a,i,s=n(21),o=(n.n(s),n(22)),c=(n.n(o),n(25)),u=(n.n(c),n(11)),l=(n.n(u),n(41)),d=(n.n(l),n(26)),h=(n.n(d),n(12)),v=(n.n(h),n(8)),f=(n.n(v),n(20)),p=(n.n(f),n(17)),g=(n.n(p),n(77)),y=(n.n(g),n(30)),b=(n.n(y),n(18)),m=(n.n(b),n(184)),k=(n.n(m),n(39)),_=(n.n(k),n(78)),x=(n.n(_),n(19)),w=(n.n(x),n(23)),I=n.n(w),A=n(24),S=(n.n(A),n(0)),E=n.n(S),C=n(1),j=n.n(C),O=n(6),D=n.n(O),T=n(34),M=n.n(T),F=n(3),L=n.n(F),N=n(82),P=n.n(N),R=n(7),B=n.n(R),U=n(5),W=n.n(U),H=n(807),G=(n.n(H),n(2)),V=n(187),$=n(126),z=n(128),q=n(104),J=n(158),Y=n(116),Q=n(808),X=n(812),K=n(351),Z=n(383),ee=n(830),te=n(831),ne=Object(ee.a)({bindToController:{class:"<?",context:"<",offsetTop:"<?",projectId:"<?",avatarUserId:"<?",showFeedsPanelOnDeploy:"<?"},template:n(832),_singleton:!0})((i=a=function(t){function r(){var e,t;E()(this,r);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return t=D()(this,(e=L()(r)).call.apply(e,[this].concat(i))),W()(M()(t),"iconBellUrl",n(833)),W()(M()(t),"iconChatUrl",n(834)),W()(M()(t),"_class",null),W()(M()(t),"_avatarUserId",null),W()(M()(t),"offsetTop",0),W()(M()(t),"showingFeedsPanel",!1),W()(M()(t),"feedsPanelIframeLoaded",!1),t}return B()(r,t),j()(r,[{key:"onInit",value:function(){P()(L()(r.prototype),"onInit",this).call(this),this.offsetTop=void 0!==this.offsetTop?this.offsetTop:0}},{key:"onDeployed",value:function(){P()(L()(r.prototype),"onDeployed",this).call(this),this._context=void 0!==this.context?this.context:this.element.data("context"),this._avatarUserId=void 0!==this.avatarUserId?this.avatarUserId:this.element.data("avatarUserId"),void 0!==this.showFeedsPanelOnDeploy&&(this._showFeedsPanel=this.showFeedsPanelOnDeploy),this._context===X.a.IDE_BRAMBLE&&this._isFeedsDisabled__ideBramble()&&(this._showFeedsPanel=!1),this.class=void 0!==this.class?this.class:this.getClassForContext(this._context),this.elementInternal=e(".toolbar-feeds-button",this.element),this.$counter=e(".toolbar-feeds-button__counter",this.$counter),this.$counter.css("display","none"),this.createFeedsPanel(),this.taskUpdateFeedsButtonPosition(),this.$evalAsync()}},{key:"onDestroy",value:function(){P()(L()(r.prototype),"onDestroy",this).call(this),this.$panel&&Y.a.removeDirectiveElement(this.$panel),e("body").removeClass("body-toolbar-feeds--visible"),e("body.extension-layout-editor layout-editor .layout-editor__left").css("width","100%"),e("body.extension-layout-sandbox layout-sandbox .layout-sandbox__left").css("width","100%"),e("body.extension-context-course-lesson-minecraft-editor-bedrock view-lesson-minecraft-editor-bedrock .view-lesson-minecraft-editor-bedrock__body__right").css("width","100%"),e(".bramble-editor-container__left").css("width","100%")}},{key:"_isFeedsDisabled__ideBramble",value:function(){Object(G.a)(this._context===X.a.IDE_BRAMBLE);var e=V.a.get("hasCoach",!1);G.a.boolean(e);var t=V.a.get("projectOwnedBySessionUser",!1);return G.a.boolean(t),!(!e||!1!==t)}},{key:"getClassForContext",value:function(e){return G.a.string(e),"toolbar-feeds-button--context-".concat(e)}},{key:"taskUpdateFeedsButtonPosition",value:function(){var t=this;if(this._context!==X.a.IDE&&this._context!==X.a.IDE_BRAMBLE&&this._context!==X.a.IDE_COACHING&&this._context!==X.a.TEACHER_DASHBOARD_INBOX){var n=e(window),r=e("main"),a=e(".toolbar-feeds-button",this.element),i=function(){var e=r.offset().top+t.offsetTop;n.scrollTop()>0&&(e=t.offsetTop),a.css("top",e)};this.domBind(window,"scroll",i),this.domBind(window,"resize",i),i()}}},{key:"onClick",value:function(){var e;return I.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this._context!==X.a.IDE_BRAMBLE||!this._isFeedsDisabled__ideBramble()){t.next=7;break}return e=this.getDependency("modalPrompt"),G.a.object(e),"\n                You must save your project before being able to communicate with your Coach. \n                Please save your project first, then try again.\n            ",t.next=6,I.a.awrap(e.open({message:"\n                You must save your project before being able to communicate with your Coach. \n                Please save your project first, then try again.\n            ",confirmLabel:"OK",showCloseButton:!1,showCancelButton:!1}));case 6:return t.abrupt("return");case 7:this.showFeedsPanel();case 8:case"end":return t.stop()}},null,this)}},{key:"showFeedsPanel",value:function(){var t=this;return I.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(this.$panel){n.next=2;break}return n.abrupt("return");case 2:if(!this.showingFeedsPanel){n.next=4;break}return n.abrupt("return");case 4:if(!this.$panel.hasClass("toolbar-feeds-panel--visible")){n.next=6;break}return n.abrupt("return");case 6:return this.showingFeedsPanel=!0,n.prev=7,this.$panel.addClass("toolbar-feeds-panel--visible"),this.elementInternal.addClass("toolbar-feeds-button--selected"),e("body").addClass("body-toolbar-feeds-button--visible"),e("body.extension-layout-editor layout-editor .layout-editor__left").css("width","calc(100% - 344px)"),e("body.extension-layout-sandbox layout-sandbox .layout-sandbox__left").css("width","calc(100% - 344px)"),e("body.extension-context-course-lesson-minecraft-editor-bedrock view-lesson-minecraft-editor-bedrock .view-lesson-minecraft-editor-bedrock__body__right").css("width","calc(100% - 344px)"),e(".bramble-editor-container__left").css("width","calc(100% - 344px)"),n.next=17,I.a.awrap(z.a.waitCondition(function(){return!!t.reduxWrapper}));case 17:return n.next=19,I.a.awrap(z.a.waitCondition(function(){return!!t.extensionFeeds}));case 19:this.reduxWrapper.put(this.extensionFeeds.FeedsActions.disableSkipMarkSeenMessages()),this.reduxWrapper.put(this.extensionFeeds.FeedsActions.clearSelectedChannelUnreadMessages());case 21:return n.prev=21,this.showingFeedsPanel=!1,n.finish(21);case 24:case"end":return n.stop()}},null,this,[[7,,21,24]])}},{key:"hideFeedsPanel",value:function(){return I.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$panel){t.next=2;break}return t.abrupt("return");case 2:if(!this.showingFeedsPanel){t.next=4;break}return t.abrupt("return");case 4:if(!1!==this.$panel.hasClass("toolbar-feeds-panel--visible")){t.next=6;break}return t.abrupt("return");case 6:this.$panel.removeClass("toolbar-feeds-panel--visible"),this.elementInternal.removeClass("toolbar-feeds-button--selected"),e("body").removeClass("body-toolbar-feeds-button--visible"),e("body.extension-layout-editor layout-editor .layout-editor__left").css("width","100%"),e("body.extension-layout-sandbox layout-sandbox .layout-sandbox__left").css("width","100%"),e("body.extension-context-course-lesson-minecraft-editor-bedrock view-lesson-minecraft-editor-bedrock .view-lesson-minecraft-editor-bedrock__body__right").css("width","100%"),e(".bramble-editor-container__left").css("width","100%"),this.reduxWrapper.put(this.extensionFeeds.FeedsActions.enableSkipMarkSeenMessages());case 14:case"end":return t.stop()}},null,this)}},{key:"createFeedsPanel",value:function(){var t,n,r,a,i,s,o,c,u,l,d,h,v,f,p,g,y=this;return I.a.async(function(b){for(;;)switch(b.prev=b.next){case 0:if(G.a.string(this._context,"attempted to create feeds panel before context was set"),this.$panel=e('\n            <div class="toolbar-feeds-panel toolbar-feeds-panel--context-'.concat(this._context,'" style="width: 1px;">\n                <button class="toolbar-feeds-panel__close-button">\n                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" class="ng-scope">\n                        <g transform="translate(-5 -3)">\n                            <circle class="icon-close__bgd" cx="20" cy="20" r="20" transform="translate(10 6.7)" fill="#fff"></circle>\n                            <path d="M37.6 31.5L33.1 27l4.5-4.5a.5.5 0 0 0 .1-.2.5.5 0 0 0 0-.5l-2.2-2.1a.5.5 0 0 0-.7 0l-4.5 4.5-4.5-4.5a.5.5 0 0 0-.2-.1.5.5 0 0 0-.5 0L23 21.9a.5.5 0 0 0-.1.5.5.5 0 0 0 0 .2l4.6 4.5-4.5 4.5a.5.5 0 0 0-.1.2.5.5 0 0 0 0 .5l2.2 2.1a.5.5 0 0 0 .7 0l4.5-4.5 4.5 4.5a.5.5 0 0 0 .7 0l2.1-2.1a.5.5 0 0 0 .1-.5.5.5 0 0 0 0-.2z"></path>\n                        </g>\n                    </svg>\n                </button>\n            </div>\n        ')),![X.a.IDE,X.a.IDE_COACHING,X.a.TEACHER_DASHBOARD_INBOX].includes(this._context)){b.next=31;break}return this._context===X.a.IDE?this._class="toolbar-feeds-button--stream":this._context===X.a.IDE_BRAMBLE?this._avatarUserId?this._class="toolbar-feeds-button--avatar":this._class="toolbar-feeds-button--stream":this._context===X.a.IDE_COACHING?this._avatarUserId?this._class="toolbar-feeds-button--avatar":this._class="toolbar-feeds-button--stream":this._context===X.a.TEACHER_DASHBOARD_INBOX&&(this._class="toolbar-feeds-button--stream"),this.$evalAsync(),0===(t=e("body.extension-layout-editor layout-editor .layout-editor__right")).length&&(t=e("body.extension-layout-sandbox layout-sandbox .layout-sandbox__right")),0===t.length&&(t=e("body.extension-context-course-lesson-minecraft-editor-bedrock view-lesson-minecraft-editor-bedrock .view-lesson-minecraft-editor-bedrock__body__right")),t.append(this.$panel),this.extensionManager=Z.a,this.reduxWrapper=J.a,b.next=13,I.a.awrap(this.extensionManager.enable("extension-feeds"));case 13:if(this.extensionFeeds=b.sent,!1!==this.isDeployed()){b.next=16;break}return b.abrupt("return");case 16:return G.a.object(this.extensionFeeds),b.next=19,I.a.awrap(this.extensionManager.enable("extension-components-feeds"));case 19:if(this.extensionComponentsFeeds=b.sent,!1!==this.isDeployed()){b.next=22;break}return b.abrupt("return");case 22:G.a.object(this.extensionComponentsFeeds),this.reduxWrapper.put(this.extensionFeeds.FeedsActions.setContext(this._context)),this.reduxWrapper.put(this.extensionFeeds.FeedsActions.show()),n=this._context,Y.a.deployDirectiveController(this.extensionFeeds.FeedsDirectiveControllerClass,{target:".toolbar-feeds-panel",params:{context:n}}),this.createFeedsPanel__monitorUnreadMessages(),this.createFeedsPanel__listenMessageAttachmentClicked(),b.next=75;break;case 31:return r="feeds-ide",this._context===X.a.STUDENT_DASHBOARD?r="feeds-student-dashboard":this._context===X.a.TEACHER_DASHBOARD&&(r="feeds-teacher-dashboard"),a="/ide/v3?type=feeds&context=".concat(this._context,"&loadScreen=").concat(r),(i=V.a.get("ideCacheToken"))&&(a+="&cache=max&v=".concat(i)),s='<iframe src="'.concat(a,'" frameborder="0"></iframe>'),this.$panel.append(s),o=this.element,this._context===X.a.IDE_BRAMBLE&&(o=e(".bramble-editor-container__right")),o.append(this.$panel),c=e("iframe",this.$panel),b.prev=42,b.next=45,I.a.awrap($.a.waitIframeLoaded(c,{retryUrl:a,waitSelectorMode:"available"}));case 45:if(!1!==this.isDeployed()){b.next=47;break}return b.abrupt("return");case 47:b.next=53;break;case 49:return b.prev=49,b.t0=b.catch(42),this.destroy(),b.abrupt("return");case 53:return u=c[0],G.a.object(u),this.reduxWrapper=u.contentWindow.__ReduxWrapper,G.a.object(this.reduxWrapper),this.extensionManager=u.contentWindow.__ExtensionManager,G.a.object(this.extensionManager),b.next=61,I.a.awrap(this.extensionManager.waitExtensionEnabled("extension-feeds"));case 61:if(this.extensionFeeds=b.sent,!1!==this.isDeployed()){b.next=64;break}return b.abrupt("return");case 64:return G.a.object(this.extensionFeeds),b.next=67,I.a.awrap(this.extensionManager.waitExtensionEnabled("extension-components-feeds"));case 67:if(this.extensionComponentsFeeds=b.sent,!1!==this.isDeployed()){b.next=70;break}return b.abrupt("return");case 70:G.a.object(this.extensionComponentsFeeds),this.createFeedsPanel__monitorUnreadMessages(),this.createFeedsPanel__listenOpenProject(),this.createFeedsPanel__listenMessageAttachmentClicked(),[X.a.STUDENT_DASHBOARD,X.a.TEACHER_DASHBOARD].includes(this._context)?(this.createFeedsPanel__student__changeButtonStyleOnHashChange(),this.createFeedsPanel__student__selectChannelOnHashChange(),this.createFeedsPanel__student__setHashOnSelectFeed()):this._context===X.a.IDE_BRAMBLE&&(l=this.projectId,G.a.string(l),d=V.a.get("hasCoach",!1),h=V.a.get("coachedStudentId"),d?(v=V.a.get("sessionUserId"),G.a.string(v),f="feeds/coaching/users/".concat(v,"/notebooks/").concat(this.projectId),this.reduxWrapper.put(this.extensionFeeds.FeedsActions.selectFeed(f))):h?(p="feeds/coaching/users/".concat(h,"/notebooks/").concat(this.projectId),this.reduxWrapper.put(this.extensionFeeds.FeedsActions.selectFeed(p))):Object(G.a)(!1,"trying to show coaching feed in invalid state: coach without coached student param"),this._avatarUserId?this._class="toolbar-feeds-button--avatar":this._class="toolbar-feeds-button--stream",this.$evalAsync(),window.__addCodeAttachmentToFeedPost=function(e,t){y.reduxWrapper.put(y.extensionFeeds.FeedsActions.addPostAttachmentCode(e,{editor:t})),showFeedsPanel()},window.__setPostContainerClipboardHints=function(e){y.reduxWrapper.put(y.extensionFeeds.FeedsActions.setPostContainerClipboardHints(e))},window.__clearFeedHighlights=function(){y.reduxWrapper.put(y.extensionFeeds.FeedsActions.clearHighlightedMessageAttachment())},this._contextBrambleIde__listenAttachments());case 75:g=e(".toolbar-feeds-panel__close-button",this.$panel),this.domBind(g,"click",function(){return y.hideFeedsPanel()}),this._showFeedsPanel&&this.showFeedsPanel(),this.$on("showFeedsPanel",function(){return y.showFeedsPanel()}),this.$on("addPostAttachmentImage",function(e,t){return y.reduxWrapper.put(y.extensionFeeds.FeedsActions.addPostAttachmentImage(t))}),this.taskListenTakeScreenshot();case 81:case"end":return b.stop()}},null,this,[[42,49]])}},{key:"_contextBrambleIde__listenAttachments",value:function(){var e,t,n,r,a,i,s,o,c,u,l,d;return I.a.async(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=3,I.a.awrap(this.reduxWrapper.take(this.extensionFeeds.FeedsActions.MESSAGE_ATTACHMENT_CLICKED));case 3:if(e=h.sent,!1!==this.isDeployed()){h.next=6;break}return h.abrupt("return");case 6:if(t=e.payload.channelId,G.a.string(t),n=e.payload.sequenceId,G.a.integer(n),r=e.payload.attachmentId,G.a.string(r),a=this.extensionFeeds.FeedsState,i=a.currentScopeState(),s=a._messageIdForParts(t,n),G.a.string(s),o=a.messageForMessageId(i,s),G.a.object(o),c=a._attachmentForMessage(o,r),G.a.object(c),c.type===K.a.CODE){h.next=22;break}return h.abrupt("continue",0);case 22:u=c.code,G.a.string(u),l=c.editor,G.a.object(l),d=this.extensionFeeds.FeedsState._messageAttachmentIdForMessageAndAttachment(o,c),G.a.string(d),this.reduxWrapper.put(this.extensionFeeds.FeedsActions.highlightMessageAttachment(d,{scrollIntoView:!1})),window.__highlightCode(u,l),h.next=0;break;case 32:case"end":return h.stop()}},null,this)}},{key:"taskListenTakeScreenshot",value:function(){var t,n,r,a,i,s,o,c,u;return I.a.async(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=3,I.a.awrap(this.reduxWrapper.take(this.extensionFeeds.FeedsActions.TAKE_SCREENSHOT));case 3:if(!1!==this.isDeployed()){l.next=5;break}return l.abrupt("return");case 5:if(this.reduxWrapper.put(this.extensionFeeds.FeedsActions.unselectPostAttachmentType()),this._context!==X.a.IDE_BRAMBLE){l.next=41;break}t=(t=this._collectIframeBodies(document.body)).filter(function(t){var n=e(t);return!n.hasClass("ide-app")&&!n.hasClass("bramble-ide")}),n=!0,r=!1,a=void 0,l.prev=12,i=t[Symbol.iterator]();case 14:if(n=(s=i.next()).done){l.next=25;break}return o=s.value,l.next=18,I.a.awrap(Q.a.takeScreenshot__html2canvas(o));case 18:if(c=l.sent,!1!==this.isDeployed()){l.next=21;break}return l.abrupt("return");case 21:this.reduxWrapper.put(this.extensionFeeds.FeedsActions.addPostAttachmentImage(c));case 22:n=!0,l.next=14;break;case 25:l.next=31;break;case 27:l.prev=27,l.t0=l.catch(12),r=!0,a=l.t0;case 31:l.prev=31,l.prev=32,n||null==i.return||i.return();case 34:if(l.prev=34,!r){l.next=37;break}throw a;case 37:return l.finish(34);case 38:return l.finish(31);case 39:l.next=47;break;case 41:return l.next=43,I.a.awrap(Q.a.takeScreenshot__html2canvas(document.body));case 43:if(u=l.sent,!1!==this.isDeployed()){l.next=46;break}return l.abrupt("return");case 46:this.reduxWrapper.put(this.extensionFeeds.FeedsActions.addPostAttachmentImage(u));case 47:l.next=0;break;case 49:case"end":return l.stop()}},null,this,[[12,27,31,39],[32,,34,38]])}},{key:"_collectIframeBodies",value:function(t){var n=[];return function t(r){return I.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:e("iframe",r).each(function(r,a){var i=e(a).contents(),s=e("body",i)[0];s&&n.push(s),t(i)});case 2:case"end":return a.stop()}})}(t),n}},{key:"_contextBrambleIde__listenAttachments",value:function(){var e,t,n,r,a,i,s,o,c,u,l,d;return I.a.async(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=3,I.a.awrap(this.reduxWrapper.take(this.extensionFeeds.FeedsActions.MESSAGE_ATTACHMENT_CLICKED));case 3:if(e=h.sent,!1!==this.isDeployed()){h.next=6;break}return h.abrupt("return");case 6:if(t=e.payload.channelId,G.a.string(t),n=e.payload.sequenceId,G.a.integer(n),r=e.payload.attachmentId,G.a.string(r),a=this.extensionFeeds.FeedsState,i=a.currentScopeState(),s=a._messageIdForParts(t,n),G.a.string(s),o=a.messageForMessageId(i,s),G.a.object(o),c=a._attachmentForMessage(o,r),G.a.object(c),c.type===K.a.CODE){h.next=22;break}return h.abrupt("continue",0);case 22:u=c.code,G.a.string(u),l=c.editor,G.a.object(l),d=this.extensionFeeds.FeedsState._messageAttachmentIdForMessageAndAttachment(o,c),G.a.string(d),this.reduxWrapper.put(this.extensionFeeds.FeedsActions.highlightMessageAttachment(d,{scrollIntoView:!1})),window.__highlightCode(u,l),h.next=0;break;case 32:case"end":return h.stop()}},null,this)}},{key:"createFeedsPanel__monitorUnreadMessages",value:function(){var e,t,n;return I.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,I.a.awrap(this.extensionManager.waitExtensionEnabled("extension-lynker"));case 2:if(e=r.sent,!1!==this.isDeployed()){r.next=5;break}return r.abrupt("return");case 5:G.a.object(e);case 6:return r.next=9,I.a.awrap(this.reduxWrapper.take([e.extensionActions.CLEAR_CHANNEL_UNREAD_MESSAGES,e.extensionActions.SET_LAST_SEEN_MESSAGE_SEQUENCE_ID,q.a.succeededActionTypeForActionType(e.extensionActions.JOIN_CHANNELS),q.a.succeededActionTypeForActionType(e.extensionActions.LEAVE_CHANNELS),q.a.succeededActionTypeForActionType(e.extensionActions.LOAD_CHANNELS_STATS),this.extensionFeeds.FeedsActions.SELECT_FEED,this.extensionFeeds.FeedsActions.ADD_MESSAGES,q.a.succeededActionTypeForActionType(this.extensionFeeds.FeedsActions.SET_NOTIFICATION_FEEDS)]));case 9:if(r.sent,!1!==this.isDeployed()){r.next=12;break}return r.abrupt("return");case 12:t=this.getTotalFeedUnreadMessages(),n=t>9?"9+":t,this.$counter.html(n),t>0?this.$counter.css("display","flex"):this.$counter.css("display","none"),r.next=6;break;case 18:case"end":return r.stop()}},null,this)}},{key:"getTotalFeedUnreadMessages",value:function(){var e=this.extensionFeeds.FeedsState.currentScopeState(),t=this.extensionFeeds.FeedsState.getSelectedFeed(e),n=t?t.channelId:null,r={};return n&&(r.channelIdsWhitelist=[n]),this.extensionFeeds.FeedsState.getTotalFeedUnreadMessages(e,r)}},{key:"createFeedsPanel__listenOpenProject",value:function(){var e,t,n,r,a;return I.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:G.a.object(this.extensionFeeds);case 1:return i.next=4,I.a.awrap(this.reduxWrapper.take(this.extensionFeeds.FeedsActions.OPEN_PROJECT));case 4:if(e=i.sent,!1!==this.isDeployed()){i.next=7;break}return i.abrupt("return");case 7:t=e.payload.projectId,G.a.string(t),n=encodeURIComponent(window.location.href),r=encodeURIComponent("/ide/v3?p=".concat(t,"&showFeed=true")),a="/api/redirectexperiencetop?experienceTop=".concat(n,"&next=").concat(r),window.open(a,"_blank"),i.next=1;break;case 15:case"end":return i.stop()}},null,this)}},{key:"createFeedsPanel__listenMessageAttachmentClicked",value:function(){var e,t,n,r,a,i,s,o,c;return I.a.async(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=3,I.a.awrap(this.reduxWrapper.take(this.extensionFeeds.FeedsActions.MESSAGE_ATTACHMENT_CLICKED));case 3:if(e=u.sent,!1!==this.isDeployed()){u.next=6;break}return u.abrupt("return");case 6:t=e.payload.channelId,G.a.string(t),n=e.payload.sequenceId,G.a.integer(n),r=e.payload.attachmentId,G.a.string(r),a=this.extensionFeeds.FeedsState,i=a.currentScopeState(),s=a._messageIdForParts(t,n),G.a.string(s),o=a.messageForMessageId(i,s),G.a.object(o),c=a._attachmentForMessage(o,r),G.a.object(c),c.type===K.a.LINK?this._createFeedsPanel__listenMessageAttachmentClicked__link(o,c):c.type===K.a.IMAGE?this._createFeedsPanel__listenMessageAttachmentClicked__image(o,c):c.type===K.a.CLASS_ASSIGNMENT_COURSE?this._createFeedsPanel__listenMessageAttachmentClicked__classAssignmentCourse(o,c):c.type===K.a.CLASS_ASSIGNMENT_LESSON&&this._createFeedsPanel__listenMessageAttachmentClicked__classAssignmentLesson(o,c),u.next=0;break;case 23:case"end":return u.stop()}},null,this)}},{key:"createFeedsPanel__student__changeButtonStyleOnHashChange",value:function(){var e,t=this;return I.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:(e=function(){var e,n;return I.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:e=window.location.hash,G.a.string(e),(n=e.split("/")).length>=3&&"my-classes"===n[1]&&n[2].match(/^[0-9a-fA-F]{24}$/)?t._class="toolbar-feeds-button--stream":t._class="toolbar-feeds-button--notifications",t.$evalAsync();case 5:case"end":return r.stop()}})})(),this.domBind(window,"hashchange",e);case 3:case"end":return n.stop()}},null,this)}},{key:"createFeedsPanel__student__selectChannelOnHashChange",value:function(){var e,t=this;return I.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:(e=function(){var e,n,r,a,i;return I.a.async(function(s){for(;;)switch(s.prev=s.next){case 0:if(e=window.location.hash,G.a.string(e),n=t.extensionFeeds.FeedsState,G.a.object(n),r=n.currentScopeState(),G.a.object(r),a=n.getSelectedFeedId(r),G.a.string(a),(i=t._student__feedIdFromHash(e))!==a){s.next=11;break}return s.abrupt("return");case 11:return s.next=13,I.a.awrap(t.selectFeed(i,{updateLocationHash:!1}));case 13:if(!1!==t.isDeployed()){s.next=15;break}return s.abrupt("return");case 15:case"end":return s.stop()}})})(),this.domBind(window,"hashchange",e);case 3:case"end":return n.stop()}},null,this)}},{key:"createFeedsPanel__student__setHashOnSelectFeed",value:function(){var e,t,n;return I.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,I.a.awrap(this.reduxWrapper.take(this.extensionFeeds.FeedsActions.SELECT_FEED));case 3:if(e=r.sent,!1!==this.isDeployed()){r.next=6;break}return r.abrupt("return");case 6:if(!1!==(void 0===e.payload.updateLocationHash||e.payload.updateLocationHash)){r.next=9;break}return r.abrupt("continue",0);case 9:t=e.payload.feedId,(n=this._student__hashFromFeedId(t))&&(window.location.hash=n),r.next=0;break;case 14:case"end":return r.stop()}},null,this)}},{key:"_student__feedIdFromHash",value:function(e){var t=this.extensionFeeds.FeedsState;G.a.object(t);var n=t._getNotificationsFeedId();G.a.string(n);var r=this._student__classroomIdFromHash(e);return null==r?n:"feeds/classrooms/".concat(r)}},{key:"_student__classroomIdFromHash",value:function(e){if(!1===e.startsWith("#/my-classes/"))return null;var t=e.split("/"),n=t.length>=3?t[2]:null;return n||null}},{key:"_student__classroomIdFromFeedId",value:function(e){if(!1===e.startsWith("feeds/classrooms/"))return null;var t=e.split("/");if(t.length<3)return null;var n=t[2];return n||null}},{key:"_student__hashFromFeedId",value:function(e){if("$$notifications"===e)return"#/my-classes/";var t=this._student__classroomIdFromFeedId(e);return t?"#/my-classes/".concat(t,"/lessons"):null}},{key:"_createFeedsPanel__listenMessageAttachmentClicked__link",value:function(e,t){var n=t.url;n&&window.open(n,"_blank")}},{key:"_createFeedsPanel__listenMessageAttachmentClicked__image",value:function(t,n){if(null!=n.imageUrl)if(e("iframe",this.$panel).length>0){var r=n.imageUrl;G.a.string(r);var a=new Image;a.src=n.imageUrl;var i=void 0!==window.screenLeft?window.screenLeft:window.screenX,s=void 0!==window.screenTop?window.screenTop:window.screenY,o=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,c=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,u=o/window.screen.availWidth,l=(o-640)/2/u+i,d=(c-480)/2/u+s,h=640/u,v=480/u,f=window.open("","_blank","width=".concat(h,",height=").concat(v,",top=").concat(d,",left=").concat(l,",scrollbars=yes"));f.document.write(a.outerHTML),f.document.title="Feed Image"}else{var p=this.extensionManager.enabledExtensionById("extension-core-directives");G.a.object(p);var g='<img src="'.concat(n.imageUrl,'" style="width: 100%; max-width: 640px;">');this.reduxWrapper.put(p.ModalDialogActions.show(g,{showConfirmButton:!1,showCloseButton:!0}))}}},{key:"_createFeedsPanel__listenMessageAttachmentClicked__classAssignmentCourse",value:function(e,t){if(this._context!==X.a.TEACHER_DASHBOARD){var n=t.classroomId;if(n){var r=t.courseId;if(r){var a="#/my-classes/".concat(n,"/lessons/").concat(r);window.location.hash=a}}}}},{key:"_createFeedsPanel__listenMessageAttachmentClicked__classAssignmentLesson",value:function(e,t){if(this._context!==X.a.TEACHER_DASHBOARD){var n=t.classroomId;if(n){var r=t.assignmentId;if(r){var a=this.extensionFeeds.FeedsState.currentScopeState(),i=this.extensionFeeds.FeedsState.getClassroomAssignment(a,n,r);if(!i||!1!==i.assigned){var s="/api/dashboard/student/classrooms/startassignment?classroomId=".concat(n,"&assignmentId=").concat(r);window.open(s,"_blank")}}}}}},{key:"createFeedsPanel__teacher__changeButtonStyleOnHashChange",value:function(){var e,t=this;return I.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:(e=function(){var e,n;return I.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:e=window.location.hash,G.a.string(e),(n=e.split("/")).length>=4&&"classrooms"===n[2]&&n[3].match(/^[0-9a-fA-F]{24}$/)?t._class="toolbar-feeds-button--stream":t._class="toolbar-feeds-button--notifications",t.$evalAsync();case 5:case"end":return r.stop()}})})(),this.domBind(window,"hashchange",e);case 3:case"end":return n.stop()}},null,this)}},{key:"createFeedsPanel__teacher__selectChannelOnHashChange",value:function(){var e,t=this;return I.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:(e=function(){var e,n,r,a,i;return I.a.async(function(s){for(;;)switch(s.prev=s.next){case 0:if(e=window.location.hash,G.a.string(e),n=t.extensionFeeds.FeedsState,G.a.object(n),r=n.currentScopeState(),G.a.object(r),a=n.getSelectedFeedId(r),G.a.string(a),(i=t._teacher__feedIdFromHash(e))!==a){s.next=11;break}return s.abrupt("return");case 11:return s.next=13,I.a.awrap(t.selectFeed(i,{updateLocationHash:!1}));case 13:if(!1!==t.isDeployed()){s.next=15;break}return s.abrupt("return");case 15:case"end":return s.stop()}})})(),this.domBind(window,"hashchange",e);case 3:case"end":return n.stop()}},null,this)}},{key:"createFeedsPanel__teacher__setHashOnSelectFeed",value:function(){var e,t,n;return I.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,I.a.awrap(this.reduxWrapper.take(this.extensionFeeds.FeedsActions.SELECT_FEED));case 3:if(e=r.sent,!1!==this.isDeployed()){r.next=6;break}return r.abrupt("return");case 6:if(!1!==(void 0===e.payload.updateLocationHash||e.payload.updateLocationHash)){r.next=9;break}return r.abrupt("continue",0);case 9:t=e.payload.feedId,(n=this._teacher_hashFromFeedId(t))&&(window.location.hash=n),r.next=0;break;case 14:case"end":return r.stop()}},null,this)}},{key:"_teacher__feedIdFromHash",value:function(e){var t=this.extensionFeeds.FeedsState;G.a.object(t);var n=t._getNotificationsFeedId();G.a.string(n);var r=this._teacher__classroomIdFromHash(e);return null==r?n:"feeds/classrooms/".concat(r)}},{key:"_teacher__classroomIdFromHash",value:function(e){if(!1===e.startsWith("#/t/classrooms/"))return null;var t=e.split("/"),n=t.length>3?t[3]:null;return n||null}},{key:"_teacher__classroomIdFromFeedId",value:function(e){if(!1===e.startsWith("feeds/classrooms/"))return null;var t=e.split("/");if(t.length<3)return null;var n=t[2];return n||null}},{key:"_teacher_hashFromFeedId",value:function(e){if("$$notifications"===e)return"#/t/home/active";var t=this._teacher__classroomIdFromFeedId(e);return t?"#/t/classrooms/".concat(t,"/courses"):null}},{key:"selectFeed",value:function(e){var t,n,r=arguments;return I.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:if(t=r.length>1&&void 0!==r[1]?r[1]:{},G.a.string(e),Object(G.a)(!1===e.endsWith("/")),G.a.object(t),n=this.extensionFeeds.FeedsState.currentScopeState(),!1!==this.extensionFeeds.FeedsState.isStarted(n)){a.next=9;break}return a.next=9,I.a.awrap(this.reduxWrapper.take(this.extensionFeeds.FeedsActions.STARTED));case 9:return a.next=11,I.a.awrap(this.reduxWrapper.putAndWait(this.extensionFeeds.FeedsActions.selectFeed(e,t)));case 11:if(!1!==this.isDeployed()){a.next=13;break}return a.abrupt("return");case 13:this.reduxWrapper.put(this.extensionFeeds.FeedsActions.enableSkipMarkSeenMessages());case 14:case"end":return a.stop()}},null,this)}}]),r}(te.a),W()(a,"CLASS",function(){return"ToolbarFeedsButtonDirectiveControllerClass"}),r=i))||r}).call(t,n(13))},807:function(e,t){},808:function(e,t,n){"use strict";n.d(t,"a",function(){return y});var r=n(99),a=(n.n(r),n(8)),i=(n.n(a),n(20)),s=(n.n(i),n(100)),o=(n.n(s),n(23)),c=n.n(o),u=n(24),l=(n.n(u),n(0)),d=n.n(l),h=n(1),v=n.n(h),f=n(2),p=n(809),g=n(810),y=new(function(){function e(){d()(this,e)}return v()(e,[{key:"takeScreenshot__html2canvas",value:function(e){var t,n,r,a,i,s,o,u,l=arguments;return c.a.async(function(d){for(;;)switch(d.prev=d.next){case 0:return t=l.length>1&&void 0!==l[1]?l[1]:{},f.a.object(e),f.a.object(t),1024,n=window.innerHeight/window.innerWidth,r=Math.ceil(window.innerWidth<1024?window.innerWidth:1024),a=Math.ceil(r*n),d.next=9,c.a.awrap(g.a.loadHtml2Canvas());case 9:return i=d.sent,d.next=12,c.a.awrap(i(e,{logging:!1}));case 12:return s=d.sent,o=p.a.resize(s,r,a),u=o.toDataURL("image/jpg"),d.abrupt("return",u);case 16:case"end":return d.stop()}})}},{key:"takeScreenshot__capture",value:function(){var e,t;return c.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return e=function(){var e,t,n,r,a;return c.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:return e=document.createElement("canvas"),t=e.getContext("2d"),n=document.createElement("video"),i.next=5,c.a.awrap(navigator.mediaDevices.getDisplayMedia());case 5:return r=i.sent,n.srcObject=r,t.drawImage(n,0,0,window.width,window.height),a=e.toDataURL("image/jpg"),r.getTracks().forEach(function(e){return e.stop()}),i.abrupt("return",a);case 11:case"end":return i.stop()}})},n.next=3,c.a.awrap(e());case 3:return t=n.sent,n.abrupt("return",t);case 5:case"end":return n.stop()}})}}]),e}())},809:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var r=n(8),a=(n.n(r),n(20)),i=(n.n(a),n(23)),s=n.n(i),o=n(24),c=(n.n(o),n(0)),u=n.n(c),l=n(1),d=n.n(l),h=n(2),v=new(function(){function e(){u()(this,e)}return d()(e,[{key:"blobFromCanvas",value:function(e){return s.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){return e.toBlob(function(e){return t(e)})}));case 1:case"end":return t.stop()}})}},{key:"canvasFromImage",value:function(e){var t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t}},{key:"resize",value:function(e,t,n){if(Object(h.a)(void 0!==t&&void 0!==n),e.width===t&&e.height===n)return e;var r=this.clone(e);return e.width=t,e.height=n,e.getContext("2d").drawImage(r,0,0,e.width,e.height),e}},{key:"clone",value:function(e){return this.getRegion(e,0,0,e.width,e.height)}},{key:"getRegion",value:function(e,t,n,r,a){var i=document.createElement("canvas");return i.width=r,i.height=a,i.getContext("2d").drawImage(e,t,n,r,a,0,0,r,a),i}}]),e}())},810:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(8),a=(n.n(r),n(20)),i=(n.n(a),n(23)),s=n.n(i),o=n(24),c=(n.n(o),n(0)),u=n.n(c),l=n(1),d=n.n(l),h=n(2),v=(n(811),n(128)),f=new(function(){function e(){u()(this,e)}return d()(e,[{key:"loadPackage",value:function(e){return s.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(h.a.string(e),"codemirror"!==e){t.next=7;break}return t.next=4,s.a.awrap(this.loadCodeMirror());case 4:return t.abrupt("return",t.sent);case 7:if("prettier"!==e){t.next=13;break}return t.next=10,s.a.awrap(this.loadPrettier());case 10:return t.abrupt("return",t.sent);case 13:if("spine"!==e){t.next=19;break}return t.next=16,s.a.awrap(this.loadSpine());case 16:return t.abrupt("return",t.sent);case 19:Object(h.a)(!1,"unknown package: ".concat(e));case 20:case"end":return t.stop()}},null,this)}},{key:"loadCodeMirror",value:function(){return s.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.__codeMirror){e.next=2;break}return e.abrupt("return",this.__codeMirror);case 2:return e.next=4,s.a.awrap(v.a.loadChunk(function(){return n.e(0).then(n.bind(null,837))}));case 4:return this.__codeMirror=e.sent,e.abrupt("return",this.__codeMirror);case 6:case"end":return e.stop()}},null,this)}},{key:"loadPrettier",value:function(){return s.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.__prettier){e.next=2;break}return e.abrupt("return",this.__prettier);case 2:return e.next=4,s.a.awrap(v.a.loadChunk(function(){return n.e(1).then(n.bind(null,838))}));case 4:return this.__prettier=e.sent,e.abrupt("return",this.__prettier);case 6:case"end":return e.stop()}},null,this)}},{key:"loadSpine",value:function(){var e,t;return s.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(!this.__spine){r.next=2;break}return r.abrupt("return",this.__spine);case 2:return r.next=4,s.a.awrap(v.a.loadChunk(function(){return n.e(3).then(n.bind(null,839))}));case 4:return e=r.sent,h.a.object(e),t=e.spine,h.a.object(t),this.__spine=t,r.abrupt("return",this.__spine);case 10:case"end":return r.stop()}},null,this)}},{key:"loadHtml2Canvas",value:function(){var e,t;return s.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(!this.__html2canvas){r.next=2;break}return r.abrupt("return",this.__html2canvas);case 2:return r.next=4,s.a.awrap(v.a.loadChunk(function(){return n.e(2).then(n.bind(null,840))}));case 4:return e=r.sent,h.a.object(e),t=e.html2canvas,h.a.function(t),this.__html2canvas=t,r.abrupt("return",this.__html2canvas);case 10:case"end":return r.stop()}},null,this)}}]),e}())},811:function(e,t,n){"use strict";var r=n(11);n.n(r),n(2)},812:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var r=n(0),a=n.n(r),i=n(1),s=n.n(i),o=n(6),c=n.n(o),u=n(3),l=n.n(u),d=n(7),h=n.n(d),v=new(function(e){function t(){return a()(this,t),c()(this,l()(t).apply(this,arguments))}return h()(t,e),s()(t,[{key:"ENUM",get:function(){return{IDE:"ide",IDE_COACHING:"ide-coaching",IDE_BRAMBLE:"ide-bramble",STUDENT_DASHBOARD:"student-dashboard",TEACHER_DASHBOARD:"teacher-dashboard",TEACHER_DASHBOARD_INBOX:"teacher-dashboard-inbox"}}}]),t}(n(92).a))},814:function(e,t,n){"use strict";n.d(t,"a",function(){return re});var r=n(21),a=(n.n(r),n(22)),i=(n.n(a),n(25)),s=(n.n(i),n(11)),o=(n.n(s),n(41)),c=(n.n(o),n(26)),u=(n.n(c),n(12)),l=(n.n(u),n(71)),d=(n.n(l),n(54)),h=(n.n(d),n(60)),v=(n.n(h),n(8)),f=(n.n(v),n(20)),p=(n.n(f),n(239)),g=(n.n(p),n(17)),y=(n.n(g),n(127)),b=(n.n(y),n(233)),m=(n.n(b),n(30)),k=(n.n(m),n(18)),_=(n.n(k),n(184)),x=(n.n(_),n(43)),w=(n.n(x),n(19)),I=(n.n(w),n(23)),A=n.n(I),S=n(50),E=n.n(S),C=n(24),j=(n.n(C),n(0)),O=n.n(j),D=n(1),T=n.n(D),M=n(6),F=n.n(M),L=n(3),N=n.n(L),P=n(34),R=n.n(P),B=n(7),U=n.n(B),W=n(5),H=n.n(W),G=n(2),V=n(55),$=n(815),z=n(237),q=n(818),J=n(819),Y=n(823),Q=n(825),X=n(827),K=n(828),Z=n(383),ee=n(240),te={nop:!0,valueparam:!0,blockcomment:!0,blockinlinecomment:!0,valuevar:!0,valuescriptvar:!0,valuelist:!0},ne=function(e){function t(){var e,n;O()(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=F()(this,(e=N()(t)).call.apply(e,[this].concat(a))),H()(R()(n),"cache",z.a.create("ExtensionUtils.cache")),n}return U()(t,e),T()(t,[{key:"extensionIdsForProjectDocument",value:function(e){var t,n,r,a,i,s,o,c,u,l=arguments;return A.a.async(function(d){for(;;)switch(d.prev=d.next){case 0:if(t=l.length>1&&void 0!==l[1]?l[1]:{},Q.a.assert(e),n=this._get(t,"useStats",!1),r=JSON.parse(e.data),G.a.object(r),a=r._id,G.a.string(a),null==(i=n?this._extensionIdsForLevelIdFromProjectDocumentStats(e,a,0):[])&&(i=this.blockExtensionIdsForString(e.data),n&&this.logger.warn("unable to find pre-computed stats for project, computing in the client-side")),s=e.notes?this.blockExtensionIdsForString(e.notes):[],G.a.array(s),o=r.libs?r.libs:[],G.a.array(o),!(o.length>0)){d.next=19;break}return d.next=16,A.a.awrap(this.extensionIdsForLibraryIds(o));case 16:d.t0=d.sent,d.next=20;break;case 19:d.t0=[];case 20:return c=d.t0,u=E()(new Set([].concat(E()(i),E()(s),E()(c)))),d.abrupt("return",u);case 23:case"end":return d.stop()}},null,this)}},{key:"blockExtensionIdsForProjectDocumentLevel",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};G.a.object(e),X.a.assert(t),G.a.object(n);var r=this._get(n,"useStats",!1),a=null,i=t._id;G.a.string(i);for(var s=Q.a.getLevels(e),o=0;o<s.length;o++){s[o]._id===i&&(a=o)}if(null===a)return[];var c=r?this._extensionIdsForLevelIdFromProjectDocumentStats(e,i,a):[];if(null==c){var u=X.a.getActors(t);u=u.filter(function(e){return!1===J.a.isLibraryActor(e)});var l=JSON.stringify(u);c=this.blockExtensionIdsForString(l),G.a.array(c),r&&this.logger.warn("unable to find pre-computed stats for project, computing in the client-side")}return c}},{key:"blockExtensionIdsForTutorial",value:function(e){Y.a.assert(e);var t=Y.a.getTutorial(e),n=t?JSON.stringify(t):null,r=n?this.blockExtensionIdsForString(n):[];return G.a.array(r),r}},{key:"blockExtensionIdsForProject",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];Y.a.assert(e);var t=V.a.addTimeStart("blockExtensionIdsForProject"),n=Y.a.getSelectedLevelId(e),r=this.blockExtensionIdsForProjectLevelId(e,n),a=this.blockExtensionIdsForTutorial(e);return V.a.addTimeEnd(t),E()(new Set([].concat(E()(r),E()(a))))}},{key:"blockExtensionIdsForProjectLevelId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};G.a.object(e),G.a.string(t),G.a.object(n);var r=this._get(n,"useStats",!1),a=Y.a.getProjectDocument(e);G.a.object(a);var i=Y.a.levelById(e,t);G.a.object(i);var s=Y.a.getLevelIndex(e,i),o=r?this._extensionIdsForLevelIdFromProjectDocumentStats(a,t,s):null;if(null==o){var c=JSON.stringify(i);o=this.blockExtensionIdsForString(c),r&&this.logger.warn("unable to find pre-computed stats for project, computing in the client-side")}return E()(new Set(E()(o)))}},{key:"extensionIdsForLibraryIds",value:function(e){var t,n,r,a,i,s,o,c,u,l,d,h,v,f,p,g,y,b,m,k,_,x,w,I,S,E,C,j,O,D,T,M,F,L,N,P,R,B,U,W,H=arguments;return A.a.async(function(V){for(;;)switch(V.prev=V.next){case 0:for(t=H.length>1&&void 0!==H[1]?H[1]:{},G.a.array(e),G.a.object(t),n=this._get(t,"useStats",!1),r=[],a=!0,i=!1,s=void 0,V.prev=8,o=e[Symbol.iterator]();!(a=(c=o.next()).done);a=!0)u=c.value,l=K.a.getLibraryCacheToken(),d=(d=l?"library-".concat(l):null)?{token:d,applyToUrl:!0}:null,h=$.a.get("/api/v2/libraries/get?namespace=".concat(u),{cache:d}),r.push(h);V.next=16;break;case 12:V.prev=12,V.t0=V.catch(8),i=!0,s=V.t0;case 16:V.prev=16,V.prev=17,a||null==o.return||o.return();case 19:if(V.prev=19,!i){V.next=22;break}throw s;case 22:return V.finish(19);case 23:return V.finish(16);case 24:return v=Promise.all(r),V.next=27,A.a.awrap(v);case 27:f=V.sent,p={},g=!0,y=!1,b=void 0,V.prev=32,m=f[Symbol.iterator]();case 34:if(g=(k=m.next()).done){V.next=90;break}if(_=k.value,x=_._libraryStats,!n||!x){V.next=63;break}for(w=x.blockCountsMap,G.a.object(w),I=Object.keys(w),S=this.extensionIdsForBlockIds(I),E=!0,C=!1,j=void 0,V.prev=45,O=S[Symbol.iterator]();!(E=(D=O.next()).done);E=!0)T=D.value,p[T]=!0;V.next=53;break;case 49:V.prev=49,V.t1=V.catch(45),C=!0,j=V.t1;case 53:V.prev=53,V.prev=54,E||null==O.return||O.return();case 56:if(V.prev=56,!C){V.next=59;break}throw j;case 59:return V.finish(56);case 60:return V.finish(53);case 61:V.next=87;break;case 63:for(M=_.data,G.a.string(M),F=this.blockExtensionIdsForString(M),G.a.array(F),L=!0,N=!1,P=void 0,V.prev=70,R=F[Symbol.iterator]();!(L=(B=R.next()).done);L=!0)U=B.value,p[U]=!0;V.next=78;break;case 74:V.prev=74,V.t2=V.catch(70),N=!0,P=V.t2;case 78:V.prev=78,V.prev=79,L||null==R.return||R.return();case 81:if(V.prev=81,!N){V.next=84;break}throw P;case 84:return V.finish(81);case 85:return V.finish(78);case 86:n&&this.logger.warn("unable to find pre-computed stats for library, computing in the client-side");case 87:g=!0,V.next=34;break;case 90:V.next=96;break;case 92:V.prev=92,V.t3=V.catch(32),y=!0,b=V.t3;case 96:V.prev=96,V.prev=97,g||null==m.return||m.return();case 99:if(V.prev=99,!y){V.next=102;break}throw b;case 102:return V.finish(99);case 103:return V.finish(96);case 104:return W=Object.keys(p),V.abrupt("return",W);case 106:case"end":return V.stop()}},null,this,[[8,12,16,24],[17,,19,23],[32,92,96,104],[45,49,53,61],[54,,56,60],[70,74,78,86],[79,,81,85],[97,,99,103]])}},{key:"_extensionIdsForLevelIdFromProjectDocumentStats",value:function(e,t,n){G.a.object(e),G.a.string(t),G.a.integer(n);var r=e._projectStats;if(null==r)return null;q.a._patchEmptyDictionary(r,"levelIdBlockCountsMap.".concat(t));var a=r.levelIdBlockCountsMap[t];if(void 0===a&&(q.a._patchEmptyDictionary(r,"levelIdBlockCountsMap.__index:".concat(n)),a=r.levelIdBlockCountsMap["__index:".concat(n)]),void 0===a)return this.logger.warn("project stats block counts found but level not found: ".concat(t," or ").concat(n),a),null;var i=Object.keys(a),s=this.extensionIdsForBlockIds(i);return G.a.array(s),s}},{key:"compatibleScriptsForCurrentContext",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this._get(n,"blockExtensionIdsWhitelist",[]),a=Z.a.enabledExtensionByCapability("context");return G.a.object(a),e.filter(function(e){var n=JSON.stringify(e),i=t.blockExtensionIdsForString(n),s=!0,o=!1,c=void 0;try{for(var u,l=i[Symbol.iterator]();!(s=(u=l.next()).done);s=!0){var d=u.value,h=Z.a.extensionById(d);if(G.a.object(h),void 0!==h.capabilities().context&&h.id()!==a.id())return!1;if(r.length>0&&r.includes(d))return!1}}catch(e){o=!0,c=e}finally{try{s||null==l.return||l.return()}finally{if(o)throw c}}return!0})}},{key:"stageEditorKitExtensionIdsForTiles",value:function(e){if(void 0===this.__tileIdExtensionIdMap){var t={},n=Z.a.extensionsByCapability("stage-editor:kit"),r=!0,a=!1,i=void 0;try{for(var s,o=n[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var c=s.value,u=c.id(),l=c.getStageEditorKitTileIds(),d=!0,h=!1,v=void 0;try{for(var f,p=l[Symbol.iterator]();!(d=(f=p.next()).done);d=!0){t[f.value]=u}}catch(e){h=!0,v=e}finally{try{d||null==p.return||p.return()}finally{if(h)throw v}}}}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}this.__tileIdExtensionIdMap=t}var g=this.__tileIdExtensionIdMap;G.a.object(g);var y={},b=X.a._convertTilesTo8Bit(e);G.a.array(b);var m=!0,k=!1,_=void 0;try{for(var x,w=b[Symbol.iterator]();!(m=(x=w.next()).done);m=!0){var I=x.value,A=!0,S=!1,E=void 0;try{for(var C,j=I[Symbol.iterator]();!(A=(C=j.next()).done);A=!0){var O=C.value;if(0!==O){var D=O>>8;if(0!==D){var T=g[D];G.a.string(T,"no extension found for tile data type: "+D),y[T]=!0}}}}catch(e){S=!0,E=e}finally{try{A||null==j.return||j.return()}finally{if(S)throw E}}}}catch(e){k=!0,_=e}finally{try{m||null==w.return||w.return()}finally{if(k)throw _}}return Object.keys(y)}},{key:"blockIdsForString",value:function(e){G.a.string(e);var t=this._getBlockExtensionsRegex(),n=e.match(t);return n||[]}},{key:"blockExtensionIdsForString",value:function(e){G.a.string(e);var t=V.a.addTimeStart("".concat(this.className,":blockExtensionIdsForString"));try{var n="blockExtensionIdsForString(".concat(e,")");if(this.cache.has(n))return this.cache.get(n);var r=this.blockIdsForString(e),a=this.extensionIdsForBlockIds(r);return this.cache.set(n,a),a}finally{V.a.addTimeEnd(t)}}},{key:"extensionIdsForBlockIds",value:function(e){var t=e.map(function(e){return e.toLowerCase()}),n=E()(new Set(t)),r={},a=this.getBlockIdExtensionIdMap(),i=!0,s=!1,o=void 0;try{for(var c,u=n[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var l=c.value;if(void 0===te[l]){if(void 0===a[l])throw"no extension found to provide support for block: ".concat(l);r[a[l]]=!0}}}catch(e){s=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(s)throw o}}return Object.keys(r)}},{key:"extensionIdsForScriptFile",value:function(e){return Object(G.a)(e&&"string"==typeof e),Z.a.extensionIdsByCapability("blocks:core")}},{key:"ensureExtensions",value:function(e){var t,n,r,a,i,s,o;return A.a.async(function(c){for(;;)switch(c.prev=c.next){case 0:return e=Array.isArray(e)?e:[e],t=Z.a.getDependencyIdsDeep(e),n=E()(new Set([].concat(E()(e),E()(t)))),r=Z.a.getDependencyIdsDeep(e,{ignoreLazy:!0}),a=E()(new Set([].concat(E()(e),E()(r)))),i=Z.a.getEnabledExtensionIds(),s=a.filter(function(e){return!1===i.includes(e)}),o=i.filter(function(e){return!1===n.includes(e)}),this.logger.debug("ensure extensions - disable bulk: "+o.join(", ")),c.next=11,A.a.awrap(Z.a.disableBulk(o));case 11:return this.logger.debug("ensure extensions - enable bulk: "+s.join(", ")),c.next=14,A.a.awrap(Z.a.enableBulk(s));case 14:case"end":return c.stop()}},null,this)}},{key:"extensionIdForBlockSpecId",value:function(e){return G.a.string(e),this.getBlockIdExtensionIdMap()[e.toLowerCase()]}},{key:"getBlockIdExtensionIdMap",value:function(){var e="getBlockIdExtensionIdMap";if(this.cache.has(e))return this.cache.get(e);var t={},n=Z.a.extensionsByCapability("blocks"),r=!0,a=!1,i=void 0;try{for(var s,o=n[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var c=s.value,u=c.getBlockIds(),l=!0,d=!1,h=void 0;try{for(var v,f=u[Symbol.iterator]();!(l=(v=f.next()).done);l=!0){var p=v.value.toLowerCase();Object(G.a)(void 0===t[p]),t[p]=c.id()}}catch(e){d=!0,h=e}finally{try{l||null==f.return||f.return()}finally{if(d)throw h}}}}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return this.cache.set(e,t),t}},{key:"_getBlockExtensionsRegex",value:function(){var e="_getBlockExtensionsRegex";if(this.cache.has(e))return this.cache.get(e);var t=this.getBlockIdExtensionIdMap(),n=Object.keys(t).join("|");n=n.replace(/\?/g,"\\?");var r=new RegExp(n,"gi");return this.cache.set(e,r),r}},{key:"ProjectDocuments",get:function(){return this.symbol("ProjectDocuments")}}]),t}(ee.a);H()(ne,"CLASS",function(){return"ExtensionUtilsClass"});var re=new ne},815:function(e,t,n){"use strict";n.d(t,"a",function(){return j});var r=n(11),a=(n.n(r),n(26)),i=(n.n(a),n(8)),s=(n.n(i),n(20)),o=(n.n(s),n(30)),c=(n.n(o),n(78)),u=(n.n(c),n(23)),l=n.n(u),d=n(24),h=(n.n(d),n(0)),v=n.n(h),f=n(1),p=n.n(f),g=n(6),y=n.n(g),b=n(3),m=n.n(b),k=n(7),_=n.n(k),x=n(5),w=n.n(x),I=n(2),A=n(128),S=n(816),E=n(346),C=function(e){function t(){return v()(this,t),y()(this,m()(t).apply(this,arguments))}return _()(t,e),p()(t,[{key:"get",value:function(e){var t,n,r,a,i=this,s=arguments;return l.a.async(function(o){for(;;)switch(o.prev=o.next){case 0:if(t=s.length>1&&void 0!==s[1]?s[1]:{},I.a.string(e),I.a.object(t),e=this._addLocaleParam(e),!this._get(t,"merge",!0)){o.next=13;break}return n="".concat(this.className,":").concat(e),o.next=9,l.a.awrap(A.a.performTask(n,function(){return i._requestGet(e,t)}));case 9:return r=o.sent,o.abrupt("return",r);case 13:return o.next=15,l.a.awrap(this._requestGet(e,t));case 15:return a=o.sent,o.abrupt("return",a);case 17:case"end":return o.stop()}},null,this)}},{key:"_requestGet",value:function(e){var t,n,r,a,i=arguments;return l.a.async(function(s){for(;;)switch(s.prev=s.next){case 0:return t=i.length>1&&void 0!==i[1]?i[1]:{},I.a.string(e),I.a.object(t),n=void 0!==t.legacy&&t.legacy,s.next=6,l.a.awrap(S.a.get(e,t));case 6:return r=s.sent,a=n?r:JSON.parse(r).data,s.abrupt("return",a);case 9:case"end":return s.stop()}})}},{key:"post",value:function(e){var t,n,r,a,i=arguments;return l.a.async(function(s){for(;;)switch(s.prev=s.next){case 0:return t=i.length>1&&void 0!==i[1]?i[1]:{},I.a.string(e),I.a.object(t),n=void 0!==t.legacy&&t.legacy,s.next=6,l.a.awrap(S.a.post(e,t));case 6:return r=s.sent,a=n?r:JSON.parse(r).data,s.abrupt("return",a);case 9:case"end":return s.stop()}})}},{key:"_addLocaleParam",value:function(e){if(e.includes("".concat("locale","=")))return e;var t=E.a.getCurrentLocale();return"en"===t||t.startsWith("en_")?e:e.includes("?")?"".concat(e,"&").concat("locale","=").concat(t):"".concat(e,"?").concat("locale","=").concat(t)}}]),t}(n(45).a);w()(C,"CLASS",function(){return"APIUtilsClass"});var j=new C},816:function(e,t,n){"use strict";n.d(t,"a",function(){return q});var r=n(21),a=(n.n(r),n(22)),i=(n.n(a),n(25)),s=(n.n(i),n(11)),o=(n.n(s),n(26)),c=(n.n(o),n(12)),u=(n.n(c),n(101)),l=(n.n(u),n(48)),d=(n.n(l),n(8)),h=(n.n(d),n(20)),v=(n.n(h),n(127)),f=(n.n(v),n(30)),p=(n.n(f),n(18)),g=(n.n(p),n(19)),y=(n.n(g),n(49)),b=n.n(y),m=n(62),k=n.n(m),_=n(23),x=n.n(_),w=n(40),I=n.n(w),A=n(24),S=(n.n(A),n(0)),E=n.n(S),C=n(1),j=n.n(C),O=n(6),D=n.n(O),T=n(3),M=n.n(T),F=n(34),L=n.n(F),N=n(7),P=n.n(N),R=n(5),B=n.n(R),U=n(2),W=n(55),H=n(128),G=n(237),V=n(387),$=n(817),z=function(e){function t(){var e,n;E()(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=D()(this,(e=M()(t)).call.apply(e,[this].concat(a))),B()(L()(n),"cache",G.a.create("RequestUtilsClass",{maxSize:1e3})),n}return P()(t,e),j()(t,[{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t,n,r,a,i,s,o,c,u,l,d,h,v,f,p,g=arguments;return x.a.async(function(y){for(;;)switch(y.prev=y.next){case 0:if(t=g.length>1&&void 0!==g[1]?g[1]:{},n=this._get(t,"retries",2),r=this._get(t,"retryDelay",1e3),a=this._get(t,"fetchOptions",{}),i=this._get(t,"raw",!1),s=this._get(t,"cache",null),s=this._expandCacheOption(s),Object(U.a)(null===s||"object"===I()(s)),o=this._applyCacheToUrl(e,s),c=s?this._applyCacheToUrl(e,s,{applyToUrl:!0}):null,!1!==i||!c||!this.cache.has(c)){y.next=14;break}return u=this.cache.get(c),this.logger.log("requested ".concat(o," (cache hit)"),u),y.abrupt("return",u);case 14:return void 0===a.credentials&&(a.credentials="same-origin"),this.logger.log("requesting ".concat(o," (uncached)")),l=null,y.prev=17,d=W.a.addTimeStart("RequestUtils:fetch"),y.next=21,x.a.awrap(H.a.retry(function(){return fetch(o,a)},{promiseId:o,retries:n,retryDelay:r,shouldRetryCallback:function(e){return!!V.a.isPotentialDowntimeStatusCode(e.status)}}));case 21:l=y.sent,W.a.addTimeEnd(d),y.next=29;break;case 25:throw y.prev=25,y.t0=y.catch(17),this.logger.error("request failed: ".concat(o),y.t0),new $.a(o);case 29:if(!l.ok){y.next=39;break}if(h=l,!1!==i){y.next=35;break}return y.next=34,x.a.awrap(l.text());case 34:h=y.sent;case 35:return c&&!1===i&&this.cache.set(c,h),y.abrupt("return",h);case 39:return v="",y.prev=40,y.next=43,x.a.awrap(l.text());case 43:f=y.sent,p=JSON.parse(f),v=JSON.stringify(p,null,4),y.next=50;break;case 48:y.prev=48,y.t1=y.catch(40);case 50:throw this.logger.error("request failed: ".concat(o," (").concat(l.status,"): ").concat(v)),new $.a(o,l);case 52:case"end":return y.stop()}},null,this,[[17,25],[40,48]])})},{key:"get",value:function(e){var t,n,r=arguments;return x.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:return t=r.length>1&&void 0!==r[1]?r[1]:{},a.next=3,x.a.awrap(this.fetch(e,t));case 3:return n=a.sent,a.abrupt("return",n);case 5:case"end":return a.stop()}},null,this)}},{key:"post",value:function(e){var t,n,r,a,i,s,o,c,u,l,d,h,v,f,p,g,y,m,_,w=arguments;return x.a.async(function(I){for(;;)switch(I.prev=I.next){case 0:t=w.length>1&&void 0!==w[1]?w[1]:{},n=void 0!==t.formData?t.formData:{},r=new FormData,a=0,i=Object.entries(n);case 4:if(!(a<i.length)){I.next=35;break}if(s=b()(i[a],2),o=s[0],c=s[1],U.a.string(o),Object(U.a)(!1===[null,void 0].includes(c)),!Array.isArray(c)){I.next=31;break}for(u="".concat(o,"[]"),l=!0,d=!1,h=void 0,I.prev=13,v=c[Symbol.iterator]();!(l=(f=v.next()).done);l=!0)p=f.value,g="string"==typeof p?p:JSON.stringify(p),r.append(u,g);I.next=21;break;case 17:I.prev=17,I.t0=I.catch(13),d=!0,h=I.t0;case 21:I.prev=21,I.prev=22,l||null==v.return||v.return();case 24:if(I.prev=24,!d){I.next=27;break}throw h;case 27:return I.finish(24);case 28:return I.finish(21);case 29:I.next=32;break;case 31:r.append(o,c);case 32:a++,I.next=4;break;case 35:return delete(y=k()({},t)).cache,m={method:"POST",body:r},y.fetchOptions=m,I.next=41,x.a.awrap(this.fetch(e,y));case 41:return _=I.sent,I.abrupt("return",_);case 43:case"end":return I.stop()}},null,this,[[13,17,21,29],[22,,24,28]])}},{key:"_applyCacheToUrl",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null==t)return e;U.a.object(t);var r=k()({},t,n);if(!0!==r.applyToUrl)return e;var a=r.token;return U.a.string(a),e.includes("?")?e+"&cache=max&v="+a:e+"?cache=max&v="+a}},{key:"_expandCacheOption",value:function(e){if([void 0,null].includes(e))return null;var t=null;return"string"==typeof e?t={token:e,applyToUrl:!1}:(U.a.object(e),t=k()({},e)),U.a.string(t.token),t.applyToUrl=this._get(t,"applyToUrl",!1),t}},{key:"_isResponseCloudflareCacheHit",value:function(e){U.a.object(e);var t=!1,n=!0,r=!1,a=void 0;try{for(var i,s=e.headers.entries()[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var o=i.value,c=b()(o,2),u=c[0],l=c[1];if("cf-cache-status"===u){if("HIT"!==l)break;t=!0;break}}}catch(e){r=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}return t}}]),t}(n(45).a);B()(z,"CLASS",function(){return"RequestUtilsClass"});var q=new z;window.__RequestUtils=q},817:function(e,t,n){"use strict";n.d(t,"a",function(){return y});var r=n(11),a=(n.n(r),n(38)),i=(n.n(a),n(0)),s=n.n(i),o=n(1),c=n.n(o),u=n(6),l=n.n(u),d=n(3),h=n.n(d),v=n(7),f=n.n(v),p=n(235),g=n(387),y=function(e){function t(e,n){var r;s()(this,t);var a=n?n.status:"not reachable",i="failed to fetch '".concat(e,"' (").concat(a,")");return(r=l()(this,h()(t).call(this,i))).name="RequestFailedException",r.url=e,r.response=n,r}return f()(t,e),c()(t,[{key:"getStatusCode",value:function(){return null==this.response?null:this.response.status}},{key:"isSessionExpired",value:function(){return null!=this.response&&this.response.status===g.a.FORBIDDEN}},{key:"isPotentialDowntime",value:function(){var e=this.getStatusCode(),t=g.a.isPotentialDowntimeStatusCode(e);return t}}]),t}(p.a)},818:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(0),a=n.n(r),i=n(1),s=n.n(i),o=n(215),c=n.n(o),u=n(2),l=new(function(){function e(){a()(this,e)}return s()(e,[{key:"_patchEmptyDictionary",value:function(e,t){u.a.object(e);var n=c.a.get(e,t);!1!==Array.isArray(n)&&(n.length>0||c.a.set(e,t,{}))}}]),e}())},819:function(e,t,n){"use strict";n.d(t,"a",function(){return K});var r=n(21),a=(n.n(r),n(22)),i=(n.n(a),n(25)),s=(n.n(i),n(11)),o=(n.n(s),n(41)),c=(n.n(o),n(99)),u=(n.n(c),n(26)),l=(n.n(u),n(57)),d=(n.n(l),n(12)),h=(n.n(d),n(71)),v=(n.n(h),n(54)),f=(n.n(v),n(388)),p=(n.n(f),n(389)),g=(n.n(p),n(60)),y=(n.n(g),n(8)),b=(n.n(y),n(91)),m=(n.n(b),n(30)),k=(n.n(m),n(18)),_=(n.n(k),n(100)),x=(n.n(_),n(19)),w=(n.n(x),n(62)),I=n.n(w),A=n(50),S=n.n(A),E=n(238),C=n.n(E),j=n(40),O=n.n(j),D=n(0),T=n.n(D),M=n(1),F=n.n(M),L=n(6),N=n.n(L),P=n(3),R=n.n(P),B=n(34),U=n.n(B),W=n(7),H=n.n(W),G=n(5),V=n.n(G),$=n(236),z=(n.n($),n(2)),q=n(144),J=n(170);function Y(){var e=C()(["Stage"]);return Y=function(){return e},e}var Q=[],X=function(e){function t(){var e,n;T()(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=N()(this,(e=R()(t)).call.apply(e,[this].concat(a))),V()(U()(n),"STAGE_NAME","Stage"),V()(U()(n),"MIN_SCALE",1e-5),n}return H()(t,e),F()(t,[{key:"isId",value:function(e){return"string"==typeof e}},{key:"assertId",value:function(e){Object(z.a)(this.isId(e),function(){return"value is not an actor id: ".concat(e)})}},{key:"isActor",value:function(e){return!!this.isNormalActor(e)||!!this.isLibraryActor(e)}},{key:"assert",value:function(e){Object(z.a)(this.isActor(e),function(){return"invalid actor: ".concat(JSON.stringify(e))})}},{key:"isLibraryActor",value:function(e){var t=Array.isArray(e)?e:[e],n=!0,r=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var o=i.value;if(null==o)return!1;if("object"!==O()(o))return!1;if(void 0===o._id)return!1;if(void 0===o.dbid)return!1;if(void 0===o.classname)return!1;if(void 0===o.description)return!1;if(void 0===o.label)return!1;if(void 0===o.ownerid)return!1;if(void 0===o._stepIdStepMap)return!1}}catch(e){r=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}return!0}},{key:"isNormalActor",value:function(e){var t=Array.isArray(e)?e:[e],n=!0,r=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var o=i.value;if(this.isLibraryActor(e))return!1;if(null==o)return!1;if("object"!==O()(o))return!1;if(void 0===o._id)return!1;if(void 0===o.label)return!1;if(void 0!==o.scripts)return!1;if(void 0===o._stepIdStepMap)return!1}}catch(e){r=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}return!0}},{key:"isSame",value:function(e,t){return Object(z.a)(this.isActor(e)),Object(z.a)(this.isActor(t)),this.Actors.getId(e)===this.Actors.getId(t)}},{key:"getId",value:function(e){return this.assert(e),e._id}},{key:"setId",value:function(e,t){this.assert(e),Object(z.a)(this.isId(t)),e._id=t}},{key:"getName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.assert(e),this.isStageActor(e)?this.getStageName(t):e.label}},{key:"getStageName",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).translate?Object($.t)(Y()):this.STAGE_NAME}},{key:"setName",value:function(e,t){if(this.assert(e),t)return e.label!==t&&void(e.label=t)}},{key:"isDeletable",value:function(e){if(this.assert(e),this.isStageActor(e))return!1;var t=this._get(e,"_deletable",!0);return z.a.boolean(t),t}},{key:"setDeletable",value:function(e,t){this.assert(e),z.a.boolean(t),e._deletable=t}},{key:"isViewable",value:function(e){return this.assert(e),!0!==e.hidden}},{key:"setViewable",value:function(e,t){this.assert(e),z.a.boolean(t);var n=!1===t;e.hidden=n}},{key:"ensureIds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.assert(e);var n=void 0!==t.force&&t.force;e._id=!1===n&&e._id?e._id:this.uuid();var r=this.getScripts(e);this.Steps.ensureIds(r,t),e._stepIdStepMap=this.Steps.stepsMapFromScripts(r)}},{key:"hasCostume",value:function(e){var t=this.getCostumes(e).length>0;return t}},{key:"getCostumes",value:function(e){this.assert(e);var t=null;return t=this.isStageActor(e)?e.backgrounds?e.backgrounds:[]:e.costumes?e.costumes:[],z.a.array(t),t}},{key:"getImageCostumes",value:function(e){var t=this;return this.getCostumes(e).filter(function(e){return t.Costumes.isImageCostume(e)})}},{key:"getSpineCostumes",value:function(e){var t=this,n=this.getCostumes(e).filter(function(e){return t.Costumes.isSpineCostume(e)});return Object(z.a)(0===n.length||1===n.length),n}},{key:"getSelectedCostumeIndex",value:function(e){this.assert(e);var t=null;return t=this.isStageActor(e)?e.currentBackground:e.currentCostume,(t-=1)<-1&&(t=-1),t}},{key:"getSelectedCostume",value:function(e){this.assert(e);var t=this.getCostumes(e);z.a.array(t);var n=this.getSelectedCostumeIndex(e);if(Object(z.a)(n>=-1),-1===n)return null;var r=t[n%t.length];return Object(z.a)(this.Costumes.isCostume(r)),r}},{key:"getSelectedCostumeId",value:function(e){this.assert(e);var t=this.getSelectedCostume(e);if(this.isStageActor(e)&&null==t)return null;Object(z.a)(t);var n=this.Costumes.getId(t);return z.a.string(n),n}},{key:"costumeById",value:function(e,t){this.assert(e),z.a.string(t);var n=this.getCostumes(e);z.a.array(n);var r=!0,a=!1,i=void 0;try{for(var s,o=n[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var c=s.value;if(this.Costumes.getId(c)===t)return c}}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return null}},{key:"costumeByName",value:function(e,t){this.assert(e),z.a.string(t);var n=this.getCostumes(e);z.a.array(n);var r=!0,a=!1,i=void 0;try{for(var s,o=n[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var c=s.value,u=this.Costumes.getName(c);if(z.a.string(t),u===t)return c}}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return null}},{key:"sortCostumesByIds",value:function(e,t){var n=this;this.assert(e),z.a.array(t);var r=t.map(function(t){return n.costumeById(e,t)}).map(function(e){return n.Costumes.getName(e)}),a=this.getCostumes(e),i=(a=a.filter(function(e){return!1===n.Costumes.isSpineCostume(e)})).map(function(e){return n.Costumes.getName(e)}),s=!0,o=!1,c=void 0;try{for(var u,l=function(){var e=u.value;Object(z.a)(i.includes(e),function(){return"".concat(e," not found in ").concat(JSON.stringify(i))})},d=r[Symbol.iterator]();!(s=(u=d.next()).done);s=!0)l()}catch(e){o=!0,c=e}finally{try{s||null==d.return||d.return()}finally{if(o)throw c}}var h=!0,v=!1,f=void 0;try{for(var p,g=function(){var e=p.value;Object(z.a)(r.includes(e),function(){return"".concat(e," not found in ").concat(JSON.stringify(r))})},y=i[Symbol.iterator]();!(h=(p=y.next()).done);h=!0)g()}catch(e){v=!0,f=e}finally{try{h||null==y.return||y.return()}finally{if(v)throw f}}var b=this.getSelectedCostume(e),m=b?this.Costumes.getName(b):null;Object(z.a)(null===m||"string"==typeof m&&m),a.sort(function(e,r){var a=n.Costumes.getId(e),i=n.Costumes.getId(r);return t.indexOf(a)-t.indexOf(i)});var k=this.getSpineCostumes(e),_=[].concat(S()(k),S()(a));if(this.isStageActor(e)?e.backgrounds=_:e.costumes=_,null!=b){var x=_.map(function(e){return n.Costumes.getName(e)}).indexOf(m);Object(z.a)(x>-1),this.selectCostumeByIndex(e,x)}}},{key:"getImageUrls",value:function(e){this.assert(e);var t=[],n=this.getImageCostumes(e),r=!0,a=!1,i=void 0;try{for(var s,o=n[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var c=s.value,u=this.Costumes.getImageUrl(c);null!=u&&t.push(u)}}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return t}},{key:"isStageActor",value:function(e){return this.assert(e),!0===e._background}},{key:"isSpriteActor",value:function(e){return this.assert(e),!this.isStageActor(e)&&!this.isLibraryActor(e)}},{key:"isSpineActor",value:function(e){return!1!==this.isSpriteActor(e)&&null!=this.getSkeletonType(e)}},{key:"getSkeletonType",value:function(e){this.assert(e);var t=e.skeletonType;return Object(z.a)(void 0===t||t&&"string"==typeof t),t}},{key:"getSkeletonParts",value:function(e){this.assert(e);var t=e.skeletonParts?e.skeletonParts:{};return z.a.object(t),t}},{key:"updateSkeleton",value:function(e,t,n){this.assert(e),z.a.string(t),z.a.object(n),e.skeletonType=t,e.skeletonParts=n}},{key:"createActorFromSpine",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};z.a.string(e),z.a.object(t),z.a.object(n);var r=this.Costumes.createCostume({cx:500,cy:500,name:"actor",costumeName:"actor",img:"avatar://spine",forceNumber:!1});z.a.object(r);var a=this.Actors.addActor(I()({scale:"Tiny"===e?1:.25,label:"actor",costumeName:"actor",skeletonType:e,skeletonParts:t,costumes:[r]},n));return z.a.object(a),a}},{key:"createStageActor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.uuid();return I()({_id:t,_background:!0,_stepIdStepMap:{},label:this.STAGE_NAME,scaleType:"stretch",width:1024,height:768,canvasWidth:840,canvasHeight:630,canvasExpand:!1,currentBackground:0,backgrounds:[],sounds:[]},e)}},{key:"addActor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(z.a)("object"===O()(e));var t=this.uuid();return I()({_id:t,_stepIdStepMap:{},label:"actor",costumes:e.costumes&&e.costumes.length>0?e.costumes:[this.Costumes.createCostume()],currentCostume:1,sounds:[],scale:1,x:0,y:0,rotation:0,rotateLock:0,hidden:!1,isHidden:!1,volume:100,locked:!1,zIndex:2,physics:{isStatic:!1,isActive:!0,geometry:"rectangular",density:1,friction:.5,restitution:.2},variables:{},varDefaults:{},lists:{},classname:"actor"},e)}},{key:"clone",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._get(t,"preserveIds",!1);z.a.boolean(n);var r=e._id;z.a.string(r);var a=this._clone(e);return this.ensureIds(a,{force:!0}),!0===n&&(a._id=r),a}},{key:"detach",value:function(e){e&&this.getGroupName(e)&&(delete e.id,delete e.classname)}},{key:"getGroupName",value:function(e){if(e)return e.id&&e.classname?e.classname:void 0}},{key:"isDetachable",value:function(e){return!!this.getGroupName(e)}},{key:"hasStepId",value:function(e,t){return this.assert(e),z.a.string(t),void 0!==this.getStepsMap(e)[t]}},{key:"getStepsMap",value:function(e){return this.assert(e),Object(z.a)(e&&e._stepIdStepMap&&"object"===O()(e._stepIdStepMap)),e._stepIdStepMap}},{key:"hasSteps",value:function(e){this.assert(e);var t=this.getSteps(e).length>0;return t}},{key:"getSteps",value:function(e){this.assert(e);var t=this.getStepsMap(e);return Object.values(t)}},{key:"getStep",value:function(e,t){return this.assert(e),this.getStepsMap(e)[t]}},{key:"getStepIds",value:function(e){var t=this.getStepsMap(e);return Object.keys(t)}},{key:"getScripts",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.assert(e);var n=this.getStepsMap(e),r=this.Steps.scriptsFromStepsMap(n,t);return Object(z.a)(Array.isArray(r)),r}},{key:"setScripts",value:function(e,t){this.assert(e),this.Steps.assertUniqueIds(t),e._stepIdStepMap=this.Steps.stepsMapFromScripts(t)}},{key:"addScripts",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.Steps.assertUniqueIds(t);var r=this.Actors.getScripts(e),a=S()(r),i=!0,s=!1,o=void 0;try{for(var c,u=t[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var l=c.value,d=this.Steps.indexForMatchingScriptInScripts(l,a,n);if(-1!==d){var h=a[d];Object(z.a)(this.Steps.isStep(h)),void 0!==h.x&&void 0!==h.y&&(l.x=h.x,l.y=h.y),a[d]=l}else a.push(l)}}catch(e){s=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(s)throw o}}this.setScripts(e,a)}},{key:"addCostumes",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.forEach(function(t,a){n.addCostume(e,t,r?r+a:null)})}},{key:"addCostume",value:function(e,t,n){var r=this;this.assert(e),Object(z.a)(this.Costumes.isCostume(t));var a=this.getCostumes(e).map(function(e){return r.Costumes.getId(e)}),i=this.Costumes.getId(t);Object(z.a)(!1===a.includes(i),"duplicate costume found in actor");var s=this.Costumes.getName(t);if(this.Actors.costumeByName(e,s)){var o=this._generateCostumeUniqueName(e,s);this.Costumes.setName(t,o)}var c=this._getCostumesList(e);z.a.array(c),n?c.splice(n,0,t):c.push(t)}},{key:"getCostumeNameCostumeMap",value:function(e){this.assert(e);var t={},n=this.getCostumes(e),r=!0,a=!1,i=void 0;try{for(var s,o=n[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var c=s.value,u=this.Costumes.getName(c);z.a.string(u),Object(z.a)(void 0===t[u],"duplicate costume: ".concat(u)),t[u]=c}}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return t}},{key:"_generateCostumeUniqueName",value:function(e,t){var n=this.getCostumeNameCostumeMap(e),r=0,a=null;do{r+=1,a="".concat(t).concat(r)}while(void 0!==n[a]);return a}},{key:"updateCostume",value:function(e,t){var n=this;this.assert(e),Object(z.a)(this.Costumes.isCostume(t));var r=this.Costumes.getId(t);Object(z.a)(this.costumeById(e,r),"costume not found: ".concat(r));var a=this._getCostumesList(e).map(function(e){return n.Costumes.isSame(e,t)?t:e});this._setCostumesList(e,a)}},{key:"setCostumeName",value:function(e,t,n){this.assert(e),z.a.string(t),z.a.string(n);var r=this.costumeById(e,t);(z.a.object(r),this.Costumes.getName(r)!==n)&&(this.costumeByName(e,n)&&(n=this._generateCostumeUniqueName(e,n)),this.Costumes.setName(r,n))}},{key:"soundByName",value:function(e,t){this.assert(e),z.a.string(t);var n=this.getSounds(e);z.a.array(n);var r=!0,a=!1,i=void 0;try{for(var s,o=n[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var c=s.value,u=this.Sounds.getName(c);if(z.a.string(t),u===t)return c}}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return null}},{key:"addSound",value:function(e,t){this.assert(e),Object(z.a)(this.Sounds.isSound(t)),this.ensureSoundUniqueName(e,t),e.sounds=e.sounds?e.sounds:[],e.sounds.push(t)}},{key:"getSoundNameSoundMap",value:function(e){this.assert(e);var t={},n=this.getSounds(e),r=!0,a=!1,i=void 0;try{for(var s,o=n[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var c=s.value,u=this.Sounds.getName(c);z.a.string(u),Object(z.a)(void 0===t[u],"duplicate sound name: ".concat(u)),t[u]=c}}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return t}},{key:"ensureSoundUniqueName",value:function(e,t){this.assert(e),Object(z.a)(this.Sounds.isSound(t));var n=this.Sounds.getName(t);z.a.string(n);var r=this.getSoundNameSoundMap(e);if(void 0!==r[n]){var a=0,i=null;do{a+=1,i="".concat(n).concat(a)}while(void 0!==r[i]);this.Sounds.setName(t,i)}}},{key:"deleteSteps",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=!!n.assert&&n.assert;this.assert(e),t=Array.isArray(t)?t:[t];var a=!0,i=!1,s=void 0;try{for(var o,c=t[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var u=o.value;Object(z.a)(this.Steps.isId(u));var l=this.getStep(e,u);if(Object(z.a)(l),this.Steps.hasParent(l)){var d=this.Steps.getParentId(l),h=this.getStep(e,d);r&&Object(z.a)(h),h?this.Steps.detach(h,l):delete l._parent}if(this.Steps.hasNext(l)){var v=this.Steps.getNextId(l),f=this.getStep(e,v);r&&Object(z.a)(f),f?this.Steps.detach(l,f):delete l.next}delete e._stepIdStepMap[u]}}catch(e){i=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(i)throw s}}}},{key:"hasVariable",value:function(e,t){return void 0!==this.getVariables(e)[t]}},{key:"getVariable",value:function(e,t){return this.getVariables(e)[t]}},{key:"getVariables",value:function(e){return this.assert(e),e.variables?e.variables:{}}},{key:"getVariableNames",value:function(e){this.assert(e);var t=this.getVariables(e);return z.a.object(t),Object.keys(t)}},{key:"setVariables",value:function(e,t){this.assert(e),z.a.object(t),e.variables=t}},{key:"addVariable",value:function(e,t){if(this.assert(e),z.a.string(t),!this.hasVariable(e,t)){var n=this.getVariables(e);z.a.object(n),n[t]="",this.setVariables(e,n)}}},{key:"getVariableDefaults",value:function(e){return this.assert(e),e.varDefaults?e.varDefaults:{}}},{key:"upsertVariable",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;this.assert(e),z.a.string(t),Object(z.a)(void 0!==n),e.variables=e.variables?e.variables:{},e.varDefaults=e.varDefaults?e.varDefaults:{},e.variables[t]=n,void 0!==r?e.varDefaults[t]=r:delete e.varDefaults[t]}},{key:"deleteVariable",value:function(e,t){this.assert(e),z.a.string(t),delete e.variables[t],delete e.varDefaults[t]}},{key:"getLists",value:function(e){return this.assert(e),e.lists?e.lists:{}}},{key:"hasList",value:function(e,t){return this.assert(e),z.a.string(t),void 0!==this.getLists(e)[t]}},{key:"getListNames",value:function(e){this.assert(e);var t=this.getLists(e);return z.a.object(t),Object.keys(t)}},{key:"setLists",value:function(e,t){this.assert(e),z.a.object(t),e.lists=t}},{key:"addList",value:function(e,t){if(this.assert(e),z.a.string(t),!this.hasList(e,t)){var n=this.getLists(e);z.a.object(n),n[t]=Q,this.setLists(e,n)}}},{key:"upsertList",value:function(e,t,n){this.assert(e),z.a.string(t),Object(z.a)(void 0!==n),e.lists=e.lists?e.lists:{},e.lists[t]=n}},{key:"deleteList",value:function(e,t){this.assert(e),z.a.string(t),delete e.lists[t]}},{key:"getX",value:function(e){return void 0!==e.x?e.x:0}},{key:"getY",value:function(e){return void 0!==e.y?e.y:0}},{key:"getPosition",value:function(e){return{x:this.getX(e),y:this.getY(e)}}},{key:"setPosition",value:function(e,t){if(this.assert(e),z.a.object(t),z.a.number(t.x),z.a.number(t.y),e.x===t.x&&e.y===t.y)return!1;e.x=t.x,e.y=t.y}},{key:"isValidRotation",value:function(e){return!1!==q.a.isNumber(e)}},{key:"getRotation",value:function(e){return this.assert(e),e.rotation?e.rotation:0}},{key:"setRotation",value:function(e,t){this.assert(e),z.a.number(t);var n=t%360;if(n=n<0?n+360:n,e.rotation===n)return!1;e.rotation=n}},{key:"isValidScale",value:function(e){return!1!==q.a.isNumber(e)&&!(e<this.MIN_SCALE)}},{key:"getScale",value:function(e){return this.assert(e),e.scale?e.scale:1}},{key:"setScale",value:function(e,t){if(this.assert(e),Object(z.a)(this.isValidScale(t),"invalid actor scale: ".concat(t)),e.scale===t)return!1;e.scale=t}},{key:"indexForCostumeId",value:function(e,t){this.assert(e),z.a.string(t);for(var n=this.getCostumes(e),r=0;r<n.length;r++){var a=n[r];Object(z.a)(this.Costumes.isCostume(a));var i=this.Costumes.getId(a);if(z.a.string(i),i===t)return r}return-1}},{key:"indexForCostumeName",value:function(e,t){this.assert(e),z.a.string(t);for(var n=this.getCostumes(e),r=0;r<n.length;r++){var a=n[r];Object(z.a)(this.Costumes.isCostume(a));var i=this.Costumes.getName(a);if(z.a.string(t),i===t)return r}return-1}},{key:"selectCostumeById",value:function(e,t){this.assert(e),z.a.string(t);var n=this.Actors.getCostumes(e);z.a.array(n);for(var r=0;r<n.length;r++){var a=n[r],i=this.Costumes.getId(a);if(z.a.string(i),i===t)return void this.selectCostumeByIndex(e,r)}Object(z.a)(!1,"costume not found: ".concat(t))}},{key:"selectCostumeByIndex",value:function(e,t){this.assert(e),Object(z.a)(t>=-1),this.isStageActor(e)?(e.currentBackground=t+1,Object(z.a)(e.currentBackground>=0,"invalid current background: ".concat(e.currentBackground))):(e.currentCostume=t+1,Object(z.a)(e.currentCostume>=0))}},{key:"deleteCostumeById",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.assert(e,function(){return"invalid actor ".concat(JSON.stringify(e))}),z.a.string(t);var n=this._getCostumesList(e);Object(z.a)(!1===(this.isSpriteActor(e)&&!1===this.isSpineActor(e)&&1===n.length),"sprite non-spine actors must have at least one costume at all times");for(var r=this.getSelectedCostumeIndex(e),a=[],i=null,s=0;s<n.length;s++){var o=n[s];this.Costumes.getId(o)!==t?a.push(o):(Object(z.a)(null==i,"deleted costume index == null"),i=s)}Object(z.a)(null!==i,function(){return"costume index for costume being deleted not found: ".concat(t)}),this._setCostumesList(e,a),i<=r&&(r-=1),r<=-1&&a.length>0&&(r=0),this.selectCostumeByIndex(e,r)}},{key:"getSounds",value:function(e){return this.assert(e),e.sounds?e.sounds:[]}},{key:"indexForSoundName",value:function(e,t){this.assert(e),z.a.string(t);for(var n=this.getSounds(e),r=0;r<n.length;r++){var a=n[r];Object(z.a)(this.Sounds.isSound(a));var i=this.Sounds.getName(a);if(z.a.string(t),i===t)return r}return-1}},{key:"deleteSound",value:function(e,t){this.assert(e),z.a.string(t);var n=this.indexForSoundName(e,t);z.a.integerPositive(n),e.sounds.splice(n,1)}},{key:"isValidZIndex",value:function(e){return!1!==q.a.isInteger(e)}},{key:"getZIndex",value:function(e){return this.assert(e),e.zIndex?e.zIndex:0}},{key:"setZIndex",value:function(e,t){if(this.assert(e),z.a.number(t),e.zIndex===t)return!1;e.zIndex=t}},{key:"getBackgroundType",value:function(e){return Object(z.a)(this.isStageActor(e)),e.scaleType}},{key:"setBackgroundType",value:function(e,t){Object(z.a)(this.isStageActor(e)),e.scaleType=t}},{key:"getBackgroundAutoExpand",value:function(e){return Object(z.a)(this.isStageActor(e)),e.canvasExpand}},{key:"setBackgroundAutoExpand",value:function(e,t){Object(z.a)(this.isStageActor(e)),z.a.boolean(t),e.canvasExpand=t}},{key:"getRotateLock",value:function(e){return Object(z.a)(this.isSpriteActor(e)),e.rotateLock}},{key:"setRotateLock",value:function(e,t){Object(z.a)(this.isSpriteActor(e)),z.a.integer(t),Object(z.a)([0,1,2].includes(t)),e.rotateLock=t}},{key:"getAnchor",value:function(e){return this.assert(e),{x:e.costumes[0].ax,y:e.costumes[0].ay}}},{key:"setAnchor",value:function(e,t){this.assert(e);var n=this._getCostumesList(e),r=!0,a=!1,i=void 0;try{for(var s,o=n[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var c=s.value;c.ax=t.x,c.ay=t.y,c.imgObj&&(c.cx=c.imgObj.width*t.x,c.cy=c.imgObj.height*t.y)}}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}}},{key:"getPhysics",value:function(e){this.assert(e);return e.physics?e.physics:{enabled:!1,gravity:{x:0,y:0}}}},{key:"setPhysics",value:function(e,t){this.assert(e),e.physics=I()({},t)}},{key:"getStageSize",value:function(e){if(Object(z.a)(this.isStageActor(e)),void 0===e.width)return null;if(void 0===e.height)return null;var t=e.width;z.a.number(t);var n=e.height;return z.a.number(n),{width:t,height:n}}},{key:"setStageSize",value:function(e,t){Object(z.a)(this.isStageActor(e));var n=t.width,r=t.height;z.a.number(n),z.a.number(r),n<600&&(n=600),r<400&&(r=400),n>3840&&(n=3840),r>2160&&(r=2160),e.width=n,e.height=r}},{key:"actorScriptsForLesson",value:function(e){Object(z.a)(this.isProject(e));var t=[],n=this.getActors(e),r=!0,a=!1,i=void 0;try{for(var s,o=n[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var c=s.value,u=this.Actors.getScripts(c);t=t.concat(u)}}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return Object(z.a)(0===t.filter(function(e){return null==e}).length),t}},{key:"allStepsInActor",value:function(e,t){this.assert(e);var n=this.getScripts(e);z.a.array(n);var r=this.Steps.map(n,function(e){return e.func}),a=this.Steps.map(t,function(e){return e.func}),i=!0,s=!1,o=void 0;try{for(var c,u=a[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var l=c.value;if(!1===r.includes(l))return!1}}catch(e){s=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(s)throw o}}return!0}},{key:"getClassName",value:function(e){return e.classname}},{key:"getSelectedCostumeTrackerId",value:function(e){var t=this.getSelectedCostumeIndex(e),n=this.getSelectedCostume(e),r=[e.skeletonType,e.skeletonParts],a=n?this.Costumes.getTrackerId(n,{extras:r}):"";return"".concat(e._id,":").concat(t,":").concat(a)}},{key:"assertStepReferenceIntegrity",value:function(e){this.assert(e);for(var t=this.Actors.getStepsMap(e),n=0,r=Object.values(t);n<r.length;n++){var a=r[n],i=this.Steps.getReferences(a),s=!0,o=!1,c=void 0;try{for(var u,l=i[Symbol.iterator]();!(s=(u=l.next()).done);s=!0){var d=u.value;Object(z.a)(void 0!==t[d])}}catch(e){o=!0,c=e}finally{try{s||null==l.return||l.return()}finally{if(o)throw c}}var h=this.Steps.getId(a),v=this.Steps.getParentId(a);if(v){var f=this.getStep(e,v);Object(z.a)(f);var p=this.Steps.getValues(f),g=this.Steps.getContainers(f),y=this.Steps.getContainerLabelValues(f),b=this.Steps.getNextId(f);Object(z.a)(b===h||p.includes(h)||g.includes(h)||y.includes(h))}var m=this.Steps.getNextId(a);if(m){var k=this.getStep(e,m);Object(z.a)(parent);var _=this.Steps.getParentId(k);Object(z.a)(_),Object(z.a)(_===h)}}}},{key:"assertStepInstances",value:function(e){this.assert(e);for(var t=this.Actors.getStepsMap(e),n=0,r=Object.values(t);n<r.length;n++){var a=r[n];Object(z.a)(this.Steps.isInstance(a))}}},{key:"assertStepPositions",value:function(e){}},{key:"assertValid",value:function(e){this.assert(e),this.assertStepReferenceIntegrity(e),this.assertStepInstances(e),this.assertStepPositions(e)}},{key:"logSteps",value:function(e){this.assert(e);var t=this.getSteps(e);this.logger.debug("log steps - number steps ".concat(t.length));var n=!0,r=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var o=i.value,c=this.Steps.getId(o),u=this.Steps.getParentId(o),l=this.Steps.getNextId(o),d=this.Steps.getFunctionName(o),h=["log steps - ".concat(c,", ").concat(d)];u&&h.push("parent = ".concat(u)),l&&h.push("next = ".concat(l));var v=h.join(",");this.logger.debug(v)}}catch(e){r=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}}},{key:"_getCostumesList",value:function(e){return this.assert(e),this.isStageActor(e)?(e.backgrounds=e.backgrounds?e.backgrounds:[],z.a.array(e.backgrounds),e.backgrounds):(e.costumes=e.costumes?e.costumes:[],z.a.array(e.costumes),e.costumes)}},{key:"_setCostumesList",value:function(e,t){this.assert(e),Object(z.a)(Array.isArray(t)&&this.Costumes.isCostume(t)),this.isStageActor(e)?e.backgrounds=t:e.costumes=t}}]),t}(J.a);V()(X,"CLASS",function(){return"ActorsClass"});var K=new X},820:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(0),a=n.n(r),i=n(1),s=n.n(i),o=n(6),c=n.n(o),u=n(3),l=n.n(u),d=n(7),h=n.n(d),v=n(2),f=n(821),p=function(e){return function(e){function t(){return a()(this,t),c()(this,l()(t).apply(this,arguments))}return h()(t,e),s()(t,[{key:"registerSymbols",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v.a.object(e),v.a.object(t),f.a.register(e,t)}},{key:"unregisterSymbolsOwnedById",value:function(e){v.a.string(e),f.a.unregisterAllOwnedById(e)}},{key:"symbol",value:function(e){return this.constructor.symbol(e)}},{key:"ProjectScreenshotTypesEnum",get:function(){return this.symbol("ProjectScreenshotTypesEnum")}},{key:"Steps",get:function(){return this.symbol("Steps")}},{key:"Projects",get:function(){return this.symbol("Projects")}},{key:"Users",get:function(){return this.symbol("Users")}},{key:"Actors",get:function(){return this.symbol("Actors")}},{key:"Costumes",get:function(){return this.symbol("Costumes")}},{key:"Sounds",get:function(){return this.symbol("Sounds")}},{key:"Positions",get:function(){return this.symbol("Positions")}},{key:"ProjectDocuments",get:function(){return this.symbol("ProjectDocuments")}},{key:"ProjectDocumentLevels",get:function(){return this.symbol("ProjectDocumentLevels")}},{key:"ProjectDocumentLevelActors",get:function(){return this.symbol("ProjectDocumentLevelActors")}},{key:"ActorsFactory",get:function(){return this.symbol("ActorsFactory")}},{key:"DragObjectFactory",get:function(){return this.symbol("DragObjectFactory")}},{key:"DragActionClass",get:function(){return this.symbol("DragActionClass")}},{key:"DragActorClass",get:function(){return this.symbol("DragActorClass")}},{key:"DragBlockClass",get:function(){return this.symbol("DragBlockClass")}},{key:"BulkActionsActions",get:function(){return this.symbol("BulkActionsActions")}},{key:"StateActions",get:function(){return this.symbol("StateActions")}},{key:"RuntimeActions",get:function(){return this.symbol("RuntimeActions")}},{key:"ProjectActions",get:function(){return this.symbol("ProjectActions")}},{key:"LibrariesActions",get:function(){return this.symbol("LibrariesActions")}},{key:"DragActions",get:function(){return this.symbol("DragActions")}},{key:"IDEActions",get:function(){return this.symbol("IDEActions")}},{key:"SessionActions",get:function(){return this.symbol("SessionActions")}},{key:"OverlayActions",get:function(){return this.symbol("OverlayActions")}},{key:"PanelActions",get:function(){return this.symbol("PanelActions")}},{key:"ModalActions",get:function(){return this.symbol("ModalActions")}},{key:"ModalDialogActions",get:function(){return this.symbol("ModalDialogActions")}},{key:"ModalEditActions",get:function(){return this.symbol("ModalEditActions")}},{key:"InputManager",get:function(){return this.symbol("InputManager")}},{key:"DragLayer",get:function(){return this.symbol("DragLayer")}},{key:"ProjectParser",get:function(){return this.symbol("ProjectParser")}},{key:"LessonConfigUtils",get:function(){return this.symbol("LessonConfigUtils")}},{key:"RuntimeUtils",get:function(){return this.symbol("RuntimeUtils")}},{key:"TestUtils",get:function(){return this.symbol("TestUtils")}},{key:"ObjectIO",get:function(){return this.symbol("ObjectIO")}},{key:"Runtime",get:function(){return this.symbol("Runtime")}},{key:"Sprites",get:function(){return this.symbol("Sprites")}},{key:"SpriteClass",get:function(){return this.symbol("SpriteClass")}},{key:"Canvas",get:function(){return this.symbol("Canvas")}},{key:"ScriptClass",get:function(){return this.symbol("ScriptClass")}},{key:"BlockClass",get:function(){return this.symbol("BlockClass")}},{key:"LabelClass",get:function(){return this.symbol("LabelClass")}},{key:"LabelInputClass",get:function(){return this.symbol("LabelInputClass")}},{key:"LabelImgClass",get:function(){return this.symbol("LabelImgClass")}},{key:"LabelButtonClass",get:function(){return this.symbol("LabelButtonClass")}},{key:"LabelTextClass",get:function(){return this.symbol("LabelTextClass")}},{key:"LabelBreakClass",get:function(){return this.symbol("LabelBreakClass")}},{key:"Blocks",get:function(){return this.symbol("Blocks")}},{key:"SpineSkeletons",get:function(){return this.symbol("SpineSkeletons")}},{key:"State",get:function(){return this.symbol("State")}},{key:"BlockGen",get:function(){return this.symbol("BlockGen")}},{key:"CodeGen",get:function(){return this.symbol("CodeGen")}},{key:"g_parser",get:function(){return this.symbol("g_parser")}},{key:"FocusManager",get:function(){return this.symbol("FocusManager")}},{key:"soundManager",get:function(){return this.symbol("soundManager")}},{key:"SoundGenerator",get:function(){return this.symbol("SoundGenerator")}},{key:"SoundManagerSoundAudio",get:function(){return this.symbol("SoundManagerSoundAudio")}},{key:"IDE",get:function(){return this.symbol("IDE")}},{key:"LegacyUtils",get:function(){return this.symbol("LegacyUtils")}},{key:"StageActorClass",get:function(){return this.symbol("StageActorClass")}},{key:"RenderCode",get:function(){return this.symbol("RenderCode")}},{key:"PickerColor",get:function(){return this.symbol("PickerColor")}},{key:"PickerBlock",get:function(){return this.symbol("PickerBlock")}},{key:"PickerAngle",get:function(){return this.symbol("PickerAngle")}},{key:"LocalizationUtils",get:function(){return this.symbol("LocalizationUtils")}},{key:"WinSpine",get:function(){return this.symbol("WinSpine")}},{key:"Avatar",get:function(){return this.symbol("Avatar")}},{key:"DialogManager",get:function(){return this.symbol("DialogManager")}},{key:"Characters",get:function(){return this.symbol("Characters")}},{key:"ActionBroadcasterSaga",get:function(){return this.symbol("ActionBroadcasterSaga")}}],[{key:"symbol",value:function(e){v.a.string(e);var t=f.a.getById(e);return Object(v.a)(t),t}},{key:"Steps",get:function(){return this.symbol("Steps")}}]),t}(e)}},821:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(0),a=n.n(r),i=n(6),s=n.n(i),o=n(3),c=n.n(o),u=n(7),l=n.n(u),d=n(5),h=n.n(d),v=function(e){function t(){return a()(this,t),s()(this,c()(t).apply(this,arguments))}return l()(t,e),t}(n(232).a);h()(v,"CLASS",function(){return"SymbolRegistryClass"});var f=new v},822:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n(11),a=(n.n(r),n(0)),i=n.n(a),s=n(1),o=n.n(s),c=n(6),u=n.n(c),l=n(3),d=n.n(l),h=n(34),v=n.n(h),f=n(7),p=n.n(f),g=n(5),y=n.n(g),b=n(2),m=function(e){var t,n;return n=t=function(e){function t(){var e,n;i()(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=u()(this,(e=d()(t)).call.apply(e,[this].concat(a))),y()(v()(n),"__IDEExtensionPayloadMixin",!0),y()(v()(n),"__classNameExtensionMap",{}),y()(v()(n),"__IDEPayloadInitialized",!1),y()(v()(n),"__extension",null),n}return p()(t,e),o()(t,[{key:"_IDEPayloadInit",value:function(){Object(b.a)(!1===this.__IDEPayloadInitialized,"already initialized"),this.__IDEPayloadInitialized=!0}},{key:"_IDEPayloadDestroy",value:function(){Object(b.a)(!0===this.__IDEPayloadInitialized,"not initialized"),this.__IDEPayloadInitialized=!1}},{key:"id",value:function(){var e=this._extension.id(),t=this.classSlug,n="".concat(e,":").concat(t);return n}},{key:"_extension",get:function(){var e=this.constructor;return this.__extension?this.__extension:e.__staticExtension},set:function(e){Object(b.a)(e&&null===this.__extension||null===e&&null!==this.__extension,"extension payload already set"),this.__extension=e}},{key:"extensionCore",get:function(){var e=this._extension;if(Object(b.a)(e,"owner extension not available"),"extension-core"===e.id())return e;var t=e.extensionCore;return Object(b.a)(t,"core extension not available"),t}},{key:"extensionState",get:function(){return this._extension.extensionState}},{key:"extensionActions",get:function(){return this._extension.extensionActions}}],[{key:"_IDEPayloadInit",value:function(){Object(b.a)(!1===this.__IDEPayloadInitialized,"already initialized"),this.__IDEPayloadInitialized=!0}},{key:"_IDEPayloadDestroy",value:function(){Object(b.a)(!0===this.__IDEPayloadInitialized,"not initialized"),this.__IDEPayloadInitialized=!1}},{key:"_extension",get:function(){return this.__staticExtension},set:function(e){Object(b.a)(e&&null===this.__staticExtension||null===e&&null!==this.__staticExtension),this.__staticExtension=e}}]),t}(e),y()(t,"__IDEExtensionPayloadMixin",!0),y()(t,"__classNameExtensionMap",{}),y()(t,"__IDEPayloadInitialized",!1),y()(t,"__staticExtension",null),n}},823:function(e,t,n){"use strict";n.d(t,"a",function(){return Q});var r=n(21),a=(n.n(r),n(22)),i=(n.n(a),n(25)),s=(n.n(i),n(11)),o=(n.n(s),n(41)),c=(n.n(o),n(26)),u=(n.n(c),n(57)),l=(n.n(u),n(12)),d=(n.n(l),n(54)),h=(n.n(d),n(388)),v=(n.n(h),n(389)),f=(n.n(v),n(38)),p=(n.n(f),n(349)),g=(n.n(p),n(350)),y=(n.n(g),n(824)),b=(n.n(y),n(48)),m=(n.n(b),n(60)),k=(n.n(m),n(8)),_=(n.n(k),n(30)),x=(n.n(_),n(18)),w=(n.n(x),n(103)),I=(n.n(w),n(19)),A=(n.n(I),n(238)),S=n.n(A),E=n(49),C=n.n(E),j=n(50),O=n.n(j),D=n(0),T=n.n(D),M=n(1),F=n.n(M),L=n(6),N=n.n(L),P=n(3),R=n.n(P),B=n(7),U=n.n(B),W=n(5),H=n.n(W),G=n(236),V=(n.n(G),n(2)),$=n(144),z=n(170);function q(){var e=S()(["NOP block found, please remove all NOP blocks."]);return q=function(){return e},e}var J=[],Y=function(e){function t(){return T()(this,t),N()(this,R()(t).apply(this,arguments))}return U()(t,e),F()(t,[{key:"isProject",value:function(e){return null!=e&&void 0!==e.name}},{key:"assert",value:function(e){Object(V.a)(this.isProject(e),function(){return"invalid project: ".concat(JSON.stringify(e))})}},{key:"getId",value:function(e){return this.assert(e),this.__hack__notebook?this.__hack__notebook.id:e.id}},{key:"setId",value:function(e,t){this.assert(e),Object(V.a)(t&&"string"==typeof t),e.id=t}},{key:"getContext",value:function(e){return this.assert(e),e.context}},{key:"setContext",value:function(e,t){this.assert(e),e.context=t}},{key:"isSaved",value:function(e){return this.assert(e),null!=this.getId(e)}},{key:"hasActorWithClassName",value:function(e,t){return this.assert(e),V.a.string(t),this.actorsByClassName(e,t).length>0}},{key:"getLibraryActor",value:function(e,t){this.assert(e),V.a.string(t);var n=this.getLibraryActors(e);V.a.array(n);var r=!0,a=!1,i=void 0;try{for(var s,o=n[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var c=s.value;if(t===this.Actors.getClassName(c))return c}}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return null}},{key:"getLibraryActors",value:function(e){this.assert(e);var t=e._libraryActors;return V.a.array(t),t}},{key:"libraryActorByName",value:function(e,t){this.assert(e),V.a.string(t);var n=this.getLibraryActors(e),r=!0,a=!1,i=void 0;try{for(var s,o=n[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var c=s.value,u=this.Actors.getClassName(c);if(V.a.string(u),u===t)return c}}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return null}},{key:"actorWithStepId",value:function(e,t){this.assert(e),V.a.string(t);var n=this.getActors(e),r=!0,a=!1,i=void 0;try{for(var s,o=n[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var c=s.value;if(this.Actors.hasStepId(c,t))return c}}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return null}},{key:"getActors",value:function(e){return this.assert(e),this.__hack__notebook?[]:(Object(V.a)(e._actorIds.length===Object.keys(e._actorIdActorMap).length),e._actorIds.map(function(t){return e._actorIdActorMap[t]}))}},{key:"setActors",value:function(e,t){var n=this;this.assert(e),Object(V.a)(this.Actors.isActor(t),"attempted to set invalid actors in project");var r=this._clone(t),a={},i=!0,s=!1,o=void 0;try{for(var c,u=r[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var l=c.value,d=this.Actors.getId(l);V.a.string(d),a[d]=l}}catch(e){s=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(s)throw o}}e._actorIdActorMap=a,e._actorIds=t.map(function(e){return n.Actors.getId(e)});var h=!0,v=!1,f=void 0;try{for(var p,g=e._libraryActors[Symbol.iterator]();!(h=(p=g.next()).done);h=!0){var y=p.value;e._actorIdActorMap[this.Actors.getId(y)]=y}}catch(e){v=!0,f=e}finally{try{h||null==g.return||g.return()}finally{if(v)throw f}}var b=e._libraryActors.map(function(e){return n.Actors.getId(e)});e._actorIds=[].concat(O()(e._actorIds),O()(b)),this.selectDefaultActor(e)}},{key:"addActor",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.assert(e),Object(V.a)(this.Actors.isActor(t));var r=this._get(n,"deletable",!0);if(this.Actors.isStageActor(t)){var a=this.getStageActor(e);Object(V.a)(null===a)}var i=this.Actors.getName(t),s=this.actorByName(e,i);if(s&&!1===this.Actors.isSame(t,s)){var o=this._generateUniqueActorName(e,i);this.Actors.setName(t,o)}this.Actors.setDeletable(t,r);var c=this.Actors.getId(t);if(V.a.string(c),Object(V.a)(void 0===e._actorIdActorMap[c]),e._actorIdActorMap[c]=t,Object(V.a)(!1===e._actorIds.includes(c)),e._actorIds.push(c),this.Actors.isLibraryActor(t)){var u=this.Actors.getClassName(t);V.a.string(u);var l=this.libraryActorByName(e,u);Object(V.a)(null==l),e._libraryActors.push(t)}}},{key:"_generateUniqueActorName",value:function(e,t){this.assert(e),V.a.string(t);var n=this.getActorNameActorMap(e),r=0,a=null;do{r+=1,a="".concat(t).concat(r)}while(void 0!==n[a]);return a}},{key:"deleteActorById",value:function(e,t){var n=this;(this.assert(e),V.a.string(t),void 0!==e._actorIdActorMap[t])?(delete e._actorIdActorMap[t],Object(V.a)(e._actorIds.includes(t)),e._actorIds=e._actorIds.filter(function(e){return e!==t}),e._libraryActors=e._libraryActors.filter(function(e){return n.Actors.getId(e)!==t}),this.getSelectedActorId(e)===t&&this.selectDefaultActor(e)):this.logger.warn("attempted to delete actor that doesnt exist")}},{key:"selectDefaultActor",value:function(e){var t=this;this.assert(e);var n=this.getStageActor(e),r=this.getSpriteActors(e);V.a.array(r);var a=(r=r.filter(function(e){return t.Actors.isViewable(e)})).length>0?r[0]:n;if(null!=a){var i=this.Actors.getId(a);V.a.string(i),this.selectActorById(e,i)}}},{key:"setActorName",value:function(e,t,n){this.assert(e),V.a.string(t),V.a.string(n);var r=this.Projects.actorById(e,t);Object(V.a)(this.Actors.isActor(r));var a=this.actorByName(e,n);(n=a&&!1===this.Actors.isSame(r,a)?this._generateUniqueActorName(e,n):n,this.Actors.getName(r)!==n)&&(!1!==this.Actors.setName(r,n)&&this.setDirty(e))}},{key:"reset",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.assert(e);var n=this._get(t,"resetContext",!0);e.dirty=!1,e.selectedActorId=null,e.selectedLevelId=null,this.setActors(e,[]),e.tutorial=null,e.resourcesLoaded=!1,n&&(e.id=null,e.name="Untitled",e.description=null)}},{key:"getId",value:function(e){this.assert(e);var t=e.id;return Object(V.a)(null===t||"string"==typeof t),t}},{key:"getName",value:function(e){this.assert(e);var t=e.name;return V.a.string(t),t}},{key:"setName",value:function(e,t){this.assert(e),e.name=t||"",this.updateValid(e)}},{key:"hasTutorial",value:function(e){return V.a.object(e),!!this.getTutorial(e)}},{key:"getTutorial",value:function(e){return this.assert(e),e.tutorial}},{key:"setTutorial",value:function(e,t){this.assert(e),Object(V.a)(Array.isArray(t)||null==t),e.tutorial=t}},{key:"ensureTutorial",value:function(e){if(V.a.object(e),this.hasTutorial(e))return!0;this.setTutorial(e,[{comment:"\n                <h1>Title</h1>\n                <h2>Subtitle</h2>\n                <p>Write content here</p>\n            ",context:"stage",size:"full",stage:"stage"}])}},{key:"clearTutorial",value:function(e){e.tutorial=null}},{key:"getDescription",value:function(e){this.assert(e);var t=e.description?e.description:"";return Object(V.a)("string"==typeof t),t}},{key:"setDescription",value:function(e,t){this.assert(e),Object(V.a)("string"==typeof t),e.description=t}},{key:"getWatchers",value:function(e){return this.assert(e),e.watchers?e.watchers:[]}},{key:"setWatchers",value:function(e,t){this.assert(e),V.a.array(t),e.watchers=t}},{key:"getProjectScreenshotUrl",value:function(e){this.assert(e);var t=this.getId(e);if(null==t)return null;var n=this.getRevision(e),r="/assets/pscreenshot/".concat(t,".png");return n&&(r+="?cache=max&v=".concat(n)),r}},{key:"getScreenshotType",value:function(e){V.a.object(e);var t=this.getProjectDocument(e);if(null==t)return this.ProjectScreenshotTypesEnum.STAGE;var n=this._get(t,"screenshotType",this.ProjectScreenshotTypesEnum.STAGE);return V.a.enum(n,this.ProjectScreenshotTypesEnum),n}},{key:"getRevision",value:function(e){return this.assert(e),e.revision}},{key:"isValid",value:function(e){return this.assert(e),e.valid}},{key:"updateValid",value:function(e){this.assert(e);var t=this.getName(e);e.valid=!!t}},{key:"isDirty",value:function(e){this.assert(e);var t=e.dirty;return V.a.boolean(t),t}},{key:"setDirty",value:function(e){this.assert(e),e.dirty=!0,e.revision=this._generateRevision(),window.__projectDirty=!0}},{key:"clearDirty",value:function(e){this.assert(e),e.dirty=!1,delete window.__projectDirty}},{key:"getOwnerId",value:function(e){if(this.__hack__notebook)return this.__hack__notebook.userid.$id;this.assert(e);var t=this.getProjectDocument(e);if(null==t)return null;V.a.object(t);var n=this.ProjectDocuments.getUserId(t);return n?(V.a.string(n),n):null}},{key:"getOriginalId",value:function(e){this.assert(e);var t=this.getProjectDocument(e);return V.a.object(t),this.ProjectDocuments.getOriginalId(t)}},{key:"isOwner",value:function(e,t){return this.assert(e),Object(V.a)(this.Users.isUser(e)),this.getOwnerId(e)===this.Users.getId(t)}},{key:"isOwnedByUserId",value:function(e,t){return this.assert(e),V.a.string(t),this.getOwnerId(e)===t}},{key:"isRemix",value:function(e){this.assert(e);var t=this.getProjectDocument(e);return V.a.object(t),this.ProjectDocuments.isRemix(t)}},{key:"getProjectDocument",value:function(e){return this.assert(e),e.document}},{key:"setProjectDocument",value:function(e,t){this.assert(e),V.a.object(t);var n=this.ProjectDocuments.getId(t),r=this.ProjectDocuments.getName(t);V.a.string(r);var a=this.ProjectDocuments.getDescription(t),i=this.ProjectDocuments.getWatchers(t);V.a.array(i);var s=this.ProjectDocuments.getTutorial(t),o=this.ProjectDocuments.getLevels(t);V.a.array(o),e.id=n,e.originalDocument=this._clone(t),e.document=t,e.levels=o,e.revision=t.revision?t.revision:this._generateRevision(),this.setName(e,r),s?this.setTutorial(e,s):this.clearTutorial(e),a&&this.setDescription(e,a),this.setWatchers(e,i)}},{key:"setNotebookProjectDocument",value:function(e,t){this.assert(e),V.a.object(t);var n=this.ProjectDocuments.getId(t),r=this.ProjectDocuments.getName(t);V.a.string(r);var a=this.ProjectDocuments.getWatchers(t);V.a.array(a),e.id=n,e.originalDocument=this._clone(t),e.document=t,this.setName(e,r)}},{key:"getLevels",value:function(e){this.assert(e);var t=e.levels;return V.a.array(t),t}},{key:"getLevelsS",value:function(e){this.assert(e);var t=this.getLevels(e);return V.a.array(t),t.map(function(e){return JSON.stringify(e)})}},{key:"setLevels",value:function(e,t){var n=this;this.assert(e),V.a.array(t),V.a.uniqueAttribute(t,function(e){return n.ProjectDocumentLevels.getId(e)},"duplicate level ids found"),V.a.uniqueAttribute(t,function(e){return n.ProjectDocumentLevels.getName(e)},"duplicate level names found"),e.levels=t}},{key:"levelById",value:function(e,t){this.assert(e),V.a.string(t);var n=this.getLevelIdLevelMap(e);V.a.object(n);var r=n[t];return V.a.object(r,"level not found: "+t),r}},{key:"levelByName",value:function(e,t){this.assert(e),V.a.string(t,function(){return"unexpected level name: ".concat(JSON.stringify(t))});var n=this.getLevels(e);V.a.array(n);var r=!0,a=!1,i=void 0;try{for(var s,o=n[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var c=s.value;if(this.ProjectDocumentLevels.getName(c)===t)return c}}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return null}},{key:"setLevel",value:function(e,t,n){var r=this;this.assert(e),V.a.string(t),V.a.object(n);var a=this.getLevels(e);V.a.array(a),a=a.map(function(e){var a=r.ProjectDocumentLevels.getId(e);return V.a.string(a),a===t?n:e}),this.setLevels(e,a)}},{key:"addLevel",value:function(e,t,n){this.assert(e),V.a.object(t);var r=this.ProjectDocumentLevels.getName(t);V.a.string(r);var a=this._generateUniqueLevelName(e,r);this.ProjectDocumentLevels.setName(t,a);var i=this.getLevels(e);V.a.array(i),$.a.isInteger(n)?i.splice(n,0,t):i=[].concat(O()(i),[t]),this.setLevels(e,i)}},{key:"deleteLevel",value:function(e,t){var n=this;this.assert(e),V.a.string(t);var r=this.getLevels(e);V.a.array(r),r=r.filter(function(e){return n.ProjectDocumentLevels.getId(e)!==t}),this.setLevels(e,r)}},{key:"setLevelName",value:function(e,t,n){if(this.assert(e),V.a.string(t),V.a.string(n),""!==n.trim()){var r=this.levelById(e,t);V.a.object(r);var a=this.levelByName(e,n);if(n=a&&!1===this.ProjectDocumentLevels.isSame(r,a)?this._generateUniqueLevelName(e,n):n,this.ProjectDocumentLevels.getName(r)!==n)!1!==this.ProjectDocumentLevels.setName(r,n)&&this.setDirty(e)}}},{key:"getLevelIndex",value:function(e,t){this.assert(e);var n=this.getLevels(e);V.a.array(n);var r=n.indexOf(t);return Object(V.a)(-1!==r),r}},{key:"getSelectedLevelIndex",value:function(e){this.assert(e);var t=this.getSelectedLevel(e);return V.a.object(t),this.getLevelIndex(e,t)}},{key:"getSelectedLevelId",value:function(e){return this.assert(e),e.selectedLevelId}},{key:"getSelectedLevel",value:function(e){this.assert(e);var t=this.getSelectedLevelId(e);if(null==t)return null;var n=this.levelById(e,t);return V.a.object(n),n}},{key:"selectLevel",value:function(e,t){var n=this;this.assert(e),V.a.string(t),e.selectedLevelId=t;var r=this.getProjectDocument(e);V.a.object(r);var a=this.levelById(e,t);V.a.object(a),e.libs=this.ProjectDocumentLevels.getLibraryIds(a),e.variables=this.ProjectDocumentLevels.getVariables(a),e.varDefaults=this.ProjectDocumentLevels.getVariableDefaults(a),e.cloudVariables=this.ProjectDocumentLevels.getCloudVariables(a),e.lists=this.ProjectDocumentLevels.getLists(a),e.cloudLists=this.ProjectDocumentLevels.getCloudLists(a);var i=this.ProjectDocumentLevels.getActors(a);V.a.array(i);var s=i.map(function(e){return n.ProjectDocumentLevelActors.projectActorFromLevelActor(e)});this.setActors(e,s),this.clearDirty(e),this.updateValid(e)}},{key:"getLevelIdLevelMap",value:function(e){this.assert(e);var t={},n=this.getLevels(e);V.a.array(n);var r=!0,a=!1,i=void 0;try{for(var s,o=n[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var c=s.value,u=this.ProjectDocumentLevels.getId(c);V.a.string(u),t[u]=c}}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return t}},{key:"getLevelIdLevelNameMap",value:function(e){this.assert(e);var t={},n=this.getLevels(e);V.a.array(n);var r=!0,a=!1,i=void 0;try{for(var s,o=n[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var c=s.value,u=this.ProjectDocumentLevels.getId(c);V.a.string(u);var l=this.ProjectDocumentLevels.getName(c);V.a.string(l),t[u]=l}}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return t}},{key:"getLevelNameLevelMap",value:function(e){this.assert(e);var t={},n=this.getLevels(e);V.a.array(n);var r=!0,a=!1,i=void 0;try{for(var s,o=n[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var c=s.value,u=this.ProjectDocumentLevels.getName(c);V.a.string(u),t[u]=c}}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return t}},{key:"_generateUniqueLevelName",value:function(e,t){this.assert(e),V.a.string(t);var n=this.getLevelNameLevelMap(e);if(void 0===n[t])return t;var r=0,a=null;do{r+=1,a="".concat(t).concat(r)}while(void 0!==n[a]);return a}},{key:"sortLevelsByIds",value:function(e,t){var n=this;e.levels.sort(function(e,r){var a=n.ProjectDocumentLevels.getId(e),i=n.ProjectDocumentLevels.getId(r);return t.indexOf(a)-t.indexOf(i)})}},{key:"actorsByQuery",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.assert(e),Object(V.a)(t),V.a.object(n);var r=this._get(n,"caseInsensitive",!1);return this.getActors(e).filter(function(e){for(var n in t){var a=e[n],i=t[n];if(!0===r&&"string"==typeof a&&"string"==typeof i&&(a=a.toLowerCase(),i=i.toLowerCase()),!1===(a===i))return!1}return!0})}},{key:"actorByQuery",value:function(e,t){this.assert(e),Object(V.a)(t);var n=this.actorsByQuery(e,t);return Object(V.a)(n.length<=1),n.length>0?n[0]:null}},{key:"actorByName",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.assert(e),V.a.string(t),V.a.object(n);var r=this.actorsByQuery(e,{label:t},n);return V.a.array(r),r.length>1&&this.logger.warn("multiple actors found with same name: ".concat(r.length)),r.length>0?r[0]:null}},{key:"actorById",value:function(e,t){if(this.assert(e),Object(V.a)(void 0!==t),"selected"===t)return this.getSelectedActor(e);var n=t?this.actorsByQuery(e,{_id:t}):this.actorsByQuery(e,{_background:!0});return Object(V.a)(n.length<=1),n.length>0?n[0]:null}},{key:"actorsByClassName",value:function(e,t){this.assert(e),V.a.string(t);var n=this.actorsByQuery(e,{classname:t});return V.a.array(n),n}},{key:"actorsByGroupName",value:function(e,t){var n=this;return this.getActors(e).filter(function(e){return n.Actors.getGroupName(e)===t})}},{key:"getSelectedActorId",value:function(e){return this.assert(e),e.selectedActorId}},{key:"getSelectedActor",value:function(e){this.assert(e);var t=this.getSelectedActorId(e);return this.actorById(e,t)}},{key:"getActorIdNameMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.assert(e);var r=this.getActors(e),a={},i=!0,s=!1,o=void 0;try{for(var c,u=function(){var e=c.value,r=t.Actors.getId(e);Object(V.a)(r);var i=t.Actors.getName(e);Object(V.a)(i),n.translate&&i===t.Actors.getStageName()&&(i=t.Actors.getStageName({translate:!0})),Object(V.a)(i,function(){return"actor has no name: ".concat(JSON.stringify(e))}),Object(V.a)(void 0===a[r],"duplicate actor name: ".concat(i)),a[r]=i},l=r[Symbol.iterator]();!(i=(c=l.next()).done);i=!0)u()}catch(e){s=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(s)throw o}}return a}},{key:"getActorNameActorMap",value:function(e){var t=this;this.assert(e);var n=this.getActors(e),r={},a=!0,i=!1,s=void 0;try{for(var o,c=function(){var e=o.value,n=t.Actors.getName(e);Object(V.a)(n),Object(V.a)(n,function(){return"actor has no name: ".concat(JSON.stringify(e))}),r[n]=e},u=n[Symbol.iterator]();!(a=(o=u.next()).done);a=!0)c()}catch(e){i=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(i)throw s}}return r}},{key:"isStageActorId",value:function(e,t){this.assert(e),V.a.string(t);var n=this.getStageActor(e);return Object(V.a)(this.Actors.isActor(n)),t===this.Actors.getId(n)}},{key:"isStageActorSelected",value:function(e){this.assert(e);var t=this.getStageActor(e);Object(V.a)(t);var n=this.Actors.getId(t);Object(V.a)(n);var r=this.getSelectedActorId(e);return Object(V.a)(r),n===r}},{key:"getStageActor",value:function(e){var t=this;this.assert(e);var n=this.getActors(e);return V.a.array(n),(n=n.filter(function(e){return t.Actors.isStageActor(e)})).length>0?n[0]:null}},{key:"getSpriteActors",value:function(e){var t=this;this.assert(e);var n=this.getActors(e);return V.a.array(n),n=n.filter(function(e){return t.Actors.isSpriteActor(e)})}},{key:"selectActorById",value:function(e,t){this.assert(e),V.a.string(t),null!=this.actorById(e,t)?e.selectedActorId=t:this.logger.warn("tried to select actor that no longer exists: ".concat(t))}},{key:"unselectActor",value:function(e){this.assert(e),e.selectedActorId=null}},{key:"variableDefaultsForActorId",value:function(e,t){V.a.object(e),V.a.string(t);var n=this.actorById(e,t);return V.a.object(n),this.Actors.isStageActor(n)?this.getVariableDefaults(e):this.Actors.getVariableDefaults(n)}},{key:"variablesForActorId",value:function(e,t){V.a.object(e),V.a.string(t);var n=this.actorById(e,t);return V.a.object(n),this.Actors.isStageActor(n)?this.getVariables(e):this.Actors.getVariables(n)}},{key:"setVariablesForActorId",value:function(e,t,n){V.a.object(e),V.a.string(t),V.a.object(n);var r=this.actorById(e,t);return V.a.object(r),this.Actors.isStageActor(r)?this.getVariables(e):this.Actors.setVariables(r,n)}},{key:"addVariablesToActorId",value:function(e,t,n){V.a.object(e),V.a.string(t),V.a.object(n);var r=this.variablesForActorId(e,t);Object(V.a)(r);for(var a=0,i=Object.entries(n);a<i.length;a++){var s=C()(i[a],2),o=s[0],c=s[1];r[o]=c}this.setVariablesForActorId(e,t,r)}},{key:"addVariableToActorId",value:function(e,t,n){V.a.object(e),V.a.string(t),V.a.string(n);var r={};r[n]="",this.addVariablesToActorId(e,t,r)}},{key:"listsForActorId",value:function(e,t){V.a.object(e),V.a.string(t);var n=this.actorById(e,t);return V.a.object(n),this.Actors.isStageActor(n)?this.getLists(e):this.Actors.getLists(n)}},{key:"setListsForActorId",value:function(e,t,n){V.a.object(e),V.a.string(t),V.a.object(n);var r=this.actorById(e,t);return V.a.object(r),this.Actors.isStageActor(r)?this.getLists(e):this.Actors.setLists(r,n)}},{key:"addListsToActorId",value:function(e,t,n){V.a.object(e),V.a.string(t),V.a.object(n);var r=this.listsForActorId(e,t);Object(V.a)(r);for(var a=0,i=Object.entries(n);a<i.length;a++){var s=C()(i[a],2),o=s[0],c=s[1];r[o]=c}this.setListsForActorId(e,t,r)}},{key:"addListToActorId",value:function(e,t,n){V.a.object(e),V.a.string(t),V.a.string(n);var r={};r[n]=J,this.addListsToActorId(e,t,r)}},{key:"isLibraryRequired",value:function(e,t){return this.assert(e),V.a.string(t),this.getRequiredLibraryNames(e).includes(t)}},{key:"getRequiredLibraryNames",value:function(e){return this.assert(e),e.libs?e.libs:[]}},{key:"addedRequiredLibraryName",value:function(e,t){this.assert(e),V.a.string(t),e.libs=e.libs?e.libs:[],e.libs.push(t)}},{key:"removeRequiredLibraryName",value:function(e,t){this.assert(e),V.a.string(t),Object(V.a)(Array.isArray(e.libs)&&e.libs.includes(t)),e.libs=e.libs.filter(function(e){return e!==t})}},{key:"getVariables",value:function(e){return this.assert(e),e.variables?e.variables:{}}},{key:"hasVariable",value:function(e,t){return this.assert(e),V.a.string(t),void 0!==this.getVariables(e)[t]}},{key:"setVariables",value:function(e,t){V.a.object(e),V.a.object(t),e.variables=t}},{key:"getVariableNames",value:function(e){this.assert(e);var t=this.getVariables(e);return V.a.object(t),Object.keys(t)}},{key:"getVariableDefaults",value:function(e){return this.assert(e),e.varDefaults?e.varDefaults:{}}},{key:"upsertVariable",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.assert(e),V.a.string(t),Object(V.a)(void 0!==n),e.variables=e.variables?e.variables:{},e.varDefaults=e.varDefaults?e.varDefaults:{},e.cloudVariables=e.cloudVariables?e.cloudVariables:{},e.variables[t]=n,void 0!==r?e.varDefaults[t]=r:delete e.varDefaults[t],a?e.cloudVariables[t]=!0:delete e.cloudVariables[t]}},{key:"deleteVariable",value:function(e,t){this.assert(e),V.a.string(t),delete e.variables[t],delete e.cloudVariables[t]}},{key:"getCloudVariables",value:function(e){return this.assert(e),e.cloudVariables?e.cloudVariables:{}}},{key:"getLists",value:function(e){return this.assert(e),e.lists?e.lists:{}}},{key:"hasList",value:function(e,t){return this.assert(e),V.a.string(t),void 0!==this.getLists(e)[t]}},{key:"setLists",value:function(e,t){this.assert(e),V.a.object(t),e.lists=t}},{key:"getListNames",value:function(e){this.assert(e);var t=this.getLists(e);return V.a.object(t),Object.keys(t)}},{key:"getCloudLists",value:function(e){return this.assert(e),e.cloudLists?e.cloudLists:{}}},{key:"upsertList",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.assert(e),V.a.string(t),Object(V.a)(void 0!==n),e.lists=e.lists?e.lists:{},e.cloudLists=e.cloudLists?e.cloudLists:{},e.lists[t]=n,r?e.cloudLists[t]=!0:delete e.cloudLists[t]}},{key:"deleteList",value:function(e,t){this.assert(e),V.a.string(t),delete e.lists[t]}},{key:"sendActorToFront",value:function(e,t){var n=this;this.assert(e),V.a.string(t);var r=this.getActors(e);r=r.filter(function(e){return!1===n.Actors.isStageActor(e)});var a=Number.MIN_SAFE_INTEGER,i=!0,s=!1,o=void 0;try{for(var c,u=r[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var l=c.value,d=this.Actors.getZIndex(l);V.a.number(d),a=d>a?d:a}}catch(e){s=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(s)throw o}}Object(V.a)(a!==Number.MIN_SAFE_INTEGER);var h=a+1,v=this.actorById(e,t);Object(V.a)(this.Actors.isActor(v)),this.Actors.setZIndex(v,h),this._normalizeActorZIndexes(e)}},{key:"sendActorToBack",value:function(e,t){var n=this;this.assert(e),V.a.string(t);var r=this.getActors(e);r=r.filter(function(e){return!1===n.Actors.isStageActor(e)});var a=Number.MAX_SAFE_INTEGER,i=!0,s=!1,o=void 0;try{for(var c,u=r[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var l=c.value,d=this.Actors.getZIndex(l);V.a.number(d),a=d<a?d:a}}catch(e){s=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(s)throw o}}Object(V.a)(a!==Number.MAX_SAFE_INTEGER);var h=a-1,v=this.actorById(e,t);Object(V.a)(this.Actors.isActor(v)),this.Actors.setZIndex(v,h),this._normalizeActorZIndexes(e)}},{key:"sendActorForward",value:function(e,t){var n=this;this.assert(e),V.a.string(t);var r=this.actorById(e,t);Object(V.a)(this.Actors.isActor(r));var a=this.Actors.getZIndex(r);V.a.number(a);var i=a+1,s=this.getActors(e);V.a.array(s),s=s.filter(function(e){return!1===n.Actors.isStageActor(e)});var o=!0,c=!1,u=void 0;try{for(var l,d=s[Symbol.iterator]();!(o=(l=d.next()).done);o=!0){var h=l.value;if(t!==this.Actors.getId(h)){var v=this.Actors.getZIndex(h);V.a.number(v),v<=i&&this.Actors.setZIndex(h,v-1)}}}catch(e){c=!0,u=e}finally{try{o||null==d.return||d.return()}finally{if(c)throw u}}Object(V.a)(this.Actors.getId(r)===t),this.Actors.setZIndex(r,i),this._normalizeActorZIndexes(e)}},{key:"sendActorBackward",value:function(e,t){var n=this;this.assert(e),V.a.string(t);var r=this.actorById(e,t);Object(V.a)(this.Actors.isActor(r));var a=this.Actors.getZIndex(r);V.a.number(a);var i=a-1,s=this.getActors(e);V.a.array(s),s=s.filter(function(e){return!1===n.Actors.isStageActor(e)});var o=!0,c=!1,u=void 0;try{for(var l,d=s[Symbol.iterator]();!(o=(l=d.next()).done);o=!0){var h=l.value;if(t!==this.Actors.getId(h)){var v=this.Actors.getZIndex(h);V.a.number(v),v>=i&&this.Actors.setZIndex(h,v+1)}}}catch(e){c=!0,u=e}finally{try{o||null==d.return||d.return()}finally{if(c)throw u}}Object(V.a)(this.Actors.getId(r)===t),this.Actors.setZIndex(r,i),this._normalizeActorZIndexes(e)}},{key:"_normalizeActorZIndexes",value:function(e){var t=this,n=this.getActors(e);V.a.array(n),n=n.filter(function(e){return!1===t.Actors.isStageActor(e)});var r=this._clone(n);r.sort(function(e,n){return t.Actors.getZIndex(e)-t.Actors.getZIndex(n)});for(var a=0;a<r.length;a++){var i=r[a],s=this.Actors.getId(i),o=this.actorById(e,s);Object(V.a)(this.Actors.isActor(o)),this.Actors.setZIndex(o,a)}}},{key:"getStepIds",value:function(e){var t=[],n=this.getActors(e),r=!0,a=!1,i=void 0;try{for(var s,o=n[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var c=s.value,u=this.Actors.getStepIds(c),l=!0,d=!1,h=void 0;try{for(var v,f=u[Symbol.iterator]();!(l=(v=f.next()).done);l=!0){var p=v.value;t.push(p)}}catch(e){d=!0,h=e}finally{try{l||null==f.return||f.return()}finally{if(d)throw h}}}}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return t}},{key:"getSteps",value:function(e){var t=[],n=this.getActors(e),r=!0,a=!1,i=void 0;try{for(var s,o=n[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var c=s.value,u=this.Actors.getSteps(c),l=!0,d=!1,h=void 0;try{for(var v,f=u[Symbol.iterator]();!(l=(v=f.next()).done);l=!0){var p=v.value;t.push(p)}}catch(e){d=!0,h=e}finally{try{l||null==f.return||f.return()}finally{if(d)throw h}}}}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return t}},{key:"isResourcesLoaded",value:function(e){return!0===e.resourcesLoaded}},{key:"markResourcesLoaded",value:function(e){e.resourcesLoaded=!0}},{key:"functionStepsForLibrary",value:function(e,t){var n=this;this.assert(e),V.a.string(t);var r=this.Projects.getLibraryActor(e,t);if(null==r)return[];var a=this.Actors.getSteps(r);return V.a.array(a),a.filter(function(e){return!1!==n.Steps.isFunction(e)})}},{key:"functionCallStepsForLibraryName",value:function(e,t){var n=this;this.assert(e),V.a.string(t);var r=this.Projects.getLibraryActor(e,t);if(null==r)return[];var a=this.functionStepsForLibrary(e,t);V.a.array(a);var i=this.Actors.getStepsMap(r);return V.a.object(i),a.map(function(e){var r=n._clone(e);n.Steps.resolveStepReferences(r,i);var a=r.name,s=(r.values?r.values:[]).map(function(e){return e.name});return n.Steps.createLibraryCall(t,a,s,{hiddenInSandbox:r.hiddenInSandbox})})}},{key:"validate",value:function(e){var t=this.getActors(e),n=!0,r=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var o=i.value,c=this.Actors.getSteps(o),u=!0,l=!1,d=void 0;try{for(var h,v=c[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){var f=h.value,p=o._id;V.a.string(p);var g=f._id;if(V.a.string(g),"nop"===f.func)return{actorId:p,stepId:g,reason:Object(G.t)(q())}}}catch(e){l=!0,d=e}finally{try{u||null==v.return||v.return()}finally{if(l)throw d}}}}catch(e){r=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}return null}},{key:"_generateRevision",value:function(){return this.uuid()}},{key:"assertValidActors",value:function(e){var t=this.getActors(e),n=!0,r=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var o=i.value;this.Actors.assertValid(o)}}catch(e){r=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}}},{key:"assertValid",value:function(e){this.assertValidActors(e)}}]),t}(z.a);H()(Y,"CLASS",function(){return"ProjectsClass"});var Q=new Y},825:function(e,t,n){"use strict";n.d(t,"a",function(){return T});var r=n(21),a=(n.n(r),n(22)),i=(n.n(a),n(11)),s=(n.n(i),n(26)),o=(n.n(s),n(71)),c=(n.n(o),n(54)),u=(n.n(c),n(84)),l=(n.n(u),n(38)),d=(n.n(l),n(30)),h=(n.n(d),n(50)),v=n.n(h),f=n(40),p=n.n(f),g=n(0),y=n.n(g),b=n(1),m=n.n(b),k=n(6),_=n.n(k),x=n(3),w=n.n(x),I=n(7),A=n.n(I),S=n(5),E=n.n(S),C=n(2),j=n(55),O=n(826),D=function(e){function t(){return y()(this,t),_()(this,w()(t).apply(this,arguments))}return A()(t,e),m()(t,[{key:"isProjectDocument",value:function(e){return null!=e&&("object"===p()(e)&&(!!e.data&&"string"==typeof e.data))}},{key:"assert",value:function(e){Object(C.a)(this.isProjectDocument(e),function(){return"invalid project document: ".concat(JSON.stringify(e))})}},{key:"getId",value:function(e){C.a.object(e);var t=e.id?e.id:null;return Object(C.a)(void 0!==t),t}},{key:"getName",value:function(e){return C.a.object(e),e.name?e.name:"Untitled"}},{key:"getIDEType",value:function(e){return C.a.object(e),e.ide&&e.ide.type?e.ide.type:"mcpe"===e.type?O.a.MINECRAFT_WINDOWS_10:"minecraft"===e.type?O.a.MINECRAFT_JAVA:"crystalclash:v1"===e.type?O.a.CRYSTAL_CLASH:O.a.DIY}},{key:"getDescription",value:function(e){return C.a.object(e),e.description}},{key:"getLevelsS",value:function(e){return C.a.object(e),[e.data].concat(v()(e.levels?e.levels:[]))}},{key:"getLevels",value:function(e){return C.a.object(e),this.getLevelsS(e).map(function(e){return JSON.parse(e)})}},{key:"levelByIndex",value:function(e,t){C.a.object(e),C.a.integer(t);var n=this.getLevels(e)[t];return C.a.object(n),n}},{key:"setLevel",value:function(e,t,n){C.a.object(e),C.a.integer(t),C.a.object(n);var r=this.getLevels(e);C.a.array(r),r[t]=n;var a=r[0];C.a.object(a);var i=r.slice(1,r.length);e.data=JSON.stringify(a),i.length>0?e.levels=i.map(function(e){return JSON.stringify(e)}):delete e.levels}},{key:"getNotes",value:function(e){return C.a.object(e),e.notes?JSON.parse(e.notes):null}},{key:"setNotes",value:function(e,t){C.a.object(e),e.notes=t?JSON.stringify(t):null}},{key:"getSearcheableText",value:function(e){var t=[],n=this.getName(e);return n&&t.push(n),t.join(" ")}},{key:"getOriginalId",value:function(e){return Object(C.a)(e),e.originalid?e.originalid.$id:null}},{key:"getUserId",value:function(e){if(Object(C.a)(e),!e.userid)return null;var t=e.userid.$id;return C.a.string(t),t}},{key:"isOwnedByUserId",value:function(e,t){Object(C.a)(e),C.a.string(t);var n=this.getUserId(e);return null!=n&&n===t}},{key:"isRemix",value:function(e){return Object(C.a)(e),null!=this.getOriginalId(e)}},{key:"getActors",value:function(e){Object(C.a)(e);var t=this._get(e,"sprites",[]);return[e.background].concat(v()(t))}},{key:"getWatchers",value:function(e){return Object(C.a)(e),e.watchers?e.watchers:[]}},{key:"getTutorial",value:function(e){return e.notes?JSON.parse(e.notes):null}},{key:"getScreenshotId",value:function(e){return e.screenshotid}},{key:"getScreenshotUrl",value:function(e){if(e._screenshotDataUrl)return e._screenshotDataUrl;var t=this.getScreenshotId(e);return null==t?null:"/assets/screenshot/".concat(t,".png")}},{key:"getMeta",value:function(e){C.a.object(e);var t=this._get(e,"meta",{});return C.a.object(t),t}},{key:"getMetaAttribute",value:function(e,t){C.a.object(e),C.a.string(t);var n="meta.".concat(t);return this._get(e,n)}},{key:"setMetaAttribute",value:function(e,t,n){C.a.object(e),C.a.string(t);var r="meta.".concat(t);this._set(e,r,n)}},{key:"patch",value:function(e){C.a.object(e);var t=j.a.addTimeStart("".concat(this.className,":patch"));try{"string"==typeof e.revision&&e.revision.includes("Class:")&&(e.revision=this.uuid());var n=this._clone(e);C.a.object(n);var r=this.getLevels(e);C.a.array(r);var a=this._patchProjectDocumentLevels(r);C.a.array(a);var i=a[0];C.a.object(i);var s=a.length>1?a.slice(1,a.length):[],o=s.map(function(e){return JSON.stringify(e)});return Object(C.a)(s.length===o.length),n.data=JSON.stringify(i),s.length>0&&(n.levels=o),n}finally{j.a.addTimeEnd(t)}}},{key:"_patchProjectDocumentLevels",value:function(e){C.a.array(e);for(var t={},n=[],r=0;r<e.length;r++){for(var a=e[r],i=this.ProjectDocumentLevels.patch(a),s=this.ProjectDocumentLevels.getId(i);void 0!==t[s];){var o=this.ProjectDocumentLevels.uuid();this.logger.warn("duplicate level id found '".concat(s,"', changed to '").concat(o,"'")),s=o,i._id=s}t[s]=!0,void 0===i.name&&(i.name="Level ".concat(r+1)),n.push(i)}return n}}]),t}(n(170).a);E()(D,"CLASS",function(){return"ProjectDocumentsClass"});var T=new D},826:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(26),a=(n.n(r),n(30)),i=(n.n(a),n(0)),s=n.n(i),o=n(1),c=n.n(o),u=n(6),l=n.n(u),d=n(3),h=n.n(d),v=n(7),f=n.n(v),p=new(function(e){function t(){return s()(this,t),l()(this,h()(t).apply(this,arguments))}return f()(t,e),c()(t,[{key:"extensionIdForIDEType",value:function(e){var t={};return t[this.BLANK]="extension-context-blank",t[this.TYNKER_TUBE]="extension-context-tynker-tube",t[this.CHAT]="extension-context-chat",t[this.DIY]="extension-context-diy",t[this.DIY_SANDBOX]="extension-context-diy-sandbox",t[this.PROJECT_PLAYER]="extension-context-project-player",t[this.MULTIPLAYER_PROJECT_PLAYER]="extension-context-multiplayer-project-player",t[this.PLATFORMER]="extension-context-platformer",t[this.TOPDOWN]="extension-context-topdown",t[this.SPACE]="extension-context-space",t[this.CRYSTAL_CLASH]="extension-context-crystal-clash",t[this.CONSOLE]="extension-context-console",t[this.MULTIPLAYER]="extension-context-multiplayer",t[this.MINECRAFT_JAVA]="extension-context-minecraft-java",t[this.MINECRAFT_WINDOWS_10]="extension-context-minecraft-windows-10",t[this.MINECRAFT_EDUCATION]="extension-context-minecraft-education",t[this.COURSE]="extension-flow-course",t[this.DRAWING]="extension-context-drawing",t[this.CHARACTER_CHOOSER]="extension-context-character-chooser",t[this.HARDWARE_HIFIVE]="extension-context-hardware-hifive",t[this.HARDWARE_MICRO_BIT]="extension-context-hardware-microbit",t[this.HARDWARE_AIRBORNE_CARGO]="extension-context-hardware-airborne-cargo",t[this.HARDWARE_JUMPING_SUMO]="extension-context-hardware-jumping-sumo",t[this.HARDWARE_MAMBO]="extension-context-hardware-mambo",t[this.HARDWARE_NIGHT_DRONE]="extension-context-hardware-night-drone",t[this.HARDWARE_ROLLING_SPIDER]="extension-context-hardware-rolling-spider",t[this.HARDWARE_SWING]="extension-context-hardware-swing",t[this.HARDWARE_HUE]="extension-context-hardware-hue",t[this.HARDWARE_SPHERO]="extension-context-hardware-sphero",t[this.HARDWARE_OLLIE]="extension-context-hardware-ollie",t[this.HARDWARE_WEDO2]="extension-context-hardware-wedo2",void 0!==t[e]?t[e]:null}},{key:"isMinecraftType",value:function(e){return this.MINECRAFT_TYPES.includes(e)}},{key:"ENUM",get:function(){return{BLANK:"blank",CHAT:"chat",FEEDS:"feeds",MODERATION_FEEDS:"moderation-feeds",TYNKER_TUBE:"tynker-tube",DIY:"diy",DIY_SANDBOX:"diy-sandbox",PROJECT_PLAYER:"player",MULTIPLAYER:"multiplayer",MULTIPLAYER_PROJECT_PLAYER:"multiplayer-player",PLATFORMER:"platformer",TOPDOWN:"topdown",SPACE:"space",CRYSTAL_CLASH:"crystal-clash",CONSOLE:"console",MINECRAFT_JAVA:"minecraft-java",MINECRAFT_WINDOWS_10:"minecraft-windows-10",MINECRAFT_EDUCATION:"minecraft-education",DRAWING:"drawing",CHARACTER_CHOOSER:"character-chooser",COURSE:"course",HARDWARE_MICRO_BIT:"microbit",HARDWARE_HIFIVE:"hifive",HARDWARE_AIRBORNE_CARGO:"airborne-cargo",HARDWARE_JUMPING_SUMO:"jumping-sumo",HARDWARE_MAMBO:"mambo",HARDWARE_NIGHT_DRONE:"night-drone",HARDWARE_ROLLING_SPIDER:"rolling-spider",HARDWARE_SWING:"swing",HARDWARE_HUE:"hue",HARDWARE_SPHERO:"sphero",HARDWARE_OLLIE:"ollie",HARDWARE_WEDO2:"wedo2"}}},{key:"MINECRAFT_TYPES",get:function(){return[this.MINECRAFT_JAVA,this.MINECRAFT_WINDOWS_10,this.MINECRAFT_EDUCATION]}}]),t}(n(92).a))},827:function(e,t,n){"use strict";n.d(t,"a",function(){return U});var r=n(21),a=(n.n(r),n(22)),i=(n.n(a),n(25)),s=(n.n(i),n(11)),o=(n.n(s),n(41)),c=(n.n(o),n(384)),u=(n.n(c),n(26)),l=(n.n(u),n(12)),d=(n.n(l),n(54)),h=(n.n(d),n(385)),v=(n.n(h),n(38)),f=(n.n(v),n(60)),p=(n.n(f),n(8)),g=(n.n(p),n(17)),y=(n.n(g),n(30)),b=(n.n(y),n(18)),m=(n.n(b),n(39)),k=(n.n(m),n(19)),_=(n.n(k),n(50)),x=n.n(_),w=n(40),I=n.n(w),A=n(0),S=n.n(A),E=n(1),C=n.n(E),j=n(6),O=n.n(j),D=n(3),T=n.n(D),M=n(7),F=n.n(M),L=n(5),N=n.n(L),P=n(2),R=n(144),B=function(e){function t(){return S()(this,t),O()(this,T()(t).apply(this,arguments))}return F()(t,e),C()(t,[{key:"isProjectDocumentLevel",value:function(e){return null!=e&&("object"===I()(e)&&(void 0!==e._id&&(void 0!==e.background&&void 0!==e.name)))}},{key:"assert",value:function(e){Object(P.a)(this.isProjectDocumentLevel(e),function(){return"invalid project document level: ".concat(JSON.stringify(e))})}},{key:"isSame",value:function(e,t){return Object(P.a)(this.isProjectDocumentLevel(e)),Object(P.a)(this.isProjectDocumentLevel(t)),this.getId(e)===this.getId(t)}},{key:"clone",value:function(e){var t=this._clone(e);return t._id=this.uuid(),t}},{key:"getId",value:function(e){var t=e._id;return P.a.string(t),t}},{key:"getName",value:function(e){return e.name}},{key:"setName",value:function(e,t){P.a.object(e),P.a.string(t),e.name=t}},{key:"getScripts",value:function(e){this.assert(e);var t=e.sprites;P.a.array(t);var n=t.map(function(e){return e.scripts}),r=[e.background.scripts].concat(x()(n));return r=r.flat(),Object(P.a)(!1===r.includes(void 0)),r}},{key:"getSteps",value:function(e){this.assert(e);var t=[],n=this.getActors(e),r=!0,a=!1,i=void 0;try{for(var s,o=n[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var c=s.value,u=c.scripts?c.scripts:[],l=this.Steps.map(u,function(e){return e});t=t.concat(l)}}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return t}},{key:"getStageActor",value:function(e){this.assert(e);var t=e.background;return Object(P.a)(t),t}},{key:"getSpriteActors",value:function(e){this.assert(e);var t=e.sprites?e.sprites:[];return P.a.array(t),t}},{key:"getActors",value:function(e){this.assert(e);var t=this.getStageActor(e),n=this.getSpriteActors(e),r=[t].concat(x()(n));return r=r.filter(function(e){return e})}},{key:"getVariables",value:function(e){return this.assert(e),e.variables?e.variables:{}}},{key:"getVariableDefaults",value:function(e){return this.assert(e),e.varDefaults?e.varDefaults:{}}},{key:"getCloudVariables",value:function(e){return this.assert(e),e.cloudVariables?e.cloudVariables:{}}},{key:"getLists",value:function(e){return this.assert(e),e.lists?e.lists:{}}},{key:"getCloudLists",value:function(e){return this.assert(e),e.cloudLists?e.cloudLists:{}}},{key:"getLibraryIds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.assert(e),this._get(t,"fromData",!1)?this._libraryIdsFromLevel(e):e.libs?e.libs:[]}},{key:"_libraryIdsFromLevel",value:function(e){var t={},n=this.getScripts(e);return P.a.array(n),this.Steps.traverse(n,function(e){if("blockControlCallLibrary"===e.func||"valueControlCallLibrary"===e.func){var n=e.name;P.a.string(n);var r=n.split("::");Object(P.a)(r.length>1);var a=r[0];t[a]=!0}}),Object.keys(t)}},{key:"setLibraryIds",value:function(e,t){this.assert(e),P.a.array(t),e.libs=t}},{key:"getScreenshotId",value:function(e){return this.assert(e),e.screenshotid}},{key:"getScreenshotUrl",value:function(e){if(this.assert(e),e._screenshotDataUrl)return e._screenshotDataUrl;var t=this.getScreenshotId(e);return null==t?null:"/assets/screenshot/".concat(t,".png")}},{key:"setScreenshotDataUrl",value:function(e,t){this.assert(e),P.a.string(t),e._screenshotDataUrl=t}},{key:"getTiles",value:function(e){this.assert(e);var t=this._get(e,"tiles",[]);return P.a.array(t),t}},{key:"setTiles",value:function(e,t){this.assert(e),t?(P.a.array(t),e.tiles=t):delete e.tiles}},{key:"convertTilesTo8Bit",value:function(e){this.assert(e);var t=this.getTiles(e);P.a.array(t);var n=this._convertTilesTo8Bit(t);this.setTiles(e,n)}},{key:"_convertTilesTo8Bit",value:function(e){if(P.a.array(e),0===e.length)return[];for(var t=e,n=t[0].length,r=[],a=0;a<t.length;a++){for(var i=t[a],s=[],o=0;o<n;o++)31&i[o]?s.push(4294967295&(i[o]<<3|255)):s.push(0);r.push(s)}return r}},{key:"convertTilesTo5Bit",value:function(e){this.assert(e);var t=this.getTiles(e);P.a.array(t);var n=this._convertTilesTo5Bit(t);this.setTiles(e,n)}},{key:"_convertTilesTo5Bit",value:function(e){if(P.a.array(e),0===e.length)return[];for(var t=e,n=t[0].length,r=[],a=0;a<t.length;a++){for(var i=t[a],s=[],o=0;o<n;o++)i[o]?s.push(i[o]>>3|31):s.push(0);r.push(s)}return r}},{key:"patch",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};P.a.object(e);var r={},a={},i=function(e,n){P.a.object(e);var i=e._id;if(void 0===i){i=t.uuid();var s="id:".concat(n,":undefined");a[s]=!0}if(i.includes("Class:")){i=t.uuid();var o="id:".concat(n,":classid");a[o]=!0}if(void 0!==r[i]){i=t.uuid();var c="id:".concat(n,":duplicateid");a[c]=!0}e._id=i,r[i]=!0},s=this._clone(e);i(s),Array.isArray(s.variables)&&0===s.variables.length&&(s.variables={}),Array.isArray(s.varDefaults)&&0===s.varDefaults.length&&(s.varDefaults={}),Array.isArray(s.lists)&&0===s.lists.length&&(s.lists={}),Array.isArray(s.cloudVariables)&&0===s.cloudVariables.length&&(s.cloudVariables={}),Array.isArray(s.cloudLists)&&0===s.cloudLists.length&&(s.cloudLists={});var o=s.background;o&&(o._background=!0,void 0===o.label&&(o.label=this.Actors.STAGE_NAME));var c=this.getActors(s),u=!0,l=!1,d=void 0;try{for(var h,v=c[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){var f=h.value;this.ProjectDocumentLevelActors.patch(f,n),i(f);var p=f.costumes?f.costumes:[],g=!0,y=!1,b=void 0;try{for(var m,k=p[Symbol.iterator]();!(g=(m=k.next()).done);g=!0){var _=m.value;i(_)}}catch(e){y=!0,b=e}finally{try{g||null==k.return||k.return()}finally{if(y)throw b}}var x=f.scripts?f.scripts:[],w=!0,I=!1,A=void 0;try{for(var S,E=x[Symbol.iterator]();!(w=(S=E.next()).done);w=!0){var C=S.value;this.Steps.ensureInstance(C),this.Steps.traverse(C,function(e){return i(e)})}}catch(e){I=!0,A=e}finally{try{w||null==E.return||E.return()}finally{if(I)throw A}}}}catch(e){l=!0,d=e}finally{try{u||null==v.return||v.return()}finally{if(l)throw d}}for(var j=0,O=Object.keys(a);j<O.length;j++){var D=O[j];this.logger.warn("patched applied to project: ".concat(D))}return s}},{key:"addFeature",value:function(e,t){R.a.isObject(e.ide)||(e.ide={}),R.a.isObject(e.ide.enabledFeatures)||(e.ide.enabledFeatures={}),e.ide.enabledFeatures[t]||(e.ide.enabledFeatures[t]={})}},{key:"removeFeature",value:function(e,t){R.a.isObject(e.ide)||(e.ide={}),R.a.isObject(e.ide.enabledFeatures)||(e.ide.enabledFeatures={}),e.ide.enabledFeatures[t]&&delete e.ide.enabledFeatures[t]}},{key:"getFeatureIds",value:function(e){if(!e||!R.a.isObject(e.ide)||!R.a.isObject(e.ide.enabledFeatures))return[];var t=e.ide.enabledFeatures;return Object.keys(t)}}]),t}(n(170).a);N()(B,"CLASS",function(){return"ProjectDocumentLevelsClass"});var U=new B},828:function(e,t,n){"use strict";n.d(t,"a",function(){return L});var r=n(11),a=(n.n(r),n(26)),i=(n.n(a),n(12)),s=(n.n(i),n(71)),o=(n.n(s),n(8)),c=(n.n(o),n(17)),u=(n.n(c),n(77)),l=(n.n(u),n(30)),d=(n.n(l),n(18)),h=(n.n(d),n(43)),v=(n.n(h),n(39)),f=(n.n(v),n(78)),p=(n.n(f),n(19)),g=(n.n(p),n(312)),y=(n.n(g),n(0)),b=n.n(y),m=n(1),k=n.n(m),_=n(6),x=n.n(_),w=n(3),I=n.n(w),A=n(7),S=n.n(A),E=n(5),C=n.n(E),j=n(215),O=n.n(j),D=n(61),T=n(187),M=n(829),F=function(e){function t(){return b()(this,t),x()(this,I()(t).apply(this,arguments))}return S()(t,e),k()(t,[{key:"bustableUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._bustableUrl(e,t);return n=this._convertUrlToWebPIfApplicable(n),n}},{key:"_bustableUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.startsWith("data:"))return e;var n=this.defaultCacheTokenForUrl(e),r=O.a.get(t,"cacheToken",n);return null==r?e:e.includes("cache=")?e:(e.includes("?")?e+="&cache=max&v="+r:e+="?cache=max&v="+r,e)}},{key:"_convertUrlToWebPIfApplicable",value:function(e){if(D.a.isDevelopmentServer())return e;if(!1===M.a.supportsWebPFeature("lossy"))return e;var t=!1;if(e.startsWith("/ide/avatar/")?t=!0:e.startsWith("/assets2/asset/")?t=!0:e.startsWith("/assets/user/")?t=!0:e.startsWith("/medialib/")&&(t=!0),!1===t)return e;var n=e.split("?");if(2!==n.length)return e;var r=n[0];if(0===r.length)return e;var a=n[1];if(0===a.length)return e;if(!1===r.endsWith(".png")&&!1===r.endsWith(".jpg"))return e;var i=new URLSearchParams(a);if("max"!==i.get("cache"))return e;var s=i.get("v");if(!s)return e;if(e.startsWith("/medialib"))for(var o=0,c=["width","height","format","mode","quality"];o<c.length;o++){if(i.get("width"))return e}var u=r.split(".");u[u.length-1]="webp";var l=u.join("."),d=a.replace("&v=".concat(s),"&v=".concat(s,"-webp"));return"".concat(l,"?").concat(d)}},{key:"defaultCacheTokenForUrl",value:function(e){return e.startsWith("/ide/avatar/")?this.avatarCacheToken:e.startsWith("/assets2/asset/")?this.assetsCacheToken:e.startsWith("/assets/user/")?this.userAssetsCacheToken:e.startsWith("/medialib/")?this.mediaLibraryCacheToken:e.startsWith("/sysmedia/")?this.sysmediaCacheToken:this.getContentCacheToken()}},{key:"getLibraryCacheToken",value:function(){var e=this.getContentCacheToken();return e||"library"}},{key:"getContentCacheToken",value:function(){if(null!=T.a.get("cache")){var e=T.a.get("content");if(e)return e;var t=T.a.get("v");return t||null}}},{key:"avatarCacheToken",get:function(){return"avatar-e4877abe-cd87-11ea-87d0-0242ac130003"}},{key:"assetsCacheToken",get:function(){return"assets-f6f5d054-b8f8-4500-8c4f-ed6db3203bec"}},{key:"userAssetsCacheToken",get:function(){return"user-assets-d5f88032-41a1-435c-802e-f527a2f41d58"}},{key:"debuggerCacheToken",get:function(){return"debugger-13c3b4e3-ee9f-4c82-81a2-8e2b39e99126"}},{key:"helpCacheToken",get:function(){return"help-17f7cfe8-045f-4642-baa6-f65ce2159f14"}},{key:"mediaLibraryCacheToken",get:function(){return"media-library-ea1be84c-6bb1-4ccb-b4e1-d1227cb13ba1"}},{key:"sysmediaCacheToken",get:function(){return"sysmedia-2273a709-14a4-42b4-aa49-9767da65505f"}},{key:"featuresCacheToken",get:function(){return"features-3cde8a78-6af4-45b7-a939-c79a77f72b25"}},{key:"tourCacheToken",get:function(){return"tour-4e76ad19-4095-45c6-abc5-ff3552065824"}},{key:"levelEditorCacheToken",get:function(){return"level-editor-d07262be-b999-4088-b53b-00eb4ac3b1ac"}},{key:"addNewLevelCacheToken",get:function(){return"add-new-level-e9d2dce7-043b-4237-9de5-a9a37a84d199"}}]),t}(n(230).a);C()(F,"CLASS",function(){return"CacheUtilsClass"});var L=new F},829:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r=n(337),a=(n.n(r),n(8)),i=(n.n(a),n(20)),s=(n.n(i),n(23)),o=n.n(s),c=n(24),u=(n.n(c),n(0)),l=n.n(u),d=n(1),h=n.n(d),v=n(2),f={},p=Object.freeze({lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"}),g=new(function(){function e(){l()(this,e)}return h()(e,[{key:"supportsWebPFeature",value:function(e){var t=void 0!==f[e]&&f[e];return v.a.boolean(t),t}},{key:"checkWebPFeatureSupport",value:function(e){var t;return o.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(Object(v.a)(void 0!==p[e]),void 0===f[e]){n.next=3;break}return n.abrupt("return",f[e]);case 3:return n.next=5,o.a.awrap(new Promise(function(t){var n=new Image;n.onload=function(){return t(n.width>0&&n.height>0)},n.onerror=function(){return t(!1)};var r=p[e];v.a.string(r),n.src="data:image/webp;base64,".concat(r)}));case 5:t=n.sent,f[e]=t;case 7:case"end":return n.stop()}})}}]),e}())},830:function(e,t,n){"use strict";t.a=function(e){return s.a.object(e),function(t,n,r){Object(s.a)(void 0===e.controller);var a=e.bindToController||{},i=Object.values(a);return Object(s.a)(!1===i.includes("="),"double binding is not allowed"),e.controller=t,t.__directive=function(){return o.a.createDirectiveSpec(e)},r}};var r=n(26),a=(n.n(r),n(91)),i=(n.n(a),n(30)),s=(n.n(i),n(2)),o=n(116)},831:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return z});var r=n(21),a=(n.n(r),n(22)),i=(n.n(a),n(25)),s=(n.n(i),n(11)),o=(n.n(s),n(57)),c=(n.n(o),n(12)),u=(n.n(c),n(84)),l=(n.n(u),n(101)),d=(n.n(l),n(38)),h=(n.n(d),n(8)),v=(n.n(h),n(20)),f=(n.n(v),n(17)),p=(n.n(f),n(77)),g=(n.n(p),n(18)),y=(n.n(g),n(43)),b=(n.n(y),n(19)),m=(n.n(b),n(23)),k=n.n(m),_=n(24),x=(n.n(_),n(0)),w=n.n(x),I=n(1),A=n.n(I),S=n(6),E=n.n(S),C=n(34),j=n.n(C),O=n(3),D=n.n(O),T=n(82),M=n.n(T),F=n(7),L=n.n(F),N=n(5),P=n.n(N),R=n(2),B=n(55),U=n(126),W=n(61),H=n(116),G=n(45),V=!1,$=function(e){if(!V){V=!0;var t=0,n=Date.now(),r=Date.now();e.$watch(function(){var e=Date.now(),a=e-r;if(r=e,a>100&&(t=0),(t+=1)>1e4){var i=Date.now(),s=i-n;n=i,console.warn("infinite digest loop detected, ".concat(t," digests performed in ").concat(s,"ms")),t=0}})}},z=function(t){function n(e,t,r,a,i,s,o,c){var u;w()(this,n),u=E()(this,D()(n).call(this)),P()(j()(u),"element",null),P()(j()(u),"elementVisible",!1),P()(j()(u),"directiveSpec",null),P()(j()(u),"digestBeforeOnDeployed",!0),P()(j()(u),"__deploying",!1),P()(j()(u),"__deployed",!1),P()(j()(u),"__undeploying",!1),Object(R.a)(e),Object(R.a)(t),Object(R.a)(r),Object(R.a)(a),Object(R.a)(i),Object(R.a)(s),Object(R.a)(o),Object(R.a)(c);return Object(R.a)(u.className.endsWith("DirectiveControllerClass"),"".concat(u.className," class name must end with ").concat("DirectiveControllerClass")),Object(R.a)("DirectiveControllerClass"!==u.className,"".concat(u.className," class name must end with ").concat("DirectiveControllerClass")),u.$rootScope=e,u.$scope=t,u.$timeout=r,u.$sce=a,u.$interpolate=i,u.$compile=s,u.$injector=o,u.$ngRedux=c,W.a.isDevelopment()&&$(e),u}return L()(n,t),A()(n,[{key:"$onInit",value:function(){this.init()}},{key:"onInit",value:function(){var e=this;M()(D()(n.prototype),"onInit",this).call(this);var t=this.$on("$destroy",function(){return e.destroy()});this.addUnsubscriber(t),B.a.add("directives:active",1),B.a.add("directives:initialized",1)}},{key:"onLink",value:function(){}},{key:"onInitialized",value:function(){M()(D()(n.prototype),"onInitialized",this).call(this),this.deploy()}},{key:"onDestroy",value:function(){M()(D()(n.prototype),"onDestroy",this).call(this),!1!==this.__deployed&&(this.undeploy(),B.a.add("directives:active",-1),B.a.add("directives:destroyed"))}},{key:"deploy",value:function(){var e=this;!1!==this.isInitialized()&&(this.__deploying=!0,this.onDeploy(),this.digestBeforeOnDeployed?this.$timeout(function(){e.__deploying=!1,e.__deployed=!0,e.onDeployed()}):(this.__deploying=!1,this.__deployed=!0,this.onDeployed()))}},{key:"onDeploy",value:function(){var e=this,t=this.$ngRedux.connect(function(t){return e.mapStateToThis(t)},this.actionMethods)(this);this.addUnsubscriber(t)}},{key:"onDeployed",value:function(){}},{key:"undeploy",value:function(){Object(R.a)(!0===this.__deployed),Object(R.a)(!1===this.__deploying),this.__undeploying=!0,this.onUndeploy(),this.__deployed=!1,this.__undeploying=!1}},{key:"onUndeploy",value:function(){this.element.remove(),H.a.destroyElementSubtreeDirectives(this.element)}},{key:"isDeployed",value:function(){return!0===this.__deployed}},{key:"mapStateToThis",value:function(e){var t=this._get(e,this.directiveStatePath,{});if(t&&!1===t.stateMappingEnabled&&this.previousSlice)return this.previousSlice;var n=B.a.addTimeStart("redux:mapStateToThis"),r={state:e};return t&&(r.directive=t),t&&this.mapState(r),B.a.addTimeEnd(n),this.previousSlice=r,r}},{key:"mapState",value:function(e){}},{key:"$evalAsync",value:function(){this.$scope.$evalAsync()}},{key:"$watch",value:function(e,t){var n=this.$scope.$watch(e,t);return this.addUnsubscriber(n),n}},{key:"$on",value:function(e,t){var n=this.$scope.$on(e,t);return this.addUnsubscriber(n),n}},{key:"$timeout",value:function(e){var t=this,n=this.$timeout(e),r=function(){return t.$timeout.cancel(n)};return this.addUnsubscriber(r),r}},{key:"scopedSelector",value:function(e){return this.constructor.scopedSelector(e)}},{key:"scopedElement",value:function(e){return this.constructor.scopedElement(e)}},{key:"onLink",value:function(){}},{key:"waitLinked",value:function(){var e;return k.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.a.awrap(this.waitScopeVariable("element"));case 2:return e=t.sent,R.a.object(e),t.abrupt("return",e);case 5:case"end":return t.stop()}},null,this)}},{key:"waitScopeVariables",value:function(e){var t,n,r,a,i,s,o,c;return k.a.async(function(u){for(;;)switch(u.prev=u.next){case 0:R.a.array(e),t={},n=!0,r=!1,a=void 0,u.prev=5,i=e[Symbol.iterator]();case 7:if(n=(s=i.next()).done){u.next=16;break}return o=s.value,u.next=11,k.a.awrap(this.waitScopeVariable(o));case 11:c=u.sent,t[o]=c;case 13:n=!0,u.next=7;break;case 16:u.next=22;break;case 18:u.prev=18,u.t0=u.catch(5),r=!0,a=u.t0;case 22:u.prev=22,u.prev=23,n||null==i.return||i.return();case 25:if(u.prev=25,!r){u.next=28;break}throw a;case 28:return u.finish(25);case 29:return u.finish(22);case 30:return u.abrupt("return",t);case 31:case"end":return u.stop()}},null,this,[[5,18,22,30],[23,,25,29]])}},{key:"waitScopeVariable",value:function(e){var t,n,r=this,a=arguments;return k.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:return t=a.length>1&&void 0!==a[1]?a[1]:{},R.a.string(e),R.a.object(t),n=t.checker?t.checker:function(e){return void 0!==e},i.abrupt("return",new Promise(function(t){var a=r[e];if(!0===n(a))return t(a);var i=r.$watch("vm.".concat(e),function(){var a=r[e];!0===n(a)&&(i(),t(a))});r.addUnsubscriber(i)}));case 5:case"end":return i.stop()}})}},{key:"waitVisible",value:function(){return k.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.awrap(this.waitLinked());case 2:if(R.a.object(this.element),!0!==(void 0===this.waitUntilVisible||this.waitUntilVisible)){e.next=7;break}return e.next=7,k.a.awrap(U.a.waitVisible(this.element));case 7:this.elementVisible=!0;case 8:case"end":return e.stop()}},null,this)}},{key:"domBind",value:function(t,n,r){R.a.string(n),R.a.function(r);var a=e(t);a.bind(n,r);var i=function(){return a.unbind(n,r)};return this.addUnsubscriber(i),i}},{key:"getDependency",value:function(e){R.a.string(e);var t=this.$injector.get(e);return R.a.object(t),t}},{key:"hasStateParam",value:function(e){return R.a.string(e),void 0!==this.$injector.get("$stateParams")[e]}},{key:"getStateParam",value:function(e){return R.a.string(e),this.$injector.get("$stateParams")[e]}},{key:"getCurrentState",value:function(){var e=this.$injector.get("$state").current.name;return R.a.string(e),e}},{key:"isCurrentState",value:function(e){return R.a.string(e),this.getCurrentState()===e}},{key:"getDependency",value:function(e){R.a.string(e);var t=this.$injector.get(e);return R.a.object(t),t}},{key:"goToState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};R.a.string(e),R.a.object(t),this.$injector.get("$state").go(e,t)}},{key:"_replaceEnding",value:function(e,t){var n=e;return e.endsWith("DirectiveControllerClass")?n=e.replace("DirectiveControllerClass",t):e.endsWith("StateClass")?n=e.replace("StateClass",t):e.endsWith("ActionsClass")?n=e.replace("ActionsClass",t):e.endsWith("ReducerClass")?n=e.replace("ReducerClass",t):e.endsWith("SagaClass")&&(n=e.replace("SagaClass",t)),Object(R.a)(n!==e),n}},{key:"actionMethods",get:function(){return{}}},{key:"directiveId",get:function(){return this.constructor.directiveId}},{key:"selector",get:function(){return this.constructor.selector}},{key:"internalSelector",get:function(){return this.constructor.internalSelector}},{key:"directiveStatePath",get:function(){var e=this.constructor;if(e.__directiveStatePath)return e.__directiveStatePath;var t=this.stateVariableName;R.a.string(t);var n="".concat(t);return e.__directiveStatePath=n,n}},{key:"stateVariableName",get:function(){var e=this.constructor;if(e.__stateVariableName)return e.__stateVariableName;var t=this._replaceEnding(this.classNameCamelCase,"");return e.__stateVariableName=t,t}}],[{key:"scopedSelector",value:function(e){Object(R.a)(e&&"string"==typeof e);var t="".concat(this.selector," ").concat(e);return t}},{key:"scopedElement",value:function(t){var n=this.scopedSelector(t),r=e(n);return r}},{key:"directiveId",get:function(){if(this.__directiveId)return this.__directiveId;var e=this.className;-1!==e.indexOf("DirectiveControllerClass")&&(e=e.slice(0,e.length-"DirectiveControllerClass".length)),-1!==e.indexOf("DirectiveController")&&(e=e.slice(0,e.length-"DirectiveController".length)),-1!==e.indexOf("ControllerClass")&&(e=e.slice(0,e.length-"ControllerClass".length)),-1!==e.indexOf("Controller")&&(e=e.slice(0,e.length-"Controller".length));var t=e[0].toLowerCase()+e.slice(1,e.length);return this.__directiveId=t,t}},{key:"directiveTagName",get:function(){if(this.__directiveTag)return this.__directiveTag;var e=H.a.tagNameFromDirectiveId(this.directiveId);return this.__directiveTag=e,e}},{key:"selector",get:function(){if(this.__selector)return this.__selector;var e=this.directiveTagName,t="".concat(e);return this.__selector=t,t}},{key:"internalSelector",get:function(){if(this.__internalSelector)return this.__internalSelector;var e=this._extension.id(),t=this.directiveTagName,n=".".concat(e," ").concat(t," .").concat(t);return this.__internalSelector=n,n}}]),n}(G.a);P()(z,"CLASS",function(){return"DirectiveControllerClass"}),z.$inject=["$rootScope","$scope","$timeout","$sce","$interpolate","$compile","$injector","$ngRedux"]}).call(t,n(13))},832:function(e,t){e.exports='<div class="toolbar-feeds-button {{vm.class}} {{vm._class}}" ng-click="vm.onClick()">\n    <div class="toolbar-feeds-button__container toolbar-feeds-button__container--notifications">\n        <div class="toolbar-feeds-button__icon" ng-include="vm.iconBellUrl"></div>\n        <div class="toolbar-feeds-button__counter" style="display: none;"></div>\n    </div>\n    <div class="toolbar-feeds-button__container toolbar-feeds-button__container--stream">\n        <div class="toolbar-feeds-button__icon" ng-include="vm.iconChatUrl"></div>\n        <label translate class="toolbar-feeds-button__label">Stream</label>\n        <div class="toolbar-feeds-button__counter" style="display: none;"></div>\n    </div>\n    <div class="toolbar-feeds-button__container toolbar-feeds-button__container--avatar">\n        <div class="toolbar-feeds-button__icon">\n            <user-avatar user-id="vm._avatarUserId" \n                         render-only-when-visible="false" \n                         show-online-status="true"></user-avatar>\n        </div>\n        <label class="toolbar-feeds-button__label"></label>\n        <div class="toolbar-feeds-button__counter" style="display: none;"></div>\n    </div>\n</div>\n'},833:function(e,t){e.exports="/static/icon-bell.329dc8fb.svg"},834:function(e,t){e.exports="/static/icon-chat.aa6d3578.svg"},92:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(26),a=(n.n(r),n(48)),i=(n.n(a),n(91)),s=(n.n(i),n(30)),o=(n.n(s),n(49)),c=n.n(o),u=n(0),l=n.n(u),d=n(1),h=n.n(d),v=n(2),f=function(){function e(){l()(this,e);for(var t=0,n=Object.entries(this.ENUM);t<n.length;t++){var r=c()(n[t],2),a=r[0],i=r[1];Object(v.a)(void 0===this[a],"enumeration key is reserved: ".concat(a)),this[a]=i}}return h()(e,[{key:"in",value:function(e){return this.all.includes(e)}},{key:"ENUM",get:function(){Object(v.a)(!1,"enumeration not defined")}},{key:"all",get:function(){var e=this.ENUM;return Object.values(e)}},{key:"first",get:function(){var e=this.all;v.a.array(e);var t=e[0];return Object(v.a)(void 0!==t),t}}]),e}()}},[392]);
//# sourceMappingURL=bramble_ide_legacy.f913b895.js.map