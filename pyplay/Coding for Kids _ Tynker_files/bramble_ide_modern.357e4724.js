webpackJsonp([5],{0:function(t,e,s){"use strict";e.a=g;var n=s(1),i=(s.n(n),s(9)),o=(s.n(i),s(136)),r=(s.n(o),s(2)),a=(s.n(r),s(207)),c=s.n(a),l=s(86),d=s(30),u=s(49);function h(t){try{return JSON.stringify(t)}catch(t){return"$$unserializable"}}function g(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t)throw console.trace(e),"function"==typeof(e=e||(()=>"assertion failed: ".concat(h(t))))&&(e=e()),d.a.isDevelopment(),new Error(e)}g.string=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=void 0!==s.blank&&s.blank;g("string"==typeof t,e=e||(()=>"assertion failed: expected string but found: ".concat(h(t)))),g(l.a.isString(t),e),g(!1===n||t,e)},g.boolean=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;e=e||(()=>"assertion failed: expected boolean but found: ".concat(h(t))),g([!0,!1].includes(t),e)},g.integer=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;g("number"==typeof t,e=e||(()=>"assertion failed: expected integer but found: ".concat(h(t)))),g(l.a.isInteger(t),e)},g.integerPositive=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;e=e||(()=>"assertion failed: expected positive integer but found: ".concat(h(t))),g(l.a.isPositiveInteger(t),e)},g.number=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;e=e||(()=>"assertion failed: expected number but found: ".concat(h(t))),g(l.a.isNumber(t),e)},g.numberPositive=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;e=e||(()=>"assertion failed: expected positive number but found: ".concat(h(t))),g(l.a.isNumberPositive(t),e)},g.function=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;g("function"==typeof t,e=e||(()=>"assertion failed: expected function but found: ".concat(h(t))))},g.object=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;e=e||(()=>"assertion failed: expected object but found: ".concat(h(t))),g(!1===[null,void 0].includes(t),e),g("object"==typeof t,e),g(!1===Array.isArray(t),e)},g.domElement=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;e=e||(()=>"assertion failed: expected dom element but found: ".concat(h(t))),g.object(t,e),g(1===t.length,e)},g.domElements=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;e=e||(()=>"assertion failed: expected dom elements but found: ".concat(h(t))),g.object(t,e),g(t.length>=1,e)},g.inEnum=function(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;s=s||(()=>"assertion failed: expected enumeration but found: ".concat(h(t))),g.object(e),g(Object.values(e).includes(t),s)},g.array=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;s=s||(()=>"assertion failed: expected array but found: ".concat(h(t))),g(Array.isArray(t),s),void 0!==e&&g(t.length===e,s)},g.dictionary=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;e=e||(()=>"assertion failed: expected dictionary but found: ".concat(h(t))),g(l.a.isDictionary(t),e)},g.dataUrl=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;arguments.length>2&&void 0!==arguments[2]&&arguments[2];e=e||(()=>"assertion failed: expected data url but found: ".concat(h(t))),g(l.a.isDataUrl(t),e)},g.enum=function(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;s=s||(()=>"assertion failed: expected enum but found: ".concat(h(t))),g(e instanceof u.a),g(e.in(t),s)},g.equals=function(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;g(t===e,s=s||(()=>"assertion failed: values are not equal: value1 = ".concat(h(t),"; value2 = ").concat(h(e))))},g.sameContent=function(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;s=s||(()=>"assertion failed: values are not equal: value1 = ".concat(h(t),"; value2 = ").concat(h(e))),g(c()(t,e),s)},g.uniqueAttribute=function(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;s=s||(()=>"assertion failed: duplicate attribute found: attribute = ".concat(h(e),"; values = ").concat(h(t))),g.array(t),g("string"==typeof e||"function"==typeof e);const n={};for(const i of t){const t="function"==typeof e?e(i):i[e];g(void 0===n[t],s),n[t]=!0}},g.mongoObjectIdString=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;g.string(t,e),g(t.match(/^[0-9a-fA-F]{24}$/),e)},g.notEmpty=function(t){g([null,void 0,""],arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)}},110:function(t,e,s){"use strict";s.d(e,"a",function(){return o}),s.d(e,"c",function(){return i}),s.d(e,"b",function(){return r});var n=s(659);s.n(n);function i(){return-1!==(IDE.getProjectTags()||[]).indexOf("micropython")||-1!==window.location.search.indexOf("mode=microbit")}function o(){const t=IDE.getProjectTags()||[];return!i()&&(-1!==t.indexOf("hifive")||-1!==window.location.search.indexOf("mode=hifive"))}function r(){return i()||o()}},112:function(t,e,s){"use strict";var n=s(3),i=s.n(n),o=s(303),r=s(728),a=s(730),c=s(185);class l extends(Object(a.a)(Object(r.a)(c.a))){get redux(){return o.a.scope=this,o.a}get extensionActions(){return this._extension.extensionActions}get extensionState(){return this._extension.extensionState}}e.a=l,i()(l,"CLASS",()=>"IDEExtensionPayloadClass")},137:function(t,e,s){"use strict";(function(t){var n=s(31),i=s.n(n),o=s(3),r=s.n(o),a=s(0);class c{constructor(){r()(this,"SELECTOR","#init-data"),r()(this,"initData",{}),r()(this,"_initData",null);const e=t(this.SELECTOR);if(e&&e.length>0){const t=e.html(),s=JSON.parse(t);s&&"object"==typeof s&&(this.initData=s),this._initData=i()({},this.initData)}e.remove()}reset(){this.initData={}}has(t){return a.a.string(t),void 0!==this.initData[t]}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;a.a.string(t);const s=void 0!==this.initData[t]?this.initData[t]:e;return""===s?null:"true"===s||"false"!==s&&s}set(t,e){a.a.string(t),Object(a.a)(void 0!==e),this.initData[t]=e}pop(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;a.a.string(t);const s=this.get(t,e);return delete this.initData[t],s}}r()(c,"CLASS",()=>"InitDataClass");const l=new c;e.a=l}).call(e,s(4))},177:function(t,e,s){"use strict";var n=s(1),i=(s.n(n),s(6)),o=(s.n(i),s(42)),r=(s.n(o),s(19)),a=(s.n(r),s(2)),c=(s.n(a),s(3)),l=s.n(c),d=s(582),u=s(25),h=s(0),g=s(30);const p={};let b=0;class m{constructor(){if(l()(this,"__instanceId",b++),l()(this,"__initializing",!1),l()(this,"__initialized",!1),l()(this,"__destroying",!1),l()(this,"__destroyed",!1),this.constructor.singleton){const t=this.className;h.a.string(t),Object(h.a)(void 0===p[t]),p[t]=!0}if(Object(h.a)(this.constructor.CLASS),g.a.isDevelopment()){const t=this.constructor.name;t!==this.className&&console.error("invalid string class name found for class: ".concat(t))}u.a.add("objects:constructed",1)}static get singleton(){return this.__singleton}static set singleton(t){Object(h.a)(void 0===this.__singleton),h.a.boolean(t),this.__singleton=t}id(){return this.classSlug}init(){Object(h.a)(!1===this.__destroying,()=>"init called on class during its destruction: ".concat(this.className)),Object(h.a)(!1===this.__initializing),Object(h.a)(!1===this.__initialized),this.__initializing=!0,this.onInit(...arguments),this.__initialized=!0,this.__initializing=!1,this.__destroyed=!1,this.onInitialized()}async ensureInit(){return new Promise(t=>{if(this.isInitialized())t();else if(this.isInitializing()){const e=this.bind("initialized",()=>{e(),t()})}else this.init(),t()})}onInit(){}onInitialized(){u.a.add("objects:initialized",1),u.a.add("objects:active",1)}destroy(){this.__destroyed||(Object(h.a)(!1===this.__destroying),this.__destroying=!0,this.onDestroy(),this.__initialized=!1,this.__destroying=!1,this.__destroyed=!0)}onDestroy(){u.a.add("objects:active",-1),u.a.add("objects:destroyed",1)}ensureDestroy(){this.isDestroyed()||this.isDestroying()||this.destroy()}isInitialized(){return!0===this.__initialized}isInitializing(){return!0===this.__initializing}isDestroyed(){return!0===this.__destroyed}isDestroying(){return!0===this.__destroying}get classSlug(){const t=this.constructor;if(t.__classSlug)return t.__classSlug;let e=this.className;return e.endsWith("Class")&&(e=e.slice(0,e.length-5)),e=(e=e.replace(/\W+/g,"-").replace(/([a-z\d])([A-Z])/g,"$1-$2")).toLowerCase(),t.__classSlug=e,e}static get className(){return this.CLASS()}get instanceId(){return this.__instanceId}get className(){return this.constructor.className}static get classNameCamelCase(){if(this.__classNameCamelCase)return this.__classNameCamelCase;const t=this.className,e=Object(d.a)(t);return this.__classNameCamelCase=e,e}get classNameCamelCase(){return this.constructor.classNameCamelCase}}e.a=m,l()(m,"CLASS",()=>"BaseClass")},178:function(t,e,s){"use strict";var n=s(0);const i=new class{listFromMap(t,e){return Object(n.a)(t&&"object"==typeof t),Object(n.a)(e&&"string"==typeof e),void 0!==t[e]?t[e]:[]}addToMapList(t,e,s){Object(n.a)(t&&"object"==typeof t),Object(n.a)(e&&"string"==typeof e);const i=void 0!==t[e]?t[e]:[];i.push(s),t[e]=i}removeFromMapList(t,e,s){Object(n.a)(t&&"object"==typeof t),Object(n.a)(e&&"string"==typeof e);let i=void 0!==t[e]?t[e]:[];i=i.filter(t=>t!==s),t[e]=i,0===i.length&&delete t[e]}};e.a=i},179:function(t,e,s){"use strict";var n=s(1),i=(s.n(n),s(6)),o=(s.n(i),s(2)),r=(s.n(o),s(3)),a=s.n(r),c=s(0),l=s(21),d=s(178);class u extends l.a{constructor(){super(...arguments),a()(this,"idAssetMap",{}),a()(this,"ownerIdSymbolIdsMap",{}),a()(this,"symbolIdOwnerIdMap",{})}isRegistered(t){return c.a.string(t),void 0!==this.idAssetMap[t]}register(t,e,s){if("object"==typeof t){const s=t,n=e||{};c.a.object(n);for(const[t,e]of Object.entries(s))this._register(t,e,n)}else{const n=t;c.a.string(n);const i=e;Object(c.a)(i);const o=s||{};c.a.object(o),this._register(n,i,o)}}_register(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};c.a.string(t),Object(c.a)(e);const n=this._get(s,"ownerId");Object(c.a)(void 0===this.idAssetMap[t],"asset already registered: ".concat(t)),this.idAssetMap[t]=e,n&&(d.a.addToMapList(this.ownerIdSymbolIdsMap,n,t),this.symbolIdOwnerIdMap[t]=n),this.trigger("registered",t)}unregister(t){c.a.string(t),Object(c.a)(void 0!==this.idAssetMap[t],"asset not registered: ".concat(t));const e=this.idAssetMap[t];delete this.idAssetMap[t];const s=this.symbolIdOwnerIdMap[t];return s&&(d.a.removeFromMapList(this.ownerIdSymbolIdsMap,s,t),delete this.symbolIdOwnerIdMap[t]),this.trigger("unregistered",t),e}unregisterAllOwnedById(t){c.a.string(t);const e=d.a.listFromMap(this.ownerIdSymbolIdsMap,t);for(const t of e)this.unregister(t);delete this.ownerIdSymbolIdsMap[t]}getById(t){return c.a.string(t),this.idAssetMap[t]}async waitRegistered(t){const e=this.getById(t);return e||new Promise(e=>{const s=this.bind("registered",n=>{if(n!==t)return;s();const i=this.getById(t);Object(c.a)(i),e(i)})})}}e.a=u,a()(u,"CLASS",()=>"RegistryClass")},180:function(t,e,s){"use strict";e.a=class extends Error{constructor(t){super(t),this.message=t}}},182:function(t,e,s){"use strict";var n=s(1),i=(s.n(n),s(2)),o=(s.n(i),s(3)),r=s.n(o),a=s(0),c=s(636);class l{constructor(){r()(this,"cacheIdCacheMap",{})}create(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a.a.string(t),a.a.object(e);const s=this.get(t);if(s)return s;const n=new(void 0!==e.cacheClass?e.cacheClass:c.a)(t,e);return this.cacheIdCacheMap[t]=n,n}get(t){return a.a.string(t),this.cacheIdCacheMap[t]}destroy(t){a.a.string(t);const e=this.cacheIdCacheMap[t];a.a.object(e),e.clear(),delete this.cacheIdCacheMap[t]}stats(){console.info("###### CACHE STATS #######");for(const t of Object.values(this.cacheIdCacheMap)){if(0===t.size)continue;const e=t.stats();console.info("CACHE ".concat(e.id,", size = ").concat(e.size,", hits = ").concat(e.hits,", misses = ").concat(e.misses,", hitRate = ").concat(e.hitRate))}}}r()(l,"CLASS",()=>"CacheFactoryClass");const d=new l;e.a=d,window.__CacheFactory=d},185:function(t,e,s){"use strict";var n=s(3),i=s.n(n),o=s(74),r=s(303),a=s(21);class c extends a.a{get redux(){return r.a.scope=this,r.a}sendWindowMessage(t){if(!1===o.a.isWindowInsideIFrame(window))return;const e=this.className,s=JSON.stringify({owner:e,message:t});window.parent.postMessage(s,"*")}}e.a=c,i()(c,"CLASS",()=>"IDEClass")},21:function(t,e,s){"use strict";(function(t){var n=s(1),i=(s.n(n),s(6)),o=(s.n(i),s(9)),r=(s.n(o),s(17)),a=(s.n(r),s(2)),c=(s.n(a),s(255)),l=(s.n(c),s(3)),d=s.n(l),u=s(0),h=s(25),g=s(163),p=s.n(g),b=s(207),m=s.n(b),f=s(506),y=s.n(f),v=s(509),_=s(522),I=s(576),A=s.n(I),w=s(278),S=s(601),E=s(285),C=s(605),x=s(177);const j={};class O extends x.a{constructor(){super(),this.__instanceId=this._classSequentialUUID(),this.__objectURLs=[]}init(){super.init(...arguments),this.trigger("initialized")}get logger(){return w.a.scope=this,w.a}get observer(){return S.a.scope=this,S.a}static uuid(){return E.a.shortUniqueId()}uuid(){return this.constructor.uuid()}onDestroy(){super.onDestroy(),this.observer.unbindAll();for(const t of this.__objectURLs)URL.revokeObjectURL(t)}bind(t,e){return this.observer.bind(t,e)}trigger(t,e){this.observer.trigger(t,e)}unbind(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.observer.unbind(t,e)}unbindAll(){this.observer.unbindAll()}addUnsubscriber(t){this.observer.addUnsubscriber(t),h.a.add("observers:subscribed",1),h.a.add("observers:active",1)}removeUnsubscriber(t){this.observer.removeUnsubscriber(t),h.a.add("observers:unsubscribed",1),h.a.add("observers:active",-1)}getParentClassName(){const t=this.getParentClassNames();return t.length>0?t[0]:null}getParentClassNames(){const t=this.className;if(void 0!==j[t])return j[t];let e=0;const s=[];let n=this.constructor;for(;n&&(Object(u.a)(e<100,"infinite loop detected while retrieving parent class names"),void 0!==n.CLASS);){const i=n.CLASS();n=Object.getPrototypeOf(n),i!==t&&!1===s.includes(i)&&s.push(i),e+=1}return j[t]=s,s}createObjectURL(t){const e=URL.createObjectURL(t);return this.__objectURLs.push(e),e}domBind(e,s,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=s;Object(u.a)(e),u.a.string(o),u.a.function(n);const r={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"};i.disableTouchEventMapping||(o="",s.split(" ").forEach(t=>{const e=r[t];o+=e?"".concat(t," ").concat(e," "):"".concat(t," ")}));const a=function(e){const s=t(this);let o=e;if(!i.disableTouchEventMapping){if(r[o.type]&&C.a.supportsTouchEvents())return;if(Object.values(r).includes(o.type)){const t=o.originalEvent.changedTouches[0],s=Object(v.a)(r)[o.type];(o=new MouseEvent(s,{bubbles:!0,cancelable:!0,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY}))._originalTarget=e.target,o._originalTouchEvent=e}}return n(o,s)},c=t(e);i.selector?c.on(o,i.selector,a):c.bind(o,a);const l=()=>{i.selector?c.off(o,i.selector,a):c.unbind(o,a),this.removeUnsubscriber(l)};return this.addUnsubscriber(l),(void 0!==i.unsubscribers?i.unsubscribers:[]).push(l),l}setTimeout(t,e){u.a.function(t),u.a.number(e);const s=window.setTimeout(t,e),n=()=>{window.clearTimeout(s),this.removeUnsubscriber(n)};return this.addUnsubscriber(n),n}setInterval(t,e){u.a.function(t),u.a.number(e);const s=window.setInterval(t,e),n=()=>{window.clearInterval(s),this.removeUnsubscriber(n)};return this.addUnsubscriber(n),n}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return this._get(this,t,e)}_get(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return u.a.object(t),u.a.string(e),p.a.get(t,e,s)}set(t,e){this._set(this,t,e)}_set(t,e,s){u.a.object(t),u.a.string(e),Object(u.a)(void 0!==s),p.a.set(t,e,s)}del(t){this._del(this,t)}_del(t,e){u.a.object(t),u.a.string(e),p.a.del(t,e)}hash(t){const e=h.a.addTimeStart("hash"),s="string"==typeof t?t:JSON.stringify(t),n=y()(s),i="".concat(n);return h.a.addTimeEnd(e),i}clone(){return this._clone(this)}_clone(t){const e=h.a.addTimeStart("clone"),s=Object(_.a)(t);return h.a.addTimeEnd(e),s}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return this._get(this,t,e)}equals(t){return this._equals(this,t)}_equals(t,e){return m()(t,e)}async delay(t){u.a.integer(t),await new Promise(e=>setTimeout(e,t))}async wait(t){u.a.integer(t),await new Promise(e=>setTimeout(e,t))}async waitCondition(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u.a.function(t);const s=this._get(e,"delay",50);for(u.a.integer(s);;){if(!0===t())return;await this.wait(s)}}getCookie(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;u.a.string(t);const s=A.a.get(t);return void 0===s?e:s}setCookie(t,e){u.a.string(t),A.a.set(t,e)}async getBrowserCache(t,e){return arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0}async setBrowserCache(t,e,s){}static _classSequentialUUID(){const t=this.className,e=E.a.sequentialId({namespace:t});return"".concat(t,":").concat(e)}_classSequentialUUID(){return this.constructor._classSequentialUUID()}}e.a=O,d()(O,"CLASS",()=>"CoreClass")}).call(e,s(4))},25:function(t,e,s){"use strict";var n=s(1),i=(s.n(n),s(42)),o=(s.n(i),s(9)),r=(s.n(o),s(43)),a=(s.n(r),s(2)),c=(s.n(a),s(31)),l=s.n(c),d=s(3),u=s.n(d),h=s(0),g=s(30);const p=new class{constructor(){u()(this,"statId",0),u()(this,"timerKeyMaxEndTimeMap",{}),u()(this,"timerIdKeyMap",{}),u()(this,"timerIdTimeMap",{}),u()(this,"snapshot",{}),u()(this,"counters",{})}get BOOT_KEY_PREFIX(){return"__boot"}get TIME_KEY_SUFFIX(){return"__time"}isBooting(){return void 0!==window.__BOOTING}reset(){this.snapshot={},this.counters={}}add(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Object(h.a)(!1===t.includes("."),"invalid stat key '".concat(t,"', cannot include '.'")),h.a.string(t);const s=void 0!==this.counters[t]?this.counters[t]:0;if(this.counters[t]=s+e,!1===this.isBooting())return;const n="".concat(this.BOOT_KEY_PREFIX,":").concat(t),i=void 0!==this.counters[n]?this.counters[n]:0;this.counters[n]=i+e}addTimeStart(t){h.a.string(t);const e=this._generateStatId();return this.timerIdKeyMap[e]=t,this.timerIdTimeMap[e]=Date.now(),e}addTimeEnd(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h.a.integer(t),h.a.object(e);const s=this.timerIdKeyMap[t],n=this.timerKeyMaxEndTimeMap[s]||0;let i=this.timerIdTimeMap[t];n&&i<n&&(i=n);const o=Date.now();o>n&&(this.timerKeyMaxEndTimeMap[s]=o);let r=o-i;r=r>0?r:0,delete this.timerIdKeyMap[t],delete this.timerIdTimeMap[s];const a="".concat(s,":").concat(this.TIME_KEY_SUFFIX);return this.add(a,r),r}get stats(){const t=this.getAngularJSWatchers().length;return l()({},this.counters,{watchers:t})}log(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(h.a.object(t),!1===g.a.isDevelopment())return;if(g.a.isTesting())return;const e=void 0===t.includeDiff||t.includeDiff,s=void 0!==t.includePrefix?t.includePrefix:null,n=void 0!==t.includeSuffix?t.includeSuffix:null,i=void 0!==t.excludePrefix?t.excludePrefix:null,o=void 0!==t.excludeSuffix?t.excludeSuffix:null,r=this.stats,a=this._diff(r,this.snapshot);this.snapshot=r;const c={};for(const[t,l]of Object.entries(r)){if(s&&!1===t.startsWith(s))continue;if(n&&!1===t.endsWith(n))continue;if(i&&t.startsWith(i))continue;if(o&&t.endsWith(o))continue;const r=a[t];c[t]=!0===e&&r?l+" ("+(r>=0?"+"+r:"-"+r)+")":l}console.table(c)}getBootStatsMap(){const t={};for(const[e,s]of Object.entries(this.stats))!1!==e.startsWith(this.BOOT_KEY_PREFIX)&&!1!==e.endsWith(this.TIME_KEY_SUFFIX)&&(t[e]=s);return t}_diff(t,e){const s={};for(const[n,i]of Object.entries(t)){const t=e[n];void 0!==t&&(s[n]=i-t)}return s}getAngularJSWatchers(t){function e(t){return t&&t.$$watchers||[]}return function t(s){var n=e(s.data().$isolateScope),i=e(s.data().$scope).concat(n);return angular.forEach(s.children(),function(e){i=i.concat(t(angular.element(e)))}),i}(t=angular.element(t||document.documentElement))}_generateStatId(){return this.statId+=1,this.statId}};e.a=p,window.__Stats=p},278:function(t,e,s){"use strict";(function(t){var n=s(1),i=(s.n(n),s(2)),o=(s.n(i),s(3)),r=s.n(o),a=s(0),c=s(74),l=s(49),d=s(30);const u=new class extends l.a{get ENUM(){return{ERROR:1,WARN:2,INFO:3,LOG:4,DEBUG:5}}};const h=new class{constructor(){r()(this,"__scope",null),r()(this,"groupId",0),r()(this,"groupIdMap",{}),r()(this,"LogLevels",u)}get logLevel(){if(void 0!==this._logLevel)return this._logLevel;this.logLevel=d.a.isProduction()?u.INFO:u.DEBUG}set logLevel(t){this._logLevel=t}get scope(){return Object(a.a)(this.__scope),this.__scope}set scope(t){Object(a.a)(t),this.__scope=t}get observer(){return t(document)}bind(t,e){const s=this._namespacedEventName(t);return this.observer.bind(s,e),()=>{this.unbind(t,e)}}trigger(t,e){const s=this._namespacedEventName(t);this.observer.trigger(s,e)}unbind(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const s=this._namespacedEventName(t);this.observer.unbind(s,e)}get ownerId(){return this.scope.classSlug}start(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=void 0!==e.timeout?e.timeout:null,n=void 0!==e.logLevel?e.logLevel:u.DEBUG,i=this._generateGroupId(),o=this._message(t);Object(a.a)(void 0===this.groupIdMap[i],()=>"starting log group that was started before and not stopped: ".concat(o));const r={start:Date.now(),_message:o};return this.groupIdMap[i]=r,s&&(r.timeoutId=setTimeout(()=>this.debug("".concat(o," - timed out after ").concat(s,"ms")),s)),this._log(n,null,!1,"%c".concat(o," - start"),"background: lightgray; color: black"),i}end(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a.a.integer(t),a.a.object(e);const s=void 0!==e.logLevel?e.logLevel:u.DEBUG,n=this.groupIdMap[t];Object(a.a)(n),n.timeoutId&&clearTimeout(n.timeoutId);const i=n._message;a.a.string(i);const o=n.start;a.a.integer(o);const r=Date.now()-o;delete this.groupIdMap[t],this._log(s,null,!1,"%c".concat(i," - end - (duration = ").concat(r,"ms)"),"background: green; color: white")}debug(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];this._log(u.DEBUG,null,!0,t,...s)}log(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];this._log(u.LOG,null,!0,t,...s)}info(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];this._log(u.INFO,null,!0,t,...s)}warn(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];this._log(u.WARN,null,!0,t,...s)}error(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];this._log(u.ERROR,null,!0,t,...s)}time(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];return this._log(u.DEBUG,"time",t,...s),t}timeEnd(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];this._log(u.DEBUG,"timeEnd",t,...s)}_log(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3?arguments[3]:void 0;if(a.a.enum(t,u),!1===this.isEnabled())return;const i=s?this._message(n):n;a.a.string(i),window.__Sentry&&window.__Sentry.addBreadcrumb({message:i,level:window.__Sentry.Severity.Info});for(var o=arguments.length,r=new Array(o>4?o-4:0),c=4;c<o;c++)r[c-4]=arguments[c];this.trigger("log",[t,i,...r]),!1!==this.isOutputEnabledForLogLevel(t)&&(e=e||this._consoleMethodForLogLevel(t),a.a.function(e),e.apply(console,[i,...r]))}_message(t){return null===this.ownerId?t:"[".concat(this.ownerId,"] - ").concat(t)}isEnabled(){return!!d.a.isTesting()||!c.a.isWindowInsideIFrame(window)}isOutputEnabledForLogLevel(t){return a.a.enum(t,u),!(d.a.isTesting()||this.logLevel<t)}_consoleMethodForLogLevel(t){const e={};return e[u.ERROR]=console.error,e[u.WARN]=console.warn,e[u.INFO]=console.info,e[u.LOG]=console.log,e[u.DEBUG]=console.debug,e[t]}_namespacedEventName(t){return"__logger:"+t}_generateGroupId(){return this.groupId+=1,this.groupId}};e.a=h,window.__Logger=h}).call(e,s(4))},285:function(t,e,s){"use strict";var n=s(1),i=(s.n(n),s(2)),o=(s.n(i),s(602)),r=s.n(o),a=s(0),c=s(25);const l={},d=[..."abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"],u=d.length,h=10,g=[...Array(h)];const p=new class{constructor(){this.uniqueIdMap={}}sequentialId(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._generateUniqueId(this._sequentialId,t)}shortUUID(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._generateUniqueId(this._shortUUID,t)}shortUniqueId(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._generateUniqueId(this._shortUniqueId,t)}_generateUniqueId(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];const e=c.a.addTimeStart("generateUniqueId");let s=null;do{s=t.apply(this)}while(void 0!==this.uniqueIdMap[s]);return a.a.string(s),this.uniqueIdMap[s]=!0,c.a.addTimeEnd(e),s}_shortUUID(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];let t=r()();return t=t.slice(0,8)}_shortUniqueId(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(let t=0;t<h;t++)g[t]=d[Math.floor(Math.random()*u)];return g.join("")}_sequentialId(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=void 0!==t.namespace?t.namespace:"default";let s=void 0!==l[e]?l[e]:0;return s+=1,l[e]=s,"".concat(s)}};e.a=p},287:function(t,e,s){"use strict";var n=s(1),i=(s.n(n),s(6)),o=(s.n(i),s(19)),r=(s.n(o),s(17)),a=(s.n(r),s(56)),c=(s.n(a),s(2)),l=(s.n(c),s(3)),d=s.n(l),u=s(0),h=s(181),g=(s.n(h),s(621));const p="en_US";e.c=(()=>(t,e)=>e?Object(h.c)("".concat(e)).gettext(t):Object(h.gettext)(t));const b=(t,e,s)=>{const n="translateParams";const i=(t,e,s)=>{const i=Object.keys(e).filter(t=>(function(t,e){return 0===t.indexOf(e)})(t,n)&&t!==n);if(!i.length)return null;const o=t.$new(),r=[];return i.forEach(i=>{var a=t.$watch(e[i],t=>{var e=function(t){return(e=t.replace(n,"")).charAt(0).toLowerCase()+e.substr(1);var e}(i);o[e]=t,s(o)});r.push(a)}),t.$on("$destroy",()=>{r.forEach(t=>t()),o.$destroy()}),o};return{restrict:"A",terminal:!0,compile(n,o){const r=n.html().trim();return{post(n,o,a){const c=t(a.translateN);let l=!0,d=null;const u=function(){let t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;a.translatePlural?((n=d||(d=n.$new())).$count=c(n),t=a.translateContext?Object(h.c)("".concat(a.translateContext)).ngettext(Object(h.msgid)([r]),a.translatePlural,n.$count):Object(h.ngettext)(Object(h.msgid)([r]),a.translatePlural,n.$count)):t=a.translateContext?Object(h.c)("".concat(a.translateContext)).gettext(r):Object(h.gettext)(r);const u=o.contents();if(!u&&!t)return;l&&e(u)(n);const g=angular.element(document.createTextNode(t));e(g)(i||n);const p=g.contents();s.enter(p,o),s.leave(u)},g=i(n,a,u);u(g),l=!1,a.translateN&&n.$watch(a.translateN,()=>{u(g)})}}}}};e.b=b,b.$inject=["$parse","$compile","$animate"];class m{constructor(){this.localeData={},this.currentLocale=p}async fetchCurrentUserLocale(){const t=document.documentElement.lang;if(t)return t;const e=await fetch("/api/locale",{credentials:"same-origin"}),{data:s}=await e.json();return s.lang}addLocaleData(t,e){return this.localeData[t]||(this.localeData[t]={}),Object(g.a)(this.localeData[t],e),Object(h.addLocale)(t,this.localeData[t])}async fetchLocaleData(t,e){const s=Array.isArray(t)?t:[t];(await Promise.all(s.map(t=>{const s="/i18n/".concat(t,"-").concat(e,".po.json");return fetch(s,{credentials:"same-origin"}).then(t=>t.json())}))).forEach(t=>f.addLocaleData(e,t))}useLocale(t){return this.currentLocale=t,Object(h.useLocale)(t)}useLocales(t){return this.currentLocale=t[0],Object(h.useLocales)(t)}getDefaultLocale(){return p}getCurrentLocale(){return this.currentLocale}getCurrentLanguage(){return this.currentLocale.replace("_","-").split("-")[0]}getLocaleName(t){const e={de:"Deutsch",es:"Español","es-ES":"Español (Latin America)","es-MX":"Español (Mexico)",fr:"Français",it:"Italiano",ja:"日本語",ko:"한국어",nl:"Nederlands",pt:"Português","pt-BR":"Português (Brazil)",sv:"Svenska",th:"ภาษาไทย",zh:"中文","zh-CN":"中文","zh-HK":"廣東話",en:"English"};return e[t]?e[t]:t}getImageUrl(t,e){return this.currentLocale===p?e:t[this.currentLocale]||e}isEn(){return 0===f.getCurrentLocale().indexOf("en")}async loadCurrentUserLocaleData(t){u.a.array(t);const e=await f.fetchCurrentUserLocale();!1!==["es"].includes(e)&&(await f.fetchLocaleData(t,e),f.useLocale(e))}}d()(m,"CLASS",()=>"I18nUtilsClass");const f=new m;e.a=f},290:function(t,e,s){"use strict";var n=s(49);const i=new class extends n.a{get ENUM(){return{LINK:"LINK",IMAGE:"IMAGE",ACTOR:"ACTOR",SCRIPT:"SCRIPT",CODE:"CODE",NOTEBOOK_COURSE_CONTENT:"NOTEBOOK_COURSE_CONTENT",CLASS_ASSIGNMENT_COURSE:"CLASS_ASSIGNMENT_COURSE",CLASS_ASSIGNMENT_LESSON:"CLASS_ASSIGNMENT_LESSON",SYSTEM_HINT:"SYSTEM_HINT",COACHING_INBOX_THREAD_STATE:"COACHING_INBOX_THREAD_STATE",COACHING_LESSON_GRADE:"COACHING_LESSON_GRADE"}}};e.a=i},291:function(t,e,s){"use strict";var n=s(1),i=(s.n(n),s(292)),o=(s.n(i),s(19)),r=(s.n(o),s(295)),a=(s.n(r),s(298)),c=(s.n(a),s(697)),l=s.n(c),d=8192,u=4,h=0,g=1,p=16,b=77,m=80,f=":::::::::::::::::::::::::::::::::::::::::::\n";e.a={extractPyStrFromIntelHex:function(t,e){var s="",n=l.a.fromHex(e);if(n.has(t)){var i=n.slice(t,d).get(t);i[h]===b&&i[g]===m&&(s=(s=function(t){for(var e=[],s=0;s<t.length;s++)e.push(String.fromCharCode(t[s]));return e.join("")}(i.slice(u))).replace(/\0/g,""))}return s},injectPyStrIntoIntelHex:function(t,e,s){var n=function(t){for(var e=new Uint8Array(t.length),s=0;s<t.length;s++)e[s]=t.charCodeAt(s);return e}(s),i=u+n.length;i+=p-i%p;var o=new Uint8Array(i);o[0]=b,o[1]=m,o[2]=255&n.length,o[3]=n.length>>8&255,o.set(n,u),e=function(t){return t.replace(f,"")}(e);var r=l.a.fromHex(e);return r.set(t,o),r.asHexString()+"\n"}}},299:function(t,e,s){"use strict";e.a={DISCONNECTED:0,CONNECTED:1,REQUESTINGDEVICE:2,REQUESTINGUSBDEVICE:7,CONNECTING:3,DISCONNECTING:4,SENDING:5,COMPLETED:6,ERROR:-1,REQUIRES_AUTH:-2,UNSUPPORTED:-3}},30:function(t,e,s){"use strict";var n=s(1),i=(s.n(n),s(9)),o=(s.n(i),s(43)),r=(s.n(o),s(2)),a=(s.n(r),s(0)),c=s(137);const l=["www.tynker.com","camps.tynker.com","sylvan.tynker.com","www.hifiveinventor.com"];const d=new class{constructor(){Object(a.a)(["development","production"].includes("production"),"Webpack TYNKER_ENVIRONMENT variable not found"),this._environment="production"}getEnvironment(){return this._environment}isDevelopment(){return"development"===this.getEnvironment()}isProduction(){return"production"===this.getEnvironment()}isProductionServer(){const t=window.location.href;for(const e of l){const s="https://".concat(e);if(t.startsWith(s))return!0}return!1}isDevelopmentServer(){return!this.isProductionServer()}isTesting(){return!0===c.a.get("__testScript",!1)||null!=window.location.href&&!!window.location.href.includes("__testScript=true")}isDebugging(){return!1}};e.a=d},300:function(t,e,s){"use strict";(function(t){var n=s(301),i=(s.n(n),s(1)),o=(s.n(i),s(302)),r=(s.n(o),s(6)),a=(s.n(r),s(9)),c=(s.n(a),s(2)),l=(s.n(c),s(3)),d=s.n(l),u=s(0),h=(s(180),s(185)),g=s(721),p=s(178),b=s(76);const m=1e3;class f extends h.a{constructor(){super(...arguments),d()(this,"booting",!1),d()(this,"booted",!1),d()(this,"enablingExtensionIdsMap",{}),d()(this,"disablingExtensionIdsMap",{}),d()(this,"extensionIdLoadedPayloadMap",{}),d()(this,"extensionIdExtensionMap",{}),d()(this,"capabilityExtensionIdsMap",{}),d()(this,"allowedCapabilityExtensionIdsMap",{}),d()(this,"hardDependencyIdExtensionIdsMap",{}),d()(this,"enabledExtensionIdOptionsMap",{}),d()(this,"enabledExtensionIdCapabilitiesMap",{}),d()(this,"injectedExtensionIdTargetExtensionIdsMap",{}),d()(this,"targetExtensionIdInjectedExtensionIdsMap",{})}async boot(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.isBooting())throw"extension manager is already booting";if(this.isBooted())throw"extension manager is already booting";this.booting=!0,this.trigger("booting");const s=this.logger.start("boot"),n=[t,...this.getDependencyIdsDeep(t,{ignoreLazy:!0})],i=[...new Set(n)];this.logger.debug("BOOTING EXTENSIONS: ".concat(JSON.stringify(i)));const o=this.preloadPayloads(t),r=this.enable(t,e);await Promise.all([o,r]),this.booting=!1,this.booted=!0,this.trigger("booted"),this.logger.end(s)}async reboot(t){Object(u.a)(this.isBooted(),"extension manager was never booted, cannot reboot"),Object(u.a)(!1===this.isBooting(),"extension manager is already booting"),this.booting=!0,this.trigger("booting");const e=this.logger.start("rebooting"),s=this.preloadPayloads(t),n=g.a.ensureExtensions(t);await Promise.all([s,n]),this.booting=!1,this.booted=!0,this.trigger("booted"),this.logger.end(e)}isBooting(){return!0===this.booting}isBooted(){return!0===this.booted}waitBooted(){return new Promise(t=>{if(this.isBooted())return t();const e=this.bind("booted",()=>{e(),t()})})}isRegistered(t){return void 0!==this.extensionIdExtensionMap[t]}register(t){const e=this.logger.start("extensions registration"),s=t.id();if(void 0!==this.extensionIdExtensionMap[s])throw"extension was already registered: ".concat(s);this.extensionIdExtensionMap[s]=t;const n=t._capabilities();for(const t in n)p.a.addToMapList(this.capabilityExtensionIdsMap,t,s);const i=t._allowedCapabilities();for(const t in i)p.a.addToMapList(this.allowedCapabilityExtensionIdsMap,t,s);const o=t._dependencies();for(const t in o){const e=o[t];!1!==(void 0!==e.hard&&e.hard)&&p.a.addToMapList(this.hardDependencyIdExtensionIdsMap,t,s)}this.logger.log("'".concat(s,"' - registered")),this.logger.end(e)}isEnabling(t){return Object(u.a)(this.isRegistered(t)),void 0!==this.enablingExtensionIdsMap[t]}isEnabled(t){return Object(u.a)(this.isRegistered(t)),void 0!==this.enabledExtensionIdOptionsMap[t]}isOrphan(t){Object(u.a)(this.isRegistered(t));let e=[];const s=this.getEnabledExtensionIds();for(const t of s)e=[...e,...this.getDependencyIdsDeep(t)];return!1===(e=e.filter(t=>this.isEnabled(t))).includes(t)}async preloadPayloads(t){const e=[],s=this.loadPayload(t);e.push(s);const n=this.getDependencyIdsDeep(t);for(const t of n){const s=this.loadPayload(t);e.push(s)}return await Promise.all(e)}getDependencyIdsDeep(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=Array.isArray(t)?t:[t];let n=[];for(const t of s){const s=this._getDependencyIdsDeep(t,[],e);n=n.concat(s)}return[...new Set(n)]}_getDependencyIdsDeep(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=this.extensionById(t,{assert:!0})._dependencies();for(const[t,i]of Object.entries(n))!0===s.ignoreLazy&&!0===i.lazy||(e.push(t),this._getDependencyIdsDeep(t,e));return e}async enableBulk(t){u.a.array(t);const e=[];for(const s of t){if(y.isEnabled(s))continue;const t=y.preloadPayloads(s),n=y.enable(s);e.push(t),e.push(n)}return await Promise.all(e)}async disableBulk(t){u.a.array(t);const e=[];for(const s of t){if(y.isDisabled(s))continue;const t=y.disable(s);e.push(t)}return await Promise.all(e)}async enable(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await new Promise(async n=>{const i=void 0!==s.capabilitiesWhitelist?s.capabilitiesWhitelist:null,o=void 0!==s.capabilitiesBlacklist?s.capabilitiesBlacklist:null;if(this.isEnabling(e)){const t=this.bind("enabled",s=>{s.id()===e&&(t(),n(s))});return}const r=this.extensionById(e,{assert:!0});if(this.isEnabled(e))return void n(r);this.enablingExtensionIdsMap[e]=!0,await this.disableIncompatibleExtensions(e,{requesterExtensionId:e});const a=this.incompatibleExtensionIdsForExtensionId(e).filter(t=>this.isEnabled(t)||this.isEnabling(t));a.length>0&&Object(u.a)(!1,"failed to enable ".concat(e,", incompatible extensions enabled / enabling ").concat(a));const c=this.logger.start("'".concat(e,"' - enable")),l=this.logger.start("'".concat(e,"' - pre-enable"),{timeout:m});await r.preEnable(),this.logger.end(l);try{const t=this.logger.start("'".concat(e,"' - loading payload"),{timeout:m});await this.loadPayload(e),this.logger.end(t)}catch(t){throw delete this.enablingExtensionIdsMap[e],this.logger.error("failed to enable '".concat(e,"' - failed to load payload"),t),"failed to enable '".concat(e,"' - failed to load payload: ").concat(t.message)}const d=this.logger.start("'".concat(e,"' - enabling extension dependencies")),h=(await this.enableDependencies(e)).map(t=>this.injectExtension(r,t));await Promise.all(h),this.logger.end(d);const g=this.logger.start("'".concat(e,"' - enabling internals"),{timeout:m});await r.enable(s),this.logger.end(g),this.enabledExtensionIdOptionsMap[e]=s;let p=r._capabilities();p=Object.keys(p),i&&(p=p.filter(t=>i.includes(t))),o&&(p=p.filter(t=>!1===o.includes(t))),this.enabledExtensionIdCapabilitiesMap[e]=p,t("body").addClass(e);const b=[],f=r._allowedCapabilities();for(const t in f){const e=this.enabledExtensionsByCapability(t);for(const t of e){const e=this.injectExtension(r,t);b.push(e)}}await Promise.all(b);const v=[];for(const t of p){const e=this.enabledExtensionIdsByAcceptedCapability(t);for(const s of e){const e=y.extensionById(s,{assert:!0}),n=this.injectExtension(e,r,{reason:"(capability: ".concat(t,")")});v.push(n)}}await Promise.all(v);const _=this.logger.start("'".concat(e,"' - post-enable"),{timeout:m});await r.postEnable(),this.logger.end(_),delete this.enablingExtensionIdsMap[e],this.trigger("enabled",[r]),this.logger.end(c),n(r)})}async loadPayload(t){const e="".concat(this.id(),":").concat(t);await b.a.performTask(e,async()=>{if(!0===this.extensionIdLoadedPayloadMap[t])return;const e=this.extensionById(t,{assert:!0});await e.loadPayload(),this.extensionIdLoadedPayloadMap[t]=!0})}async enableDependencies(t){const e=[],s=this.extensionById(t)._dependencies();for(const n in s){const i=s[n];if(!0===i.lazy)continue;const o=new Promise(async e=>{if(this.isEnabled(n)){this.logger.log("'".concat(t,"' - dependency '").concat(n,"' already enabled"));const s=this.enabledExtensionById(n);Object(u.a)(s),e(s)}else{const s=this.logger.start("'".concat(t,"' - enabling dependency '").concat(n,"'")),o=await this.enable(n,i);this.logger.end(s),e(o)}});e.push(o)}return await Promise.all(e)}async injectExtension(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(async n=>{const i=void 0!==s.reason?s.reason:null,o=void 0===s.assertEnabled||s.assertEnabled,r=t.id(),a=e.id();if(o&&!1===this.isEnabled(a))throw"cannot inject disabled extension: ".concat(a);if(this.isExtensionIdInjectedInExtensionId(a,r))return void n();const c=this.logger.start("inject dependency '".concat(a,"' into '").concat(r,"'")+(i||""));p.a.addToMapList(this.targetExtensionIdInjectedExtensionIdsMap,r,a),p.a.addToMapList(this.injectedExtensionIdTargetExtensionIdsMap,a,r);const l=this.enabledExtensionIdOptionsMap[a];await t.injectExtension(e,l),e.trigger("injectedInto",[t]),this.trigger("injected",[t,e]),this.logger.end(c),n()})}isDisabling(t){return Object(u.a)(this.isRegistered(t)),void 0!==this.disablingExtensionIdsMap[t]}isDisabled(t){return!1===this.isEnabled(t)}async disable(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("extension-trackers"!==e)return new Promise(async s=>{const n=this.extensionById(e,{assert:!0});if(!1===this.isEnabled(e))return void s(n);if(this.isDisabling(e)){const t=this.bind("disabled",n=>{n.id()===e&&(t(),s(n))});return}this.disablingExtensionIdsMap[e]=!0;const i=this.enabledDependantExtensionIdsForExtensionId(e);await this.disableBulk(i);const o=this.logger.start("'".concat(e,"' - disable"),{timeout:m});await n.preDisable();const r=this.targetExtensionIdsForInjectedExtensionId(e);for(const t of r){const e=this.extensionById(t,{assert:!0});await this.uninjectExtension(e,n)}await n.disable();const a=this.injectedExtensionIdsForExtensionId(e);for(const t of a){let e=this.extensionById(t,{assert:!0});await this.removeInjectedExtension(n,e)}delete this.enabledExtensionIdOptionsMap[e],delete this.enabledExtensionIdCapabilitiesMap[e],delete this.extensionIdLoadedPayloadMap[e],t("body").removeClass(e),await n.postDisable(),delete this.disablingExtensionIdsMap[e],this.trigger("disabled",[n]),this.logger.end(o),s(n)})}async uninjectExtension(t,e){const s=t.id(),n=e.id(),i=this.logger.start("uninject '".concat(n,"' from '").concat(s,"'")),o=this.enabledExtensionIdOptionsMap[n];await t.uninjectExtension(e,o),this.trigger("uninjected",[t,e]),this.removeInjectedExtension(t,e),this.logger.end(i)}removeInjectedExtension(t,e){const s=t.id(),n=e.id();p.a.removeFromMapList(this.targetExtensionIdInjectedExtensionIdsMap,s,n),p.a.removeFromMapList(this.injectedExtensionIdTargetExtensionIdsMap,n,s)}async disableIncompatibleExtensions(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=this.incompatibleExtensionIdsForExtensionId(t).filter(t=>this.isEnabled(t)).map(t=>this.disable(t,e));await Promise.all(s)}async toggleEnabled(t){this.isEnabled(t)?await this.disable(t):await this.enable(t)}extensionById(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return void 0!==e.assert&&e.assert&&Object(u.a)(void 0!==this.extensionIdExtensionMap[t],"extension not registered: "+t),this.extensionIdExtensionMap[t]}enabledExtensionById(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Object(u.a)(t),!1===this.isEnabled(t))return null;return this.extensionById(t,e)}extensionsByQuery(t){return u.a.object(t),this.extensions.filter(e=>this.extensionMatchesQuery(e,t))}extensionMatchesQuery(t,e){if(u.a.object(t),u.a.object(e),e.id&&e.id!==t.id())return!1;if(e.capabilities){const s=t._capabilities();for(const t of e.capabilities)if(void 0===s[t])return!1}return!0}enabledExtensionsByQuery(t){return this.extensionsByQuery(t).filter(t=>this.isEnabled(t.id()))}extensionIdsByCapability(t){return void 0!==this.capabilityExtensionIdsMap[t]?this.capabilityExtensionIdsMap[t]:[]}extensionsByCapability(t){return this.extensionIdsByCapability(t).map(t=>this.extensionById(t,{assert:!0}))}getEnabledExtensionIds(){return Object.keys(this.enabledExtensionIdOptionsMap)}enabledExtensionIdsByCapability(t){const e=Array.isArray(t)?t:[t];let s=[];for(const t of e){const e=void 0!==this.capabilityExtensionIdsMap[t]?this.capabilityExtensionIdsMap[t]:[];s=[...s,...e]}return s.filter(t=>this.isEnabled(t))}enabledExtensionsByCapability(t){return this.enabledExtensionIdsByCapability(t).map(t=>this.extensionById(t,{assert:!0}))}enabledExtensionByCapability(t){const e=this.enabledExtensionsByCapability(t);if(0===e.length)return null;Object(u.a)(1===e.length,"found more than one extension enabled with capability: ".concat(t));const s=e[0];return Object(u.a)(s),s}enabledExtensionIdsByAcceptedCapability(t){return(void 0!==this.allowedCapabilityExtensionIdsMap[t]?this.allowedCapabilityExtensionIdsMap[t]:[]).filter(t=>this.isEnabled(t))}enabledDependantExtensionIdsForExtensionId(t){return p.a.listFromMap(this.hardDependencyIdExtensionIdsMap,t).filter(t=>this.isEnabled(t))}isExtensionIdCompatibleWithExtensionId(t,e){const s=y.extensionById(t),n=s._capabilities(),i=s._incompatibleCapabilities(),o=y.extensionById(e),r=o._capabilities(),a=o._incompatibleCapabilities();for(const t in n)if(void 0!==a[t])return!1;for(const t in r)if(void 0!==i[t])return!1;return!0}incompatibleExtensionIdsForExtensionId(t){let e=[];const s=this.extensions;for(const n of s){const s=n.id();this.isExtensionIdCompatibleWithExtensionId(t,s)||e.push(s)}return e=e.filter(e=>e!==t),e=[...new Set(e)]}enabledIncompatibleExtensionIdsForExtensionId(t){let e=this.incompatibleExtensionIdsForExtensionId(t);return e=e.filter(t=>y.isEnabled(t))}getIncompatibleExtensionIds(){let t=this.getEnabledExtensionIds().map(t=>this.incompatibleExtensionIdsForExtensionId(t));return t=t.flat(),t=[...new Set(t)]}isExtensionIdInjectedInExtensionId(t,e){return this.injectedExtensionIdsForExtensionId(e).includes(t)}injectedExtensionIdsForExtensionId(t){const e=this.targetExtensionIdInjectedExtensionIdsMap[t];return void 0===e?[]:e}targetExtensionIdsForInjectedExtensionId(t){let e=this.injectedExtensionIdTargetExtensionIdsMap[t];return void 0===e?[]:e}async waitExtensionEnabled(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s={id:t};e.single=!0,u.a.object(s),u.a.object(e);const n=this._get(e,"single",!1);let i=this.enabledExtensionsByQuery(s);if(n&&i.length>1&&Object(u.a)(!1,"unexpected number of extensions in _waitExtensionEnabled ".concat(JSON.stringify(s))),n&&1===i.length)return i[0];if(i.length>0)return i;await this.waitExtensionManagerEvent("enabled",s),u.a.string(t);const o=this.enabledExtensionById(t);return u.a.object(o),n?o:[o]}async waitExtensionManagerEvent(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return u.a.string(t),u.a.object(e),u.a.object(s),new Promise(s=>{const n=this.bind(t,t=>{if(!1===this.extensionMatchesQuery(t,e))return;n();const i=t.id();s(i)})})}get extensionIds(){return Object.keys(this.extensionIdExtensionMap)}get extensions(){return this.extensionIds.map(t=>y.extensionById(t))}get enabledExtensionsIds(){return Object.keys(this.enabledExtensionIdOptionsMap)}get enabledExtensions(){return this.enabledExtensionsIds.map(t=>y.extensionById(t))}}d()(f,"CLASS",()=>"ExtensionManagerClass");const y=new f;e.a=y,window.__ExtensionManager=y}).call(e,s(4))},303:function(t,e,s){"use strict";var n=s(1),i=(s.n(n),s(6)),o=(s.n(i),s(2)),r=(s.n(o),s(31)),a=s.n(r),c=s(3),l=s.n(c),d=s(0),u=s(99),h=s(57),g=s(21);class p extends g.a{constructor(){super(...arguments),l()(this,"__scope",null)}get scope(){return Object(d.a)(this.__scope),this.__scope}set scope(t){Object(d.a)(t),this.__scope=t}state(){return u.a.state()}put(t){const e=Array.isArray(t)?t:[t];for(const t of e){const e=this.scope.className,s=a()({},t,{sender:e});u.a.put(s)}}getFromAction(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return d.a.object(t),d.a.string(e),h.a.get(t,e,s)}async take(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.scope=this.scope,await u.a.take(t,e)}async putAndWait(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.scope=this.scope,await u.a.putAndWait(t,e)}subscribe(t){const e=u.a.subscribe(t);return this.addUnsubscriber(e),e}}l()(p,"CLASS",()=>"ScopedReduxProxyClass");const b=new p;e.a=b},304:function(t,e,s){"use strict";var n=s(9),i=(s.n(n),s(49));const o=new class extends i.a{get ENUM(){return{CONTINUE:100,SWITCHING_PROTOCOLS:101,PROCESSING:102,OK:200,CREATED:201,ACCEPTED:202,NON_AUTHORITATIVE_INFORMATION:203,NO_CONTENT:204,RESET_CONTENT:205,PARTIAL_CONTENT:206,MULTI_STATUS:207,ALREADY_REPORTED:208,IM_USED:226,MULTIPLE_CHOICES:300,MOVED_PERMANENTLY:301,FOUND:302,SEE_OTHER:303,NOT_MODIFIED:304,USE_PROXY:305,SWITCH_PROXY:306,TEMPORARY_REDIRECT:307,PERMANENT_REDIRECT:308,BAD_REQUEST:400,UNAUTHORIZED:401,PAYMENT_REQUIRED:402,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,NOT_ACCEPTABLE:406,PROXY_AUTHENTICATION_REQUIRED:407,REQUEST_TIMEOUT:408,CONFLICT:409,GONE:410,LENGTH_REQUIRED:411,PRECONDITION_FAILED:412,PAYLOAD_TOO_LARGE:413,URI_TOO_LONG:414,UNSUPPORTED_MEDIA_TYPE:415,RANGE_NOT_SATISFIABLE:416,EXPECTATION_FAILED:417,I_AM_A_TEAPOT:418,MISDIRECTED_REQUEST:421,UNPROCESSABLE_ENTITY:422,LOCKED:423,FAILED_DEPENDENCY:424,UPGRADE_REQUIRED:426,PRECONDITION_REQUIRED:428,TOO_MANY_REQUESTS:429,REQUEST_HEADER_FIELDS_TOO_LARGE:431,UNAVAILABLE_FOR_LEGAL_REASONS:451,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,HTTP_VERSION_NOT_SUPPORTED:505,VARIANT_ALSO_NEGOTIATES:506,INSUFFICIENT_STORAGE:507,LOOP_DETECTED:508,NOT_EXTENDED:510,NETWORK_AUTHENTICATION_REQUIRED:511}}isPotentialDowntimeStatusCode(t){return[this.REQUEST_TIMEOUT,this.TOO_MANY_REQUESTS,this.BAD_GATEWAY,this.SERVICE_UNAVAILABLE,this.GATEWAY_TIMEOUT].includes(t)}};e.a=o},308:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var e=s(1),n=(s.n(e),s(6)),i=(s.n(n),s(17)),o=(s.n(i),s(2)),r=(s.n(o),s(0)),a=s(64),c=s(99),l=s(639),d=s(290);s(640);async function u(){!async function(){let t=null;const e=window.brackets.getModule("editor/EditorManager"),s=window.brackets.getModule("view/MainViewManager"),n=()=>{if(void 0===window.parent.__setPostContainerClipboardHints)return;const e={},s=t._codeMirror;r.a.object(s);const n=s.getCursor(!0);r.a.object(n);const i=s.getCursor(!1);r.a.object(i);const o=l.a.getPreviousLine(s,n.line,{skipEmptyLines:!0}),a=l.a.getNextLine(s,i.line,{skipEmptyLines:!0});o&&(e.previous=o),a&&(e.next=a);const c=d.a.CODE;r.a.string(c);const u=t.getSelectedText(),h=t.getFile();r.a.object(h);const g=h._name;r.a.string(g);const p=function(t){const e=t.split(".");return{py:"python",html:"xml",htmls:"xml",htm:"xml",htx:"xml",css:"css",less:"css",scss:"css",sass:"css",jsx:"javascript",js:"javascript",json:"javascript",java:"java",txt:"plaintext",md:"markdown",markdown:"markdown",ini:"plaintext",cfg:"plaintext",csv:"plaintext"}[e[e.length-1]]||"plaintext"}(g);r.a.string(p);const b={start:n,end:i},m={fileName:g,language:p,selection:b};Object.keys(e).length>0&&(m.boundaries=e);const f={attachmentType:c,code:u,editor:m};window.parent.__setPostContainerClipboardHints(f)};const i=()=>{t&&t._codeMirror.off("copy",n),(t=e.getCurrentFullEditor())&&t._codeMirror.on("copy",n)};s.on("currentFileChange",i),i()}(),async function(){const e={};(async function(t){let e=null;const s=window.brackets.getModule("editor/EditorManager"),n=window.brackets.getModule("view/MainViewManager"),i=e=>{"cursorActivity"!==e||!0!==t._skipClearHighlightsOnCursorChange?h(t):delete t._skipClearHighlightsOnCursorChange};let o=null,a=null,c=null;const l=()=>{if(e&&(e._codeMirror.off("change",o),e._codeMirror.off("mousedown",a),e._codeMirror.off("cursorActivity",c)),!(e=s.getCurrentFullEditor()))return;const n=e.getFile(),l=n._name;r.a.string(l);const d=l!==t.currentHighlightedFileName;d&&h(t),o=(()=>i("change")),a=(()=>i("mousedown")),c=(()=>i("cursorActivity")),e._codeMirror.on("change",o),e._codeMirror.on("mousedown",a),e._codeMirror.on("cursorActivity",c)};n.on("currentFileChange",l),l()})(e),window.parent.__highlightCode=((s,n)=>(async function(e,s,n){r.a.string(e),r.a.object(s),r.a.object(n),h(n,{skipClearFeedHighlights:!0});const i=s.fileName;r.a.string(i);const o=s.selection;r.a.object(o);const a=o.start;r.a.object(a);const c=o.end;r.a.object(c),n.currentHighlightedFileName=i,await async function(e){r.a.string(e);const s=t("#editor").attr("data-project-id"),n="/project/".concat(s,"/").concat(e),i=window.brackets.getModule("editor/EditorManager").getCurrentFullEditor().getFile()._path;if(r.a.string(i),n===i)return;return new Promise((t,e)=>{const s=Bramble.getFileSystem();s.stat(n,(s,i)=>{if(s)return console.warn(s),void e(s);const o=window.brackets.getModule("command/CommandManager");o.execute("file.open",{fullPath:n}).done(()=>t())})})}(i);const d=[],u=window.brackets.getModule("editor/EditorManager").getCurrentFullEditor(),p=u._codeMirror;r.a.object(p);const b=p.getSearchCursor(e);for(;b.findNext();){const t=b.from(),e=b.to(),n={start:t,end:e},i=Math.abs(a.line-n.start.line);if(s.boundaries){const o=l.a.getPreviousLine(p,t.line,{skipEmptyLines:!0}),r=l.a.getNextLine(p,e.line,{skipEmptyLines:!0}),a=o?o.code:null,c=r?r.code:null,u=s.boundaries.previous?s.boundaries.previous.code:null,h=s.boundaries.next?s.boundaries.next.code:null,g=a===u&&c===h,b=a===u||c===h;g?d.push({type:"bounded:full",selection:n,distance:i}):b?d.push({type:"bounded:partial",selection:n,distance:i}):d.push({type:"unbounded",selection:n,distance:i})}else d.push({type:"unbounded",selection:n,distance:i})}if(0===d.length)return function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.a.string(e),r.a.object(s);const n=void 0!==s.timeout?s.timeout:2e3,i=t(".bramble-ide__flash-banner");i.html(e),i.addClass("bramble-ide__flash-banner--visible"),g&&clearTimeout(g);g=setTimeout(()=>void t(".bramble-ide__flash-banner").removeClass("bramble-ide__flash-banner--visible"),n)}("No match found"),void h(n);let m=null;for(const t of d){if(0===t.distance){m=t;break}if(null===m){m=t;continue}let e=!1;"bounded:full"===t.type&&["bounded:partial","unbounded"].includes(m.type)&&(e=!0),"bounded:partial"===t.type&&["unbounded"].includes(m.type)&&(e=!0);const s=t.type===m.type;e?m=t:s&&t.distance<m.distance&&(m=t)}const f=m.selection;r.a.object(f);const y=0===m.distance?"rgba(115,219,0,.25)":"rgba(255,219,0,.25)";n.currentHighlight=p.markText(f.start,f.end,{css:"background: ".concat(y)});const v=f.start.line;r.a.integer(v);const _=f.start.ch;r.a.integer(_),n._skipClearHighlightsOnCursorChange=!0,u.setCursorPos(v,_,!0),u.focus()})(s,n,e))}()}function h(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.a.object(t),r.a.object(e),t.currentHighlight&&t.currentHighlight.clear(),delete t.currentHighlight,delete t.currentHighlightedFileName,!0!==e.skipClearFeedHighlights&&void 0!==window.parent.__clearFeedHighlights&&window.parent.__clearFeedHighlights()}let g=null;const p=t(document);p.on("bramble-ready",()=>{u()}),window.__triggerBrambleReady=(()=>p.trigger("bramble-ready")),async function(){await c.a.bootstrap(),await a.a.bootstrap()}()}.call(e,s(4))},49:function(t,e,s){"use strict";var n=s(1),i=(s.n(n),s(9)),o=(s.n(i),s(2)),r=(s.n(o),s(0));e.a=class{constructor(){for(const[t,e]of Object.entries(this.ENUM))Object(r.a)(void 0===this[t],"enumeration key is reserved: ".concat(t)),this[t]=e}get ENUM(){Object(r.a)(!1,"enumeration not defined")}in(t){return this.all.includes(t)}get all(){const t=this.ENUM;return Object.values(t)}get first(){const t=this.all;r.a.array(t);const e=t[0];return Object(r.a)(void 0!==e),e}}},57:function(t,e,s){"use strict";var n=s(42),i=(s.n(n),s(3)),o=s.n(i),r=s(0),a=(s(285),s(21));const c="_SUCCEEDED",l="_FAILED";class d extends a.a{get(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const n=t.payload;return Object(r.a)(n),void 0!==n[e]?n[e]:s}create(t,e){r.a.string(t),r.a.object(e);const s=Date.now();return{_id:this._classSequentialUUID(),type:t,payload:e,timestampMS:s}}clone(t){const e=this._clone(t);return e._id=this._classSequentialUUID(),e}transmute(t,e){Object(r.a)(t),r.a.string(e);const s=this.clone(t);return s.type=e,s}transmuteReduce(t){Object(r.a)(t);const e=this.actionTypeForAction(t);r.a.string(e);const s=this.reduceActionTypeForActionType(e);r.a.string(s);const n=this.clone(t);return n.type=s,n}reduceActionTypeForActionType(t){return r.a.string(t),"".concat(t,"_REDUCE")}actionTypeForAction(t){r.a.object(t);const e=t.type;return r.a.string(e),e}actionTypeForAction(t){r.a.object(t);const e=t.type;return r.a.string(e),e}isResultAction(t){r.a.object(t);const e=this.actionTypeForAction(t);r.a.string(e);const s=this.isResultActionType(e);return r.a.boolean(s),s}isResultActionType(t){return r.a.string(t),!!this.isSucceededActionType(t)||!!this.isFailedActionType(t)}isSucceededAction(t){r.a.object(t);const e=this.actionTypeForAction(t);r.a.string(e);const s=this.isSucceededActionType(e);return r.a.boolean(s),s}isSucceededActionType(t){return r.a.string(t),t.endsWith(c)}baseActionTypeFromSucceededActionType(t){return Object(r.a)(this.isSucceededActionType(t)),t.slice(0,t.length-c.length)}succeededActionTypeForAction(t){r.a.object(t);const e=this.actionTypeForAction(t);r.a.string(e);const s=this.succeededActionTypeForActionType(e);return r.a.string(s),s}succeededActionTypeForActionType(t){return r.a.string(t),Object(r.a)(!1===this.isSucceededActionType(t)),Object(r.a)(!1===this.isFailedActionType(t)),"".concat(t).concat(c)}succeededActionTypesForActionTypes(t){return r.a.array(t),t.map(t=>this.succeededActionTypeForActionType(t))}isFailedAction(t){r.a.object(t);const e=this.actionTypeForAction(t);r.a.string(e);const s=this.isFailedActionType(e);return r.a.boolean(s),s}isFailedActionType(t){return r.a.string(t),t.endsWith(l)}baseActionTypeFromFailedActionType(t){return Object(r.a)(this.isFailedActionType(t)),t.slice(0,t.length-l.length)}failedActionTypeForAction(t){r.a.object(t);const e=this.actionTypeForAction(t);r.a.string(e);const s=this.failedActionTypeForActionType(e);return r.a.string(s),s}failedActionTypeForActionType(t){return r.a.string(t),Object(r.a)(!1===this.isSucceededActionType(t)),Object(r.a)(!1===this.isFailedActionType(t)),"".concat(t).concat(l)}resultActionTypesForAction(t){r.a.object(t);const e=this.succeededActionTypeForAction(t);r.a.string(e);const s=this.failedActionTypeForAction(t);return r.a.string(s),[e,s]}hasResultActionTypes(t){if(r.a.object(t),this.isResultAction(t))return!1;const e=this.actionTypeForAction(t);return r.a.string(e),!!this.succeededActionTypeForActionType(e)&&!!this.failedActionTypeForActionType(e)}}o()(d,"CLASS",()=>"ActionUtilsClass");const u=new d;e.a=u},601:function(t,e,s){"use strict";var n=s(1),i=(s.n(n),s(2)),o=(s.n(i),s(3)),r=s.n(o),a=s(0);const c=new class{constructor(){r()(this,"__scope",null)}get scope(){return Object(a.a)(this.__scope),this.__scope}set scope(t){Object(a.a)(t),this.__scope=t}get eventCallbacksMap(){const t=this.scope;return t.__observerEventCallbacksMap=t.__observerEventCallbacksMap||{},t.__observerEventCallbacksMap}set eventCallbacksMap(t){this.scope.__observerEventCallbacksMap=t}get unsubscribers(){const t=this.scope;return t.__observerUnsubscribers=t.__observerUnsubscribers||[],t.__observerUnsubscribers}set unsubscribers(t){this.scope.__observerUnsubscribers=t}bind(t,e){Object(a.a)(t),Object(a.a)(e);const s=this._getEventCallbacks(t);s.push(e),this.eventCallbacksMap[t]=s;const n=()=>{this.unbind(t,e),this.removeUnsubscriber(n)};return this.addUnsubscriber(n),n}trigger(t,e){Object(a.a)(t);const s=this._getEventCallbacks(t);for(const t of s)Array.isArray(e)?t(...e):t(e)}unbind(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(a.a)(t);let s=this._getEventCallbacks(t);(s=e?s.filter(t=>t!==e):[]).length>0?this.eventCallbacksMap[t]=s:delete this.eventCallbacksMap[t]}unbindAll(){for(const t of this.unsubscribers)t();this.unsubscribers=[],this.eventCallbacksMap={}}addUnsubscriber(t){Object(a.a)(t),this.unsubscribers.push(t)}removeUnsubscriber(t){this.unsubscribers=this.unsubscribers.filter(e=>e!==t)}_getEventCallbacks(t){return void 0!==this.eventCallbacksMap[t]?this.eventCallbacksMap[t]:[]}};e.a=c},605:function(t,e,s){"use strict";var n=s(17);s.n(n);const i=new class{supportsTouchEvents(){const t=" -webkit- -moz- -o- -ms- ".split(" ");return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)||function(t){return window.matchMedia(t).matches}(["(",t.join("touch-enabled),("),"heartz",")"].join(""))}};e.a=i},606:function(t,e,s){"use strict";var n=s(1),i=(s.n(n),s(2)),o=(s.n(i),s(3)),r=s.n(o),a=s(0),c=s(178),l=s(179);class d extends l.a{constructor(){super(),this.actionTypeActionsIdMap={},this.actionsIdActionTypes={}}register(t,e){super.register(t,e);const s=e.actionTypes();for(const e of s)Object(a.a)(void 0===this.actionTypeActionsIdMap[e]),this.actionTypeActionsIdMap[e]=t,c.a.addToMapList(this.actionsIdActionTypes,t,e);this.logger.log("registered ".concat(t))}unregister(t){super.unregister(t);const e=this.actionsIdActionTypes[t];a.a.array(e);for(const t of e)Object(a.a)(void 0!==this.actionTypeActionsIdMap[t]),delete this.actionTypeActionsIdMap[t];delete this.actionsIdActionTypes[t],this.logger.log("unregistered ".concat(t))}isActionTypeRegistered(t){return a.a.string(t),void 0!==this.actionTypeActionsIdMap[t]}}r()(d,"CLASS",()=>"ActionsRegistryClass");const u=new d;e.a=u,window.__ActionsRegistry=u},607:function(t,e,s){"use strict";var n=s(1),i=(s.n(n),s(2)),o=(s.n(i),s(3)),r=s.n(o),a=s(608),c=s(0),l=s(25),d=s(30),u=s(179);class h extends u.a{constructor(){super(...arguments),r()(this,"actionTypeReducerCalls",{})}register(t,e){super.register(t,e);const s=e,n=e.reducers();c.a.object(n);for(const[e,i]of Object.entries(n)){Object(c.a)(e&&"string"==typeof e&&"undefined"!==e,"invalid action type '".concat(e,"' in reducer '").concat(t,"'")),Object(c.a)(i&&"function"==typeof i);const n=this.actionTypeReducerCalls[e]||[];n.push({method:i,methodScope:s}),this.actionTypeReducerCalls[e]=n}this.logger.log("registered ".concat(t))}unregister(t){const e=super.unregister(t).reducers();for(const[t,s]of Object.entries(e)){Object(c.a)(t&&"string"==typeof t),Object(c.a)(s&&"function"==typeof s);let e=this.actionTypeReducerCalls[t]||[];e=e.filter(t=>{let{method:e,methodScope:n}=t;return e!==s}),this.actionTypeReducerCalls[t]=e}this.logger.log("unregistered ".concat(t))}reduce(t,e){const s=l.a.addTimeStart("ReducerRegistry:reduce"),n=Object(a.a)(t,t=>{const s=this.actionTypeReducerCalls[e.type]||[];for(const n of s){const{method:s,methodScope:i}=n;i.callReducerMethod(s,t,e)}});l.a.addTimeEnd(s);if(d.a.isDebugging())try{JSON.stringify(n)}catch(t){Object(c.a)(!1)}return n!==t?n:t}}r()(h,"CLASS",()=>"ReducerRegistryClass");const g=new h;e.a=g},609:function(t,e,s){"use strict";var n=s(3),i=s.n(n),o=s(0),r=s(610);class a extends r.a{get SET(){return this.actionType("SET")}set(t,e){return o.a.string(t),this.action(this.SET,{path:t,value:e})}}i()(a,"CLASS",()=>"StateActionsClass");const c=new a;e.a=c},610:function(t,e,s){"use strict";var n=s(1),i=(s.n(n),s(19)),o=(s.n(i),s(2)),r=(s.n(o),s(31)),a=s.n(r),c=s(3),l=s.n(c),d=s(0),u=s(25),h=s(611),g=s(57),p=s(21);class b extends p.a{constructor(){super(),l()(this,"singleton",!0),u.a.add("actions:constructed",1)}onInit(){super.onInit(),u.a.add("actions:active",1),u.a.add("actions:initialized",1)}onDestroy(){super.onDestroy(),u.a.add("actions:active",-1),u.a.add("actions:destroyed",1)}actionType(t){return t}action(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return d.a.string(t),d.a.object(e),g.a.create(t,e)}actionTypes(){const t=this,e=new Set;return function s(n){if(!n)return;const i=Object.getOwnPropertyNames(n);for(const s of i){if("constructor"===s)continue;if(s.toUpperCase()!==s)continue;if("IDE"===s)continue;const n=t[s];"string"==typeof n&&e.add(n)}s(Object.getPrototypeOf(n))}(Object.getPrototypeOf(this)),Array.from(e)}actions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d.a.object(t);const e=new Set;!function t(s){if(!s)return;const n=Object.getOwnPropertyNames(s);for(const t of n){if("constructor"===t)continue;if(t.toUpperCase()!==t)continue;let n=t.toLowerCase();n=n.replace(/_/g,"-");const i=s[n=h.a.dashToCamelcase(n)];i&&(Object(d.a)(i instanceof Function),e.add(n))}t(Object.getPrototypeOf(s))}(Object.getPrototypeOf(this));const s=Array.from(e),n=this.className,i=t.senderType,o={};for(const e of s){const s=this[e];o[e]=((e,o,r,c,l)=>{const d=s.apply(this,[e,o,r,c,l]),u=a()({},d,{sender:n});return i&&(u.senderType=t.senderType),u})}return o}}e.a=b,l()(b,"CLASS",()=>"ActionsClass")},611:function(t,e,s){"use strict";var n=s(19),i=(s.n(n),s(56));s.n(i);const o=new class{slugify(t){let e=t.trim().toLowerCase();return e=(e=e.replace(/[^a-zA-Z0-9]/g,"-")).replace(/--+/g,"-")}dashToCamelcase(t){return t.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})}camelcaseToDash(t){return t.replace(/[A-Z]/g,t=>"-"+t.toLowerCase())}};e.a=o},614:function(t,e,s){"use strict";var n,i,o,r,a=s(1),c=(s.n(a),s(2)),l=(s.n(c),s(3)),d=s.n(l),u=s(615),h=s.n(u),g=s(0),p=s(616),b=s(618);const m=new(n=Object(p.a)(),r=o=class extends b.a{set(t,e){let{state:s}=e;const n=this.getFromAction(t,"path");g.a.string(n);const i=this.getFromAction(t,"value");if(""===n){g.a.object(i);for(const[t,e]of Object.entries(i))s[t]=e}else this._set(s,n,i)}},d()(o,"CLASS",()=>"StateReducerClass"),i=r,h()(i.prototype,"set",[n],Object.getOwnPropertyDescriptor(i.prototype,"set"),i.prototype),i);e.a=m},616:function(t,e,s){"use strict";e.a=function(t){return function(e,s,n){t=t||function(t){let e=Object(r.a)(t).split(" ").join("_").toUpperCase();t.startsWith("_")&&(e="_".concat(e));return e}(s),o.a.string(t);const i=e[s];return o.a.function(i),void 0===e._actionTypeDecoratedReducerMethodMap&&(e._actionTypeDecoratedReducerMethodMap={}),e._actionTypeDecoratedReducerMethodMap[t]=i,n}};var n=s(17),i=(s.n(n),s(43)),o=(s.n(i),s(0)),r=s(617)},618:function(t,e,s){"use strict";var n=s(1),i=(s.n(n),s(2)),o=(s.n(i),s(31)),r=s.n(o),a=s(3),c=s.n(a),l=s(0),d=s(57),u=s(25),h=s(21);class g extends h.a{constructor(){super(),c()(this,"singleton",!0),u.a.add("reducers:constructed",1)}onInit(){super.onInit(),u.a.add("reducers:active",1),u.a.add("reducers:initialized",1)}onDestroy(){super.onDestroy(),u.a.add("reducers:active",-1),u.a.add("reducers:destroyed",1)}reducers(){const t={};if(this._actionTypeDecoratedReducerMethodMap)for(const[e,s]of Object.entries(this._actionTypeDecoratedReducerMethodMap)){l.a.string(e),l.a.function(s);const n=this.namespacedActionType(e);l.a.string(n),t[n]=s}return t}getReducerMethodParams(t){return{state:t}}callReducerMethod(t,e,s){const n=this.getReducerMethodParams(e),i=s.payload;l.a.object(i);for(const t in i)Object(l.a)(void 0===n[t],"cannot use reserved key in action payload: ".concat(t));const o=r()({},n,i);t.call(this,s,o)}getFromAction(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return Object(l.a)(t&&e),d.a.get(t,e,s)}namespacedActionType(t){return l.a.string(t),t}}e.a=g,c()(g,"CLASS",()=>"ReducerClass")},619:function(t,e,s){"use strict";var n=s(180),i=s(57);class o extends n.a{constructor(t){super("redux action failed: ".concat(JSON.stringify(t))),this.name="ReduxActionFailedException",this.action=t}getInnerException(){return i.a.get(this.action,"exception")}getCoreException(){let t=this.getInnerException();for(;t instanceof o;){const e=t.getInnerException();if(null==e)break;t=e}return t}}e.a=o},635:function(t,e,s){"use strict";var n=s(74),i=s(182);e.a=(()=>({restrict:"A",link:function(t,e,s){const o=s.lazySrc;if(!o)return;const r=angular.element(e);r.attr("src","data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),n.a.waitVisible(r).then(()=>{r.attr("src",o),r.addClass("lazy-src--resolved");const t=r[0];t.onload=(()=>{r.addClass("lazy-src--loaded");const e=s.lazyCacheId,n=e?i.a.get(e):null;null!=n&&n.set(o,t)}),t.onerror=(()=>r.addClass("lazy-src--error"))})}}))},636:function(t,e,s){"use strict";var n=s(1),i=(s.n(n),s(2)),o=(s.n(i),s(3)),r=s.n(o),a=s(0);class c{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r()(this,"id",null),r()(this,"cache",{}),r()(this,"keys",[]),r()(this,"size",0),r()(this,"maxSize",Number.MAX_SAFE_INTEGER),r()(this,"purgeSize",10),r()(this,"hits",0),r()(this,"misses",0),r()(this,"hitRate",0),a.a.string(t),a.a.object(e),this.id=t,e.maxSize&&(this.maxSize=e.maxSize),e.purgeSize&&(this.purgeSize=e.purgeSize),this.clear()}clear(){this.cache={},this.keys=[],this.size=0,this.hits=0,this.misses=0,this.hitRate=0}has(t){const e=void 0!==this.cache[t];return e?(this.hits+=1,this._updateHitRate()):(this.misses+=1,this._updateHitRate()),e}get(t){return this.has(t)?this.cache[t]:null}set(t,e){this.purge(),!1===this.has(t)&&(this.size+=1,this.keys.push(t)),this.cache[t]=e}unset(t){delete this.cache[t],this.size-=1}purge(){if(this.size<=this.maxSize)return;const t=this.keys.slice(0,this.purgeSize+1);this.keys=this.keys.slice(this.purgeSize,this.keys.length);for(const e of t)delete this.cache[e];this.size-=this.purgeSize}_updateHitRate(){const t=this.hits+this.misses;this.hitRate=this.hits/t*100}stats(){return{id:this.id,size:this.size,hits:this.hits,misses:this.misses,hitRate:this.hitRate}}}e.a=c,r()(c,"CLASS",()=>"CacheClass")},637:function(t,e,s){"use strict";var n=s(1),i=(s.n(n),s(2)),o=(s.n(i),s(279));const r=t=>({restrict:"A",link:function(e,s,n){let i=null;const r=angular.element(s)[0];(i=new o.a(function(s){for(const o of s)0!==o.intersectionRatio&&(t(n.whenVisible)(e),i.unobserve(r),i.disconnect())})).observe(r)}});e.a=r,r.$inject=["$parse"]},638:function(t,e,s){"use strict";(function(t){const s=e=>({restrict:"A",priority:-100,link:function(e,s,n){s.bind("click",e=>{t(document).trigger("_tracking.click",e)})}});e.a=s,s.$inject=["$rootScope","$compile","$animate"]}).call(e,s(4))},639:function(t,e,s){"use strict";var n=s(56),i=(s.n(n),s(0));const o=new class{getPreviousLine(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i.a.object(t),i.a.integer(e),Object(i.a)(e>=0),i.a.object(s);const n=void 0!==s.skipEmptyLines&&s.skipEmptyLines;if(i.a.boolean(n),!0!==n){const s=e-1;return s<0?null:{code:t.getLine(s),line:s}}{let s=null,n=e-1;for(;n>=0;){if(s=(s=t.getLine(n)).trim())return{code:s,line:n};n--}}}getNextLine(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i.a.object(t),i.a.integer(e),Object(i.a)(e>=0),i.a.object(s);const n=void 0!==s.skipEmptyLines&&s.skipEmptyLines;if(i.a.boolean(n),!0!==n){const s=e+1;return s>=t.lineCount()?null:{code:t.getLine(s),line:s}}{let s=null,n=e+1;const i=t.lineCount();for(;n<i;){if(s=(s=t.getLine(n)).trim())return{code:s,line:n};n++}}}};e.a=o},64:function(t,e,s){"use strict";(function(t){var n=s(1),i=(s.n(n),s(6)),o=(s.n(i),s(19)),r=(s.n(o),s(2)),a=(s.n(r),s(31)),c=s.n(a),l=s(3),d=s.n(l),u=s(322),h=(s.n(u),s(324)),g=(s.n(h),s(326)),p=(s.n(g),s(327),s(0)),b=s(30),m=s(99),f=s(287),y=s(635),v=s(637),_=s(638);let I=null,A=[];const w={},S={},E={},C={},x="global";const j=new class{constructor(){d()(this,"bootstrapped",!1)}isBootstrapped(){return!0===this.bootstrapped}async bootstrap(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(p.a.object(t),this.bootstrapped)return;this._createGlobalModule(t);const e=angular.module;angular.module=((t,s,n)=>t===x?this.globalModule:e(t,s,n)),await this._waitDocumentReady();const s=t.modules||[];angular.bootstrap(document,[x,...s]),this.bootstrapped=!0}async _waitDocumentReady(){return new Promise(t=>angular.element(document).ready(()=>t()))}_createGlobalModule(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};function e(e,s,n,i,o){b.a.isProduction()&&i.debugInfoEnabled(!1),!0===t.html5Mode&&e.html5Mode({enabled:!0,requireBase:!1}),Object(p.a)(m.a.isBootstrapped(),"must bootstrap redux before bootstrapping angular");const r=m.a.ensureStore();p.a.object(r);const a=r.getStore();p.a.object(a),o.provideStore(a),I._controller=I.controller,I._service=I.service,I._factory=I.factory,I._value=I.value,I._directive=I.directive,I.controller=function(t,e){return s.register(t,e),this},I.service=function(t,e){return n.service(t,e),this},I.factory=function(t,e){return n.factory(t,e),this},I.value=function(t,e){return n.value(t,e),this},I.directive=function(t,e){return i.directive(t,e),this},I.constant=function(t,e){return n.constant(t,e),this}}p.a.object(t),Object(p.a)(null===I,"tried to create global module twice"),e.$inject=["$locationProvider","$controllerProvider","$provide","$compileProvider","$ngReduxProvider"],(I=angular.module(x,["ngRedux","angular-bind-html-compile","ngSanitize"])).config(e),I.filter("translate",f.c),I.directive("translate",f.b),I.directive("lazySrc",y.a),I.directive("whenVisible",v.a),I.directive("ngClick",_.a);for(const t of A)t();return A=null,I}get globalModule(){return p.a.object(I,"tried to fetch global module before creating"),I}getInjector(){const t=angular.element(document).injector();return Object(p.a)(t,"angular injector is not available yet"),t}hasDependency(t){return this.getInjector().has(t)}getDependency(t){return this.getInjector().get(t)}isFilterRegistered(t){return p.a.string(t),void 0!==w[t]}isFilter(t){return t&&"function"==typeof t}registerFilter(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Object(p.a)(this.isFilter(t)),p.a.object(e),!1===this.isBootstrapped()&&!0!==e.force)return void A.push(()=>this.registerFilter(t,c()({},e,{force:!0})));const s=e.filterId;p.a.string(s),this.isFilterRegistered(s)||(this.globalModule.filter(s,t),w[s]=t)}unregisterFilter(t){Object(p.a)(this.isFilter(t))}isFactory(t){return t&&"function"==typeof t}isFactoryRegistered(t){return p.a.string(t),void 0!==S[t]}registerFactory(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Object(p.a)(this.isFactory(t)),p.a.object(e),!1===this.isBootstrapped()&&!0!==e.force)return void A.push(()=>this.registerFactory(t,c()({},e,{force:!0})));const s=e.factoryId;p.a.string(s),this.isFactoryRegistered(s)||(this.globalModule.factory(s,t),S[s]=t)}unregisterFactory(t){Object(p.a)(this.isFactory(t))}isDirective(t){return t&&"function"==typeof t}isDirectiveRegistered(t){return p.a.string(t),void 0!==E[t]}registerDirectiveController(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(p.a)(t),p.a.object(e);const s=t.__directive;p.a.function(s),this.registerDirective(s,e)}isControllerRegistered(t){return p.a.string(t),void 0!==C[t]}_registerController(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(p.a.function(t),p.a.object(e),!1===this.isBootstrapped()&&!0!==e.force)return void A.push(()=>this._registerController(t,c()({},e,{force:!0})));const s=e.controllerId;p.a.string(s),this.isControllerRegistered(s)||(this.globalModule.controller(s,t),C[s]=t)}registerDirective(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Object(p.a)(this.isDirective(t)),p.a.object(e),!1===this.isBootstrapped()&&!0!==e.force)return void A.push(()=>this.registerDirective(t,c()({},e,{force:!0})));const s=e.directiveId||this.directiveIdFromDirective(t);this.isDirectiveRegistered(s)||(this.globalModule.directive(s,t),E[s]=t)}unregisterDirective(t){Object(p.a)(this.isDirective(t));const e=this.directiveIdFromDirective(t);Object(p.a)(e);const s=this.elementsForDirectiveId(e);for(const t of s)this.destroyDirectiveElement(t)}destroyDirectiveElement(t){const e=this.scopeFromElement(t);Object(p.a)(e),this.destroyDirectiveScope(e),t.remove()}destroyDirectiveScope(t){Object(p.a)(t),t.$destroy()}deployDirectiveController(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(p.a)(t),p.a.object(e);const s=t.__directive;return p.a.function(s),this.deployDirective(s,e)}deployDirective(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(p.a)(this.isDirective(e)),p.a.object(s);const n=!0===s.softFailIfTargetNotAvailable;this.registerDirective(e);const i=this.directiveIdFromDirective(e);p.a.string(i),Object(p.a)(this.isDirectiveRegistered(i));const o=this.directiveSpecForDirective(e);p.a.object(o);let r=s.target||o._target;if(null==r)return null;const a="object"==typeof r?r.selector:r;p.a.string(a);const c=t(a);if(0===c.length&&!0===n)return null;Object(p.a)(c&&c.length>0,"cannot deploy directive '".concat(i,"', destination does not exist: ").concat(a));const l=this.tagFromDirectiveId(i);if(Object(p.a)(l),this.isDirectiveSingleton(e)){const t=this.elementsForDirectiveId(i);Object(p.a)(0===t.length,"singleton directive already exists in DOM: ".concat(i))}const d=void 0!==s.params?s.params:{};p.a.object(d);const u=this.getDependency("$rootScope"),h=this.getDependency("$compile")(l)(u);Object(p.a)(h);for(const[t,e]of Object.entries(d))h.data(t,e);let g="object"==typeof r?r.operation:null;if(null==g&&(g="append"),"append"===g)c.append(h);else{if("prepend"!==g)throw"unexpected directive target operation: ".concat(g);c.prepend(h)}return h}createDirectiveSpec(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=t.controller;Object(p.a)(e);const s=e.directiveId;Object(p.a)(s);const n=this,i=c()({controllerAs:"vm",restrict:"E",scope:{},directiveId:s,link(t,e,s,o){e.attr("data-angular-directive",!0),n.setScopeInElement(e,t),t.vm.element=e,t.vm.onLink(),t.vm.directiveSpec=i}},t);return i}scopeFromElement(e){return Object(p.a)(e),t(e).data("angular-scope")}setScopeInElement(t,e){Object(p.a)(t,e);const s=this.scopeFromElement(t);Object(p.a)(null==s),t.data("angular-scope",e)}tagNameFromDirectiveId(t){return p.a.string(t),t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}tagFromDirectiveId(t){p.a.string(t);const e=this.tagNameFromDirectiveId(t);return"<".concat(e,"></").concat(e,">")}directiveIdFromDirective(t){Object(p.a)(this.isDirective(t));const e=t();p.a.object(e);const s=e.directiveId;return p.a.string(s),s}elementsForDirectiveId(e){p.a.string(e);const s=this.tagNameFromDirectiveId(e),n=t(s),i=[];return n.each((e,s)=>{const n=t(s);null!=this.scopeFromElement(n)&&i.push(n)}),i}isDirectiveSingleton(t){Object(p.a)(this.isDirective(t));const e=t();return this.isDirectiveSpecSingleton(e)}isDirectiveSpecSingleton(t){return Object(p.a)(t),!1!==t._singleton}directiveSpecForDirective(t){return t()}removeDirectiveElement(t){this.destroyElementSubtreeDirectives(t);const e=this.scopeFromElement(t);e&&e.$destroy(),t.remove()}destroyElementSubtreeDirectives(e){e.find("[data-angular-directive]").each((e,s)=>{const n=t(s),i=this.scopeFromElement(n);i&&i.$destroy()})}};e.a=j,window.__AngularWrapper=j}).call(e,s(4))},640:function(t,e,s){"use strict";var n=s(641),i=(s.n(n),s(64)),o=s(643),r=s(644),a=s(647),c=s(651),l=s(654),d=s(662),u=s(667),h=s(670),g=s(673),p=s(676),b=s(679),m=s(682),f=s(683),y=s(684),v=s(685),_=s(687),I=s(704),A=s(713);i.a.registerDirective(o.a,{directiveId:"brambleIdeQuickdocs"}),i.a.registerDirective(r.a,{directiveId:"brambleIdeMenuOptions"}),i.a.registerDirective(c.a,{directiveId:"brambleIdeMenuPaintTool"}),i.a.registerDirective(a.a,{directiveId:"brambleIdeMenuSave"}),i.a.registerDirective(l.a,{directiveId:"brambleIdeMenuSnippets"}),i.a.registerDirective(d.a,{directiveId:"brambleIdeMenuMedia"}),i.a.registerDirective(u.a,{directiveId:"brambleIdeMenuMediaLibrary"}),i.a.registerDirective(h.a,{directiveId:"brambleIdeMenuDevice"}),i.a.registerDirective(g.a,{directiveId:"brambleIdeMenuPost"}),i.a.registerDirective(p.a,{directiveId:"brambleIdePreviewTabs"}),i.a.registerDirective(b.a,{directiveId:"brambleIdeInstructions"}),i.a.registerDirective(m.a,{directiveId:"brambleIdeComments"}),i.a.registerDirective(f.a,{directiveId:"brambleIdeLeaveDialog"}),i.a.registerDirective(y.a,{directiveId:"brambleIdeSelectiveAutoUpdate"}),i.a.registerDirective(_.a,{directiveId:"brambleIdeMicrobit"}),i.a.registerDirective(I.a,{directiveId:"brambleIdeHifive"}),i.a.registerFactory(v.a,{factoryId:"brambleIdeMenu"}),i.a.registerDirectiveController(A.a,{directiveId:"toolbarFeedsButton"})},641:function(t,e){},643:function(t,e,s){"use strict";(function(t){function s(){const e=this;e.init=function(t,e){!function(t){const e=t.getModule("thirdparty/CodeMirror/lib/codemirror"),s=t.getModule("command/CommandManager"),n=t.getModule("editor/EditorManager"),i=t.getModule("editor/PopoverWidget"),o=()=>{const t=n.getCurrentFullEditor(),o=t._codeMirror,r=t.getCursorPos(),a=o.charCoords(r),c={editor:t,content:"<span class='popover-help-icon'></span>",xpos:a.left,ytop:a.top,ybot:a.bottom,onClick:()=>{s.execute("navigate.toggleQuickDocs"),i.hide()}},l=o.getCursor(),d=o.getViewport();d.from=Math.min(d.from,l.line),d.to=Math.max(l.line+1,d.to);const u=e.findMatchingTag(o,l,d),h=!!u;h&&i.show(c)},r=()=>{const t=n.getCurrentFullEditor();if(!t)return;const e=t._codeMirror;e.off("cursorActivity",o),e.on("cursorActivity",o)};n.on("activeEditorChange",r),r()}(e)},t(document).on("bramble-ready",()=>{const t=window.bramble,s=window.brackets;e.init(t,s)})}e.a=function(){return{bindToController:{},controller:s,controllerAs:"vm",restrict:"E",scope:{}}},s.$inject=[]}).call(e,s(4))},644:function(t,e,s){"use strict";(function(t){e.a=function(){return{bindToController:{},controller:o,controllerAs:"vm",restrict:"E",scope:{},template:s(646)}};var n=s(17),i=(s.n(n),s(645));s.n(i);function o(e,s){const n=this;function i(e){brackets.getModule("preferences/PreferencesManager").get("loopProtect")?t("#loop-protect-toggle").addClass("switch-enabled"):t("#loop-protect-toggle").removeClass("switch-enabled"),t("#editor-option-loop-protect").click(()=>{const s=t("#loop-protect-toggle");return s.hasClass("switch-enabled")?(s.removeClass("switch-enabled"),e.disableLoopProtect()):(s.addClass("switch-enabled"),e.enableLoopProtect()),!1})}n.currentFileType=null,n.toggleMenu=function(){n.menu.toggle()},n.init=function(o,r){n.menu=s.init(t("#bramble-ide-menu-options"),t("#bramble-ide-menu-options-container")),function(e){const s=s=>{"light-theme"===s?(e.useLightTheme(),t("#editor-theme-light-button").addClass("is-active"),t("#editor-theme-dark-button").removeClass("is-active")):"dark-theme"===s&&(e.useDarkTheme(),t("#editor-theme-light-button").removeClass("is-active"),t("#editor-theme-dark-button").addClass("is-active"))};t("#editor-option-theme").click(()=>{"dark-theme"===e.getTheme()?s("light-theme"):s("dark-theme")}),"light-theme"===e.getTheme()?s("light-theme"):s("dark-theme")}(o),function(e){t("#editor-decrease-fontsize-button").click(()=>{e.decreaseFontSize()}),t("#editor-increase-fontsize-button").click(()=>{e.increaseFontSize()})}(o),function(e){const s=e=>{e?t("#wrap-lines-toggle").addClass("switch-enabled"):t("#wrap-lines-toggle").removeClass("switch-enabled")};t("#editor-option-wrap-long-lines").click(()=>((t=>{e[t?"enableWordWrap":"disableWordWrap"](()=>s(t))})(!e.getWordWrap()),!1)),s(e.getWordWrap())}(o),function(e){e.getAllowWhiteSpace()?t("#show-whitespace-toggle").addClass("switch-enabled"):t("#show-whitespace-toggle").removeClass("switch-enabled");t("#editor-option-show-whitespace").click(()=>{const s=t("#show-whitespace-toggle"),n=s.hasClass("switch-enabled");return n?(s.removeClass("switch-enabled"),e.disableWhiteSpace()):(s.addClass("switch-enabled"),e.enableWhiteSpace()),!1})}(o),function(e){(e.getAutoCloseTags()||{}).whenClosing?t("#auto-close-tags-toggle").addClass("switch-enabled"):t("#auto-close-tags-toggle").removeClass("switch-enabled");t("#editor-option-auto-close-tags").click(()=>{const s=t("#auto-close-tags-toggle"),n=s.hasClass("switch-enabled");return n?(s.removeClass("switch-enabled"),e.configureAutoCloseTags({whenOpening:!1,whenClosing:!1,indentTags:[]})):(s.addClass("switch-enabled"),e.configureAutoCloseTags({whenOpening:!0,whenClosing:!0,indentTags:[]})),!1})}(o),function(e){e.getOpenSVGasXML()?t("#edit-svg-toggle").addClass("switch-enabled"):t("#edit-svg-toggle").removeClass("switch-enabled");t("#editor-option-edit-svg").click(()=>{const s=t("#edit-svg-toggle"),n=!s.hasClass("switch-enabled");return n?(s.addClass("switch-enabled"),e.openSVGasXML()):(s.removeClass("switch-enabled"),e.openSVGasImage()),!1})}(o),i(o),function(t,s){const i=s.getModule("view/MainViewManager"),o=(s,i)=>{const o=i?i.name:t.getFilename();o&&(n.currentFileType=o.split(".").pop()),e.$evalAsync()};i.on("currentFileChange",o),o()}(o,r)},t(document).on("bramble-ready",()=>{const t=window.bramble,e=window.brackets;n.init(t,e)})}o.$inject=["$scope","brambleIdeMenu"]}).call(e,s(4))},645:function(t,e){},646:function(t,e){t.exports='<div class="bramble-ide-menu-options">\n    <a id="bramble-ide-menu-options" class="tool fa fa-cog" ng-click="vm.toggleMenu()" href="#"></a>\n\n    <div id="bramble-ide-menu-options-container" class="bramble-ide-menu is-closed">\n        <ul>\n            <li id="editor-option-theme">\n                <span>Theme</span>\n                <div class="bramble-ide-menu-buttons">\n                    <a id="editor-theme-dark-button" class="bramble-ide-menu-button fa fa-moon-o" href="#"></a>\n                    <a id="editor-theme-light-button" class="bramble-ide-menu-button fa fa-sun-o" href="#"></a>\n                </div>\n            </li>\n\n            <li>\n                <span>Font size</span>\n                <div class="bramble-ide-menu-buttons">\n                    <a id="editor-decrease-fontsize-button" class="bramble-ide-menu-button fa fa-minus" href="#"></a>\n                    <a id="editor-increase-fontsize-button" class="bramble-ide-menu-button fa fa-plus" href="#"></a>\n                </div>\n            </li>\n\n            <li id="editor-option-wrap-long-lines">\n                <span>Wrap long lines</span>\n                <div class="bramble-ide-menu-buttons switch-toggle switch-enabled" id="wrap-lines-toggle">\n                    <div class="toggle-backing"></div>\n                    <div class="toggle-button"></div>\n                </div>\n            </li>\n\n            <li id="editor-option-show-whitespace">\n                <span>Show whitespace</span>\n                <div class="bramble-ide-menu-buttons switch-toggle switch-enabled" id="show-whitespace-toggle">\n                    <div class="toggle-backing"></div>\n                    <div class="toggle-button"></div>\n                </div>\n            </li>\n\n            <li id="editor-option-edit-svg" ng-show="vm.currentFileType === \'svg\'">\n                <span>Edit SVG images as code</span>\n                <div class="bramble-ide-menu-buttons switch-toggle switch-enabled" id="edit-svg-toggle">\n                    <div class="toggle-backing"></div>\n                    <div class="toggle-button"></div>\n                </div>\n            </li>\n\n            <li id="editor-option-auto-close-tags" ng-show="vm.currentFileType === \'html\'">\n                <span>Auto close tags</span>\n                <div class="bramble-ide-menu-buttons switch-toggle switch-enabled" id="auto-close-tags-toggle">\n                    <div class="toggle-backing"></div>\n                    <div class="toggle-button"></div>\n                </div>\n            </li>\n\n            <li id="editor-option-loop-protect" ng-show="vm.currentFileType === \'html\' || vm.currentFileType === \'js\'">\n                <span>Loop Protection</span>\n                <div class="bramble-ide-menu-buttons switch-toggle switch-enabled" id="loop-protect-toggle">\n                    <div class="toggle-backing"></div>\n                    <div class="toggle-button"></div>\n                </div>\n            </li>\n        </ul>\n    </div>\n</div>\n'},647:function(t,e,s){"use strict";(function(t){e.a=function(){return{bindToController:{},controller:r,controllerAs:"vm",restrict:"E",scope:{},template:s(650)}};var n=s(648),i=(s.n(n),s(649)),o=s.n(i);function r(e,s){const n=this;n.currentFileType=null,n.init=function(e,i){const r=window.parent.document.getElementById("save-options"),a=t(r);n.menu=s.init(a,t("#bramble-ide-menu-save-container")),function(e){IDE.isAutoSaveEnabled()?t("#auto-save").addClass("switch-enabled"):t("#auto-save").removeClass("switch-enabled");t("#editor-option-auto-save").click(()=>{const e=t("#auto-save"),s=!e.hasClass("switch-enabled");return s?(e.addClass("switch-enabled"),IDE.setAutoSave(!0)):(e.removeClass("switch-enabled"),IDE.setAutoSave(!1)),!1})}(),function(e,s){IDE.isAutoSaveEnabled()?t("#save-as").addClass("switch-enabled"):t("#save-as").removeClass("switch-enabled");t("#editor-option-save-as").click(()=>{n.menu.close();const t=s.getModule("widgets/Dialogs"),e=o.a,i=(document.getElementById(n.PROJECT_NAME_INPUT_ID),t.showModalDialogUsingTemplate(e,!0)),r=i.getElement().find("#".concat(n.PROJECT_NAME_INPUT_ID));let a;return r.on("keyup",t=>{a=t.target.value}),i.done(t=>{t===n.SAVE_BUTTON_ID&&a&&IDE.saveProjectAs(a)}),!1})}(0,i),a.on("click",t=>{n.menu.toggle()})},n.SAVE_BUTTON_ID="save-dialog-save",n.PROJECT_NAME_INPUT_ID="save-dialog-project-name",t(document).on("bramble-ready",()=>{const t=window.bramble,e=window.brackets;n.IDE=window.IDE,n.init(t,e)})}r.$inject=["$scope","brambleIdeMenu"]}).call(e,s(4))},648:function(t,e){},649:function(t,e){t.exports='<div class="template modal">\n    <div class="modal-dialog modal-lg" role="document">\n        <div class="modal-header">\n            <h1 class="dialog-title" id="dialog-title">Save as</h1>\n        </div>\n        <div class="modal-body modal-save-as">\n            <div class="dialog-message"><label for="project-name">Project Name</label></div>\n            <input id="save-dialog-project-name" name="project-name" class="project-name" type="text" />\n        </div>\n        <div class="modal-footer">\n            <button class="dialog-button btn " data-button-id="save-dialog-cancel">Cancel</button>\n            <button class="dialog-button btn primary" data-button-id="save-dialog-save">Save</button>\n        </div>\n    </div>\n</div>\n'},650:function(t,e){t.exports='<div class="bramble-ide-menu-save">\n    <div id="bramble-ide-menu-save-container" class="bramble-ide-menu is-closed">\n        <ul>\n            <li id="editor-option-save-as" class="option-link">\n                <span>Save as...</span>\n            </li>\n            <li id="editor-option-auto-save">\n                <span>Auto save</span>\n                <div  class="bramble-ide-menu-buttons switch-toggle switch-enabled" id="auto-save">\n                    <div class="toggle-backing"></div>\n                    <div class="toggle-button"></div>\n                </div>\n            </li>\n        </ul>\n    </div>\n</div>\n'},651:function(t,e,s){"use strict";(function(t){e.a=function(){return{bindToController:{},controller:o,controllerAs:"vm",restrict:"E",scope:{},template:s(653)}};var n=s(6),i=(s.n(n),s(652));s.n(i);function o(){const e=this;e.init=function(){},e.showPaintTool=async function(){const t=await window.__ExtensionManager.enable("extension-paint");window.__ReduxWrapper.put(t.extensionActions.createActor())},t(document).on("bramble-ready",()=>{e.Bramble=window.Bramble,e.bramble=window.bramble,e.brackets=window.brackets,e.projectId=t("#editor").attr("data-project-id"),e.IDE=window.IDE,e.init()})}o.$inject=[]}).call(e,s(4))},652:function(t,e){},653:function(t,e){t.exports='<div class="bramble-ide-menu-paint-tool">\n    <a id="bramble-ide-menu-paint-tool" class="tool fa fa-picture-o" href="#" ng-click="vm.showPaintTool()"></a>\n</div>\n'},654:function(t,e,s){"use strict";(function(t){e.a=function(){return{bindToController:{},controller:a,controllerAs:"vm",restrict:"E",scope:{},template:s(661)}};var n=s(655),i=(s.n(n),s(656)),o=s(657),r=s(110);function a(e,s){const n=this;n.init=function(o,a){n.menu=s.init(t("#bramble-ide-menu-snippets"),t(".bramble-ide-menu-snippets-container")),function(t){const s=t.getModule("editor/EditorManager"),o=()=>{const t=s.getCurrentFullEditor();if(!t)return;const o=t.getFile();if(!o)return;let a;a=-1!==o.name.indexOf(".py")?t=>"python"===t.type||r.c&&"micropython"===t.type:t=>"python"!==t.type&&"micropython"!==t.type,n.categories=i.a.filter(a),n.activeCategoryType=n.categories[0].type,n.activeSnippetId=n.snippets.filter(a)[0].id,e.$evalAsync()};s.on("activeEditorChange",o),o()}(a)},n.selectCategory=function(t){n.activeCategoryType=t.type,n.activeSnippetId=n.snippets.filter(t=>t.type===n.activeCategoryType)[0].id},n.selectSnippet=function(t){n.activeSnippetId=t.id},n.insertSnippet=function(t){bramble.addCodeSnippet(t.code),n.menu.close()},n.toggleMenu=function(){n.menu.toggle()},n.categories=i.a,n.snippets=o.a,n.activeCategoryType=n.categories[0].type,n.activeSnippetId=n.snippets[0].id,t(document).on("bramble-ready",()=>{const t=window.bramble,e=window.brackets;n.init(t,e)})}a.$inject=["$scope","brambleIdeMenu"]}).call(e,s(4))},655:function(t,e){},656:function(t,e,s){"use strict";e.a=[{type:"python",label:"Python"},{type:"micropython",label:"MicroPython"},{type:"html",label:"HTML"},{type:"css",label:"CSS"},{type:"js",label:"JS"}]},657:function(t,e,s){"use strict";var n=s(183),i=s.n(n),o=s(658),r=s.n(o);function a(){const t=i()(["\n            pin0.is_touched()\n            pin1.is_touched()\n            pin2.is_touched()\n        "]);return a=function(){return t},t}function c(){const t=i()(["\n            pin0.write_digital()\n            pin1.write_digital()\n            pin2.write_digital()\n        "]);return c=function(){return t},t}function l(){const t=i()(["\n            pin0.read_digital()\n            pin1.read_digital()\n            pin2.read_digital()\n        "]);return l=function(){return t},t}function d(){const t=i()(["\n            music.pitch(422)\n        "]);return d=function(){return t},t}function u(){const t=i()(["\n            music.play('d#4:2')\n        "]);return u=function(){return t},t}function h(){const t=i()(["\n            import music\n        "]);return h=function(){return t},t}function g(){const t=i()(["\n            radio.receive_full()\n        "]);return g=function(){return t},t}function p(){const t=i()(["\n            radio.receive()\n        "]);return p=function(){return t},t}function b(){const t=i()(["\n            radio.send('Hello!')\n        "]);return b=function(){return t},t}function m(){const t=i()(["\n            radio.on()\n        "]);return m=function(){return t},t}function f(){const t=i()(["\n            import radio\n        "]);return f=function(){return t},t}function y(){const t=i()(["\n            compass.heading()\n        "]);return y=function(){return t},t}function v(){const t=i()(["\n            compass.calibrate()\n        "]);return v=function(){return t},t}function _(){const t=i()(["\n            accelerometer.current_gesture()\n        "]);return _=function(){return t},t}function I(){const t=i()(["\n            accelerometer.get_x()\n            accelerometer.get_y()\n            accelerometer.get_z()\n        "]);return I=function(){return t},t}function A(){const t=i()(["\n            reset()\n        "]);return A=function(){return t},t}function w(){const t=i()(["\n            temperature()\n        "]);return w=function(){return t},t}function S(){const t=i()(["\n            sleep(100)\n        "]);return S=function(){return t},t}function E(){const t=i()(["\n            button_a.was_pressed()\n            button_b.was_pressed()\n        "]);return E=function(){return t},t}function C(){const t=i()(["\n            button_a.is_pressed()\n            button_b.is_pressed()\n        "]);return C=function(){return t},t}function x(){const t=i()(["\n            display.clear()\n        "]);return x=function(){return t},t}function j(){const t=i()(['\n            display.show(Image("09090:09090:00000:90009:09990"))\n        ']);return j=function(){return t},t}function O(){const t=i()(["\n            display.show(9)\n        "]);return O=function(){return t},t}function D(){const t=i()(['\n            display.show("Hello, World!")\n        ']);return D=function(){return t},t}function T(){const t=i()(['\n            display.scroll("Hello, World!")\n        ']);return T=function(){return t},t}function M(){const t=i()(['\n            var myButton = document.querySelector("#myButton");\n\n            myButton.addEventListener("click", function() {\n                console.log("You clicked!");\n            });\n        ']);return M=function(){return t},t}function F(){const t=i()(['\n            var myHeader = document.querySelector("#myHeader");\n            myHeader.style.backgroundColor = "salmon";\n        ']);return F=function(){return t},t}function L(){const t=i()(['\n            function display(name) {\n                console.log("Hello, " + name);\n            }\n\n            display("John");\n        ']);return L=function(){return t},t}function N(){const t=i()(["\n            var i = 1;\n\n            while (i <= 10) {\n                console.log(i);\n                i = i + 1;\n            }\n        "]);return N=function(){return t},t}function k(){const t=i()(['\n            var colors = ["red", "blue", "green", "yellow"];\n            var color;\n\n            for (var i = 0; i < colors.length; i++) {\n                color = colors[i];\n                console.log(color);\n            }\n        ']);return k=function(){return t},t}function P(){const t=i()(['\n            var name = "John";\n\n            switch(name) {\n                case "John":\n                    console.log("Hello, " + name);\n                    break;\n                case "Mary":\n                    console.log("Welcome, " + name);\n                    break;\n                default:\n                    // Do something if no condition was met\n                    console.log("Hello, stranger!");\n            }\n        ']);return P=function(){return t},t}function R(){const t=i()(['\n            var name = "John";\n\n            if (name === "John") {\n                console.log("Hello, " + name);\n            } else if (name === "Mary") {\n                console.log("Welcome, " + name);\n            } else {\n                console.log("Hello, stranger!");\n            }\n        ']);return R=function(){return t},t}function B(){const t=i()(['\n            var student = {\n                name: "John",\n                grade: 89\n            };\n        ']);return B=function(){return t},t}function U(){const t=i()(['\n            var colors = ["red", "blue", "green", "yellow"];\n        ']);return U=function(){return t},t}function W(){const t=i()(["\n            // This is a comment\n        "]);return W=function(){return t},t}function H(){const t=i()(["\n            .animated {\n                animation-name: myAnimation;\n                animation-duration: 2s;\n                animation-iteration-count: infinite;\n            }\n\n            @keyframes myAnimation {\n                0% { background-color: red; }\n                50% { background-color: orange; }\n                100% { background-color: yellow; }\n            }\n        "]);return H=function(){return t},t}function G(){const t=i()(["\n            @media screen and (max-width: 360px) {\n                /* My styles for small screens (like smartphones) */\n            }\n\n            @media screen and (min-width: 361px) and (max-width: 1020px) {\n                /* My styles for medium screens (like tablets) */\n            }\n\n            @media screen and (min-width: 1021px) {\n                /* My styles for large screens (like desktops) */\n            }\n        "]);return G=function(){return t},t}function V(){const t=i()(["\n            /* Normal */\n            a:link {\n                color: blue;\n                text-decoration: underline;\n            }\n\n            /* Visited */\n            a:visited {\n                color: violet;\n                text-decoration: none;\n            }\n\n            /* Hovered */\n            a:hover {\n                color: pink;\n            }\n        "]);return V=function(){return t},t}function $(){const t=i()(["\n            #myId {\n                background-color: purple;\n            }\n        "]);return $=function(){return t},t}function z(){const t=i()(["\n            .myClass {\n                background-color: cyan;\n            }\n        "]);return z=function(){return t},t}function q(){const t=i()(["\n            p {\n                font-size: 40px;\n            }\n        "]);return q=function(){return t},t}function J(){const t=i()(["\n            /* This is a comment */\n        "]);return J=function(){return t},t}function Y(){const t=i()(['\n            <audio>\n                <source src="audio.mp3" type="audio/mpeg">\n            </audio>\n        ']);return Y=function(){return t},t}function Q(){const t=i()(['\n            <video width="320" height="240">\n                <source src="video.mp4" type="video/mp4">\n            </video>\n        ']);return Q=function(){return t},t}function X(){const t=i()(['\n            \x3c!-- Add this tag to your HTML file inside the <head> tag --\x3e\n            <link href="style.css" rel="stylesheet">\n        ']);return X=function(){return t},t}function K(){const t=i()(['\n            \x3c!-- Add this tag to your HTML file above the </body> tag --\x3e\n            <script src="script.js"><\/script>\n        ']);return K=function(){return t},t}function Z(){const t=i()(["\n            <ul>\n                <li>Apples</li>\n                <li>Oranges</li>\n                <li>Bananas</li>\n            </ul>\n        "]);return Z=function(){return t},t}function tt(){const t=i()(["\n            <ol>\n                <li>First item</li>\n                <li>Second item</li>\n                <li>Third item</li>\n            </ol>\n        "]);return tt=function(){return t},t}function et(){const t=i()(["\n            <table>\n              <tr>\n                <th>Name</th>\n                <th>Age</th>\n              </tr>\n              <tr>\n                <td>John</td>\n                <td>12</td>\n              </tr>\n              <tr>\n                <td>Mary</td>\n                <td>14</td>\n              </tr>\n            </table>\n        "]);return et=function(){return t},t}function st(){const t=i()(['\n            import turtle\n\n            spiral = turtle.Turtle()\n            spiral.pencolor("blue")\n\n            for i in range(40):\n              spiral.forward(i * 10)\n              spiral.right(144)\n\n            turtle.done()\n        ']);return st=function(){return t},t}function nt(){const t=i()(['\n            answer = input("Enter a number: ")\n            if answer < 4:\n               print("too small")\n            elif answer > 10:\n                print("too big")\n            else:\n                print("just right")\n        ']);return nt=function(){return t},t}function it(){const t=i()(['\n            if age < 18:\n                print("child")\n            else:\n                print("adult")\n        ']);return it=function(){return t},t}function ot(){const t=i()(['\n            if age < 18 :\n                print("child")\n        ']);return ot=function(){return t},t}function rt(){const t=i()(["\n            i = 1\n            # This for loop prints from 1 to 10\n            while i <= 10:\n                print(i)\n                i += 1\n        "]);return rt=function(){return t},t}function at(){const t=i()(['\n            colors = ["red", "blue", "green", "yellow"]\n            for color in colors:\n                print(color)\n        ']);return at=function(){return t},t}function ct(){const t=i()(["\n            # This for loop prints from 0 to 9\n            for i in range(10):\n                print(i)\n        "]);return ct=function(){return t},t}function lt(){const t=i()(['\n            student =  { "name" : "john", "grade" : 89 }\n            print(student["name"])\n        ']);return lt=function(){return t},t}function dt(){const t=i()(['\n            def display(name):\n              print("Hello, " + name)\n\n            display("John")\n        ']);return dt=function(){return t},t}function ut(){const t=i()(["\n            '''\n               Multi line comments\n               Add more lines here\n            '''\n        "]);return ut=function(){return t},t}const ht=[{type:"python",id:"python-print",label:"Print",code:'print("Hello, World!")'},{type:"python",id:"python-comment",label:"Comment",code:"# This is a comment"},{type:"python",id:"python-multiline-comment",label:"Multi line comment",code:r()(ut())},{type:"python",id:"python-input",label:"Input",code:'age = input("How old are you? ")'},{type:"python",id:"python-basic-function",label:"Basic Function",code:r()(dt())},{type:"python",id:"python-list",label:"List",code:'colors = ["red", "blue", "green", "yellow"]'},{type:"python",id:"python-dictionary",label:"Dictionary",code:r()(lt())},{type:"python",id:"python-for-loop-with-numbers",label:"For Loop with numbers",code:r()(ct())},{type:"python",id:"python-for-loop-with-lists",label:"For Loop with lists",code:r()(at())},{type:"python",id:"python-while-loop",label:"While loop",code:r()(rt())},{type:"python",id:"python-if",label:"If",code:r()(ot())},{type:"python",id:"python-if-else",label:"If Else",code:r()(it())},{type:"python",id:"python-If-elif-else",label:"If Elif Else",code:r()(nt())},{type:"python",id:"python-turtle-example",label:"Turtle example",code:r()(st())},{type:"html",id:"html-comment",label:"Comment",code:"\x3c!-- This is a comment --\x3e"},{type:"html",id:"html-table",label:"Table",code:r()(et())},{type:"html",id:"html-ordered-list",label:"Ordered List",code:r()(tt())},{type:"html",id:"html-unordered-list",label:"Unordered List",code:r()(Z())},{type:"html",id:"html-script",label:"Include a JavaScript file",code:r()(K())},{type:"html",id:"html-external-stylesheet",label:"Include a CSS file",code:r()(X())},{type:"html",id:"html-video",label:"Video Player",code:r()(Q())},{type:"html",id:"html-audio",label:"Audio Player",code:r()(Y())},{type:"css",id:"css-comment",label:"Comment",code:r()(J())},{type:"css",id:"css-tag-name-selector",label:"Element Type Selector",code:r()(q())},{type:"css",id:"css-class-selector",label:"Class Selector",code:r()(z())},{type:"css",id:"css-id-selector",label:"ID Selector",code:r()($())},{type:"css",id:"css-link-styling",label:"Link Styles",code:r()(V())},{type:"css",id:"css-media-queries",label:"Media Queries",code:r()(G())},{type:"css",id:"css-kfa",label:"Keyframe Animation",code:r()(H())},{type:"js",id:"js-comment",label:"Comment",code:r()(W())},{type:"js",id:"js-array",label:"Array",code:r()(U())},{type:"js",id:"js-object",label:"Object",code:r()(B())},{type:"js",id:"js-if-else",label:"If Else Statement",code:r()(R())},{type:"js",id:"js-switch",label:"Switch Statement",code:r()(P())},{type:"js",id:"js-for-loop",label:"For Loop",code:r()(k())},{type:"js",id:"js-while-loop",label:"While Loop",code:r()(N())},{type:"js",id:"js-empty-function",label:"A Basic Function",code:r()(L())},{type:"js",id:"js-change-style",label:"Change CSS Property",code:r()(F())},{type:"js",id:"js-click-handler",label:"Add a Click Event",code:r()(M())},{type:"micropython",id:"mpy-microbit",label:"Micro:bit"},{type:"micropython",id:"mpy-display",label:"Display"},{type:"micropython",id:"mpy-buttons",label:"Buttons"},{type:"micropython",id:"mpy-temperature",label:"Temperature"},{type:"micropython",id:"mpy-accelerometer",label:"Accelerometer"},{type:"micropython",id:"mpy-compass",label:"Compass"},{type:"micropython",id:"mpy-radio",label:"Radio"},{type:"micropython",id:"mpy-music",label:"Music"},{type:"micropython",id:"mpy-io-pins",label:"I/O Pins"},{type:"micropython",id:"mpy-scroll-text",groupId:"mpy-display",label:"Scroll Text",code:r()(T())},{type:"micropython",id:"mpy-show-text",groupId:"mpy-display",label:"Show Text",code:r()(D())},{type:"micropython",id:"mpy-show-number",groupId:"mpy-display",label:"Show a Number",code:r()(O())},{type:"micropython",id:"mpy-show-image",groupId:"mpy-display",label:"Show an Image",code:r()(j())},{type:"micropython",id:"mpy-clear-display",groupId:"mpy-display",label:"Clear Display",code:r()(x())},{type:"micropython",id:"mpy-check-if-button-is-currently-pressed",groupId:"mpy-buttons",label:"Check if Button is currently pressed",code:r()(C())},{type:"micropython",id:"mpy-check-if-button-was-pressed-before",groupId:"mpy-buttons",label:"Check if Button was pressed before",code:r()(E())},{type:"micropython",id:"mpy-pause-code",groupId:"mpy-microbit",label:"Pause code",code:r()(S())},{type:"micropython",id:"mpy-get-temperature",groupId:"mpy-temperature",label:"Get Temperature",code:r()(w())},{type:"micropython",id:"mpy-restart-the-microbit",groupId:"mpy-microbit",label:"Restart the micro:bit",code:r()(A())},{type:"micropython",id:"mpy-get-accelerometer-values",groupId:"mpy-accelerometer",label:"Get Accelerometer Values",code:r()(I())},{type:"micropython",id:"mpy-get-accelerometer-gesture",groupId:"mpy-accelerometer",label:"Get Accelerometer Gesture",code:r()(_())},{type:"micropython",id:"mpy-calibrate-compass",groupId:"mpy-compass",label:"Calibrate Compass",code:r()(v())},{type:"micropython",id:"mpy-get-compass-heading-direction",groupId:"mpy-compass",label:"Get Compass Heading/Direction",code:r()(y())},{type:"micropython",id:"mpy-import-the-radio-library",groupId:"mpy-radio",label:"Import the radio library",code:r()(f())},{type:"micropython",id:"mpy-turn-on-radio",groupId:"mpy-radio",label:"Turn on Radio",code:r()(m())},{type:"micropython",id:"mpy-send-message-with-radio",groupId:"mpy-radio",label:"Send Message with Radio",code:r()(b())},{type:"micropython",id:"mpy-get-received-message-from-radio",groupId:"mpy-radio",label:"Get Received Message from Radio",code:r()(p())},{type:"micropython",id:"mpy-get-full-received-message",groupId:"mpy-radio",label:"Get Full Received Message",code:r()(g())},{type:"micropython",id:"mpy-import-the-music-library",groupId:"mpy-music",label:"Import the music library",code:r()(h())},{type:"micropython",id:"mpy-play-a-musical-note",groupId:"mpy-music",label:"Play a Musical Note",code:r()(u())},{type:"micropython",id:"mpy-play-a-certain-frequency",groupId:"mpy-music",label:"Play a Certain Frequency",code:r()(d())},{type:"micropython",id:"mpy-check-if-current-is-flowing-in-pin",groupId:"mpy-io-pins",label:"Check if current is flowing in pin",code:r()(l())},{type:"micropython",id:"mpy-send-a-current-to-a-pin",groupId:"mpy-io-pins",label:"Send a current to a pin",code:r()(c())},{type:"micropython",id:"mpy-detect-if-a-pin-is-being-touched",groupId:"mpy-io-pins",label:"Detect if a pin is being touched",code:r()(a())}];e.a=ht},661:function(t,e){t.exports='<div class="bramble-ide-menu-snippets">\n    <a id="bramble-ide-menu-snippets" class="tool fa fa-code" ng-click="vm.toggleMenu()" href="#"></a>\n\n    <div class="bramble-ide-menu-snippets-container bramble-ide-menu is-closed">\n        <div class="bramble-ide-menu-snippets-content">\n            <header>\n                <h2 class="snippets-menu-title">Code Snippets</h2>\n                <div class="snippets-categories">\n                    <span ng-repeat="category in vm.categories" data-type="{{category.type}}"\n                        ng-class="{active: category.type === vm.activeCategoryType}"\n                        ng-click="vm.selectCategory(category)">\n                            {{category.label}}\n                    </span>\n                </div>\n            </header>\n\n            <div class="snippets">\n                <ul class="snippets-list">\n                    <li ng-repeat="snippet in vm.snippets" data-type="{{snippet.type}}" data-snippet-id="{{snippet.id}}"\n                        ng-class="{selected: snippet.id === vm.activeSnippetId, \'is-hidden\': snippet.type !== vm.activeCategoryType || snippet.groupId}"\n                        ng-click="vm.selectSnippet(snippet)">\n                            {{snippet.label}}\n                    </li>\n                </ul>\n\n                <div class="snippets-preview-pane">\n                    <div ng-repeat="snippet in vm.snippets" data-type="{{snippet.type}}"\n                         data-snippet-id="{{snippet.id}}" class="snippets-preview"\n                         ng-class="{\'is-hidden\': !snippet.code || (snippet.id !== vm.activeSnippetId && snippet.groupId !== vm.activeSnippetId)}">\n                            <strong class="snippets-preview-pane-label" ng-if="snippet.groupId">{{snippet.label}}</strong>\n                            <pre>{{snippet.code}}</pre>\n                            <button class="snippets-insert-button" ng-click="vm.insertSnippet(snippet)">Insert</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'},662:function(t,e,s){"use strict";(function(t){e.a=function(){return{bindToController:{},controller:r,controllerAs:"vm",restrict:"E",scope:{},template:s(666)}};var n=s(663),i=(s.n(n),s(664)),o=s(665);function r(e,s){const n=this,r="project";n.init=function(){n.FileSystem=n.Bramble.getFileSystem(),n.FilerUtils=n.brackets.getModule("filesystem/impls/filer/FilerUtils"),n.mimeFromExt=n.brackets.getModule("filesystem/impls/filer/lib/content").mimeFromExt,n.FileSystemCache=n.brackets.getModule("filesystem/impls/filer/FileSystemCache"),n.ProjectManager=n.brackets.getModule("project/ProjectManager"),n.menu=s.init(t("#bramble-ide-menu-media"),t(".bramble-ide-menu-media-container"))},n.toggleMenu=function(){n.menu.toggle()},n.handleMediaClick=function(t){const s="/".concat(r,"/").concat(n.projectId,"/").concat(t.name),i=i=>{!function(t,e,s){n.FileSystem.writeFile(t,e,{encoding:null},t=>{if(t)return console.error("[Bramble] Failed to write image to filesystem with: ",t);n.FileSystemCache.refresh(t=>{if(t)return console.error("[Bramble] Failed to refresh filesystem cache with: ",t);n.ProjectManager.refreshFileTree(),console.log("[Bramble] New media file written successfully"),s()})})}(s,i,()=>{e(()=>{t.loading=!1,n.IDE.setDirty(!0)})})};switch(t.type){case"audio":return function(t,e){(new(window.AudioContext||window.webkitAudioContext)).createBufferSource();var s=new XMLHttpRequest;s.open("GET",t.src,!0),s.responseType="blob",s.onload=(()=>{const t=s.response,i=new FileReader,o=/base64,(.+)/;i.readAsDataURL(t),i.onloadend=(()=>{const t=i.result,s=n.FilerUtils.base64ToBuffer(o.exec(t)[1]);e(s)})}),t.loading=!0,s.send()}(t,i);default:return function(t,e){const s=n.mimeFromExt(n.Bramble.Filer.Path.extname(t.name)),i=/base64,(.+)/,o=new Image,r=document.createElement("canvas"),a=r.getContext("2d");o.onload=(()=>{r.width=o.width,r.height=o.height,a.drawImage(o,0,0);const t=r.toDataURL(s),c=n.FilerUtils.base64ToBuffer(i.exec(t)[1]);e(c)}),t.loading=!0,o.crossOrigin="anonymous",o.src=t.src}(t,i)}},n.selectCategory=function(t){n.activeCategoryId=t.id},n.media=i.a,n.categories=o.a,n.activeCategoryId=o.a[0].id,t(document).on("bramble-ready",()=>{n.Bramble=window.Bramble,n.bramble=window.bramble,n.brackets=window.brackets,n.projectId=t("#editor").attr("data-project-id"),n.IDE=window.IDE,n.init()})}r.$inject=["$timeout","brambleIdeMenu"]}).call(e,s(4))},663:function(t,e){},664:function(t,e,s){"use strict";var n=s(1),i=(s.n(n),s(2));s.n(i);const o="https://images.tynker.com/code-editor/media-library",r=[...["aerial","buildings","buildings-2","cactus","cave","city-lights","desert","forest","glass","marble-macro","underwater","universe","urban","western","winter","thailand","tree-sunset","river","boat-in-water","lake-and-mountains","kitty-summer","max-playing","max-winter","chocolates","dog-reading","rainy-day","snowboard","bird-1","bird-2","bird-3","bird-4","bird-5","bird-6"].map(t=>({name:"".concat(t,".jpg"),src:"".concat(o,"/photos/").concat(t,".jpg"),thumbSrc:"".concat(o,"/photos/").concat(t,"-thumbnail.jpg"),category:"photos",type:"image"})),...["texture1","texture2","texture3","texture4","texture5","texture6","texture7","texture8","texture9","texture10"].map(t=>({name:"".concat(t,".jpg"),src:"".concat(o,"/textures/").concat(t,".jpg"),thumbSrc:"".concat(o,"/textures/").concat(t,"-thumbnail.jpg"),category:"textures",type:"image"})),...["gradient1","gradient2","gradient3","gradient4","gradient5","gradient6","gradient7"].map(t=>({name:"".concat(t,".jpg"),src:"".concat(o,"/gradients/").concat(t,".jpg"),thumbSrc:"".concat(o,"/gradients/").concat(t,"-thumbnail.jpg"),category:"gradients",type:"image"})),...["grass","gravel","rock","water","tree","mage"].map(t=>({name:"".concat(t,".png"),src:"".concat(o,"/miscellaneous/").concat(t,".png"),thumbSrc:"".concat(o,"/miscellaneous/").concat(t,".png?thumb"),category:"miscellaneous",type:"image"}))];e.a=r},665:function(t,e,s){"use strict";e.a=[{id:"photos",label:"Photos"},{id:"textures",label:"Textures"},{id:"gradients",label:"Gradients"},{id:"miscellaneous",label:"Miscellaneous"}]},666:function(t,e){t.exports='<div class="bramble-ide-menu-media">\n    <a id="bramble-ide-menu-media" class="tool fa fa-picture-o" ng-click="vm.toggleMenu()" href="#"></a>\n\n    <div class="bramble-ide-menu-media-container bramble-ide-menu is-closed">\n        <div class="bramble-ide-menu-media-content">\n            <header class="bramble-ide-menu-media-header">\n                <h2 class="bramble-ide-menu-media-title">Media Library</h2>\n            </header>\n\n            <div class="bramble-ide-menu-media-main">\n                <ul class="bramble-ide-menu-media-main-list">\n                    <li ng-repeat="category in vm.categories" ng-click="vm.selectCategory(category)"\n                        ng-class="{selected: category.id === vm.activeCategoryId}">\n                        {{ category.label }}\n                    </li>\n                </ul>\n\n                <ul class="bramble-ide-menu-media-main-preview">\n                    <li ng-repeat="media in vm.media"\n                        class="is-{{media.type}}"\n                        title="{{media.name}}"\n                        ng-class="{\'is-hidden\': media.category !== vm.activeCategoryId, \'is-loading\': media.loading}"\n                        ng-style="{\'background-image\': media.type == \'image\' ? \'url({{ media.thumbSrc || media.src }})\' : \'\'}"\n                        ng-click="vm.handleMediaClick(media)">\n                    </li>\n                </ul>\n            </div>\n        </div>\n    </div>\n</div>\n'},667:function(t,e,s){"use strict";(function(t){e.a=function(){return{bindToController:{},controller:o,controllerAs:"vm",restrict:"E",scope:{},template:s(669)}};var n=s(6),i=(s.n(n),s(668));s.n(i);function o(){const e=this;e.init=function(){},e.showMediaLibrary=async function(){const t=await window.__ExtensionManager.enable("extension-media-library");window.__ReduxWrapper.put(t.ModalMediaLibraryActions.showAddActor())},t(document).on("bramble-ready",()=>{e.Bramble=window.Bramble,e.bramble=window.bramble,e.brackets=window.brackets,e.projectId=t("#editor").attr("data-project-id"),e.IDE=window.IDE,e.init()})}o.$inject=[]}).call(e,s(4))},668:function(t,e){},669:function(t,e){t.exports='<div class="bramble-ide-menu-media-library">\n    <a id="bramble-ide-menu-media-library" class="tool fa fa-picture-o" href="#" ng-click="vm.showMediaLibrary()"></a>\n</div>\n'},670:function(t,e,s){"use strict";(function(t){e.a=function(){return{bindToController:{},controller:i,controllerAs:"vm",restrict:"E",scope:{},template:s(672)}};var n=s(671);s.n(n);function i(e){const s=this,n={desktop:"desktop",mobile:"mobile"};function i(t){t===n.mobile?bramble.useMobilePreview():"desktop"===t&&bramble.useDesktopPreview(),s.activeMode=t}s.MODES=n,s.showButtons=!1,s.activeMode=null,s.init=function(t,o){!function(t,o){const r=o.getModule("editor/EditorManager"),a=()=>{const o=r.getCurrentFullEditor();if(!o)return;const a=o.getFile();a&&(-1===a.name.indexOf(".html")||t.getTutorialVisible()?(i(n.desktop),s.showButtons=!1):t.getPreviewMode()&&(i(t.getPreviewMode()),s.showButtons=!0),e.$evalAsync())};r.on("activeEditorChange",a),t.on("tutorialVisibilityChange",a),a()}(t,o)},s.activateMode=i,t(document).on("bramble-ready",()=>{const t=window.bramble,e=window.brackets;s.init(t,e)})}i.$inject=["$scope"]}).call(e,s(4))},671:function(t,e){},672:function(t,e){t.exports='<div class="bramble-ide-menu-device">\n    <div class="bramble-ide-menu-device-buttons" ng-show="vm.showButtons">\n        <a id="preview-pane-nav-desktop" class="bramble-ide-menu-device-button fa fa-desktop"\n           ng-class="{\'is-inactive\': vm.activeMode !== vm.MODES.desktop}"\n           ng-click="vm.activateMode(vm.MODES.desktop)" href="#"></a>\n        <a id="preview-pane-nav-mobile" class="bramble-ide-menu-device-button fa fa-mobile"\n           ng-class="{\'is-inactive\': vm.activeMode !== vm.MODES.mobile}"\n           ng-click="vm.activateMode(vm.MODES.mobile)" href="#"></a>\n    </div>\n</div>'},673:function(t,e,s){"use strict";(function(t){e.a=function(){return{bindToController:{},controller:i,controllerAs:"vm",restrict:"E",scope:{},template:s(675)}};var n=s(674);s.n(n);function i(){const e=this;e.init=function(){},e.copy=function(){window.__highlightLines()},t(document).on("bramble-ready",()=>{e.Bramble=window.Bramble,e.bramble=window.bramble,e.brackets=window.brackets,e.projectId=t("#editor").attr("data-project-id"),e.IDE=window.IDE,e.init()})}i.$inject=[]}).call(e,s(4))},674:function(t,e){},675:function(t,e){t.exports='<div class="bramble-ide-menu-post">\n    <a id="bramble-ide-menu-post" class="tool fa fa-clipboard" href="#" ng-click="vm.copy()"></a>\n</div>\n'},676:function(t,e,s){"use strict";(function(t){e.a=function(){return{bindToController:{},controller:o,controllerAs:"vm",restrict:"E",scope:{},template:s(678)}};var n=s(677),i=(s.n(n),s(110));function o(){const e=this;function s(){e.highlightedTab=e.TABS.tutorial}e.TABS={tutorial:"tutorial",preview:"preview"},e.init=function(){e.LiveDevelopment=e.brackets.getModule("LiveDevelopment/LiveDevMultiBrowser"),e.bramble.getTutorialExists()&&(e.showTutorialTab=!0,e.showPreviewTab=!e.isMicroPythonMode(),s(),e.bramble.showTutorial(()=>{e.bramble.useDesktopPreview()}),t("#refresh").on("click",t=>{e.onPreviewClick()}))},e.highlightedTab=e.TABS.tutorial,e.onPreviewClick=function(){if(!e.bramble.getTutorialVisible())return;e.bramble.hideTutorial(),e.highlightedTab=e.TABS.preview,e.bramble.refreshPreview()},e.onTutorialClick=function(){if(e.bramble.getTutorialVisible())return;s(),e.bramble.showTutorial(()=>{e.LiveDevelopment.close().done(e.LiveDevelopment.open)})},e.showTutorialTab=!1,e.showPreviewTab=!1,e.isMicroPythonMode=i.b,t(document).on("bramble-ready",()=>{e.brackets=window.brackets,e.bramble=window.bramble,e.init()})}o.$inject=[]}).call(e,s(4))},677:function(t,e){},678:function(t,e){t.exports='<div class="bramble-ide-preview-tabs">\n    <div class="preview-tutorial-toggle" ng-show="vm.showTutorialTab">\n        <span id="tutorial-title" class="preview-pane-nav-title"\n            ng-class="{\'preview-title-highlighted\': vm.highlightedTab === vm.TABS.tutorial}"\n            ng-click="vm.onTutorialClick()">Tutorial</span>\n        <span id="preview-title" class="preview-pane-nav-title"\n            ng-if="vm.showPreviewTab"\n            ng-class="{\'preview-title-highlighted\': vm.highlightedTab === vm.TABS.preview}"\n            ng-click="vm.onPreviewClick()">Preview</span>\n    </div>\n</div>'},679:function(t,e,s){"use strict";(function(t){e.a=function(){return{bindToController:{},controller:d,controllerAs:"vm",restrict:"E",scope:{}}};var n=s(184),i=(s.n(n),s(111)),o=(s.n(i),s(19)),r=(s.n(o),s(17)),a=(s.n(r),s(56)),c=(s.n(a),s(681)),l=s.n(c);function d(){const e=this,s="#bramble-iframe-browser",n="iframe",i="_tutorial/index.html",o="/js/dist/bramble_ide_instructions_legacy.css";function r(s){const n=t(this),i=t("#editor").attr("data-project-id"),o=e.brackets.getModule("command/CommandManager"),r=e.brackets.getModule("editor/EditorManager"),a=n.data("ideLinkFile").split(i).pop(),c="/project/".concat(i,"/").concat(a);o.execute("file.open",{fullPath:c}).done(()=>{const t=r.getCurrentFullEditor();let e=0,s=0;if(n.data("ideLinkLine"))e=n.data("ideLinkLine")-1,s=n.data("ideLinkCol")||0;else if(n.data("ideLinkRef")){const i=new RegExp(n.data("ideLinkRef"),"i"),o=t._codeMirror.getSearchCursor(i);if(o.findNext()){const t=o.from();e=t.line,s=t.ch}}t.setCursorPos(e,s,!0),t.focus()})}function a(s){const n=t(s.target).text().trim(),i=e.brackets.getModule("editor/EditorManager").getActiveEditor();if(!i)return;const o=i.getCursorPos();e.bramble.addCodeSnippet(n+"\n",()=>{const t=i._codeMirror.getDoc(),e=i.getCursorPos(),s=t.markText(o,e,{css:"background: rgba(255,219,0,.5)"});setTimeout(()=>s.clear(),100)})}function c(s){s.preventDefault();const n=e.brackets.getModule("widgets/Dialogs"),i=(e.brackets.getModule("widgets/DefaultDialogs"),e.brackets.getModule("strings"),t(s.target).data("ide-modal")),o=l.a.replace("[[src]]",i);n.showModalDialogUsingTemplate(o,!0)}e.loaded=!1,e.tutorialScrollPos=0,e.init=function(){const l=t(n).contents();l.find(s).on("load",()=>{!function(n){const l=n.find(s),d=l.contents(),u=l.attr("src");if(!u||-1===u.indexOf(i))return;d.on("click","[data-ide-link-file]",r),d.on("click","[data-ide-snippet]",a),d.on("click","[data-ide-modal]",c),function(t){t.find("head").append('<link rel="stylesheet" type="text/css" href="'.concat(o,'">'))}(d),function(e){e.find("[data-example]").each((e,s)=>{const n=t(s),i="collapsed"===n.data("example");i?n.addClass("is-collapsed"):n.removeClass("is-collapsed"),n.click(t=>{(n.hasClass("is-collapsed")||t.target===t.currentTarget)&&n.toggleClass("is-collapsed")})})}(d),function(t){if(e.loaded)return;e.bramble.on("tutorialVisibilityChange",n=>{if(n.visible)return;const i=t.find(s),o=i.contents();e.tutorialScrollPos=o.scrollTop()})}(n),function(t){t.scrollTop(e.tutorialScrollPos)}(d),e.loaded=!0}(l)})},t(document).on("bramble-ready",()=>{e.bramble=window.bramble,e.brackets=window.brackets,e.init()})}d.$inject=[]}).call(e,s(4))},681:function(t,e){t.exports='<div class="template modal" style="width:80vw">\n    <iframe src="[[src]]" style="display:block; border:none; width:100%; height:60vh"></iframe>\n\n    <div class="modal-footer">\n        <button class="dialog-button btn">Close</button>\n    </div>\n</div>\n'},682:function(t,e,s){"use strict";(function(t){e.a=function(){return{bindToController:{},controller:a,controllerAs:"vm",restrict:"E",scope:{}}};var n=s(184),i=(s.n(n),s(111)),o=(s.n(i),s(17)),r=(s.n(o),s(56));s.n(r);function a(){const e=this,s="_tutorial/index.html",n=9999999;function i(s,n,i,o,r,a){const c=function(e,s,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";const o=t("<div></div>"),r=t("<div></div>"),a=t("<div></div>"),c=t("<div></div>");return c.css({position:"absolute",top:0,left:-10,width:10,backgroundColor:"currentColor",opacity:"0.5",bottom:0}),a.css({display:"inline-block",fontWeight:"bold",fontSize:"1.25em","margin-bottom":"1rem",opacity:"0.5"}),r.css({display:"inline-block",fontSize:"1.25em","margin-right":"0.5rem","margin-left":"-1rem","min-width":"0.45rem",opacity:"0.5"}),o.css({position:"relative",backgroundColor:"rgba(0,0,0,.15)",padding:"0.7rem 0.9rem 0.8rem 2rem",margin:"0.3rem 0.6rem 1rem",lineHeight:1.75,"white-space":"pre-wrap"}),t("<div />").text(n).appendTo(r),a.html(e+" "+i),o.append(c),o.append(r),o.append(a),t("<div />").text(s).appendTo(o),o}(i,o,r,a),l=s.addLineWidget(n,c.get(0),{above:!0});e.lineWidgets.push(l)}function o(t,s){if(s&&-1===["paste","undo","redo"].indexOf(s.origin))return;const o=e.comments[e.currentFilename]||[];if(0===o.length)return;const r=t.getDoc(),{left:a,top:c}=t.getScrollInfo();e.lineWidgets.forEach(t=>t.clear()),e.markedTexts.forEach(t=>t.clear()),o.forEach(s=>{let o;if(s.line)o={line:s.line-1,ch:0};else if(s.ref){const e=new RegExp(s.ref,"i"),n=t.getSearchCursor(e);if(!n.findNext())return;(o=n.from()).line-=s.total}const a={line:o.line+s.total-1,ch:n};let c=r.getRange(o,a);if(s.multiline){const t=c.trim();if(s.symbol&&t.substring(0,s.symbol.length)!==s.symbol)return;if(s.closeSymbol&&-1===t.indexOf(s.closeSymbol,t.length-s.closeSymbol.length))return}else{let t=!0;if(c.split("\n").forEach(e=>t=t&&-1!==e.indexOf(s.symbol)),!t)return}s.trim&&(c=c.trim()),s.trim&&(c=c.trim()),i(r,a.line,s.title,c,s.symbol,s.closeSymbol),function(t,s,n){const i=t.markText(s,n,{collapsed:!0});e.markedTexts.push(i)}(r,{line:o.line-1,ch:n},a)}),t.scrollTo(a,c)}e.init=function(){if(!e.authorMode&&e.bramble.getTutorialExists()){const n=t("iframe").contents();n.find("#bramble-iframe-browser").on("load",()=>{!function(n){const i=n.find("#bramble-iframe-browser"),r=i.contents(),a=i.attr("src");if(!a||-1===a.indexOf(s))return;!function(s){if(e.commentsLoaded)return;const n=s.find("div[data-ide-comments]");e.comments={},n.find("div[data-ide-comment-file]").each((s,n)=>{const i=t(n),o=i.data("ideCommentFile");e.comments[o]=e.comments[o]||[],e.comments[o].push({line:i.data("ideCommentLine"),total:i.data("ideCommentTotal")||1,ref:i.data("ideCommentRef"),symbol:i.data("ideCommentSymbol")||"",closeSymbol:i.data("ideCommentCloseSymbol")||"",title:i.data("ideCommentTitle")||"Note",trim:i.data("ideCommentTrim")||!1,multiline:i.data("ideCommentMultiline")||!1})}),e.commentsLoaded=!0,function(){const t=e.brackets.getModule("editor/EditorManager"),s=()=>{const s=t.getCurrentFullEditor();if(!s)return;const n=s.getFile();if(!n)return;e.currentFilename=n._name;const i=s._codeMirror;o(i),i.off("change",o),i.on("change",o)};t.on("activeEditorChange",s),s()}()}(r)}(n)})}},e.currentFilename=null,e.commentsLoaded=!1,e.comments={},e.lineWidgets=[],e.markedTexts=[],t(document).on("bramble-ready",()=>{e.brackets=window.brackets,e.bramble=window.bramble,e.authorMode=window._showTutorialFile&&e.bramble.getTutorialExists(),e.init()})}a.$inject=[]}).call(e,s(4))},683:function(t,e,s){"use strict";(function(t){function s(){const e=this;function s(t,s){const n=e.brackets.getModule("widgets/Dialogs"),i=e.brackets.getModule("widgets/DefaultDialogs"),o=e.brackets.getModule("strings");n.showModalDialog(i.DIALOG_ID_SAVE_CLOSE,"Please Confirm","You have unsaved changes. Save before leaving?",[{className:n.DIALOG_BTN_CLASS_LEFT,id:n.DIALOG_BTN_DONTSAVE,text:o.DONT_SAVE},{className:n.DIALOG_BTN_CLASS_NORMAL,id:n.DIALOG_BTN_CANCEL,text:o.CANCEL},{className:n.DIALOG_BTN_CLASS_PRIMARY,id:n.DIALOG_BTN_OK,text:o.SAVE}]).done(function(e){e===n.DIALOG_BTN_OK?t():e===n.DIALOG_BTN_DONTSAVE&&s()})}e.init=function(){Bramble.confirmLeave=s},e.confirmLeave=s,t(document).on("bramble-ready",()=>{e.brackets=window.brackets,e.bramble=window.bramble,e.Bramble=window.Bramble,e.init()})}e.a=function(){return{bindToController:{},controller:s,controllerAs:"vm",restrict:"E",scope:{}}},s.$inject=[]}).call(e,s(4))},684:function(t,e,s){"use strict";(function(t){e.a=function(){return{bindToController:{},controller:i,controllerAs:"vm",restrict:"E",scope:{}}};var n=s(17);s.n(n);function i(e,s){const n=this;n.init=function(t,e){const s=e.getModule("preferences/PreferencesManager"),n=e.getModule("view/MainViewManager");let o,r=s.get("autoUpdate");const a=(e,s)=>{const n=s?s.name:t.getFilename();n&&(o=n.split(".").pop()),-1!==i.indexOf(o)?r||(r=!0,t.enableAutoUpdate()):r&&(r=!1,t.disableAutoUpdate())};n.on("currentFileChange",a),a()};var i=["css"];t(document).on("bramble-ready",()=>{const t=window.bramble,e=window.brackets;n.init(t,e)})}i.$inject=[]}).call(e,s(4))},685:function(t,e,s){"use strict";(function(t){e.a=i;var n=s(686);s.n(n);function i(){return{init:(t,e)=>new o(t,e)}}function o(e,s){const n=this;let i;function o(t){27===t.which&&(t.stopPropagation(),t.preventDefault(),n.close())}n.setPosition=function(){const t=s.width(),n=e.width(),i=Math.max(0,e.offset().left-t/2+n/2);s.css("left",i)},n.close=function(e){e&&e.stopPropagation();if(!n.isOpen)return;s.hide(),i.remove(),i.off("click",n.close),t(document).off("keyup",o),t(window).off("resize",n.close),n.isOpen=!1},n.show=function(){n.setPosition(),i=t("<div class='bramble-ide-menu-underlay'></div>"),s.after(i),i.on("click",n.close),t(document).on("keyup",o),t(window).on("resize",n.close),n.isOpen=!0,s.show()},n.toggle=function(){n.isOpen?n.close():n.show()},n.isOpen=!1}i.$inject=[]}).call(e,s(4))},686:function(t,e){},687:function(t,e,s){"use strict";(function(t){e.a=function(){return{bindToController:{},controller:p,controllerAs:"vm",restrict:"E",scope:{},template:s(703)}};var n=s(19),i=(s.n(n),s(688)),o=(s.n(i),s(689)),r=s.n(o),a=s(690),c=s.n(a),l=s(291),d=s(110),u=s(698);const h="/ide/code/bin/microbit.hex",g=253952;function p(e){const s=this;s.init=function(){if(s.isMicrobitMode=Object(d.c)(),!s.isMicrobitMode)return;console.log("Running Microbit mode..."),s.fetchFirmware(),t("#refresh").hide()},s.handleDownload=function(){if(!s.firmwareHexData)return console.error("Firmware not fetched yet...");const t=s.getUserCode();if(!t)return;Object(u.a)(s.getCurrentFilename().replace(".py",".hex"),{hexGenerator:()=>s.generateFullHexStr(s.firmwareHexData,t),showInstructions:s.showDownloadInstructions})},s.showDownloadInstructions=function(){if(s.downloadInstructionsShown)return;s.downloadInstructionsShown=!0;const t=s.brackets.getModule("widgets/Dialogs"),e=r.a;t.showModalDialogUsingTemplate(e,!0)},s.showFlashInstructions=function(){if(s.flashInstructionsShown)return;s.flashInstructionsShown=!0;const t=s.brackets.getModule("widgets/Dialogs"),e=c.a;t.showModalDialogUsingTemplate(e,!0)},s.isMicrobitMode=!1,s.flashInstructionsShown=!1,s.downloadInstructionsShown=!1,s.handleFlash=function(){const t=s.getUserCode();if(!t)return;Object(u.b)({hexGenerator:()=>s.generateFullHexStr(s.firmwareHexData,t),showInstructions:s.showFlashInstructions,onStart(){console.log("Flashing..."),e(()=>s.flashButtonLabel="Deploying…")},onDone(){console.log("Finished flashing!"),e(()=>s.flashButtonLabel="Deployed!"),e(()=>s.flashButtonLabel=s.defaultFlashButtonLabel,2e3)},onError(t){console.log("Error flashing:",t),e(()=>s.flashButtonLabel="Error…"),e(()=>s.flashButtonLabel=s.defaultFlashButtonLabel,2e3)}})},s.generateFullHexStr=function(t,e){return l.a.injectPyStrIntoIntelHex(g,t,e)},s.getUserCode=function(){const t=s.brackets.getModule("editor/EditorManager").getActiveEditor();if(!t)return;return t._codeMirror.getValue()},s.fetchFirmware=function(){t.get(h,t=>{s.firmwareHexData=t})},s.getCurrentFilename=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"microbit.py";const e=brackets.getModule("editor/EditorManager").getCurrentFullEditor();if(!e)return t;const s=e.getFile();return s?s.name:t},s.supportsWebUSB=u.c,s.firmwareHexData=null,s.device=null,s.defaultFlashButtonLabel="Deploy",s.flashButtonLabel=s.defaultFlashButtonLabel,t(document).on("bramble-ready",()=>{s.brackets=window.brackets,s.bramble=window.bramble,s.Bramble=window.Bramble,s.init()})}p.$inject=["$timeout"]}).call(e,s(4))},688:function(t,e){},689:function(t,e){t.exports='<div class="template modal">\n    <div class="modal-dialog modal-lg" role="document">\n        <div class="modal-header">\n            <h1 class="dialog-title" id="dialog-title">Download to your micro:bit</h1>\n        </div>\n        <div class="modal-body modal-instructions">\n            <ol>\n                <li>\n                    <img src="/code/project/styles/images/micropython/method-1-step-1.png" alt="Step 1" />\n                    <span class="modal-step-title">\n                        <span class="modal-step-counter">1</span>\n                        Download\n                    </span>\n                    <span class="modal-step-description">\n                        Download has started\n                    </span>\n                </li>\n                <li>\n                    <img src="/code/project/styles/images/micropython/method-1-step-2.png" alt="Step 2" />\n                    <span class="modal-step-title">\n                        <span class="modal-step-counter">2</span>\n                        Connect\n                    </span>\n                    <span class="modal-step-description">\n                        Connect Micro:bit via USB\n                    </span>\n                </li>\n                <li>\n                    <img src="/code/project/styles/images/micropython/method-1-step-3.png" alt="Step 3" />\n                    <span class="modal-step-title">\n                        <span class="modal-step-counter">3</span>\n                        Copy &amp; Paste File\n                    </span>\n                    <span class="modal-step-description">\n                        Copy the downloaded file to Micro:bit USB drive\n                    </span>\n                </li>\n            </ol>\n        </div>\n        <div class="modal-footer">\n            <button class="dialog-button btn">Close</button>\n        </div>\n    </div>\n</div>\n'},690:function(t,e){t.exports='<div class="template modal">\n    <div class="modal-dialog modal-lg" role="document">\n        <div class="modal-header">\n            <h1 class="dialog-title" id="dialog-title">Deploy to your micro:bit</h1>\n        </div>\n        <div class="modal-body modal-instructions">\n            <ol>\n                <li>\n                    <img src="/code/project/styles/images/micropython/method-2-step-1.png" alt="Step 1" />\n                    <span class="modal-step-title">\n                        <span class="modal-step-counter">1</span>\n                        Connect\n                    </span>\n                    <span class="modal-step-description">\n                        Connect Micro:bit via USB\n                    </span>\n                </li>\n                <li>\n                    <img src="/code/project/styles/images/micropython/method-2-step-2.png" alt="Step 2" />\n                    <span class="modal-step-title">\n                        <span class="modal-step-counter">2</span>\n                        Select\n                    </span>\n                    <span class="modal-step-description">\n                        Select the device in the list and click Continue\n                    </span>\n                </li>\n                <li>\n                    <img src="/code/project/styles/images/micropython/method-2-step-3.png" alt="Step 3" />\n                    <span class="modal-step-title">\n                        <span class="modal-step-counter">3</span>\n                        Pair\n                    </span>\n                    <span class="modal-step-description">\n                        Pair your Micro:bit by selecting it in your browser\n                    </span>\n                </li>\n            </ol>\n        </div>\n        <div class="modal-footer">\n            <button class="dialog-button btn">Close</button>\n        </div>\n    </div>\n</div>\n'},698:function(t,e,s){"use strict";s.d(e,"b",function(){return a}),s.d(e,"a",function(){return c});var n=s(699),i=(s.n(n),s(700));s.n(i);const o=!!navigator.usb;e.c=o;let r=null;function a(t){let{hexGenerator:e,showInstructions:s,onStart:a,onDone:c,onError:l}=t;if(!o)return console.log("WebUSB is not supported in this browser.");s&&s();const d=t=>{r=t;const s=new n.WebUSB(r),o=new i.DAPLink(s);return o.disconnect().catch(()=>{}),o.connect().then(()=>{const t=e(),s=(new TextEncoder).encode(t).buffer;return a(),o.flash(s)}).then(()=>(c(),o.disconnect())).catch(t=>{l(t),r=null})};if(r)return d(r);navigator.usb.requestDevice({filters:[{vendorId:3368,productId:516}]}).then(d).catch(t=>{l(t),r=null})}function c(t,e){let{hexGenerator:s,showInstructions:n}=e;n&&n();const i=s(),o=document.createElement("a");document.body.appendChild(o),o.download=t,o.href="data:text/plain;charset=utf8,".concat(encodeURIComponent(i)),o.click(),o.remove()}},703:function(t,e){t.exports='<div class="bramble-ide-microbits" ng-if="vm.isMicrobitMode">\n  <a class="button" href="#" ng-click="vm.handleDownload()">\n      <i class="fa fa-download"></i> Download\n  </a>\n\n  <a class="button" ng-class="{\'is-active\' : vm.flashButtonLabel != vm.defaultFlashButtonLabel}"\n     href="#" ng-click="vm.handleFlash()" ng-if="vm.supportsWebUSB">\n      <i class="fa fa-upload"></i>\n      {{ vm.flashButtonLabel }}\n  </a>\n\n  <form id="bramble-ide-microbits-form" method="post" action="/api/v2/microbit/generate">\n      <input type="hidden" name="script" />\n  </form>\n</div>\n'},704:function(t,e,s){"use strict";(function(t){e.a=function(){return{bindToController:{},controller:p,controllerAs:"vm",restrict:"E",scope:{},template:s(712)}};var n=s(19),i=(s.n(n),s(705)),o=(s.n(i),s(706)),r=s.n(o),a=s(707),c=s.n(a),l=s(291),d=s(110),u=s(708);const h="/ide/code/bin/micropython-hifive.hex",g=537387008;function p(e){const s=this;s.init=function(){if(s.isHifiveMode=Object(d.a)(),!s.isHifiveMode)return;console.log("Running HiFive mode..."),s.fetchFirmware(),t("#refresh").hide()},s.handleDownload=function(){if(!s.firmwareHexData)return console.error("Firmware not fetched yet...");const t=s.getUserCode();if(!t)return;Object(u.a)(s.getCurrentFilename().replace(".py",".hex"),{hexGenerator:()=>s.generateFullHexStr(s.firmwareHexData,t),showInstructions:s.showDownloadInstructions})},s.showDownloadInstructions=function(){const t=s.brackets.getModule("widgets/Dialogs"),e=r.a;t.cancelModalDialogIfOpen("template"),t.showModalDialogUsingTemplate(e,!0)},s.showFlashInstructions=function(){const t=s.brackets.getModule("widgets/Dialogs"),e=c.a;t.cancelModalDialogIfOpen("template"),t.showModalDialogUsingTemplate(e,!0)},s.showProgress=function(e){if(e)s.progressShown?t(".progress-container .progress-bar").width(e+"%"):(s.progressShown=!0,t(".template.modal").css("display","block"));else{t(".template.modal").css("display","");const e=s.brackets.getModule("widgets/Dialogs");e.cancelModalDialogIfOpen("template"),s.progressShown=!1}},s.isHifiveMode=!1,s.flashInstructionsShown=!1,s.downloadInstructionsShown=!1,s.progressShown=!1,s.handleFlash=function(){const t=s.getUserCode();if(!t)return;Object(u.b)({hexGenerator:()=>s.generateFullHexStr(s.firmwareHexData,t),showInstructions:s.showFlashInstructions,showProgress:s.showProgress,onStart(){console.log("Flashing..."),e(()=>s.flashButtonLabel="Deploying…")},onDone(){console.log("Finished flashing!"),e(()=>s.flashButtonLabel="Deployed!"),e(()=>s.flashButtonLabel=s.defaultFlashButtonLabel,2e3)},onError(t){console.log("Error flashing:",t),e(()=>s.flashButtonLabel="Error…"),e(()=>s.flashButtonLabel=s.defaultFlashButtonLabel,2e3)}})},s.generateFullHexStr=function(t,e){return l.a.injectPyStrIntoIntelHex(g,t,e)},s.getUserCode=function(){const t=s.brackets.getModule("editor/EditorManager").getActiveEditor();if(!t)return;return t._codeMirror.getValue()},s.fetchFirmware=function(){t.get(h,t=>{s.firmwareHexData=t})},s.getCurrentFilename=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"hifive.py";const e=brackets.getModule("editor/EditorManager").getCurrentFullEditor();if(!e)return t;const s=e.getFile();return s?s.name:t},s.supportsWebUSB=u.c,s.firmwareHexData=null,s.device=null,s.defaultFlashButtonLabel="Deploy",s.flashButtonLabel=s.defaultFlashButtonLabel,t(document).on("bramble-ready",()=>{s.brackets=window.brackets,s.bramble=window.bramble,s.Bramble=window.Bramble,s.init()})}p.$inject=["$timeout"]}).call(e,s(4))},705:function(t,e){},706:function(t,e){t.exports='<div class="template modal">\n    <div class="modal-dialog modal-lg" role="document">\n        <div class="modal-header">\n            <h1 class="dialog-title" id="dialog-title">Download to your HiFive</h1>\n        </div>\n        <div class="modal-body modal-instructions">\n            <ol>\n                <li>\n                    <img src="/code/project/styles/images/hifive/method-1-step-1.png" alt="Step 1" />\n                    <span class="modal-step-title">\n                        <span class="modal-step-counter">1</span>\n                        Download\n                    </span>\n                    <span class="modal-step-description">\n                        Download has started\n                    </span>\n                </li>\n                <li>\n                    <img src="/code/project/styles/images/hifive/method-1-step-2.png" alt="Step 2" />\n                    <span class="modal-step-title">\n                        <span class="modal-step-counter">2</span>\n                        Connect\n                    </span>\n                    <span class="modal-step-description">\n                        Connect HiFive via USB\n                    </span>\n                </li>\n                <li>\n                    <img src="/code/project/styles/images/hifive/method-1-step-3.png" alt="Step 3" />\n                    <span class="modal-step-title">\n                        <span class="modal-step-counter">3</span>\n                        Copy &amp; Paste File\n                    </span>\n                    <span class="modal-step-description">\n                        Copy the downloaded file to HiFive USB drive\n                    </span>\n                </li>\n            </ol>\n        </div>\n        <div class="modal-footer">\n            <button class="dialog-button btn">Close</button>\n        </div>\n    </div>\n</div>\n'},707:function(t,e){t.exports='<div class="template modal">\n    <div class="modal-dialog modal-lg" role="document">\n        <div class="modal-header">\n            <h1 class="dialog-title" id="dialog-title">Deploy to your HiFive</h1>\n        </div>\n        <div class="modal-body modal-instructions">\n            <ol>\n                <li>\n                    <img src="/code/project/styles/images/hifive/method-2-step-1.png" alt="Step 1" />\n                    <span class="modal-step-title">\n                        <span class="modal-step-counter">1</span>\n                        Connect\n                    </span>\n                    <span class="modal-step-description">\n                        Connect HiFive via USB\n                    </span>\n                </li>\n                <li>\n                    <img src="/code/project/styles/images/hifive/method-2-step-2.png" alt="Step 2" />\n                    <span class="modal-step-title">\n                        <span class="modal-step-counter">2</span>\n                        Select\n                    </span>\n                    <span class="modal-step-description">\n                        Select the device in the list and click Continue\n                    </span>\n                </li>\n                <li>\n                    <img src="/code/project/styles/images/hifive/method-2-step-3.png" alt="Step 3" />\n                    <span class="modal-step-title">\n                        <span class="modal-step-counter">3</span>\n                        Pair\n                    </span>\n                    <span class="modal-step-description">\n                        Pair your HiFive by selecting it in your browser\n                    </span>\n                </li>\n            </ol>\n        </div>\n        <div class="modal-footer">\n            <button class="dialog-button btn">Close</button>\n        </div>\n    </div>\n</div>\n'},708:function(t,e,s){"use strict";s.d(e,"b",function(){return r}),s.d(e,"a",function(){return a});var n=s(299),i=s(709);const o=!!navigator.usb;e.c=o;function r(t){let{hexGenerator:e,showInstructions:s,showProgress:r,onStart:a,onDone:c,onError:l}=t;if(!o)return console.log("WebUSB is not supported in this browser.");s&&s();let d=new i.a((t,e)=>{t==n.a.SENDING?r&&r(100*e):t!=n.a.COMPLETED&&t!=n.a.ERROR&&t!=n.a.DISCONNECTED&&t!=n.a.REQUIRES_AUTH&&t!=n.a.UNSUPPORTED||r&&r()}),u=e();const h=()=>{d.upload(u).then(()=>{console.log("Upload successful!")})};if(d._usbDevice)return h();d.reset(),d.start().then(()=>{a(),d._state===n.a.CONNECTED?(c(),h()):d._state!=n.a.ERROR&&d._state!=n.a.UNSUPPORTED||(console.error("Failed state: ",d._state),d.reset(),l())})}function a(t,e){let{hexGenerator:s,showInstructions:n}=e;n&&n();const i=s(),o=document.createElement("a");document.body.appendChild(o),o.download=t,o.href="data:text/plain;charset=utf8,".concat(encodeURIComponent(i)),o.click(),o.remove()}},709:function(t,e,s){"use strict";var n=s(1),i=(s.n(n),s(292)),o=(s.n(i),s(6)),r=(s.n(o),s(111)),a=(s.n(r),s(295)),c=(s.n(a),s(298)),l=(s.n(c),s(2)),d=(s.n(l),s(299));s(710),s(711);e.a=class{constructor(t){this.EMU_CMD_GET_PROBE_INFO=28,this.EMU_CMD_GET_CAPS_EX=237,this.EMU_CMD_GET_PROBE_INFO_CMD_GET_CAPS=0,this.EMU_PROBE_INFO_SUB_CMD_WRITE_MSD_IMG_CHUNK=5,this.EMU_PROBE_INFO_SUB_CMD_WRITE_MSD_IMG_END=6,this.EMU_CAP_EX_GET_PROBE_INFO=64,this.EMU_PROBE_INFO_CAP_MSD_IMG=2,this._device=null,this._usbPromise=null,this._interfaceNumber=null,this._outEndpoint=null,this._inEndpoint=null,this._buffer=null,this._dataToWrite=null,this._bytesWritten=0,this.ConnectorStates=d.a,this._progressCallback=t,this._state=d.a.DISCONNECTED,this.watchdogTimeout=0}updateProgress(t,e){t&&(this._state=t),this._progressCallback&&this._progressCallback(this._state,e)}isWebUSBEnabled(){return!!navigator.usb}start(){return this.isWebUSBEnabled()?this._usbDevice?(this.updateProgress(d.a.CONNECTED),Promise.resolve()):this._usbPromise?this._usbPromise:(console.log("Requesting USB Device..."),this.updateProgress(d.a.REQUESTINGUSBDEVICE),this._usbPromise=navigator.usb.requestDevice({filters:[{vendorId:4966}]}).then(t=>(this._usbDevice=t,console.log("Connecting to USB device..."),this.updateProgress(d.a.CONNECTING),t.open())).then(t=>(console.log("Getting configuration..."),null===this._usbDevice.configuration?this._usbDevice.selectConfiguration(1):t)).then(t=>{for(var e=this._usbDevice.configuration.interfaces,s=null,n=null,i=!1,o="",r=0;r<e.length;r++){s=e[r];for(var a=0;a<s.alternates.length;a++)if(255==(n=s.alternates[a]).interfaceClass){i=!0;break}if(i)break}return o="",i?2!=n.endpoints.length&&(i=!1,o="USB interface doesn't provide needed in/out endpoints"):o="No matching USB interface found",i?(this._interfaceNumber=s.interfaceNumber,"out"==n.endpoints[0]?(this._outEndpoint=n.endpoints[0].endpointNumber,this._inEndpoint=n.endpoints[1].endpointNumber):(this._inEndpoint=n.endpoints[0].endpointNumber,this._outEndpoint=n.endpoints[1].endpointNumber),Promise.resolve(0)):(this.updateProgress(d.a.ERROR,o),Promise.reject(o))}).then(t=>this._usbDevice.claimInterface(this._interfaceNumber)).then(t=>(this.updateProgress(d.a.CONNECTED),this._usbDevice.selectAlternateInterface(this._interfaceNumber,0))).catch(t=>{console.log("Error:",t),this.updateProgress(d.a.ERROR,t.toString())}),this._usbPromise):(this.updateProgress(d.a.UNSUPPORTED),Promise.resolve())}stop(){window.clearTimeout(this.watchdogTimeout),this._usbDevice.close(),this.reset(),this.updateProgress(d.a.DISCONNECTED)}reset(){this._usbDevice=null,this._usbPromise=null,this._interfaceNumber=null,this._outEndpoint=null,this._inEndpoint=null,this._buffer=null,this._dataToWrite=null,this._bytesWritten=0}passcode(t){return Promise.resolve(!0)}upload(t){return this.updateProgress(d.a.SENDING,0),this._dataToWrite=new TextEncoder("utf-8").encode(t),this._bytesWritten=0,this.start().then(()=>{this._buffer=null;var t=new Uint8Array(1);t[0]=this.EMU_CMD_GET_CAPS_EX,this.send(t);var e=this;this.receive(t=>{this.checkCapsEx(t)},function(t){e.error(t)})})}send(t,e,s){var n=this._usbDevice.transferOut(this._outEndpoint,t);return n.then(e,s),n}receive(t,e){var s=this._usbDevice.transferIn(this._inEndpoint,64);return s.then(t,e),s}checkAllBytesReceived(t,e,s,n){if(this._buffer){t=new Uint8Array(t.buffer);var i=new Uint8Array(this._buffer.length+t.length);i.set(this._buffer,0),i.set(t,this._buffer.length),this._buffer=i}else this._buffer=new Uint8Array(t.buffer);return!(this._buffer.length<e&&(this.receive(s,n),1))}checkCapsEx(t){var e=this;this.checkAllBytesReceived(t.data,32,t=>{this.checkCapsEx(t)},function(t){e.error(t)})&&(this._buffer[this.EMU_CAP_EX_GET_PROBE_INFO>>3]>>(7&this.EMU_CAP_EX_GET_PROBE_INFO)&1?(this._buffer=null,(t=new Uint8Array(2))[0]=this.EMU_CMD_GET_PROBE_INFO,t[1]=this.EMU_CMD_GET_PROBE_INFO_CMD_GET_CAPS,this.send(t),e=this,this.receive(t=>{this.checkCapsGetProbeInfo(t)},function(t){e.error(t)})):this.error("This J-Link does not support file flash download"))}checkCapsGetProbeInfo(t){var e=this;this.checkAllBytesReceived(t.data,4,t=>{this.checkCapsGetProbeInfo(t)},function(t){e.error(t)})&&((this._buffer[0]|this._buffer[1]<<8|this._buffer[2]<<16|this._buffer[3]<<24)>>this.EMU_PROBE_INFO_CAP_MSD_IMG&1?this.sendImgChunk():this.error("This J-Link does not support file flash download"))}sendImgChunk(){this._buffer=null;var t=this._dataToWrite.byteLength-this._bytesWritten;t>4096&&(t=4096);var e=new Uint8Array(6+t);e[0]=this.EMU_CMD_GET_PROBE_INFO,e[1]=this.EMU_PROBE_INFO_SUB_CMD_WRITE_MSD_IMG_CHUNK,e[2]=255&t,e[3]=t>>8&255,e[4]=t>>16&255,e[5]=t>>24&255;for(var s=0;s<t;s++)e[6+s]=this._dataToWrite[this._bytesWritten+s];var n=this;this.send(e,t=>{this._bytesWritten+=t.bytesWritten-6,this.updateProgress(d.a.SENDING,this._bytesWritten/this._dataToWrite.byteLength),console.log("total sent: "+this._bytesWritten+" / "+this._dataToWrite.byteLength),this._dataToWrite.byteLength>this._bytesWritten?this.sendImgChunk():(this.updateProgress(d.a.COMPLETED),this.sendImgEnd())},function(t){n.error(t)})}sendImgEnd(){this._buffer=null;var t=new Uint8Array(2);t[0]=this.EMU_CMD_GET_PROBE_INFO,t[1]=this.EMU_PROBE_INFO_SUB_CMD_WRITE_MSD_IMG_END,this.send(t);var e=this;this.receive(t=>{this.checkProgResult(t)},function(t){e.error(t)})}checkProgResult(t){var e=this;if(this.checkAllBytesReceived(t.data,4,t=>{this.checkProgResult(t)},function(t){e.error(t)})){var s=this._buffer[0]|this._buffer[1]<<8|this._buffer[2]<<16|this._buffer[3]<<24;s&&this._bytesWritten<s+4||(console.log("disconnect"),this.stop())}}stopWatchdog(){window.clearTimeout(this.watchdogTimeout)}startWatchdog(t){var e=this;this.watchdogTimeout=window.setTimeout(function(){e._watchdog()},t)}_watchdog(t){this.updateProgress(d.a.ERROR,"Timed out")}error(){console.error(...arguments),this.updateProgress(d.a.ERROR,"Error")}}},710:function(t,e,s){"use strict"},711:function(t,e,s){"use strict"},712:function(t,e){t.exports='<div class="bramble-ide-hifive" ng-if="vm.isHifiveMode">\n  <a class="button" href="#" ng-click="vm.handleDownload()">\n      <i class="fa fa-download"></i> Download\n  </a>\n\n  <a class="button" ng-class="{\'is-active\' : vm.flashButtonLabel != vm.defaultFlashButtonLabel}"\n     href="#" ng-click="vm.handleFlash()" ng-if="vm.supportsWebUSB">\n      <i class="fa fa-upload"></i>\n      {{ vm.flashButtonLabel }}\n  </a>\n\n    <div class="template modal">\n        <div class="modal-dialog modal-lg" role="document">\n            <div class="modal-header">\n                <h1 class="dialog-title" id="dialog-title">Uploading...</h1>\n            </div>\n            <div class="modal-body">\n                <div class="progress-container">\n                    <div class="progress-bar"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},713:function(t,e,s){"use strict";(function(t){s.d(e,"a",function(){return D});var n,i,o,r=s(1),a=(s.n(r),s(6)),c=(s.n(a),s(42)),l=(s.n(c),s(9)),d=(s.n(l),s(136)),u=(s.n(d),s(17)),h=(s.n(u),s(43)),g=(s.n(h),s(2)),p=(s.n(g),s(3)),b=s.n(p),m=s(714),f=(s.n(m),s(0)),y=s(137),v=s(74),_=s(76),I=s(57),A=s(99),w=s(64),S=s(715),E=s(719),C=s(290),x=s(300),j=s(737),O=s(738);let D=Object(j.a)({bindToController:{class:"<?",context:"<",offsetTop:"<?",projectId:"<?",avatarUserId:"<?",showFeedsPanelOnDeploy:"<?"},template:s(739),_singleton:!0})((o=i=class extends O.a{constructor(){super(...arguments),b()(this,"iconBellUrl",s(740)),b()(this,"iconChatUrl",s(741)),b()(this,"_class",null),b()(this,"_avatarUserId",null),b()(this,"offsetTop",0),b()(this,"showingFeedsPanel",!1),b()(this,"feedsPanelIframeLoaded",!1)}onInit(){super.onInit(),this.offsetTop=void 0!==this.offsetTop?this.offsetTop:0}onDeployed(){super.onDeployed(),this._context=void 0!==this.context?this.context:this.element.data("context"),this._avatarUserId=void 0!==this.avatarUserId?this.avatarUserId:this.element.data("avatarUserId"),void 0!==this.showFeedsPanelOnDeploy&&(this._showFeedsPanel=this.showFeedsPanelOnDeploy),this._context===E.a.IDE_BRAMBLE&&this._isFeedsDisabled__ideBramble()&&(this._showFeedsPanel=!1),this.class=void 0!==this.class?this.class:this.getClassForContext(this._context),this.elementInternal=t(".toolbar-feeds-button",this.element),this.$counter=t(".toolbar-feeds-button__counter",this.$counter),this.$counter.css("display","none"),this.createFeedsPanel(),this.taskUpdateFeedsButtonPosition(),this.$evalAsync()}onDestroy(){super.onDestroy(),this.$panel&&w.a.removeDirectiveElement(this.$panel),t("body").removeClass("body-toolbar-feeds--visible"),t("body.extension-layout-editor layout-editor .layout-editor__left").css("width","100%"),t("body.extension-layout-sandbox layout-sandbox .layout-sandbox__left").css("width","100%"),t("body.extension-context-course-lesson-minecraft-editor-bedrock view-lesson-minecraft-editor-bedrock .view-lesson-minecraft-editor-bedrock__body__right").css("width","100%"),t(".bramble-editor-container__left").css("width","100%")}_isFeedsDisabled__ideBramble(){Object(f.a)(this._context===E.a.IDE_BRAMBLE);const t=y.a.get("hasCoach",!1);f.a.boolean(t);const e=y.a.get("projectOwnedBySessionUser",!1);return f.a.boolean(e),!(!t||!1!==e)}getClassForContext(t){return f.a.string(t),"toolbar-feeds-button--context-".concat(t)}taskUpdateFeedsButtonPosition(){if(this._context===E.a.IDE)return;if(this._context===E.a.IDE_BRAMBLE)return;if(this._context===E.a.IDE_COACHING)return;if(this._context===E.a.TEACHER_DASHBOARD_INBOX)return;const e=t(window),s=t("main"),n=t(".toolbar-feeds-button",this.element),i=()=>{let t=s.offset().top+this.offsetTop;e.scrollTop()>0&&(t=this.offsetTop),n.css("top",t)};this.domBind(window,"scroll",i),this.domBind(window,"resize",i),i()}async onClick(){if(this._context===E.a.IDE_BRAMBLE&&this._isFeedsDisabled__ideBramble()){const t=this.getDependency("modalPrompt");f.a.object(t);const e="\n                You must save your project before being able to communicate with your Coach. \n                Please save your project first, then try again.\n            ";await t.open({message:e,confirmLabel:"OK",showCloseButton:!1,showCancelButton:!1})}else this.showFeedsPanel()}async showFeedsPanel(){if(this.$panel&&!this.showingFeedsPanel&&!this.$panel.hasClass("toolbar-feeds-panel--visible")){this.showingFeedsPanel=!0;try{this.$panel.addClass("toolbar-feeds-panel--visible"),this.elementInternal.addClass("toolbar-feeds-button--selected"),t("body").addClass("body-toolbar-feeds-button--visible"),t("body.extension-layout-editor layout-editor .layout-editor__left").css("width","calc(100% - 344px)"),t("body.extension-layout-sandbox layout-sandbox .layout-sandbox__left").css("width","calc(100% - 344px)"),t("body.extension-context-course-lesson-minecraft-editor-bedrock view-lesson-minecraft-editor-bedrock .view-lesson-minecraft-editor-bedrock__body__right").css("width","calc(100% - 344px)"),t(".bramble-editor-container__left").css("width","calc(100% - 344px)"),await _.a.waitCondition(()=>!!this.reduxWrapper),await _.a.waitCondition(()=>!!this.extensionFeeds),this.reduxWrapper.put(this.extensionFeeds.FeedsActions.disableSkipMarkSeenMessages()),this.reduxWrapper.put(this.extensionFeeds.FeedsActions.clearSelectedChannelUnreadMessages())}finally{this.showingFeedsPanel=!1}}}async hideFeedsPanel(){this.$panel&&(this.showingFeedsPanel||!1!==this.$panel.hasClass("toolbar-feeds-panel--visible")&&(this.$panel.removeClass("toolbar-feeds-panel--visible"),this.elementInternal.removeClass("toolbar-feeds-button--selected"),t("body").removeClass("body-toolbar-feeds-button--visible"),t("body.extension-layout-editor layout-editor .layout-editor__left").css("width","100%"),t("body.extension-layout-sandbox layout-sandbox .layout-sandbox__left").css("width","100%"),t("body.extension-context-course-lesson-minecraft-editor-bedrock view-lesson-minecraft-editor-bedrock .view-lesson-minecraft-editor-bedrock__body__right").css("width","100%"),t(".bramble-editor-container__left").css("width","100%"),this.reduxWrapper.put(this.extensionFeeds.FeedsActions.enableSkipMarkSeenMessages())))}async createFeedsPanel(){if(f.a.string(this._context,"attempted to create feeds panel before context was set"),this.$panel=t('\n            <div class="toolbar-feeds-panel toolbar-feeds-panel--context-'.concat(this._context,'" style="width: 1px;">\n                <button class="toolbar-feeds-panel__close-button">\n                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" class="ng-scope">\n                        <g transform="translate(-5 -3)">\n                            <circle class="icon-close__bgd" cx="20" cy="20" r="20" transform="translate(10 6.7)" fill="#fff"></circle>\n                            <path d="M37.6 31.5L33.1 27l4.5-4.5a.5.5 0 0 0 .1-.2.5.5 0 0 0 0-.5l-2.2-2.1a.5.5 0 0 0-.7 0l-4.5 4.5-4.5-4.5a.5.5 0 0 0-.2-.1.5.5 0 0 0-.5 0L23 21.9a.5.5 0 0 0-.1.5.5.5 0 0 0 0 .2l4.6 4.5-4.5 4.5a.5.5 0 0 0-.1.2.5.5 0 0 0 0 .5l2.2 2.1a.5.5 0 0 0 .7 0l4.5-4.5 4.5 4.5a.5.5 0 0 0 .7 0l2.1-2.1a.5.5 0 0 0 .1-.5.5.5 0 0 0 0-.2z"></path>\n                        </g>\n                    </svg>\n                </button>\n            </div>\n        ')),[E.a.IDE,E.a.IDE_COACHING,E.a.TEACHER_DASHBOARD_INBOX].includes(this._context)){this._context===E.a.IDE?this._class="toolbar-feeds-button--stream":this._context===E.a.IDE_BRAMBLE?this._avatarUserId?this._class="toolbar-feeds-button--avatar":this._class="toolbar-feeds-button--stream":this._context===E.a.IDE_COACHING?this._avatarUserId?this._class="toolbar-feeds-button--avatar":this._class="toolbar-feeds-button--stream":this._context===E.a.TEACHER_DASHBOARD_INBOX&&(this._class="toolbar-feeds-button--stream"),this.$evalAsync();let e=t("body.extension-layout-editor layout-editor .layout-editor__right");if(0===e.length&&(e=t("body.extension-layout-sandbox layout-sandbox .layout-sandbox__right")),0===e.length&&(e=t("body.extension-context-course-lesson-minecraft-editor-bedrock view-lesson-minecraft-editor-bedrock .view-lesson-minecraft-editor-bedrock__body__right")),e.append(this.$panel),this.extensionManager=x.a,this.reduxWrapper=A.a,this.extensionFeeds=await this.extensionManager.enable("extension-feeds"),!1===this.isDeployed())return;if(f.a.object(this.extensionFeeds),this.extensionComponentsFeeds=await this.extensionManager.enable("extension-components-feeds"),!1===this.isDeployed())return;f.a.object(this.extensionComponentsFeeds),this.reduxWrapper.put(this.extensionFeeds.FeedsActions.setContext(this._context)),this.reduxWrapper.put(this.extensionFeeds.FeedsActions.show());const s=this._context;w.a.deployDirectiveController(this.extensionFeeds.FeedsDirectiveControllerClass,{target:".toolbar-feeds-panel",params:{context:s}}),this.createFeedsPanel__monitorUnreadMessages(),this.createFeedsPanel__listenMessageAttachmentClicked()}else{let e="feeds-ide";this._context===E.a.STUDENT_DASHBOARD?e="feeds-student-dashboard":this._context===E.a.TEACHER_DASHBOARD&&(e="feeds-teacher-dashboard");let s="/ide/v3?type=feeds&context=".concat(this._context,"&loadScreen=").concat(e);const n=y.a.get("ideCacheToken");n&&(s+="&cache=max&v=".concat(n));const i='<iframe src="'.concat(s,'" frameborder="0"></iframe>');this.$panel.append(i);let o=this.element;this._context===E.a.IDE_BRAMBLE&&(o=t(".bramble-editor-container__right")),o.append(this.$panel);const r=t("iframe",this.$panel);try{if(await v.a.waitIframeLoaded(r,{retryUrl:s,waitSelectorMode:"available"}),!1===this.isDeployed())return}catch(t){return void this.destroy()}const a=r[0];if(f.a.object(a),this.reduxWrapper=a.contentWindow.__ReduxWrapper,f.a.object(this.reduxWrapper),this.extensionManager=a.contentWindow.__ExtensionManager,f.a.object(this.extensionManager),this.extensionFeeds=await this.extensionManager.waitExtensionEnabled("extension-feeds"),!1===this.isDeployed())return;if(f.a.object(this.extensionFeeds),this.extensionComponentsFeeds=await this.extensionManager.waitExtensionEnabled("extension-components-feeds"),!1===this.isDeployed())return;if(f.a.object(this.extensionComponentsFeeds),this.createFeedsPanel__monitorUnreadMessages(),this.createFeedsPanel__listenOpenProject(),this.createFeedsPanel__listenMessageAttachmentClicked(),[E.a.STUDENT_DASHBOARD,E.a.TEACHER_DASHBOARD].includes(this._context))this.createFeedsPanel__student__changeButtonStyleOnHashChange(),this.createFeedsPanel__student__selectChannelOnHashChange(),this.createFeedsPanel__student__setHashOnSelectFeed();else if(this._context===E.a.IDE_BRAMBLE){const t=this.projectId;f.a.string(t);const e=y.a.get("hasCoach",!1),s=y.a.get("coachedStudentId");if(e){const t=y.a.get("sessionUserId");f.a.string(t);const e="feeds/coaching/users/".concat(t,"/notebooks/").concat(this.projectId);this.reduxWrapper.put(this.extensionFeeds.FeedsActions.selectFeed(e))}else if(s){const t="feeds/coaching/users/".concat(s,"/notebooks/").concat(this.projectId);this.reduxWrapper.put(this.extensionFeeds.FeedsActions.selectFeed(t))}else Object(f.a)(!1,"trying to show coaching feed in invalid state: coach without coached student param");this._avatarUserId?this._class="toolbar-feeds-button--avatar":this._class="toolbar-feeds-button--stream",this.$evalAsync(),window.__addCodeAttachmentToFeedPost=((t,e)=>{this.reduxWrapper.put(this.extensionFeeds.FeedsActions.addPostAttachmentCode(t,{editor:e})),showFeedsPanel()}),window.__setPostContainerClipboardHints=(t=>{this.reduxWrapper.put(this.extensionFeeds.FeedsActions.setPostContainerClipboardHints(t))}),window.__clearFeedHighlights=(()=>{this.reduxWrapper.put(this.extensionFeeds.FeedsActions.clearHighlightedMessageAttachment())}),this._contextBrambleIde__listenAttachments()}}const e=t(".toolbar-feeds-panel__close-button",this.$panel);this.domBind(e,"click",()=>this.hideFeedsPanel()),this._showFeedsPanel&&this.showFeedsPanel(),this.$on("showFeedsPanel",()=>this.showFeedsPanel()),this.$on("addPostAttachmentImage",(t,e)=>this.reduxWrapper.put(this.extensionFeeds.FeedsActions.addPostAttachmentImage(e))),this.taskListenTakeScreenshot()}async _contextBrambleIde__listenAttachments(){for(;;){const t=await this.reduxWrapper.take(this.extensionFeeds.FeedsActions.MESSAGE_ATTACHMENT_CLICKED);if(!1===this.isDeployed())return;const e=t.payload.channelId;f.a.string(e);const s=t.payload.sequenceId;f.a.integer(s);const n=t.payload.attachmentId;f.a.string(n);const i=this.extensionFeeds.FeedsState,o=i.currentScopeState(),r=i._messageIdForParts(e,s);f.a.string(r);const a=i.messageForMessageId(o,r);f.a.object(a);const c=i._attachmentForMessage(a,n);if(f.a.object(c),c.type!==C.a.CODE)continue;const l=c.code;f.a.string(l);const d=c.editor;f.a.object(d);const u=this.extensionFeeds.FeedsState._messageAttachmentIdForMessageAndAttachment(a,c);f.a.string(u),this.reduxWrapper.put(this.extensionFeeds.FeedsActions.highlightMessageAttachment(u,{scrollIntoView:!1})),window.__highlightCode(l,d)}}async taskListenTakeScreenshot(){for(;;){if(await this.reduxWrapper.take(this.extensionFeeds.FeedsActions.TAKE_SCREENSHOT),!1===this.isDeployed())return;if(this.reduxWrapper.put(this.extensionFeeds.FeedsActions.unselectPostAttachmentType()),this._context===E.a.IDE_BRAMBLE){let e=this._collectIframeBodies(document.body);e=e.filter(e=>{const s=t(e);return!s.hasClass("ide-app")&&!s.hasClass("bramble-ide")});for(const t of e){const e=await S.a.takeScreenshot__html2canvas(t);if(!1===this.isDeployed())return;this.reduxWrapper.put(this.extensionFeeds.FeedsActions.addPostAttachmentImage(e))}}else{const t=await S.a.takeScreenshot__html2canvas(document.body);if(!1===this.isDeployed())return;this.reduxWrapper.put(this.extensionFeeds.FeedsActions.addPostAttachmentImage(t))}}}_collectIframeBodies(e){const s=[],n=async e=>{t("iframe",e).each((e,i)=>{const o=t(i).contents(),r=t("body",o)[0];r&&s.push(r),n(o)})};return n(e),s}async _contextBrambleIde__listenAttachments(){for(;;){const t=await this.reduxWrapper.take(this.extensionFeeds.FeedsActions.MESSAGE_ATTACHMENT_CLICKED);if(!1===this.isDeployed())return;const e=t.payload.channelId;f.a.string(e);const s=t.payload.sequenceId;f.a.integer(s);const n=t.payload.attachmentId;f.a.string(n);const i=this.extensionFeeds.FeedsState,o=i.currentScopeState(),r=i._messageIdForParts(e,s);f.a.string(r);const a=i.messageForMessageId(o,r);f.a.object(a);const c=i._attachmentForMessage(a,n);if(f.a.object(c),c.type!==C.a.CODE)continue;const l=c.code;f.a.string(l);const d=c.editor;f.a.object(d);const u=this.extensionFeeds.FeedsState._messageAttachmentIdForMessageAndAttachment(a,c);f.a.string(u),this.reduxWrapper.put(this.extensionFeeds.FeedsActions.highlightMessageAttachment(u,{scrollIntoView:!1})),window.__highlightCode(l,d)}}async createFeedsPanel__monitorUnreadMessages(){const t=await this.extensionManager.waitExtensionEnabled("extension-lynker");if(!1!==this.isDeployed())for(f.a.object(t);;){await this.reduxWrapper.take([t.extensionActions.CLEAR_CHANNEL_UNREAD_MESSAGES,t.extensionActions.SET_LAST_SEEN_MESSAGE_SEQUENCE_ID,I.a.succeededActionTypeForActionType(t.extensionActions.JOIN_CHANNELS),I.a.succeededActionTypeForActionType(t.extensionActions.LEAVE_CHANNELS),I.a.succeededActionTypeForActionType(t.extensionActions.LOAD_CHANNELS_STATS),this.extensionFeeds.FeedsActions.SELECT_FEED,this.extensionFeeds.FeedsActions.ADD_MESSAGES,I.a.succeededActionTypeForActionType(this.extensionFeeds.FeedsActions.SET_NOTIFICATION_FEEDS)]);if(!1===this.isDeployed())return;const e=this.getTotalFeedUnreadMessages(),s=e>9?"9+":e;this.$counter.html(s),e>0?this.$counter.css("display","flex"):this.$counter.css("display","none")}}getTotalFeedUnreadMessages(){const t=this.extensionFeeds.FeedsState.currentScopeState(),e=this.extensionFeeds.FeedsState.getSelectedFeed(t),s=e?e.channelId:null,n={};return s&&(n.channelIdsWhitelist=[s]),this.extensionFeeds.FeedsState.getTotalFeedUnreadMessages(t,n)}async createFeedsPanel__listenOpenProject(){for(f.a.object(this.extensionFeeds);;){const t=await this.reduxWrapper.take(this.extensionFeeds.FeedsActions.OPEN_PROJECT);if(!1===this.isDeployed())return;const e=t.payload.projectId;f.a.string(e);const s=encodeURIComponent(window.location.href),n=encodeURIComponent("/ide/v3?p=".concat(e,"&showFeed=true")),i="/api/redirectexperiencetop?experienceTop=".concat(s,"&next=").concat(n);window.open(i,"_blank")}}async createFeedsPanel__listenMessageAttachmentClicked(){for(;;){const t=await this.reduxWrapper.take(this.extensionFeeds.FeedsActions.MESSAGE_ATTACHMENT_CLICKED);if(!1===this.isDeployed())return;const e=t.payload.channelId;f.a.string(e);const s=t.payload.sequenceId;f.a.integer(s);const n=t.payload.attachmentId;f.a.string(n);const i=this.extensionFeeds.FeedsState,o=i.currentScopeState(),r=i._messageIdForParts(e,s);f.a.string(r);const a=i.messageForMessageId(o,r);f.a.object(a);const c=i._attachmentForMessage(a,n);f.a.object(c),c.type===C.a.LINK?this._createFeedsPanel__listenMessageAttachmentClicked__link(a,c):c.type===C.a.IMAGE?this._createFeedsPanel__listenMessageAttachmentClicked__image(a,c):c.type===C.a.CLASS_ASSIGNMENT_COURSE?this._createFeedsPanel__listenMessageAttachmentClicked__classAssignmentCourse(a,c):c.type===C.a.CLASS_ASSIGNMENT_LESSON&&this._createFeedsPanel__listenMessageAttachmentClicked__classAssignmentLesson(a,c)}}async createFeedsPanel__student__changeButtonStyleOnHashChange(){const t=async()=>{const t=window.location.hash;f.a.string(t);const e=t.split("/");e.length>=3&&"my-classes"===e[1]&&e[2].match(/^[0-9a-fA-F]{24}$/)?this._class="toolbar-feeds-button--stream":this._class="toolbar-feeds-button--notifications",this.$evalAsync()};t(),this.domBind(window,"hashchange",t)}async createFeedsPanel__student__selectChannelOnHashChange(){const t=async()=>{const t=window.location.hash;f.a.string(t);const e=this.extensionFeeds.FeedsState;f.a.object(e);const s=e.currentScopeState();f.a.object(s);const n=e.getSelectedFeedId(s);f.a.string(n);const i=this._student__feedIdFromHash(t);i!==n&&(await this.selectFeed(i,{updateLocationHash:!1}),this.isDeployed())};t(),this.domBind(window,"hashchange",t)}async createFeedsPanel__student__setHashOnSelectFeed(){for(;;){const t=await this.reduxWrapper.take(this.extensionFeeds.FeedsActions.SELECT_FEED);if(!1===this.isDeployed())return;if(!1===(void 0===t.payload.updateLocationHash||t.payload.updateLocationHash))continue;const e=t.payload.feedId,s=this._student__hashFromFeedId(e);s&&(window.location.hash=s)}}_student__feedIdFromHash(t){const e=this.extensionFeeds.FeedsState;f.a.object(e);const s=e._getNotificationsFeedId();f.a.string(s);const n=this._student__classroomIdFromHash(t);return null==n?s:"feeds/classrooms/".concat(n)}_student__classroomIdFromHash(t){if(!1===t.startsWith("#/my-classes/"))return null;const e=t.split("/"),s=e.length>=3?e[2]:null;return s||null}_student__classroomIdFromFeedId(t){if(!1===t.startsWith("feeds/classrooms/"))return null;const e=t.split("/");if(e.length<3)return null;const s=e[2];return s||null}_student__hashFromFeedId(t){if("$$notifications"===t)return"#/my-classes/";const e=this._student__classroomIdFromFeedId(t);return e?"#/my-classes/".concat(e,"/lessons"):null}_createFeedsPanel__listenMessageAttachmentClicked__link(t,e){const s=e.url;s&&window.open(s,"_blank")}_createFeedsPanel__listenMessageAttachmentClicked__image(e,s){if(null==s.imageUrl)return;if(t("iframe",this.$panel).length>0){const t=s.imageUrl;f.a.string(t);const e=new Image;e.src=s.imageUrl;const n=640,i=480,o=void 0!==window.screenLeft?window.screenLeft:window.screenX,r=void 0!==window.screenTop?window.screenTop:window.screenY,a=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,c=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,l=a/window.screen.availWidth,d=(a-n)/2/l+o,u=(c-i)/2/l+r,h=n/l,g=i/l,p=window.open("","_blank","width=".concat(h,",height=").concat(g,",top=").concat(u,",left=").concat(d,",scrollbars=yes"));p.document.write(e.outerHTML),p.document.title="Feed Image"}else{const t=this.extensionManager.enabledExtensionById("extension-core-directives");f.a.object(t);const e='<img src="'.concat(s.imageUrl,'" style="width: 100%; max-width: 640px;">');this.reduxWrapper.put(t.ModalDialogActions.show(e,{showConfirmButton:!1,showCloseButton:!0}))}}_createFeedsPanel__listenMessageAttachmentClicked__classAssignmentCourse(t,e){if(this._context===E.a.TEACHER_DASHBOARD)return;const s=e.classroomId;if(!s)return;const n=e.courseId;if(!n)return;const i="#/my-classes/".concat(s,"/lessons/").concat(n);window.location.hash=i}_createFeedsPanel__listenMessageAttachmentClicked__classAssignmentLesson(t,e){if(this._context===E.a.TEACHER_DASHBOARD)return;const s=e.classroomId;if(!s)return;const n=e.assignmentId;if(!n)return;const i=this.extensionFeeds.FeedsState.currentScopeState(),o=this.extensionFeeds.FeedsState.getClassroomAssignment(i,s,n);if(o&&!1===o.assigned)return;const r="/api/dashboard/student/classrooms/startassignment?classroomId=".concat(s,"&assignmentId=").concat(n);window.open(r,"_blank")}async createFeedsPanel__teacher__changeButtonStyleOnHashChange(){const t=async()=>{const t=window.location.hash;f.a.string(t);const e=t.split("/");e.length>=4&&"classrooms"===e[2]&&e[3].match(/^[0-9a-fA-F]{24}$/)?this._class="toolbar-feeds-button--stream":this._class="toolbar-feeds-button--notifications",this.$evalAsync()};t(),this.domBind(window,"hashchange",t)}async createFeedsPanel__teacher__selectChannelOnHashChange(){const t=async()=>{const t=window.location.hash;f.a.string(t);const e=this.extensionFeeds.FeedsState;f.a.object(e);const s=e.currentScopeState();f.a.object(s);const n=e.getSelectedFeedId(s);f.a.string(n);const i=this._teacher__feedIdFromHash(t);i!==n&&(await this.selectFeed(i,{updateLocationHash:!1}),this.isDeployed())};t(),this.domBind(window,"hashchange",t)}async createFeedsPanel__teacher__setHashOnSelectFeed(){for(;;){const t=await this.reduxWrapper.take(this.extensionFeeds.FeedsActions.SELECT_FEED);if(!1===this.isDeployed())return;if(!1===(void 0===t.payload.updateLocationHash||t.payload.updateLocationHash))continue;const e=t.payload.feedId,s=this._teacher_hashFromFeedId(e);s&&(window.location.hash=s)}}_teacher__feedIdFromHash(t){const e=this.extensionFeeds.FeedsState;f.a.object(e);const s=e._getNotificationsFeedId();f.a.string(s);const n=this._teacher__classroomIdFromHash(t);return null==n?s:"feeds/classrooms/".concat(n)}_teacher__classroomIdFromHash(t){if(!1===t.startsWith("#/t/classrooms/"))return null;const e=t.split("/"),s=e.length>3?e[3]:null;return s||null}_teacher__classroomIdFromFeedId(t){if(!1===t.startsWith("feeds/classrooms/"))return null;const e=t.split("/");if(e.length<3)return null;const s=e[2];return s||null}_teacher_hashFromFeedId(t){if("$$notifications"===t)return"#/t/home/active";const e=this._teacher__classroomIdFromFeedId(t);return e?"#/t/classrooms/".concat(e,"/courses"):null}async selectFeed(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f.a.string(t),Object(f.a)(!1===t.endsWith("/")),f.a.object(e);const s=this.extensionFeeds.FeedsState.currentScopeState();!1===this.extensionFeeds.FeedsState.isStarted(s)&&await this.reduxWrapper.take(this.extensionFeeds.FeedsActions.STARTED),await this.reduxWrapper.putAndWait(this.extensionFeeds.FeedsActions.selectFeed(t,e)),!1!==this.isDeployed()&&this.reduxWrapper.put(this.extensionFeeds.FeedsActions.enableSkipMarkSeenMessages())}},b()(i,"CLASS",()=>"ToolbarFeedsButtonDirectiveControllerClass"),n=o))||n}).call(e,s(4))},714:function(t,e){},715:function(t,e,s){"use strict";var n=s(6),i=(s.n(n),s(0)),o=s(716),r=s(717);const a=new class{async takeScreenshot__html2canvas(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i.a.object(t),i.a.object(e);const s=window.innerHeight/window.innerWidth,n=Math.ceil(window.innerWidth<1024?window.innerWidth:1024),a=Math.ceil(n*s),c=await r.a.loadHtml2Canvas(),l=await c(t,{logging:!1});return o.a.resize(l,n,a).toDataURL("image/jpg")}async takeScreenshot__capture(){return await(async()=>{const t=document.createElement("canvas"),e=t.getContext("2d"),s=document.createElement("video"),n=await navigator.mediaDevices.getDisplayMedia();s.srcObject=n,e.drawImage(s,0,0,window.width,window.height);const i=t.toDataURL("image/jpg");return n.getTracks().forEach(t=>t.stop()),i})()}};e.a=a},716:function(t,e,s){"use strict";var n=s(6),i=(s.n(n),s(0));const o=new class{async blobFromCanvas(t){return new Promise(e=>t.toBlob(t=>e(t)))}canvasFromImage(t){const e=document.createElement("canvas");return e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),e}resize(t,e,s){if(Object(i.a)(void 0!==e&&void 0!==s),t.width===e&&t.height===s)return t;const n=this.clone(t);return t.width=e,t.height=s,t.getContext("2d").drawImage(n,0,0,t.width,t.height),t}clone(t){return this.getRegion(t,0,0,t.width,t.height)}getRegion(t,e,s,n,i){const o=document.createElement("canvas");return o.width=n,o.height=i,o.getContext("2d").drawImage(t,e,s,n,i,0,0,n,i),o}};e.a=o},717:function(t,e,s){"use strict";var n=s(6),i=(s.n(n),s(0)),o=(s(718),s(76));const r=new class{async loadPackage(t){return i.a.string(t),"codemirror"===t?await this.loadCodeMirror():"prettier"===t?await this.loadPrettier():"spine"===t?await this.loadSpine():void Object(i.a)(!1,"unknown package: ".concat(t))}async loadCodeMirror(){return this.__codeMirror?this.__codeMirror:(this.__codeMirror=await o.a.loadChunk(()=>s.e(0).then(s.bind(null,744))),this.__codeMirror)}async loadPrettier(){return this.__prettier?this.__prettier:(this.__prettier=await o.a.loadChunk(()=>s.e(1).then(s.bind(null,745))),this.__prettier)}async loadSpine(){if(this.__spine)return this.__spine;const t=await o.a.loadChunk(()=>s.e(3).then(s.bind(null,746)));i.a.object(t);const e=t.spine;return i.a.object(e),this.__spine=e,this.__spine}async loadHtml2Canvas(){if(this.__html2canvas)return this.__html2canvas;const t=await o.a.loadChunk(()=>s.e(2).then(s.bind(null,747)));i.a.object(t);const e=t.html2canvas;return i.a.function(e),this.__html2canvas=e,this.__html2canvas}};e.a=r},718:function(t,e,s){"use strict";var n=s(1),i=(s.n(n),s(2));s.n(i),s(0)},719:function(t,e,s){"use strict";var n=s(49);const i=new class extends n.a{get ENUM(){return{IDE:"ide",IDE_COACHING:"ide-coaching",IDE_BRAMBLE:"ide-bramble",STUDENT_DASHBOARD:"student-dashboard",TEACHER_DASHBOARD:"teacher-dashboard",TEACHER_DASHBOARD_INBOX:"teacher-dashboard-inbox"}}};e.a=i},721:function(t,e,s){"use strict";var n=s(1),i=(s.n(n),s(6)),o=(s.n(i),s(184)),r=(s.n(o),s(111)),a=(s.n(r),s(9)),c=(s.n(a),s(136)),l=(s.n(c),s(19)),d=(s.n(l),s(2)),u=(s.n(d),s(3)),h=s.n(u),g=s(0),p=s(25),b=s(722),m=s(182),f=s(725),y=s(726),v=s(731),_=s(732),I=s(734),A=s(735),w=s(300),S=s(185);const E={nop:!0,valueparam:!0,blockcomment:!0,blockinlinecomment:!0,valuevar:!0,valuescriptvar:!0,valuelist:!0};class C extends S.a{constructor(){super(...arguments),h()(this,"cache",m.a.create("ExtensionUtils.cache"))}async extensionIdsForProjectDocument(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_.a.assert(t);const s=this._get(e,"useStats",!1),n=JSON.parse(t.data);g.a.object(n);const i=n._id;g.a.string(i);let o=s?this._extensionIdsForLevelIdFromProjectDocumentStats(t,i,0):[];null==o&&(o=this.blockExtensionIdsForString(t.data),s&&this.logger.warn("unable to find pre-computed stats for project, computing in the client-side"));const r=t.notes?this.blockExtensionIdsForString(t.notes):[];g.a.array(r);const a=n.libs?n.libs:[];g.a.array(a);const c=a.length>0?await this.extensionIdsForLibraryIds(a):[];return[...new Set([...o,...r,...c])]}blockExtensionIdsForProjectDocumentLevel(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};g.a.object(t),I.a.assert(e),g.a.object(s);const n=this._get(s,"useStats",!1);let i=null;const o=e._id;g.a.string(o);const r=_.a.getLevels(t);for(let t=0;t<r.length;t++){r[t]._id===o&&(i=t)}if(null===i)return[];let a=n?this._extensionIdsForLevelIdFromProjectDocumentStats(t,o,i):[];if(null==a){let t=I.a.getActors(e);t=t.filter(t=>!1===y.a.isLibraryActor(t));const s=JSON.stringify(t);a=this.blockExtensionIdsForString(s),g.a.array(a),n&&this.logger.warn("unable to find pre-computed stats for project, computing in the client-side")}return a}blockExtensionIdsForTutorial(t){v.a.assert(t);const e=v.a.getTutorial(t),s=e?JSON.stringify(e):null,n=s?this.blockExtensionIdsForString(s):[];return g.a.array(n),n}blockExtensionIdsForProject(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];v.a.assert(t);const e=p.a.addTimeStart("blockExtensionIdsForProject"),s=v.a.getSelectedLevelId(t),n=this.blockExtensionIdsForProjectLevelId(t,s),i=this.blockExtensionIdsForTutorial(t);return p.a.addTimeEnd(e),[...new Set([...n,...i])]}blockExtensionIdsForProjectLevelId(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};g.a.object(t),g.a.string(e),g.a.object(s);const n=this._get(s,"useStats",!1),i=v.a.getProjectDocument(t);g.a.object(i);const o=v.a.levelById(t,e);g.a.object(o);const r=v.a.getLevelIndex(t,o);let a=n?this._extensionIdsForLevelIdFromProjectDocumentStats(i,e,r):null;if(null==a){const t=JSON.stringify(o);a=this.blockExtensionIdsForString(t),n&&this.logger.warn("unable to find pre-computed stats for project, computing in the client-side")}return[...new Set([...a])]}async extensionIdsForLibraryIds(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};g.a.array(t),g.a.object(e);const s=this._get(e,"useStats",!1),n=[];for(const e of t){const t=A.a.getLibraryCacheToken();let s=t?"library-".concat(t):null;s=s?{token:s,applyToUrl:!0}:null;const i=b.a.get("/api/v2/libraries/get?namespace=".concat(e),{cache:s});n.push(i)}const i=Promise.all(n),o=await i,r={};for(const t of o){const e=t._libraryStats;if(s&&e){const t=e.blockCountsMap;g.a.object(t);const s=Object.keys(t),n=this.extensionIdsForBlockIds(s);for(const t of n)r[t]=!0}else{const e=t.data;g.a.string(e);const n=this.blockExtensionIdsForString(e);g.a.array(n);for(const t of n)r[t]=!0;s&&this.logger.warn("unable to find pre-computed stats for library, computing in the client-side")}}return Object.keys(r)}_extensionIdsForLevelIdFromProjectDocumentStats(t,e,s){g.a.object(t),g.a.string(e),g.a.integer(s);const n=t._projectStats;if(null==n)return null;f.a._patchEmptyDictionary(n,"levelIdBlockCountsMap.".concat(e));let i=n.levelIdBlockCountsMap[e];if(void 0===i&&(f.a._patchEmptyDictionary(n,"levelIdBlockCountsMap.__index:".concat(s)),i=n.levelIdBlockCountsMap["__index:".concat(s)]),void 0===i)return this.logger.warn("project stats block counts found but level not found: ".concat(e," or ").concat(s),i),null;const o=Object.keys(i),r=this.extensionIdsForBlockIds(o);return g.a.array(r),r}compatibleScriptsForCurrentContext(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=this._get(e,"blockExtensionIdsWhitelist",[]),n=w.a.enabledExtensionByCapability("context");return g.a.object(n),t.filter(t=>{const e=JSON.stringify(t),i=this.blockExtensionIdsForString(e);for(const t of i){const e=w.a.extensionById(t);if(g.a.object(e),void 0!==e.capabilities().context&&e.id()!==n.id())return!1;if(s.length>0&&s.includes(t))return!1}return!0})}stageEditorKitExtensionIdsForTiles(t){if(void 0===this.__tileIdExtensionIdMap){const t={},e=w.a.extensionsByCapability("stage-editor:kit");for(const s of e){const e=s.id(),n=s.getStageEditorKitTileIds();for(const s of n)t[s]=e}this.__tileIdExtensionIdMap=t}const e=this.__tileIdExtensionIdMap;g.a.object(e);const s={},n=I.a._convertTilesTo8Bit(t);g.a.array(n);for(const t of n)for(const n of t){if(0===n)continue;let t=n>>8;if(0===t)continue;const i=e[t];g.a.string(i,"no extension found for tile data type: "+t),s[i]=!0}return Object.keys(s)}blockIdsForString(t){g.a.string(t);const e=this._getBlockExtensionsRegex(),s=t.match(e);return s||[]}blockExtensionIdsForString(t){g.a.string(t);const e=p.a.addTimeStart("".concat(this.className,":blockExtensionIdsForString"));try{const s="blockExtensionIdsForString(".concat(t,")");if(this.cache.has(s))return this.cache.get(s);const n=this.blockIdsForString(t),i=this.extensionIdsForBlockIds(n);return this.cache.set(s,i),i}finally{p.a.addTimeEnd(e)}}extensionIdsForBlockIds(t){const e=t.map(t=>t.toLowerCase()),s=[...new Set(e)],n={},i=this.getBlockIdExtensionIdMap();for(const t of s){if(void 0!==E[t])continue;if(void 0===i[t])throw"no extension found to provide support for block: ".concat(t);n[i[t]]=!0}return Object.keys(n)}extensionIdsForScriptFile(t){return Object(g.a)(t&&"string"==typeof t),w.a.extensionIdsByCapability("blocks:core")}async ensureExtensions(t){t=Array.isArray(t)?t:[t];const e=w.a.getDependencyIdsDeep(t),s=[...new Set([...t,...e])],n=w.a.getDependencyIdsDeep(t,{ignoreLazy:!0}),i=[...new Set([...t,...n])],o=w.a.getEnabledExtensionIds(),r=i.filter(t=>!1===o.includes(t));let a=o.filter(t=>!1===s.includes(t));this.logger.debug("ensure extensions - disable bulk: "+a.join(", ")),await w.a.disableBulk(a),this.logger.debug("ensure extensions - enable bulk: "+r.join(", ")),await w.a.enableBulk(r)}extensionIdForBlockSpecId(t){return g.a.string(t),this.getBlockIdExtensionIdMap()[t.toLowerCase()]}getBlockIdExtensionIdMap(){const t="getBlockIdExtensionIdMap";if(this.cache.has(t))return this.cache.get(t);const e={},s=w.a.extensionsByCapability("blocks");for(const t of s){const s=t.getBlockIds();for(const n of s){const s=n.toLowerCase();Object(g.a)(void 0===e[s]),e[s]=t.id()}}return this.cache.set(t,e),e}_getBlockExtensionsRegex(){const t="_getBlockExtensionsRegex";if(this.cache.has(t))return this.cache.get(t);const e=this.getBlockIdExtensionIdMap();let s=Object.keys(e).join("|");s=s.replace(/\?/g,"\\?");const n=new RegExp(s,"gi");return this.cache.set(t,n),n}get ProjectDocuments(){return this.symbol("ProjectDocuments")}}h()(C,"CLASS",()=>"ExtensionUtilsClass");const x=new C;e.a=x},722:function(t,e,s){"use strict";var n=s(6),i=(s.n(n),s(9)),o=(s.n(i),s(43)),r=(s.n(o),s(3)),a=s.n(r),c=s(0),l=s(76),d=s(723),u=s(287),h=s(21);class g extends h.a{async get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(c.a.string(t),c.a.object(e),t=this._addLocaleParam(t),this._get(e,"merge",!0)){const s="".concat(this.className,":").concat(t);return await l.a.performTask(s,()=>this._requestGet(t,e))}return await this._requestGet(t,e)}async _requestGet(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c.a.string(t),c.a.object(e);const s=void 0!==e.legacy&&e.legacy,n=await d.a.get(t,e);return s?n:JSON.parse(n).data}async post(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c.a.string(t),c.a.object(e);const s=void 0!==e.legacy&&e.legacy,n=await d.a.post(t,e);return s?n:JSON.parse(n).data}_addLocaleParam(t){if(t.includes("".concat("locale","=")))return t;const e=u.a.getCurrentLocale();return"en"===e||e.startsWith("en_")?t:t.includes("?")?"".concat(t,"&").concat("locale","=").concat(e):"".concat(t,"?").concat("locale","=").concat(e)}}a()(g,"CLASS",()=>"APIUtilsClass");const p=new g;e.a=p},723:function(t,e,s){"use strict";var n=s(1),i=(s.n(n),s(6)),o=(s.n(i),s(9)),r=(s.n(o),s(2)),a=(s.n(r),s(31)),c=s.n(a),l=s(3),d=s.n(l),u=s(0),h=s(25),g=s(76),p=s(182),b=s(304),m=s(724),f=s(21);class y extends f.a{constructor(){super(...arguments),d()(this,"cache",p.a.create("RequestUtilsClass",{maxSize:1e3}))}async fetch(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=this._get(e,"retries",2),n=this._get(e,"retryDelay",1e3),i=this._get(e,"fetchOptions",{}),o=this._get(e,"raw",!1);let r=this._get(e,"cache",null);r=this._expandCacheOption(r),Object(u.a)(null===r||"object"==typeof r);const a=this._applyCacheToUrl(t,r),c=r?this._applyCacheToUrl(t,r,{applyToUrl:!0}):null;if(!1===o&&c&&this.cache.has(c)){const t=this.cache.get(c);return this.logger.log("requested ".concat(a," (cache hit)"),t),t}void 0===i.credentials&&(i.credentials="same-origin"),this.logger.log("requesting ".concat(a," (uncached)"));let l=null;try{const t=h.a.addTimeStart("RequestUtils:fetch");l=await g.a.retry(()=>fetch(a,i),{promiseId:a,retries:s,retryDelay:n,shouldRetryCallback:t=>!!b.a.isPotentialDowntimeStatusCode(t.status)}),h.a.addTimeEnd(t)}catch(t){throw this.logger.error("request failed: ".concat(a),t),new m.a(a)}if(l.ok){let t=l;return!1===o&&(t=await l.text()),c&&!1===o&&this.cache.set(c,t),t}{let t="";try{const e=await l.text(),s=JSON.parse(e);t=JSON.stringify(s,null,4)}catch(t){}throw this.logger.error("request failed: ".concat(a," (").concat(l.status,"): ").concat(t)),new m.a(a,l)}}async get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.fetch(t,e)}async post(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=void 0!==e.formData?e.formData:{},n=new FormData;for(const[t,e]of Object.entries(s))if(u.a.string(t),Object(u.a)(!1===[null,void 0].includes(e)),Array.isArray(e)){let s="".concat(t,"[]");for(const t of e){const e="string"==typeof t?t:JSON.stringify(t);n.append(s,e)}}else n.append(t,e);const i=c()({},e);delete i.cache;const o={method:"POST",body:n};return i.fetchOptions=o,await this.fetch(t,i)}_applyCacheToUrl(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null==e)return t;u.a.object(e);let n=c()({},e,s);if(!0!==n.applyToUrl)return t;const i=n.token;return u.a.string(i),t.includes("?")?t+"&cache=max&v="+i:t+"?cache=max&v="+i}_expandCacheOption(t){if([void 0,null].includes(t))return null;let e=null;return"string"==typeof t?e={token:t,applyToUrl:!1}:(u.a.object(t),e=c()({},t)),u.a.string(e.token),e.applyToUrl=this._get(e,"applyToUrl",!1),e}_isResponseCloudflareCacheHit(t){u.a.object(t);let e=!1;for(let s of t.headers.entries()){const[t,n]=s;if("cf-cache-status"===t){if("HIT"!==n)break;e=!0;break}}return e}}d()(y,"CLASS",()=>"RequestUtilsClass");const v=new y;e.a=v,window.__RequestUtils=v},724:function(t,e,s){"use strict";var n=s(180),i=s(304);e.a=class extends n.a{constructor(t,e){const s=e?e.status:"not reachable";super("failed to fetch '".concat(t,"' (").concat(s,")")),this.name="RequestFailedException",this.url=t,this.response=e}getStatusCode(){return null==this.response?null:this.response.status}isSessionExpired(){return null!=this.response&&this.response.status===i.a.FORBIDDEN}isPotentialDowntime(){const t=this.getStatusCode();return i.a.isPotentialDowntimeStatusCode(t)}}},725:function(t,e,s){"use strict";var n=s(163),i=s.n(n),o=s(0);const r=new class{_patchEmptyDictionary(t,e){o.a.object(t);const s=i.a.get(t,e);!1!==Array.isArray(s)&&(s.length>0||i.a.set(t,e,{}))}};e.a=r},726:function(t,e,s){"use strict";var n=s(186),i=(s.n(n),s(1)),o=(s.n(i),s(305)),r=(s.n(o),s(9)),a=(s.n(r),s(2)),c=(s.n(a),s(31)),l=s.n(c),d=s(183),u=s.n(d),h=s(3),g=s.n(h),p=s(181),b=(s.n(p),s(0)),m=s(86),f=s(112);function y(){const t=u()(["Stage"]);return y=function(){return t},t}const v="",_=[],I=600,A=3840,w=400,S=2160;class E extends f.a{constructor(){super(...arguments),g()(this,"STAGE_NAME","Stage"),g()(this,"MIN_SCALE",1e-5)}isId(t){return"string"==typeof t}assertId(t){Object(b.a)(this.isId(t),()=>"value is not an actor id: ".concat(t))}isActor(t){return!!this.isNormalActor(t)||!!this.isLibraryActor(t)}assert(t){Object(b.a)(this.isActor(t),()=>"invalid actor: ".concat(JSON.stringify(t)))}isLibraryActor(t){const e=Array.isArray(t)?t:[t];for(const t of e){if(null==t)return!1;if("object"!=typeof t)return!1;if(void 0===t._id)return!1;if(void 0===t.dbid)return!1;if(void 0===t.classname)return!1;if(void 0===t.description)return!1;if(void 0===t.label)return!1;if(void 0===t.ownerid)return!1;if(void 0===t._stepIdStepMap)return!1}return!0}isNormalActor(t){const e=Array.isArray(t)?t:[t];for(const s of e){if(this.isLibraryActor(t))return!1;if(null==s)return!1;if("object"!=typeof s)return!1;if(void 0===s._id)return!1;if(void 0===s.label)return!1;if(void 0!==s.scripts)return!1;if(void 0===s._stepIdStepMap)return!1}return!0}isSame(t,e){return Object(b.a)(this.isActor(t)),Object(b.a)(this.isActor(e)),this.Actors.getId(t)===this.Actors.getId(e)}getId(t){return this.assert(t),t._id}setId(t,e){this.assert(t),Object(b.a)(this.isId(e)),t._id=e}getName(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.assert(t),this.isStageActor(t)?this.getStageName(e):t.label}getStageName(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).translate?Object(p.t)(y()):this.STAGE_NAME}setName(t,e){if(this.assert(t),e)return t.label!==e&&void(t.label=e)}isDeletable(t){if(this.assert(t),this.isStageActor(t))return!1;const e=this._get(t,"_deletable",!0);return b.a.boolean(e),e}setDeletable(t,e){this.assert(t),b.a.boolean(e),t._deletable=e}isViewable(t){return this.assert(t),!0!==t.hidden}setViewable(t,e){this.assert(t),b.a.boolean(e);const s=!1===e;t.hidden=s}ensureIds(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.assert(t);const s=void 0!==e.force&&e.force;t._id=!1===s&&t._id?t._id:this.uuid();const n=this.getScripts(t);this.Steps.ensureIds(n,e),t._stepIdStepMap=this.Steps.stepsMapFromScripts(n)}hasCostume(t){return this.getCostumes(t).length>0}getCostumes(t){this.assert(t);let e=null;return e=this.isStageActor(t)?t.backgrounds?t.backgrounds:[]:t.costumes?t.costumes:[],b.a.array(e),e}getImageCostumes(t){return this.getCostumes(t).filter(t=>this.Costumes.isImageCostume(t))}getSpineCostumes(t){const e=this.getCostumes(t).filter(t=>this.Costumes.isSpineCostume(t));return Object(b.a)(0===e.length||1===e.length),e}getSelectedCostumeIndex(t){this.assert(t);let e=null;return e=this.isStageActor(t)?t.currentBackground:t.currentCostume,(e-=1)<-1&&(e=-1),e}getSelectedCostume(t){this.assert(t);const e=this.getCostumes(t);b.a.array(e);const s=this.getSelectedCostumeIndex(t);if(Object(b.a)(s>=-1),-1===s)return null;const n=e[s%e.length];return Object(b.a)(this.Costumes.isCostume(n)),n}getSelectedCostumeId(t){this.assert(t);const e=this.getSelectedCostume(t);if(this.isStageActor(t)&&null==e)return null;Object(b.a)(e);const s=this.Costumes.getId(e);return b.a.string(s),s}costumeById(t,e){this.assert(t),b.a.string(e);const s=this.getCostumes(t);b.a.array(s);for(const t of s){if(this.Costumes.getId(t)===e)return t}return null}costumeByName(t,e){this.assert(t),b.a.string(e);const s=this.getCostumes(t);b.a.array(s);for(const t of s){const s=this.Costumes.getName(t);if(b.a.string(e),s===e)return t}return null}sortCostumesByIds(t,e){this.assert(t),b.a.array(e);const s=e.map(e=>this.costumeById(t,e)).map(t=>this.Costumes.getName(t));let n=this.getCostumes(t);const i=(n=n.filter(t=>!1===this.Costumes.isSpineCostume(t))).map(t=>this.Costumes.getName(t));for(const t of s)Object(b.a)(i.includes(t),()=>"".concat(t," not found in ").concat(JSON.stringify(i)));for(const t of i)Object(b.a)(s.includes(t),()=>"".concat(t," not found in ").concat(JSON.stringify(s)));const o=this.getSelectedCostume(t),r=o?this.Costumes.getName(o):null;Object(b.a)(null===r||"string"==typeof r&&r),n.sort((t,s)=>{const n=this.Costumes.getId(t),i=this.Costumes.getId(s);return e.indexOf(n)-e.indexOf(i)});const a=[...this.getSpineCostumes(t),...n];if(this.isStageActor(t)?t.backgrounds=a:t.costumes=a,null==o)return;const c=a.map(t=>this.Costumes.getName(t)).indexOf(r);Object(b.a)(c>-1),this.selectCostumeByIndex(t,c)}getImageUrls(t){this.assert(t);let e=[];const s=this.getImageCostumes(t);for(const t of s){const s=this.Costumes.getImageUrl(t);null!=s&&e.push(s)}return e}isStageActor(t){return this.assert(t),!0===t._background}isSpriteActor(t){return this.assert(t),!this.isStageActor(t)&&!this.isLibraryActor(t)}isSpineActor(t){if(!1===this.isSpriteActor(t))return!1;return null!=this.getSkeletonType(t)}getSkeletonType(t){this.assert(t);const e=t.skeletonType;return Object(b.a)(void 0===e||e&&"string"==typeof e),e}getSkeletonParts(t){this.assert(t);const e=t.skeletonParts?t.skeletonParts:{};return b.a.object(e),e}updateSkeleton(t,e,s){this.assert(t),b.a.string(e),b.a.object(s),t.skeletonType=e,t.skeletonParts=s}createActorFromSpine(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};b.a.string(t),b.a.object(e),b.a.object(s);const n=this.Costumes.createCostume({cx:500,cy:500,name:"actor",costumeName:"actor",img:"avatar://spine",forceNumber:!1});b.a.object(n);const i=this.Actors.addActor(l()({scale:"Tiny"===t?1:.25,label:"actor",costumeName:"actor",skeletonType:t,skeletonParts:e,costumes:[n]},s));return b.a.object(i),i}createStageActor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this.uuid();return l()({_id:e,_background:!0,_stepIdStepMap:{},label:this.STAGE_NAME,scaleType:"stretch",width:1024,height:768,canvasWidth:840,canvasHeight:630,canvasExpand:!1,currentBackground:0,backgrounds:[],sounds:[]},t)}addActor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(b.a)("object"==typeof t);const e=this.uuid();return l()({_id:e,_stepIdStepMap:{},label:"actor",costumes:t.costumes&&t.costumes.length>0?t.costumes:[this.Costumes.createCostume()],currentCostume:1,sounds:[],scale:1,x:0,y:0,rotation:0,rotateLock:0,hidden:!1,isHidden:!1,volume:100,locked:!1,zIndex:2,physics:{isStatic:!1,isActive:!0,geometry:"rectangular",density:1,friction:.5,restitution:.2},variables:{},varDefaults:{},lists:{},classname:"actor"},t)}clone(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=this._get(e,"preserveIds",!1);b.a.boolean(s);const n=t._id;b.a.string(n);const i=this._clone(t);return this.ensureIds(i,{force:!0}),!0===s&&(i._id=n),i}detach(t){t&&this.getGroupName(t)&&(delete t.id,delete t.classname)}getGroupName(t){if(t)return t.id&&t.classname?t.classname:void 0}isDetachable(t){return!!this.getGroupName(t)}hasStepId(t,e){return this.assert(t),b.a.string(e),void 0!==this.getStepsMap(t)[e]}getStepsMap(t){return this.assert(t),Object(b.a)(t&&t._stepIdStepMap&&"object"==typeof t._stepIdStepMap),t._stepIdStepMap}hasSteps(t){return this.assert(t),this.getSteps(t).length>0}getSteps(t){this.assert(t);const e=this.getStepsMap(t);return Object.values(e)}getStep(t,e){return this.assert(t),this.getStepsMap(t)[e]}getStepIds(t){const e=this.getStepsMap(t);return Object.keys(e)}getScripts(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.assert(t);const s=this.getStepsMap(t),n=this.Steps.scriptsFromStepsMap(s,e);return Object(b.a)(Array.isArray(n)),n}setScripts(t,e){this.assert(t),this.Steps.assertUniqueIds(e),t._stepIdStepMap=this.Steps.stepsMapFromScripts(e)}addScripts(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.Steps.assertUniqueIds(e);const n=[...this.Actors.getScripts(t)];for(const t of e){const e=this.Steps.indexForMatchingScriptInScripts(t,n,s);if(-1!==e){const s=n[e];Object(b.a)(this.Steps.isStep(s)),void 0!==s.x&&void 0!==s.y&&(t.x=s.x,t.y=s.y),n[e]=t}else n.push(t)}this.setScripts(t,n)}addCostumes(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.forEach((e,n)=>{this.addCostume(t,e,s?s+n:null)})}addCostume(t,e,s){this.assert(t),Object(b.a)(this.Costumes.isCostume(e));const n=this.getCostumes(t).map(t=>this.Costumes.getId(t)),i=this.Costumes.getId(e);Object(b.a)(!1===n.includes(i),"duplicate costume found in actor");const o=this.Costumes.getName(e);if(this.Actors.costumeByName(t,o)){const s=this._generateCostumeUniqueName(t,o);this.Costumes.setName(e,s)}const r=this._getCostumesList(t);b.a.array(r),s?r.splice(s,0,e):r.push(e)}getCostumeNameCostumeMap(t){this.assert(t);const e={},s=this.getCostumes(t);for(const t of s){const s=this.Costumes.getName(t);b.a.string(s),Object(b.a)(void 0===e[s],"duplicate costume: ".concat(s)),e[s]=t}return e}_generateCostumeUniqueName(t,e){const s=this.getCostumeNameCostumeMap(t);let n=0,i=null;do{n+=1,i="".concat(e).concat(n)}while(void 0!==s[i]);return i}updateCostume(t,e){this.assert(t),Object(b.a)(this.Costumes.isCostume(e));const s=this.Costumes.getId(e);Object(b.a)(this.costumeById(t,s),"costume not found: ".concat(s));const n=this._getCostumesList(t).map(t=>this.Costumes.isSame(t,e)?e:t);this._setCostumesList(t,n)}setCostumeName(t,e,s){this.assert(t),b.a.string(e),b.a.string(s);const n=this.costumeById(t,e);b.a.object(n),this.Costumes.getName(n)!==s&&(this.costumeByName(t,s)&&(s=this._generateCostumeUniqueName(t,s)),this.Costumes.setName(n,s))}soundByName(t,e){this.assert(t),b.a.string(e);const s=this.getSounds(t);b.a.array(s);for(const t of s){const s=this.Sounds.getName(t);if(b.a.string(e),s===e)return t}return null}addSound(t,e){this.assert(t),Object(b.a)(this.Sounds.isSound(e)),this.ensureSoundUniqueName(t,e),t.sounds=t.sounds?t.sounds:[],t.sounds.push(e)}getSoundNameSoundMap(t){this.assert(t);const e={},s=this.getSounds(t);for(const t of s){const s=this.Sounds.getName(t);b.a.string(s),Object(b.a)(void 0===e[s],"duplicate sound name: ".concat(s)),e[s]=t}return e}ensureSoundUniqueName(t,e){this.assert(t),Object(b.a)(this.Sounds.isSound(e));let s=this.Sounds.getName(e);b.a.string(s);const n=this.getSoundNameSoundMap(t);if(void 0!==n[s]){let t=0,i=null;do{t+=1,i="".concat(s).concat(t)}while(void 0!==n[i]);this.Sounds.setName(e,i)}}deleteSteps(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=!!s.assert&&s.assert;this.assert(t),e=Array.isArray(e)?e:[e];for(const s of e){Object(b.a)(this.Steps.isId(s));const e=this.getStep(t,s);if(Object(b.a)(e),this.Steps.hasParent(e)){const s=this.Steps.getParentId(e),i=this.getStep(t,s);n&&Object(b.a)(i),i?this.Steps.detach(i,e):delete e._parent}if(this.Steps.hasNext(e)){const s=this.Steps.getNextId(e),i=this.getStep(t,s);n&&Object(b.a)(i),i?this.Steps.detach(e,i):delete e.next}delete t._stepIdStepMap[s]}}hasVariable(t,e){return void 0!==this.getVariables(t)[e]}getVariable(t,e){return this.getVariables(t)[e]}getVariables(t){return this.assert(t),t.variables?t.variables:{}}getVariableNames(t){this.assert(t);const e=this.getVariables(t);return b.a.object(e),Object.keys(e)}setVariables(t,e){this.assert(t),b.a.object(e),t.variables=e}addVariable(t,e){if(this.assert(t),b.a.string(e),this.hasVariable(t,e))return;const s=this.getVariables(t);b.a.object(s),s[e]=v,this.setVariables(t,s)}getVariableDefaults(t){return this.assert(t),t.varDefaults?t.varDefaults:{}}upsertVariable(t,e,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;this.assert(t),b.a.string(e),Object(b.a)(void 0!==s),t.variables=t.variables?t.variables:{},t.varDefaults=t.varDefaults?t.varDefaults:{},t.variables[e]=s,void 0!==n?t.varDefaults[e]=n:delete t.varDefaults[e]}deleteVariable(t,e){this.assert(t),b.a.string(e),delete t.variables[e],delete t.varDefaults[e]}getLists(t){return this.assert(t),t.lists?t.lists:{}}hasList(t,e){return this.assert(t),b.a.string(e),void 0!==this.getLists(t)[e]}getListNames(t){this.assert(t);const e=this.getLists(t);return b.a.object(e),Object.keys(e)}setLists(t,e){this.assert(t),b.a.object(e),t.lists=e}addList(t,e){if(this.assert(t),b.a.string(e),this.hasList(t,e))return;const s=this.getLists(t);b.a.object(s),s[e]=_,this.setLists(t,s)}upsertList(t,e,s){this.assert(t),b.a.string(e),Object(b.a)(void 0!==s),t.lists=t.lists?t.lists:{},t.lists[e]=s}deleteList(t,e){this.assert(t),b.a.string(e),delete t.lists[e]}getX(t){return void 0!==t.x?t.x:0}getY(t){return void 0!==t.y?t.y:0}getPosition(t){return{x:this.getX(t),y:this.getY(t)}}setPosition(t,e){if(this.assert(t),b.a.object(e),b.a.number(e.x),b.a.number(e.y),t.x===e.x&&t.y===e.y)return!1;t.x=e.x,t.y=e.y}isValidRotation(t){return!1!==m.a.isNumber(t)}getRotation(t){return this.assert(t),t.rotation?t.rotation:0}setRotation(t,e){this.assert(t),b.a.number(e);let s=e%360;if(s=s<0?s+360:s,t.rotation===s)return!1;t.rotation=s}isValidScale(t){return!1!==m.a.isNumber(t)&&!(t<this.MIN_SCALE)}getScale(t){return this.assert(t),t.scale?t.scale:1}setScale(t,e){if(this.assert(t),Object(b.a)(this.isValidScale(e),"invalid actor scale: ".concat(e)),t.scale===e)return!1;t.scale=e}indexForCostumeId(t,e){this.assert(t),b.a.string(e);const s=this.getCostumes(t);for(let t=0;t<s.length;t++){const n=s[t];Object(b.a)(this.Costumes.isCostume(n));const i=this.Costumes.getId(n);if(b.a.string(i),i===e)return t}return-1}indexForCostumeName(t,e){this.assert(t),b.a.string(e);const s=this.getCostumes(t);for(let t=0;t<s.length;t++){const n=s[t];Object(b.a)(this.Costumes.isCostume(n));const i=this.Costumes.getName(n);if(b.a.string(e),i===e)return t}return-1}selectCostumeById(t,e){this.assert(t),b.a.string(e);const s=this.Actors.getCostumes(t);b.a.array(s);for(let n=0;n<s.length;n++){const i=s[n],o=this.Costumes.getId(i);if(b.a.string(o),o===e)return void this.selectCostumeByIndex(t,n)}Object(b.a)(!1,"costume not found: ".concat(e))}selectCostumeByIndex(t,e){this.assert(t),Object(b.a)(e>=-1),this.isStageActor(t)?(t.currentBackground=e+1,Object(b.a)(t.currentBackground>=0,"invalid current background: ".concat(t.currentBackground))):(t.currentCostume=e+1,Object(b.a)(t.currentCostume>=0))}deleteCostumeById(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.assert(t,()=>"invalid actor ".concat(JSON.stringify(t))),b.a.string(e);const s=this._getCostumesList(t);Object(b.a)(!1===(this.isSpriteActor(t)&&!1===this.isSpineActor(t)&&1===s.length),"sprite non-spine actors must have at least one costume at all times");let n=this.getSelectedCostumeIndex(t);const i=[];let o=null;for(let t=0;t<s.length;t++){const n=s[t];this.Costumes.getId(n)!==e?i.push(n):(Object(b.a)(null==o,"deleted costume index == null"),o=t)}Object(b.a)(null!==o,()=>"costume index for costume being deleted not found: ".concat(e)),this._setCostumesList(t,i),o<=n&&(n-=1),n<=-1&&i.length>0&&(n=0),this.selectCostumeByIndex(t,n)}getSounds(t){return this.assert(t),t.sounds?t.sounds:[]}indexForSoundName(t,e){this.assert(t),b.a.string(e);const s=this.getSounds(t);for(let t=0;t<s.length;t++){const n=s[t];Object(b.a)(this.Sounds.isSound(n));const i=this.Sounds.getName(n);if(b.a.string(e),i===e)return t}return-1}deleteSound(t,e){this.assert(t),b.a.string(e);const s=this.indexForSoundName(t,e);b.a.integerPositive(s),t.sounds.splice(s,1)}isValidZIndex(t){return!1!==m.a.isInteger(t)}getZIndex(t){return this.assert(t),t.zIndex?t.zIndex:0}setZIndex(t,e){if(this.assert(t),b.a.number(e),t.zIndex===e)return!1;t.zIndex=e}getBackgroundType(t){return Object(b.a)(this.isStageActor(t)),t.scaleType}setBackgroundType(t,e){Object(b.a)(this.isStageActor(t)),t.scaleType=e}getBackgroundAutoExpand(t){return Object(b.a)(this.isStageActor(t)),t.canvasExpand}setBackgroundAutoExpand(t,e){Object(b.a)(this.isStageActor(t)),b.a.boolean(e),t.canvasExpand=e}getRotateLock(t){return Object(b.a)(this.isSpriteActor(t)),t.rotateLock}setRotateLock(t,e){Object(b.a)(this.isSpriteActor(t)),b.a.integer(e),Object(b.a)([0,1,2].includes(e)),t.rotateLock=e}getAnchor(t){return this.assert(t),{x:t.costumes[0].ax,y:t.costumes[0].ay}}setAnchor(t,e){this.assert(t);const s=this._getCostumesList(t);for(const t of s)t.ax=e.x,t.ay=e.y,t.imgObj&&(t.cx=t.imgObj.width*e.x,t.cy=t.imgObj.height*e.y)}getPhysics(t){this.assert(t);return t.physics?t.physics:{enabled:!1,gravity:{x:0,y:0}}}setPhysics(t,e){this.assert(t),t.physics=l()({},e)}getStageSize(t){if(Object(b.a)(this.isStageActor(t)),void 0===t.width)return null;if(void 0===t.height)return null;const e=t.width;b.a.number(e);const s=t.height;return b.a.number(s),{width:e,height:s}}setStageSize(t,e){Object(b.a)(this.isStageActor(t));let{width:s,height:n}=e;b.a.number(s),b.a.number(n),s<I&&(s=I),n<w&&(n=w),s>A&&(s=A),n>S&&(n=S),t.width=s,t.height=n}actorScriptsForLesson(t){Object(b.a)(this.isProject(t));let e=[];const s=this.getActors(t);for(const t of s){const s=this.Actors.getScripts(t);e=e.concat(s)}return Object(b.a)(0===e.filter(t=>null==t).length),e}allStepsInActor(t,e){this.assert(t);const s=this.getScripts(t);b.a.array(s);const n=this.Steps.map(s,t=>t.func),i=this.Steps.map(e,t=>t.func);for(const t of i)if(!1===n.includes(t))return!1;return!0}getClassName(t){return t.classname}getSelectedCostumeTrackerId(t){const e=this.getSelectedCostumeIndex(t),s=this.getSelectedCostume(t),n=[t.skeletonType,t.skeletonParts],i=s?this.Costumes.getTrackerId(s,{extras:n}):"";return"".concat(t._id,":").concat(e,":").concat(i)}assertStepReferenceIntegrity(t){this.assert(t);const e=this.Actors.getStepsMap(t);for(const s of Object.values(e)){const n=this.Steps.getReferences(s);for(const t of n)Object(b.a)(void 0!==e[t]);const i=this.Steps.getId(s),o=this.Steps.getParentId(s);if(o){const e=this.getStep(t,o);Object(b.a)(e);const s=this.Steps.getValues(e),n=this.Steps.getContainers(e),r=this.Steps.getContainerLabelValues(e),a=this.Steps.getNextId(e);Object(b.a)(a===i||s.includes(i)||n.includes(i)||r.includes(i))}const r=this.Steps.getNextId(s);if(r){const e=this.getStep(t,r);Object(b.a)(parent);const s=this.Steps.getParentId(e);Object(b.a)(s),Object(b.a)(s===i)}}}assertStepInstances(t){this.assert(t);const e=this.Actors.getStepsMap(t);for(const t of Object.values(e))Object(b.a)(this.Steps.isInstance(t))}assertStepPositions(t){}assertValid(t){this.assert(t),this.assertStepReferenceIntegrity(t),this.assertStepInstances(t),this.assertStepPositions(t)}logSteps(t){this.assert(t);const e=this.getSteps(t);this.logger.debug("log steps - number steps ".concat(e.length));for(const t of e){const e=this.Steps.getId(t),s=this.Steps.getParentId(t),n=this.Steps.getNextId(t),i=this.Steps.getFunctionName(t),o=["log steps - ".concat(e,", ").concat(i)];s&&o.push("parent = ".concat(s)),n&&o.push("next = ".concat(n));const r=o.join(",");this.logger.debug(r)}}_getCostumesList(t){return this.assert(t),this.isStageActor(t)?(t.backgrounds=t.backgrounds?t.backgrounds:[],b.a.array(t.backgrounds),t.backgrounds):(t.costumes=t.costumes?t.costumes:[],b.a.array(t.costumes),t.costumes)}_setCostumesList(t,e){this.assert(t),Object(b.a)(Array.isArray(e)&&this.Costumes.isCostume(e)),this.isStageActor(t)?t.backgrounds=e:t.costumes=e}}g()(E,"CLASS",()=>"ActorsClass");const C=new E;e.a=C},728:function(t,e,s){"use strict";var n=s(0),i=s(729);e.a=(t=>(class extends t{get ProjectScreenshotTypesEnum(){return this.symbol("ProjectScreenshotTypesEnum")}static get Steps(){return this.symbol("Steps")}get Steps(){return this.symbol("Steps")}get Projects(){return this.symbol("Projects")}get Users(){return this.symbol("Users")}get Actors(){return this.symbol("Actors")}get Costumes(){return this.symbol("Costumes")}get Sounds(){return this.symbol("Sounds")}get Positions(){return this.symbol("Positions")}get ProjectDocuments(){return this.symbol("ProjectDocuments")}get ProjectDocumentLevels(){return this.symbol("ProjectDocumentLevels")}get ProjectDocumentLevelActors(){return this.symbol("ProjectDocumentLevelActors")}get ActorsFactory(){return this.symbol("ActorsFactory")}get DragObjectFactory(){return this.symbol("DragObjectFactory")}get DragActionClass(){return this.symbol("DragActionClass")}get DragActorClass(){return this.symbol("DragActorClass")}get DragBlockClass(){return this.symbol("DragBlockClass")}get BulkActionsActions(){return this.symbol("BulkActionsActions")}get StateActions(){return this.symbol("StateActions")}get RuntimeActions(){return this.symbol("RuntimeActions")}get ProjectActions(){return this.symbol("ProjectActions")}get LibrariesActions(){return this.symbol("LibrariesActions")}get DragActions(){return this.symbol("DragActions")}get IDEActions(){return this.symbol("IDEActions")}get SessionActions(){return this.symbol("SessionActions")}get OverlayActions(){return this.symbol("OverlayActions")}get PanelActions(){return this.symbol("PanelActions")}get ModalActions(){return this.symbol("ModalActions")}get ModalDialogActions(){return this.symbol("ModalDialogActions")}get ModalEditActions(){return this.symbol("ModalEditActions")}get InputManager(){return this.symbol("InputManager")}get DragLayer(){return this.symbol("DragLayer")}get ProjectParser(){return this.symbol("ProjectParser")}get LessonConfigUtils(){return this.symbol("LessonConfigUtils")}get RuntimeUtils(){return this.symbol("RuntimeUtils")}get TestUtils(){return this.symbol("TestUtils")}get ObjectIO(){return this.symbol("ObjectIO")}get Runtime(){return this.symbol("Runtime")}get Sprites(){return this.symbol("Sprites")}get SpriteClass(){return this.symbol("SpriteClass")}get Canvas(){return this.symbol("Canvas")}get ScriptClass(){return this.symbol("ScriptClass")}get BlockClass(){return this.symbol("BlockClass")}get LabelClass(){return this.symbol("LabelClass")}get LabelInputClass(){return this.symbol("LabelInputClass")}get LabelImgClass(){return this.symbol("LabelImgClass")}get LabelButtonClass(){return this.symbol("LabelButtonClass")}get LabelTextClass(){return this.symbol("LabelTextClass")}get LabelBreakClass(){return this.symbol("LabelBreakClass")}get Blocks(){return this.symbol("Blocks")}get SpineSkeletons(){return this.symbol("SpineSkeletons")}get State(){return this.symbol("State")}get BlockGen(){return this.symbol("BlockGen")}get CodeGen(){return this.symbol("CodeGen")}get g_parser(){return this.symbol("g_parser")}get FocusManager(){return this.symbol("FocusManager")}get soundManager(){return this.symbol("soundManager")}get SoundGenerator(){return this.symbol("SoundGenerator")}get SoundManagerSoundAudio(){return this.symbol("SoundManagerSoundAudio")}get IDE(){return this.symbol("IDE")}get LegacyUtils(){return this.symbol("LegacyUtils")}get StageActorClass(){return this.symbol("StageActorClass")}get RenderCode(){return this.symbol("RenderCode")}get PickerColor(){return this.symbol("PickerColor")}get PickerBlock(){return this.symbol("PickerBlock")}get PickerAngle(){return this.symbol("PickerAngle")}get LocalizationUtils(){return this.symbol("LocalizationUtils")}get WinSpine(){return this.symbol("WinSpine")}get Avatar(){return this.symbol("Avatar")}get DialogManager(){return this.symbol("DialogManager")}get Characters(){return this.symbol("Characters")}get ActionBroadcasterSaga(){return this.symbol("ActionBroadcasterSaga")}registerSymbols(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.a.object(t),n.a.object(e),i.a.register(t,e)}unregisterSymbolsOwnedById(t){n.a.string(t),i.a.unregisterAllOwnedById(t)}static symbol(t){n.a.string(t);const e=i.a.getById(t);return Object(n.a)(e),e}symbol(t){return this.constructor.symbol(t)}}))},729:function(t,e,s){"use strict";var n=s(3),i=s.n(n),o=s(179);class r extends o.a{}i()(r,"CLASS",()=>"SymbolRegistryClass");const a=new r;e.a=a},730:function(t,e,s){"use strict";var n=s(1),i=(s.n(n),s(2)),o=(s.n(i),s(3)),r=s.n(o),a=s(0);e.a=(t=>{var e,s;return s=e=class extends t{constructor(){super(...arguments),r()(this,"__IDEExtensionPayloadMixin",!0),r()(this,"__classNameExtensionMap",{}),r()(this,"__IDEPayloadInitialized",!1),r()(this,"__extension",null)}static _IDEPayloadInit(){Object(a.a)(!1===this.__IDEPayloadInitialized,"already initialized"),this.__IDEPayloadInitialized=!0}_IDEPayloadInit(){Object(a.a)(!1===this.__IDEPayloadInitialized,"already initialized"),this.__IDEPayloadInitialized=!0}static _IDEPayloadDestroy(){Object(a.a)(!0===this.__IDEPayloadInitialized,"not initialized"),this.__IDEPayloadInitialized=!1}_IDEPayloadDestroy(){Object(a.a)(!0===this.__IDEPayloadInitialized,"not initialized"),this.__IDEPayloadInitialized=!1}id(){const t=this._extension.id(),e=this.classSlug;return"".concat(t,":").concat(e)}static get _extension(){return this.__staticExtension}static set _extension(t){Object(a.a)(t&&null===this.__staticExtension||null===t&&null!==this.__staticExtension),this.__staticExtension=t}get _extension(){const t=this.constructor;return this.__extension?this.__extension:t.__staticExtension}set _extension(t){Object(a.a)(t&&null===this.__extension||null===t&&null!==this.__extension,"extension payload already set"),this.__extension=t}get extensionCore(){const t=this._extension;if(Object(a.a)(t,"owner extension not available"),"extension-core"===t.id())return t;const e=t.extensionCore;return Object(a.a)(e,"core extension not available"),e}get extensionState(){return this._extension.extensionState}get extensionActions(){return this._extension.extensionActions}},r()(e,"__IDEExtensionPayloadMixin",!0),r()(e,"__classNameExtensionMap",{}),r()(e,"__IDEPayloadInitialized",!1),r()(e,"__staticExtension",null),s})},731:function(t,e,s){"use strict";var n=s(186),i=(s.n(n),s(1)),o=(s.n(i),s(305)),r=(s.n(o),s(9)),a=(s.n(r),s(56)),c=(s.n(a),s(2)),l=(s.n(c),s(183)),d=s.n(l),u=s(3),h=s.n(u),g=s(181),p=(s.n(g),s(0)),b=s(86),m=s(112);function f(){const t=d()(["NOP block found, please remove all NOP blocks."]);return f=function(){return t},t}const y="",v=[];class _ extends m.a{isProject(t){return null!=t&&void 0!==t.name}assert(t){Object(p.a)(this.isProject(t),()=>"invalid project: ".concat(JSON.stringify(t)))}getId(t){return this.assert(t),this.__hack__notebook?this.__hack__notebook.id:t.id}setId(t,e){this.assert(t),Object(p.a)(e&&"string"==typeof e),t.id=e}getContext(t){return this.assert(t),t.context}setContext(t,e){this.assert(t),t.context=e}isSaved(t){return this.assert(t),null!=this.getId(t)}hasActorWithClassName(t,e){return this.assert(t),p.a.string(e),this.actorsByClassName(t,e).length>0}getLibraryActor(t,e){this.assert(t),p.a.string(e);const s=this.getLibraryActors(t);p.a.array(s);for(const t of s){if(e===this.Actors.getClassName(t))return t}return null}getLibraryActors(t){this.assert(t);const e=t._libraryActors;return p.a.array(e),e}libraryActorByName(t,e){this.assert(t),p.a.string(e);const s=this.getLibraryActors(t);for(const t of s){const s=this.Actors.getClassName(t);if(p.a.string(s),s===e)return t}return null}actorWithStepId(t,e){this.assert(t),p.a.string(e);const s=this.getActors(t);for(const t of s)if(this.Actors.hasStepId(t,e))return t;return null}getActors(t){if(this.assert(t),this.__hack__notebook)return[];return Object(p.a)(t._actorIds.length===Object.keys(t._actorIdActorMap).length),t._actorIds.map(e=>t._actorIdActorMap[e])}setActors(t,e){this.assert(t),Object(p.a)(this.Actors.isActor(e),"attempted to set invalid actors in project");const s=this._clone(e),n={};for(const t of s){const e=this.Actors.getId(t);p.a.string(e),n[e]=t}t._actorIdActorMap=n,t._actorIds=e.map(t=>this.Actors.getId(t));for(const e of t._libraryActors)t._actorIdActorMap[this.Actors.getId(e)]=e;const i=t._libraryActors.map(t=>this.Actors.getId(t));t._actorIds=[...t._actorIds,...i],this.selectDefaultActor(t)}addActor(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.assert(t),Object(p.a)(this.Actors.isActor(e));const n=this._get(s,"deletable",!0);if(this.Actors.isStageActor(e)){let e=this.getStageActor(t);Object(p.a)(null===e)}const i=this.Actors.getName(e),o=this.actorByName(t,i);if(o&&!1===this.Actors.isSame(e,o)){const s=this._generateUniqueActorName(t,i);this.Actors.setName(e,s)}this.Actors.setDeletable(e,n);const r=this.Actors.getId(e);if(p.a.string(r),Object(p.a)(void 0===t._actorIdActorMap[r]),t._actorIdActorMap[r]=e,Object(p.a)(!1===t._actorIds.includes(r)),t._actorIds.push(r),this.Actors.isLibraryActor(e)){const s=this.Actors.getClassName(e);p.a.string(s);const n=this.libraryActorByName(t,s);Object(p.a)(null==n),t._libraryActors.push(e)}}_generateUniqueActorName(t,e){this.assert(t),p.a.string(e);const s=this.getActorNameActorMap(t);let n=0,i=null;do{n+=1,i="".concat(e).concat(n)}while(void 0!==s[i]);return i}deleteActorById(t,e){if(this.assert(t),p.a.string(e),void 0===t._actorIdActorMap[e])return void this.logger.warn("attempted to delete actor that doesnt exist");delete t._actorIdActorMap[e],Object(p.a)(t._actorIds.includes(e)),t._actorIds=t._actorIds.filter(t=>t!==e),t._libraryActors=t._libraryActors.filter(t=>this.Actors.getId(t)!==e),this.getSelectedActorId(t)===e&&this.selectDefaultActor(t)}selectDefaultActor(t){this.assert(t);const e=this.getStageActor(t);let s=this.getSpriteActors(t);p.a.array(s);const n=(s=s.filter(t=>this.Actors.isViewable(t))).length>0?s[0]:e;if(null==n)return;const i=this.Actors.getId(n);p.a.string(i),this.selectActorById(t,i)}setActorName(t,e,s){this.assert(t),p.a.string(e),p.a.string(s);const n=this.Projects.actorById(t,e);Object(p.a)(this.Actors.isActor(n));const i=this.actorByName(t,s);s=i&&!1===this.Actors.isSame(n,i)?this._generateUniqueActorName(t,s):s,this.Actors.getName(n)!==s&&!1!==this.Actors.setName(n,s)&&this.setDirty(t)}reset(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.assert(t);const s=this._get(e,"resetContext",!0);t.dirty=!1,t.selectedActorId=null,t.selectedLevelId=null,this.setActors(t,[]),t.tutorial=null,t.resourcesLoaded=!1,s&&(t.id=null,t.name="Untitled",t.description=null)}getId(t){this.assert(t);const e=t.id;return Object(p.a)(null===e||"string"==typeof e),e}getName(t){this.assert(t);const e=t.name;return p.a.string(e),e}setName(t,e){this.assert(t),t.name=e||"",this.updateValid(t)}hasTutorial(t){return p.a.object(t),!!this.getTutorial(t)}getTutorial(t){return this.assert(t),t.tutorial}setTutorial(t,e){this.assert(t),Object(p.a)(Array.isArray(e)||null==e),t.tutorial=e}ensureTutorial(t){if(p.a.object(t),this.hasTutorial(t))return!0;this.setTutorial(t,[{comment:"\n                <h1>Title</h1>\n                <h2>Subtitle</h2>\n                <p>Write content here</p>\n            ",context:"stage",size:"full",stage:"stage"}])}clearTutorial(t){t.tutorial=null}getDescription(t){this.assert(t);const e=t.description?t.description:"";return Object(p.a)("string"==typeof e),e}setDescription(t,e){this.assert(t),Object(p.a)("string"==typeof e),t.description=e}getWatchers(t){return this.assert(t),t.watchers?t.watchers:[]}setWatchers(t,e){this.assert(t),p.a.array(e),t.watchers=e}getProjectScreenshotUrl(t){this.assert(t);const e=this.getId(t);if(null==e)return null;const s=this.getRevision(t);let n="/assets/pscreenshot/".concat(e,".png");return s&&(n+="?cache=max&v=".concat(s)),n}getScreenshotType(t){p.a.object(t);const e=this.getProjectDocument(t);if(null==e)return this.ProjectScreenshotTypesEnum.STAGE;const s=this._get(e,"screenshotType",this.ProjectScreenshotTypesEnum.STAGE);return p.a.enum(s,this.ProjectScreenshotTypesEnum),s}getRevision(t){return this.assert(t),t.revision}isValid(t){return this.assert(t),t.valid}updateValid(t){this.assert(t);const e=this.getName(t);t.valid=!!e}isDirty(t){this.assert(t);const e=t.dirty;return p.a.boolean(e),e}setDirty(t){this.assert(t),t.dirty=!0,t.revision=this._generateRevision(),window.__projectDirty=!0}clearDirty(t){this.assert(t),t.dirty=!1,delete window.__projectDirty}getOwnerId(t){if(this.__hack__notebook)return this.__hack__notebook.userid.$id;this.assert(t);const e=this.getProjectDocument(t);if(null==e)return null;p.a.object(e);const s=this.ProjectDocuments.getUserId(e);return s?(p.a.string(s),s):null}getOriginalId(t){this.assert(t);const e=this.getProjectDocument(t);return p.a.object(e),this.ProjectDocuments.getOriginalId(e)}isOwner(t,e){return this.assert(t),Object(p.a)(this.Users.isUser(t)),this.getOwnerId(t)===this.Users.getId(e)}isOwnedByUserId(t,e){return this.assert(t),p.a.string(e),this.getOwnerId(t)===e}isRemix(t){this.assert(t);const e=this.getProjectDocument(t);return p.a.object(e),this.ProjectDocuments.isRemix(e)}getProjectDocument(t){return this.assert(t),t.document}setProjectDocument(t,e){this.assert(t),p.a.object(e);const s=this.ProjectDocuments.getId(e),n=this.ProjectDocuments.getName(e);p.a.string(n);const i=this.ProjectDocuments.getDescription(e),o=this.ProjectDocuments.getWatchers(e);p.a.array(o);const r=this.ProjectDocuments.getTutorial(e),a=this.ProjectDocuments.getLevels(e);p.a.array(a),t.id=s,t.originalDocument=this._clone(e),t.document=e,t.levels=a,t.revision=e.revision?e.revision:this._generateRevision(),this.setName(t,n),r?this.setTutorial(t,r):this.clearTutorial(t),i&&this.setDescription(t,i),this.setWatchers(t,o)}setNotebookProjectDocument(t,e){this.assert(t),p.a.object(e);const s=this.ProjectDocuments.getId(e),n=this.ProjectDocuments.getName(e);p.a.string(n);const i=this.ProjectDocuments.getWatchers(e);p.a.array(i),t.id=s,t.originalDocument=this._clone(e),t.document=e,this.setName(t,n)}getLevels(t){this.assert(t);const e=t.levels;return p.a.array(e),e}getLevelsS(t){this.assert(t);const e=this.getLevels(t);return p.a.array(e),e.map(t=>JSON.stringify(t))}setLevels(t,e){this.assert(t),p.a.array(e),p.a.uniqueAttribute(e,t=>this.ProjectDocumentLevels.getId(t),"duplicate level ids found"),p.a.uniqueAttribute(e,t=>this.ProjectDocumentLevels.getName(t),"duplicate level names found"),t.levels=e}levelById(t,e){this.assert(t),p.a.string(e);const s=this.getLevelIdLevelMap(t);p.a.object(s);const n=s[e];return p.a.object(n,"level not found: "+e),n}levelByName(t,e){this.assert(t),p.a.string(e,()=>"unexpected level name: ".concat(JSON.stringify(e)));const s=this.getLevels(t);p.a.array(s);for(const t of s){if(this.ProjectDocumentLevels.getName(t)===e)return t}return null}setLevel(t,e,s){this.assert(t),p.a.string(e),p.a.object(s);let n=this.getLevels(t);p.a.array(n),n=n.map(t=>{const n=this.ProjectDocumentLevels.getId(t);return p.a.string(n),n===e?s:t}),this.setLevels(t,n)}addLevel(t,e,s){this.assert(t),p.a.object(e);const n=this.ProjectDocumentLevels.getName(e);p.a.string(n);const i=this._generateUniqueLevelName(t,n);this.ProjectDocumentLevels.setName(e,i);let o=this.getLevels(t);p.a.array(o),b.a.isInteger(s)?o.splice(s,0,e):o=[...o,e],this.setLevels(t,o)}deleteLevel(t,e){this.assert(t),p.a.string(e);let s=this.getLevels(t);p.a.array(s),s=s.filter(t=>this.ProjectDocumentLevels.getId(t)!==e),this.setLevels(t,s)}setLevelName(t,e,s){if(this.assert(t),p.a.string(e),p.a.string(s),""===s.trim())return;const n=this.levelById(t,e);p.a.object(n);const i=this.levelByName(t,s);s=i&&!1===this.ProjectDocumentLevels.isSame(n,i)?this._generateUniqueLevelName(t,s):s,this.ProjectDocumentLevels.getName(n)!==s&&!1!==this.ProjectDocumentLevels.setName(n,s)&&this.setDirty(t)}getLevelIndex(t,e){this.assert(t);const s=this.getLevels(t);p.a.array(s);const n=s.indexOf(e);return Object(p.a)(-1!==n),n}getSelectedLevelIndex(t){this.assert(t);const e=this.getSelectedLevel(t);return p.a.object(e),this.getLevelIndex(t,e)}getSelectedLevelId(t){return this.assert(t),t.selectedLevelId}getSelectedLevel(t){this.assert(t);const e=this.getSelectedLevelId(t);if(null==e)return null;const s=this.levelById(t,e);return p.a.object(s),s}selectLevel(t,e){this.assert(t),p.a.string(e),t.selectedLevelId=e;const s=this.getProjectDocument(t);p.a.object(s);const n=this.levelById(t,e);p.a.object(n),t.libs=this.ProjectDocumentLevels.getLibraryIds(n),t.variables=this.ProjectDocumentLevels.getVariables(n),t.varDefaults=this.ProjectDocumentLevels.getVariableDefaults(n),t.cloudVariables=this.ProjectDocumentLevels.getCloudVariables(n),t.lists=this.ProjectDocumentLevels.getLists(n),t.cloudLists=this.ProjectDocumentLevels.getCloudLists(n);const i=this.ProjectDocumentLevels.getActors(n);p.a.array(i);const o=i.map(t=>this.ProjectDocumentLevelActors.projectActorFromLevelActor(t));this.setActors(t,o),this.clearDirty(t),this.updateValid(t)}getLevelIdLevelMap(t){this.assert(t);const e={},s=this.getLevels(t);p.a.array(s);for(const t of s){const s=this.ProjectDocumentLevels.getId(t);p.a.string(s),e[s]=t}return e}getLevelIdLevelNameMap(t){this.assert(t);const e={},s=this.getLevels(t);p.a.array(s);for(const t of s){const s=this.ProjectDocumentLevels.getId(t);p.a.string(s);const n=this.ProjectDocumentLevels.getName(t);p.a.string(n),e[s]=n}return e}getLevelNameLevelMap(t){this.assert(t);const e={},s=this.getLevels(t);p.a.array(s);for(const t of s){const s=this.ProjectDocumentLevels.getName(t);p.a.string(s),e[s]=t}return e}_generateUniqueLevelName(t,e){this.assert(t),p.a.string(e);const s=this.getLevelNameLevelMap(t);if(void 0===s[e])return e;let n=0,i=null;do{n+=1,i="".concat(e).concat(n)}while(void 0!==s[i]);return i}sortLevelsByIds(t,e){t.levels.sort((t,s)=>{const n=this.ProjectDocumentLevels.getId(t),i=this.ProjectDocumentLevels.getId(s);return e.indexOf(n)-e.indexOf(i)})}actorsByQuery(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.assert(t),Object(p.a)(e),p.a.object(s);const n=this._get(s,"caseInsensitive",!1);return this.getActors(t).filter(t=>{for(const s in e){let i=t[s],o=e[s];if(!0===n&&"string"==typeof i&&"string"==typeof o&&(i=i.toLowerCase(),o=o.toLowerCase()),!1===(i===o))return!1}return!0})}actorByQuery(t,e){this.assert(t),Object(p.a)(e);const s=this.actorsByQuery(t,e);return Object(p.a)(s.length<=1),s.length>0?s[0]:null}actorByName(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.assert(t),p.a.string(e),p.a.object(s);const n=this.actorsByQuery(t,{label:e},s);return p.a.array(n),n.length>1&&this.logger.warn("multiple actors found with same name: ".concat(n.length)),n.length>0?n[0]:null}actorById(t,e){if(this.assert(t),Object(p.a)(void 0!==e),"selected"===e)return this.getSelectedActor(t);const s=e?this.actorsByQuery(t,{_id:e}):this.actorsByQuery(t,{_background:!0});return Object(p.a)(s.length<=1),s.length>0?s[0]:null}actorsByClassName(t,e){this.assert(t),p.a.string(e);const s=this.actorsByQuery(t,{classname:e});return p.a.array(s),s}actorsByGroupName(t,e){return this.getActors(t).filter(t=>this.Actors.getGroupName(t)===e)}getSelectedActorId(t){return this.assert(t),t.selectedActorId}getSelectedActor(t){this.assert(t);const e=this.getSelectedActorId(t);return this.actorById(t,e)}getActorIdNameMap(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.assert(t);const s=this.getActors(t),n={};for(const t of s){const s=this.Actors.getId(t);Object(p.a)(s);let i=this.Actors.getName(t);Object(p.a)(i),e.translate&&i===this.Actors.getStageName()&&(i=this.Actors.getStageName({translate:!0})),Object(p.a)(i,()=>"actor has no name: ".concat(JSON.stringify(t))),Object(p.a)(void 0===n[s],"duplicate actor name: ".concat(i)),n[s]=i}return n}getActorNameActorMap(t){this.assert(t);const e=this.getActors(t),s={};for(const t of e){const e=this.Actors.getName(t);Object(p.a)(e),Object(p.a)(e,()=>"actor has no name: ".concat(JSON.stringify(t))),s[e]=t}return s}isStageActorId(t,e){this.assert(t),p.a.string(e);const s=this.getStageActor(t);return Object(p.a)(this.Actors.isActor(s)),e===this.Actors.getId(s)}isStageActorSelected(t){this.assert(t);const e=this.getStageActor(t);Object(p.a)(e);const s=this.Actors.getId(e);Object(p.a)(s);const n=this.getSelectedActorId(t);return Object(p.a)(n),s===n}getStageActor(t){this.assert(t);let e=this.getActors(t);return p.a.array(e),(e=e.filter(t=>this.Actors.isStageActor(t))).length>0?e[0]:null}getSpriteActors(t){this.assert(t);let e=this.getActors(t);return p.a.array(e),e=e.filter(t=>this.Actors.isSpriteActor(t))}selectActorById(t,e){this.assert(t),p.a.string(e),null!=this.actorById(t,e)?t.selectedActorId=e:this.logger.warn("tried to select actor that no longer exists: ".concat(e))}unselectActor(t){this.assert(t),t.selectedActorId=null}variableDefaultsForActorId(t,e){p.a.object(t),p.a.string(e);const s=this.actorById(t,e);return p.a.object(s),this.Actors.isStageActor(s)?this.getVariableDefaults(t):this.Actors.getVariableDefaults(s)}variablesForActorId(t,e){p.a.object(t),p.a.string(e);const s=this.actorById(t,e);return p.a.object(s),this.Actors.isStageActor(s)?this.getVariables(t):this.Actors.getVariables(s)}setVariablesForActorId(t,e,s){p.a.object(t),p.a.string(e),p.a.object(s);const n=this.actorById(t,e);return p.a.object(n),this.Actors.isStageActor(n)?this.getVariables(t):this.Actors.setVariables(n,s)}addVariablesToActorId(t,e,s){p.a.object(t),p.a.string(e),p.a.object(s);const n=this.variablesForActorId(t,e);Object(p.a)(n);for(const[t,e]of Object.entries(s))n[t]=e;this.setVariablesForActorId(t,e,n)}addVariableToActorId(t,e,s){p.a.object(t),p.a.string(e),p.a.string(s);const n={};n[s]=y,this.addVariablesToActorId(t,e,n)}listsForActorId(t,e){p.a.object(t),p.a.string(e);const s=this.actorById(t,e);return p.a.object(s),this.Actors.isStageActor(s)?this.getLists(t):this.Actors.getLists(s)}setListsForActorId(t,e,s){p.a.object(t),p.a.string(e),p.a.object(s);const n=this.actorById(t,e);return p.a.object(n),this.Actors.isStageActor(n)?this.getLists(t):this.Actors.setLists(n,s)}addListsToActorId(t,e,s){p.a.object(t),p.a.string(e),p.a.object(s);const n=this.listsForActorId(t,e);Object(p.a)(n);for(const[t,e]of Object.entries(s))n[t]=e;this.setListsForActorId(t,e,n)}addListToActorId(t,e,s){p.a.object(t),p.a.string(e),p.a.string(s);const n={};n[s]=v,this.addListsToActorId(t,e,n)}isLibraryRequired(t,e){return this.assert(t),p.a.string(e),this.getRequiredLibraryNames(t).includes(e)}getRequiredLibraryNames(t){return this.assert(t),t.libs?t.libs:[]}addedRequiredLibraryName(t,e){this.assert(t),p.a.string(e),t.libs=t.libs?t.libs:[],t.libs.push(e)}removeRequiredLibraryName(t,e){this.assert(t),p.a.string(e),Object(p.a)(Array.isArray(t.libs)&&t.libs.includes(e)),t.libs=t.libs.filter(t=>t!==e)}getVariables(t){return this.assert(t),t.variables?t.variables:{}}hasVariable(t,e){return this.assert(t),p.a.string(e),void 0!==this.getVariables(t)[e]}setVariables(t,e){p.a.object(t),p.a.object(e),t.variables=e}getVariableNames(t){this.assert(t);const e=this.getVariables(t);return p.a.object(e),Object.keys(e)}getVariableDefaults(t){return this.assert(t),t.varDefaults?t.varDefaults:{}}upsertVariable(t,e,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.assert(t),p.a.string(e),Object(p.a)(void 0!==s),t.variables=t.variables?t.variables:{},t.varDefaults=t.varDefaults?t.varDefaults:{},t.cloudVariables=t.cloudVariables?t.cloudVariables:{},t.variables[e]=s,void 0!==n?t.varDefaults[e]=n:delete t.varDefaults[e],i?t.cloudVariables[e]=!0:delete t.cloudVariables[e]}deleteVariable(t,e){this.assert(t),p.a.string(e),delete t.variables[e],delete t.cloudVariables[e]}getCloudVariables(t){return this.assert(t),t.cloudVariables?t.cloudVariables:{}}getLists(t){return this.assert(t),t.lists?t.lists:{}}hasList(t,e){return this.assert(t),p.a.string(e),void 0!==this.getLists(t)[e]}setLists(t,e){this.assert(t),p.a.object(e),t.lists=e}getListNames(t){this.assert(t);const e=this.getLists(t);return p.a.object(e),Object.keys(e)}getCloudLists(t){return this.assert(t),t.cloudLists?t.cloudLists:{}}upsertList(t,e,s){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.assert(t),p.a.string(e),Object(p.a)(void 0!==s),t.lists=t.lists?t.lists:{},t.cloudLists=t.cloudLists?t.cloudLists:{},t.lists[e]=s,n?t.cloudLists[e]=!0:delete t.cloudLists[e]}deleteList(t,e){this.assert(t),p.a.string(e),delete t.lists[e]}sendActorToFront(t,e){this.assert(t),p.a.string(e);let s=this.getActors(t);s=s.filter(t=>!1===this.Actors.isStageActor(t));let n=Number.MIN_SAFE_INTEGER;for(const t of s){const e=this.Actors.getZIndex(t);p.a.number(e),n=e>n?e:n}Object(p.a)(n!==Number.MIN_SAFE_INTEGER);const i=n+1,o=this.actorById(t,e);Object(p.a)(this.Actors.isActor(o)),this.Actors.setZIndex(o,i),this._normalizeActorZIndexes(t)}sendActorToBack(t,e){this.assert(t),p.a.string(e);let s=this.getActors(t);s=s.filter(t=>!1===this.Actors.isStageActor(t));let n=Number.MAX_SAFE_INTEGER;for(const t of s){const e=this.Actors.getZIndex(t);p.a.number(e),n=e<n?e:n}Object(p.a)(n!==Number.MAX_SAFE_INTEGER);const i=n-1,o=this.actorById(t,e);Object(p.a)(this.Actors.isActor(o)),this.Actors.setZIndex(o,i),this._normalizeActorZIndexes(t)}sendActorForward(t,e){this.assert(t),p.a.string(e);const s=this.actorById(t,e);Object(p.a)(this.Actors.isActor(s));const n=this.Actors.getZIndex(s);p.a.number(n);const i=n+1;let o=this.getActors(t);p.a.array(o),o=o.filter(t=>!1===this.Actors.isStageActor(t));for(const t of o){if(e===this.Actors.getId(t))continue;const s=this.Actors.getZIndex(t);p.a.number(s),s<=i&&this.Actors.setZIndex(t,s-1)}Object(p.a)(this.Actors.getId(s)===e),this.Actors.setZIndex(s,i),this._normalizeActorZIndexes(t)}sendActorBackward(t,e){this.assert(t),p.a.string(e);const s=this.actorById(t,e);Object(p.a)(this.Actors.isActor(s));const n=this.Actors.getZIndex(s);p.a.number(n);const i=n-1;let o=this.getActors(t);p.a.array(o),o=o.filter(t=>!1===this.Actors.isStageActor(t));for(const t of o){if(e===this.Actors.getId(t))continue;const s=this.Actors.getZIndex(t);p.a.number(s),s>=i&&this.Actors.setZIndex(t,s+1)}Object(p.a)(this.Actors.getId(s)===e),this.Actors.setZIndex(s,i),this._normalizeActorZIndexes(t)}_normalizeActorZIndexes(t){let e=this.getActors(t);p.a.array(e),e=e.filter(t=>!1===this.Actors.isStageActor(t));const s=this._clone(e);s.sort((t,e)=>this.Actors.getZIndex(t)-this.Actors.getZIndex(e));for(let e=0;e<s.length;e++){const n=s[e],i=this.Actors.getId(n),o=this.actorById(t,i);Object(p.a)(this.Actors.isActor(o)),this.Actors.setZIndex(o,e)}}getStepIds(t){const e=[],s=this.getActors(t);for(const t of s){const s=this.Actors.getStepIds(t);for(const t of s)e.push(t)}return e}getSteps(t){const e=[],s=this.getActors(t);for(const t of s){const s=this.Actors.getSteps(t);for(const t of s)e.push(t)}return e}isResourcesLoaded(t){return!0===t.resourcesLoaded}markResourcesLoaded(t){t.resourcesLoaded=!0}functionStepsForLibrary(t,e){this.assert(t),p.a.string(e);const s=this.Projects.getLibraryActor(t,e);if(null==s)return[];const n=this.Actors.getSteps(s);return p.a.array(n),n.filter(t=>!1!==this.Steps.isFunction(t))}functionCallStepsForLibraryName(t,e){this.assert(t),p.a.string(e);const s=this.Projects.getLibraryActor(t,e);if(null==s)return[];const n=this.functionStepsForLibrary(t,e);p.a.array(n);const i=this.Actors.getStepsMap(s);return p.a.object(i),n.map(t=>{const s=this._clone(t);this.Steps.resolveStepReferences(s,i);const n=s.name,o=(s.values?s.values:[]).map(t=>t.name);return this.Steps.createLibraryCall(e,n,o,{hiddenInSandbox:s.hiddenInSandbox})})}validate(t){const e=this.getActors(t);for(const t of e){const e=this.Actors.getSteps(t);for(const s of e){const e=t._id;p.a.string(e);const n=s._id;if(p.a.string(n),"nop"===s.func){return{actorId:e,stepId:n,reason:Object(g.t)(f())}}}}return null}_generateRevision(){return this.uuid()}assertValidActors(t){const e=this.getActors(t);for(const t of e)this.Actors.assertValid(t)}assertValid(t){this.assertValidActors(t)}}h()(_,"CLASS",()=>"ProjectsClass");const I=new _;e.a=I},732:function(t,e,s){"use strict";var n=s(186),i=(s.n(n),s(1)),o=(s.n(i),s(9)),r=(s.n(o),s(2)),a=(s.n(r),s(3)),c=s.n(a),l=s(0),d=s(25),u=s(733),h=s(112);class g extends h.a{isProjectDocument(t){return null!=t&&("object"==typeof t&&(!!t.data&&"string"==typeof t.data))}assert(t){Object(l.a)(this.isProjectDocument(t),()=>"invalid project document: ".concat(JSON.stringify(t)))}getId(t){l.a.object(t);const e=t.id?t.id:null;return Object(l.a)(void 0!==e),e}getName(t){return l.a.object(t),t.name?t.name:"Untitled"}getIDEType(t){return l.a.object(t),t.ide&&t.ide.type?t.ide.type:"mcpe"===t.type?u.a.MINECRAFT_WINDOWS_10:"minecraft"===t.type?u.a.MINECRAFT_JAVA:"crystalclash:v1"===t.type?u.a.CRYSTAL_CLASH:u.a.DIY}getDescription(t){return l.a.object(t),t.description}getLevelsS(t){return l.a.object(t),[t.data,...t.levels?t.levels:[]]}getLevels(t){return l.a.object(t),this.getLevelsS(t).map(t=>JSON.parse(t))}levelByIndex(t,e){l.a.object(t),l.a.integer(e);const s=this.getLevels(t)[e];return l.a.object(s),s}setLevel(t,e,s){l.a.object(t),l.a.integer(e),l.a.object(s);const n=this.getLevels(t);l.a.array(n),n[e]=s;const i=n[0];l.a.object(i);const o=n.slice(1,n.length);t.data=JSON.stringify(i),o.length>0?t.levels=o.map(t=>JSON.stringify(t)):delete t.levels}getNotes(t){return l.a.object(t),t.notes?JSON.parse(t.notes):null}setNotes(t,e){l.a.object(t),t.notes=e?JSON.stringify(e):null}getSearcheableText(t){const e=[],s=this.getName(t);return s&&e.push(s),e.join(" ")}getOriginalId(t){return Object(l.a)(t),t.originalid?t.originalid.$id:null}getUserId(t){if(Object(l.a)(t),!t.userid)return null;const e=t.userid.$id;return l.a.string(e),e}isOwnedByUserId(t,e){Object(l.a)(t),l.a.string(e);const s=this.getUserId(t);return null!=s&&s===e}isRemix(t){return Object(l.a)(t),null!=this.getOriginalId(t)}getActors(t){Object(l.a)(t);const e=this._get(t,"sprites",[]);return[t.background,...e]}getWatchers(t){return Object(l.a)(t),t.watchers?t.watchers:[]}getTutorial(t){return t.notes?JSON.parse(t.notes):null}getScreenshotId(t){return t.screenshotid}getScreenshotUrl(t){if(t._screenshotDataUrl)return t._screenshotDataUrl;const e=this.getScreenshotId(t);return null==e?null:"/assets/screenshot/".concat(e,".png")}getMeta(t){l.a.object(t);const e=this._get(t,"meta",{});return l.a.object(e),e}getMetaAttribute(t,e){l.a.object(t),l.a.string(e);const s="meta.".concat(e);return this._get(t,s)}setMetaAttribute(t,e,s){l.a.object(t),l.a.string(e);const n="meta.".concat(e);this._set(t,n,s)}patch(t){l.a.object(t);const e=d.a.addTimeStart("".concat(this.className,":patch"));try{"string"==typeof t.revision&&t.revision.includes("Class:")&&(t.revision=this.uuid());const s=this._clone(t);l.a.object(s);const n=this.getLevels(t);l.a.array(n);const i=this._patchProjectDocumentLevels(n);l.a.array(i);const o=i[0];l.a.object(o);const r=i.length>1?i.slice(1,i.length):[],a=r.map(t=>JSON.stringify(t));return Object(l.a)(r.length===a.length),s.data=JSON.stringify(o),r.length>0&&(s.levels=a),s}finally{d.a.addTimeEnd(e)}}_patchProjectDocumentLevels(t){l.a.array(t);const e={},s=[];for(let n=0;n<t.length;n++){const i=t[n],o=this.ProjectDocumentLevels.patch(i);let r=this.ProjectDocumentLevels.getId(o);for(;void 0!==e[r];){const t=this.ProjectDocumentLevels.uuid();this.logger.warn("duplicate level id found '".concat(r,"', changed to '").concat(t,"'")),r=t,o._id=r}e[r]=!0,void 0===o.name&&(o.name="Level ".concat(n+1)),s.push(o)}return s}}c()(g,"CLASS",()=>"ProjectDocumentsClass");const p=new g;e.a=p},733:function(t,e,s){"use strict";var n=s(9),i=(s.n(n),s(49));const o=new class extends i.a{get ENUM(){return{BLANK:"blank",CHAT:"chat",FEEDS:"feeds",MODERATION_FEEDS:"moderation-feeds",TYNKER_TUBE:"tynker-tube",DIY:"diy",DIY_SANDBOX:"diy-sandbox",PROJECT_PLAYER:"player",MULTIPLAYER:"multiplayer",MULTIPLAYER_PROJECT_PLAYER:"multiplayer-player",PLATFORMER:"platformer",TOPDOWN:"topdown",SPACE:"space",CRYSTAL_CLASH:"crystal-clash",CONSOLE:"console",MINECRAFT_JAVA:"minecraft-java",MINECRAFT_WINDOWS_10:"minecraft-windows-10",MINECRAFT_EDUCATION:"minecraft-education",DRAWING:"drawing",CHARACTER_CHOOSER:"character-chooser",COURSE:"course",HARDWARE_MICRO_BIT:"microbit",HARDWARE_HIFIVE:"hifive",HARDWARE_AIRBORNE_CARGO:"airborne-cargo",HARDWARE_JUMPING_SUMO:"jumping-sumo",HARDWARE_MAMBO:"mambo",HARDWARE_NIGHT_DRONE:"night-drone",HARDWARE_ROLLING_SPIDER:"rolling-spider",HARDWARE_SWING:"swing",HARDWARE_HUE:"hue",HARDWARE_SPHERO:"sphero",HARDWARE_OLLIE:"ollie",HARDWARE_WEDO2:"wedo2"}}get MINECRAFT_TYPES(){return[this.MINECRAFT_JAVA,this.MINECRAFT_WINDOWS_10,this.MINECRAFT_EDUCATION]}extensionIdForIDEType(t){const e={};return e[this.BLANK]="extension-context-blank",e[this.TYNKER_TUBE]="extension-context-tynker-tube",e[this.CHAT]="extension-context-chat",e[this.DIY]="extension-context-diy",e[this.DIY_SANDBOX]="extension-context-diy-sandbox",e[this.PROJECT_PLAYER]="extension-context-project-player",e[this.MULTIPLAYER_PROJECT_PLAYER]="extension-context-multiplayer-project-player",e[this.PLATFORMER]="extension-context-platformer",e[this.TOPDOWN]="extension-context-topdown",e[this.SPACE]="extension-context-space",e[this.CRYSTAL_CLASH]="extension-context-crystal-clash",e[this.CONSOLE]="extension-context-console",e[this.MULTIPLAYER]="extension-context-multiplayer",e[this.MINECRAFT_JAVA]="extension-context-minecraft-java",e[this.MINECRAFT_WINDOWS_10]="extension-context-minecraft-windows-10",e[this.MINECRAFT_EDUCATION]="extension-context-minecraft-education",e[this.COURSE]="extension-flow-course",e[this.DRAWING]="extension-context-drawing",e[this.CHARACTER_CHOOSER]="extension-context-character-chooser",e[this.HARDWARE_HIFIVE]="extension-context-hardware-hifive",e[this.HARDWARE_MICRO_BIT]="extension-context-hardware-microbit",e[this.HARDWARE_AIRBORNE_CARGO]="extension-context-hardware-airborne-cargo",e[this.HARDWARE_JUMPING_SUMO]="extension-context-hardware-jumping-sumo",e[this.HARDWARE_MAMBO]="extension-context-hardware-mambo",e[this.HARDWARE_NIGHT_DRONE]="extension-context-hardware-night-drone",e[this.HARDWARE_ROLLING_SPIDER]="extension-context-hardware-rolling-spider",e[this.HARDWARE_SWING]="extension-context-hardware-swing",e[this.HARDWARE_HUE]="extension-context-hardware-hue",e[this.HARDWARE_SPHERO]="extension-context-hardware-sphero",e[this.HARDWARE_OLLIE]="extension-context-hardware-ollie",e[this.HARDWARE_WEDO2]="extension-context-hardware-wedo2",void 0!==e[t]?e[t]:null}isMinecraftType(t){return this.MINECRAFT_TYPES.includes(t)}};e.a=o},734:function(t,e,s){"use strict";var n=s(301),i=(s.n(n),s(1)),o=(s.n(i),s(302)),r=(s.n(o),s(9)),a=(s.n(r),s(17)),c=(s.n(a),s(2)),l=(s.n(c),s(3)),d=s.n(l),u=s(0),h=s(86),g=s(112);class p extends g.a{isProjectDocumentLevel(t){return null!=t&&("object"==typeof t&&(void 0!==t._id&&(void 0!==t.background&&void 0!==t.name)))}assert(t){Object(u.a)(this.isProjectDocumentLevel(t),()=>"invalid project document level: ".concat(JSON.stringify(t)))}isSame(t,e){return Object(u.a)(this.isProjectDocumentLevel(t)),Object(u.a)(this.isProjectDocumentLevel(e)),this.getId(t)===this.getId(e)}clone(t){const e=this._clone(t);return e._id=this.uuid(),e}getId(t){const e=t._id;return u.a.string(e),e}getName(t){return t.name}setName(t,e){u.a.object(t),u.a.string(e),t.name=e}getScripts(t){this.assert(t);let e=t.sprites;u.a.array(e);let s=e.map(t=>t.scripts),n=[t.background.scripts,...s];return n=n.flat(),Object(u.a)(!1===n.includes(void 0)),n}getSteps(t){this.assert(t);let e=[];const s=this.getActors(t);for(const t of s){const s=t.scripts?t.scripts:[],n=this.Steps.map(s,t=>t);e=e.concat(n)}return e}getStageActor(t){this.assert(t);const e=t.background;return Object(u.a)(e),e}getSpriteActors(t){this.assert(t);const e=t.sprites?t.sprites:[];return u.a.array(e),e}getActors(t){this.assert(t);let e=[this.getStageActor(t),...this.getSpriteActors(t)];return e=e.filter(t=>t)}getVariables(t){return this.assert(t),t.variables?t.variables:{}}getVariableDefaults(t){return this.assert(t),t.varDefaults?t.varDefaults:{}}getCloudVariables(t){return this.assert(t),t.cloudVariables?t.cloudVariables:{}}getLists(t){return this.assert(t),t.lists?t.lists:{}}getCloudLists(t){return this.assert(t),t.cloudLists?t.cloudLists:{}}getLibraryIds(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.assert(t),this._get(e,"fromData",!1)?this._libraryIdsFromLevel(t):t.libs?t.libs:[]}_libraryIdsFromLevel(t){const e={},s=this.getScripts(t);return u.a.array(s),this.Steps.traverse(s,t=>{if("blockControlCallLibrary"!==t.func&&"valueControlCallLibrary"!==t.func)return;const s=t.name;u.a.string(s);const n=s.split("::");Object(u.a)(n.length>1);const i=n[0];e[i]=!0}),Object.keys(e)}setLibraryIds(t,e){this.assert(t),u.a.array(e),t.libs=e}getScreenshotId(t){return this.assert(t),t.screenshotid}getScreenshotUrl(t){if(this.assert(t),t._screenshotDataUrl)return t._screenshotDataUrl;const e=this.getScreenshotId(t);return null==e?null:"/assets/screenshot/".concat(e,".png")}setScreenshotDataUrl(t,e){this.assert(t),u.a.string(e),t._screenshotDataUrl=e}getTiles(t){this.assert(t);const e=this._get(t,"tiles",[]);return u.a.array(e),e}setTiles(t,e){this.assert(t),e?(u.a.array(e),t.tiles=e):delete t.tiles}convertTilesTo8Bit(t){this.assert(t);const e=this.getTiles(t);u.a.array(e);const s=this._convertTilesTo8Bit(e);this.setTiles(t,s)}_convertTilesTo8Bit(t){if(u.a.array(t),0===t.length)return[];const e=t,s=e[0].length,n=[];for(var i=0;i<e.length;i++){for(var o=e[i],r=[],a=0;a<s;a++)31&o[a]?r.push(4294967295&(o[a]<<3|255)):r.push(0);n.push(r)}return n}convertTilesTo5Bit(t){this.assert(t);const e=this.getTiles(t);u.a.array(e);const s=this._convertTilesTo5Bit(e);this.setTiles(t,s)}_convertTilesTo5Bit(t){if(u.a.array(t),0===t.length)return[];const e=t,s=e[0].length,n=[];for(var i=0;i<e.length;i++){for(var o=e[i],r=[],a=0;a<s;a++)o[a]?r.push(o[a]>>3|31):r.push(0);n.push(r)}return n}patch(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u.a.object(t);const s={},n={},i=(t,e)=>{u.a.object(t);let i=t._id;if(void 0===i){i=this.uuid();const t="id:".concat(e,":undefined");n[t]=!0}if(i.includes("Class:")){i=this.uuid();const t="id:".concat(e,":classid");n[t]=!0}if(void 0!==s[i]){i=this.uuid();const t="id:".concat(e,":duplicateid");n[t]=!0}t._id=i,s[i]=!0},o=this._clone(t);i(o),Array.isArray(o.variables)&&0===o.variables.length&&(o.variables={}),Array.isArray(o.varDefaults)&&0===o.varDefaults.length&&(o.varDefaults={}),Array.isArray(o.lists)&&0===o.lists.length&&(o.lists={}),Array.isArray(o.cloudVariables)&&0===o.cloudVariables.length&&(o.cloudVariables={}),Array.isArray(o.cloudLists)&&0===o.cloudLists.length&&(o.cloudLists={});const r=o.background;r&&(r._background=!0,void 0===r.label&&(r.label=this.Actors.STAGE_NAME));const a=this.getActors(o);for(const t of a){this.ProjectDocumentLevelActors.patch(t,e),i(t);const s=t.costumes?t.costumes:[];for(const t of s)i(t);const n=t.scripts?t.scripts:[];for(const t of n)this.Steps.ensureInstance(t),this.Steps.traverse(t,t=>i(t))}for(const t of Object.keys(n))this.logger.warn("patched applied to project: ".concat(t));return o}addFeature(t,e){h.a.isObject(t.ide)||(t.ide={}),h.a.isObject(t.ide.enabledFeatures)||(t.ide.enabledFeatures={}),t.ide.enabledFeatures[e]||(t.ide.enabledFeatures[e]={})}removeFeature(t,e){h.a.isObject(t.ide)||(t.ide={}),h.a.isObject(t.ide.enabledFeatures)||(t.ide.enabledFeatures={}),t.ide.enabledFeatures[e]&&delete t.ide.enabledFeatures[e]}getFeatureIds(t){if(!t||!h.a.isObject(t.ide)||!h.a.isObject(t.ide.enabledFeatures))return[];const e=t.ide.enabledFeatures;return Object.keys(e)}}d()(p,"CLASS",()=>"ProjectDocumentLevelsClass");const b=new p;e.a=b},735:function(t,e,s){"use strict";var n=s(1),i=(s.n(n),s(42)),o=(s.n(i),s(9)),r=(s.n(o),s(19)),a=(s.n(r),s(17)),c=(s.n(a),s(43)),l=(s.n(c),s(2)),d=(s.n(l),s(255)),u=(s.n(d),s(3)),h=s.n(u),g=s(163),p=s.n(g),b=s(30),m=s(137),f=s(736),y=s(177);class v extends y.a{bustableUrl(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=this._bustableUrl(t,e);return s=this._convertUrlToWebPIfApplicable(s)}_bustableUrl(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.startsWith("data:"))return t;const s=this.defaultCacheTokenForUrl(t),n=p.a.get(e,"cacheToken",s);return null==n?t:t.includes("cache=")?t:(t.includes("?")?t+="&cache=max&v="+n:t+="?cache=max&v="+n,t)}_convertUrlToWebPIfApplicable(t){if(b.a.isDevelopmentServer())return t;if(!1===f.a.supportsWebPFeature("lossy"))return t;let e=!1;if(t.startsWith("/ide/avatar/")?e=!0:t.startsWith("/assets2/asset/")?e=!0:t.startsWith("/assets/user/")?e=!0:t.startsWith("/medialib/")&&(e=!0),!1===e)return t;const s=t.split("?");if(2!==s.length)return t;const n=s[0];if(0===n.length)return t;const i=s[1];if(0===i.length)return t;if(!1===n.endsWith(".png")&&!1===n.endsWith(".jpg"))return t;const o=new URLSearchParams(i);if("max"!==o.get("cache"))return t;const r=o.get("v");if(!r)return t;if(t.startsWith("/medialib")){const e=["width","height","format","mode","quality"];for(const s of e){if(o.get("width"))return t}}const a=n.split(".");a[a.length-1]="webp";const c=a.join("."),l=i.replace("&v=".concat(r),"&v=".concat(r,"-webp"));return"".concat(c,"?").concat(l)}defaultCacheTokenForUrl(t){if(t.startsWith("/ide/avatar/"))return this.avatarCacheToken;if(t.startsWith("/assets2/asset/"))return this.assetsCacheToken;if(t.startsWith("/assets/user/"))return this.userAssetsCacheToken;if(t.startsWith("/medialib/"))return this.mediaLibraryCacheToken;if(t.startsWith("/sysmedia/"))return this.sysmediaCacheToken;return this.getContentCacheToken()}getLibraryCacheToken(){const t=this.getContentCacheToken();return t||"library"}getContentCacheToken(){if(null==m.a.get("cache"))return;const t=m.a.get("content");if(t)return t;const e=m.a.get("v");return e||null}get avatarCacheToken(){return"avatar-e4877abe-cd87-11ea-87d0-0242ac130003"}get assetsCacheToken(){return"assets-f6f5d054-b8f8-4500-8c4f-ed6db3203bec"}get userAssetsCacheToken(){return"user-assets-d5f88032-41a1-435c-802e-f527a2f41d58"}get debuggerCacheToken(){return"debugger-13c3b4e3-ee9f-4c82-81a2-8e2b39e99126"}get helpCacheToken(){return"help-17f7cfe8-045f-4642-baa6-f65ce2159f14"}get mediaLibraryCacheToken(){return"media-library-ea1be84c-6bb1-4ccb-b4e1-d1227cb13ba1"}get sysmediaCacheToken(){return"sysmedia-2273a709-14a4-42b4-aa49-9767da65505f"}get featuresCacheToken(){return"features-3cde8a78-6af4-45b7-a939-c79a77f72b25"}get tourCacheToken(){return"tour-4e76ad19-4095-45c6-abc5-ff3552065824"}get levelEditorCacheToken(){return"level-editor-d07262be-b999-4088-b53b-00eb4ac3b1ac"}get addNewLevelCacheToken(){return"add-new-level-e9d2dce7-043b-4237-9de5-a9a37a84d199"}}h()(v,"CLASS",()=>"CacheUtilsClass");const _=new v;e.a=_},736:function(t,e,s){"use strict";var n=s(6),i=(s.n(n),s(0));const o={},r=Object.freeze({lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"});const a=new class{supportsWebPFeature(t){const e=void 0!==o[t]&&o[t];return i.a.boolean(e),e}async checkWebPFeatureSupport(t){if(Object(i.a)(void 0!==r[t]),void 0!==o[t])return o[t];const e=await new Promise(e=>{const s=new Image;s.onload=(()=>e(s.width>0&&s.height>0)),s.onerror=(()=>e(!1));const n=r[t];i.a.string(n),s.src="data:image/webp;base64,".concat(n)});o[t]=e}};e.a=a},737:function(t,e,s){"use strict";e.a=function(t){return i.a.object(t),function(e,s,n){Object(i.a)(void 0===t.controller);const r=t.bindToController||{},a=Object.values(r);return Object(i.a)(!1===a.includes("="),"double binding is not allowed"),t.controller=e,e.__directive=(()=>o.a.createDirectiveSpec(t)),n}};var n=s(9),i=(s.n(n),s(0)),o=s(64)},738:function(t,e,s){"use strict";(function(t){var n=s(1),i=(s.n(n),s(6)),o=(s.n(i),s(42)),r=(s.n(o),s(19)),a=(s.n(r),s(2)),c=(s.n(a),s(3)),l=s.n(c),d=s(0),u=s(25),h=s(74),g=s(30),p=s(64),b=s(21);let m=!1;const f=t=>{if(m)return;m=!0;let e=0,s=Date.now(),n=Date.now();t.$watch(()=>{const t=Date.now(),i=t-n;if(n=t,i>100&&(e=0),(e+=1)>1e4){const t=Date.now(),n=t-s;s=t,console.warn("infinite digest loop detected, ".concat(e," digests performed in ").concat(n,"ms")),e=0}})};class y extends b.a{constructor(t,e,s,n,i,o,r,a){super(),l()(this,"element",null),l()(this,"elementVisible",!1),l()(this,"directiveSpec",null),l()(this,"digestBeforeOnDeployed",!0),l()(this,"__deploying",!1),l()(this,"__deployed",!1),l()(this,"__undeploying",!1),Object(d.a)(t),Object(d.a)(e),Object(d.a)(s),Object(d.a)(n),Object(d.a)(i),Object(d.a)(o),Object(d.a)(r),Object(d.a)(a);Object(d.a)(this.className.endsWith("DirectiveControllerClass"),"".concat(this.className," class name must end with ").concat("DirectiveControllerClass")),Object(d.a)("DirectiveControllerClass"!==this.className,"".concat(this.className," class name must end with ").concat("DirectiveControllerClass")),this.$rootScope=t,this.$scope=e,this.$timeout=s,this.$sce=n,this.$interpolate=i,this.$compile=o,this.$injector=r,this.$ngRedux=a,g.a.isDevelopment()&&f(t)}$onInit(){this.init()}onInit(){super.onInit();const t=this.$on("$destroy",()=>this.destroy());this.addUnsubscriber(t),u.a.add("directives:active",1),u.a.add("directives:initialized",1)}onLink(){}onInitialized(){super.onInitialized(),this.deploy()}onDestroy(){super.onDestroy(),!1!==this.__deployed&&(this.undeploy(),u.a.add("directives:active",-1),u.a.add("directives:destroyed"))}deploy(){!1!==this.isInitialized()&&(this.__deploying=!0,this.onDeploy(),this.digestBeforeOnDeployed?this.$timeout(()=>{this.__deploying=!1,this.__deployed=!0,this.onDeployed()}):(this.__deploying=!1,this.__deployed=!0,this.onDeployed()))}onDeploy(){const t=this.$ngRedux.connect(t=>this.mapStateToThis(t),this.actionMethods)(this);this.addUnsubscriber(t)}onDeployed(){}undeploy(){Object(d.a)(!0===this.__deployed),Object(d.a)(!1===this.__deploying),this.__undeploying=!0,this.onUndeploy(),this.__deployed=!1,this.__undeploying=!1}onUndeploy(){this.element.remove(),p.a.destroyElementSubtreeDirectives(this.element)}isDeployed(){return!0===this.__deployed}mapStateToThis(t){const e=this._get(t,this.directiveStatePath,{});if(e&&!1===e.stateMappingEnabled&&this.previousSlice)return this.previousSlice;const s=u.a.addTimeStart("redux:mapStateToThis"),n={state:t};return e&&(n.directive=e),e&&this.mapState(n),u.a.addTimeEnd(s),this.previousSlice=n,n}mapState(t){}get actionMethods(){return{}}$evalAsync(){this.$scope.$evalAsync()}$watch(t,e){const s=this.$scope.$watch(t,e);return this.addUnsubscriber(s),s}$on(t,e){const s=this.$scope.$on(t,e);return this.addUnsubscriber(s),s}$timeout(t){const e=this.$timeout(t),s=()=>this.$timeout.cancel(e);return this.addUnsubscriber(s),s}static get directiveId(){if(this.__directiveId)return this.__directiveId;let t=this.className;-1!==t.indexOf("DirectiveControllerClass")&&(t=t.slice(0,t.length-"DirectiveControllerClass".length)),-1!==t.indexOf("DirectiveController")&&(t=t.slice(0,t.length-"DirectiveController".length)),-1!==t.indexOf("ControllerClass")&&(t=t.slice(0,t.length-"ControllerClass".length)),-1!==t.indexOf("Controller")&&(t=t.slice(0,t.length-"Controller".length));const e=t[0].toLowerCase()+t.slice(1,t.length);return this.__directiveId=e,e}get directiveId(){return this.constructor.directiveId}static get directiveTagName(){if(this.__directiveTag)return this.__directiveTag;const t=p.a.tagNameFromDirectiveId(this.directiveId);return this.__directiveTag=t,t}static get selector(){if(this.__selector)return this.__selector;const t=this.directiveTagName,e="".concat(t);return this.__selector=e,e}get selector(){return this.constructor.selector}static get internalSelector(){if(this.__internalSelector)return this.__internalSelector;const t=this._extension.id(),e=this.directiveTagName,s=".".concat(t," ").concat(e," .").concat(e);return this.__internalSelector=s,s}get internalSelector(){return this.constructor.internalSelector}static scopedSelector(t){return Object(d.a)(t&&"string"==typeof t),"".concat(this.selector," ").concat(t)}scopedSelector(t){return this.constructor.scopedSelector(t)}static scopedElement(e){const s=this.scopedSelector(e);return t(s)}scopedElement(t){return this.constructor.scopedElement(t)}onLink(){}async waitLinked(){const t=await this.waitScopeVariable("element");return d.a.object(t),t}async waitScopeVariables(t){d.a.array(t);const e={};for(const s of t){const t=await this.waitScopeVariable(s);e[s]=t}return e}async waitScopeVariable(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d.a.string(t),d.a.object(e);const s=e.checker?e.checker:t=>void 0!==t;return new Promise(e=>{const n=this[t];if(!0===s(n))return e(n);const i=this.$watch("vm.".concat(t),()=>{const n=this[t];!0===s(n)&&(i(),e(n))});this.addUnsubscriber(i)})}async waitVisible(){await this.waitLinked(),d.a.object(this.element),!0===(void 0===this.waitUntilVisible||this.waitUntilVisible)&&await h.a.waitVisible(this.element),this.elementVisible=!0}domBind(e,s,n){d.a.string(s),d.a.function(n);const i=t(e);i.bind(s,n);const o=()=>i.unbind(s,n);return this.addUnsubscriber(o),o}getDependency(t){d.a.string(t);const e=this.$injector.get(t);return d.a.object(e),e}hasStateParam(t){return d.a.string(t),void 0!==this.$injector.get("$stateParams")[t]}getStateParam(t){return d.a.string(t),this.$injector.get("$stateParams")[t]}getCurrentState(){const t=this.$injector.get("$state").current.name;return d.a.string(t),t}isCurrentState(t){return d.a.string(t),this.getCurrentState()===t}getDependency(t){d.a.string(t);const e=this.$injector.get(t);return d.a.object(e),e}goToState(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d.a.string(t),d.a.object(e),this.$injector.get("$state").go(t,e)}get directiveStatePath(){const t=this.constructor;if(t.__directiveStatePath)return t.__directiveStatePath;const e=this.stateVariableName;d.a.string(e);const s="".concat(e);return t.__directiveStatePath=s,s}get stateVariableName(){const t=this.constructor;if(t.__stateVariableName)return t.__stateVariableName;const e=this._replaceEnding(this.classNameCamelCase,"");return t.__stateVariableName=e,e}_replaceEnding(t,e){let s=t;return t.endsWith("DirectiveControllerClass")?s=t.replace("DirectiveControllerClass",e):t.endsWith("StateClass")?s=t.replace("StateClass",e):t.endsWith("ActionsClass")?s=t.replace("ActionsClass",e):t.endsWith("ReducerClass")?s=t.replace("ReducerClass",e):t.endsWith("SagaClass")&&(s=t.replace("SagaClass",e)),Object(d.a)(s!==t),s}}e.a=y,l()(y,"CLASS",()=>"DirectiveControllerClass"),y.$inject=["$rootScope","$scope","$timeout","$sce","$interpolate","$compile","$injector","$ngRedux"]}).call(e,s(4))},739:function(t,e){t.exports='<div class="toolbar-feeds-button {{vm.class}} {{vm._class}}" ng-click="vm.onClick()">\n    <div class="toolbar-feeds-button__container toolbar-feeds-button__container--notifications">\n        <div class="toolbar-feeds-button__icon" ng-include="vm.iconBellUrl"></div>\n        <div class="toolbar-feeds-button__counter" style="display: none;"></div>\n    </div>\n    <div class="toolbar-feeds-button__container toolbar-feeds-button__container--stream">\n        <div class="toolbar-feeds-button__icon" ng-include="vm.iconChatUrl"></div>\n        <label translate class="toolbar-feeds-button__label">Stream</label>\n        <div class="toolbar-feeds-button__counter" style="display: none;"></div>\n    </div>\n    <div class="toolbar-feeds-button__container toolbar-feeds-button__container--avatar">\n        <div class="toolbar-feeds-button__icon">\n            <user-avatar user-id="vm._avatarUserId" \n                         render-only-when-visible="false" \n                         show-online-status="true"></user-avatar>\n        </div>\n        <label class="toolbar-feeds-button__label"></label>\n        <div class="toolbar-feeds-button__counter" style="display: none;"></div>\n    </div>\n</div>\n'},74:function(t,e,s){"use strict";(function(t){var n=s(1),i=(s.n(n),s(6)),o=(s.n(i),s(2)),r=(s.n(o),s(31)),a=s.n(r),c=s(3),l=s.n(c),d=s(279),u=s(0),h=s(278),g=s(177);class p extends g.a{constructor(){super(...arguments),l()(this,"singleton",!0),l()(this,"DIRECTIONS",Object.freeze({Top:"top",Right:"right",Bottom:"bottom",Left:"left",TopLeft:"top-left",TopRight:"top-right",BottomLeft:"bottom-left",BottomRight:"bottom-right",Center:"center"}))}setTemporaryCSS(e,s,n){const i=t(e),o=i.css(s),r="__setTemporaryCSS(".concat(s,")");i.data(r,o),i.css(s,n)}rollbackTemporaryCSS(e,s){const n=t(e),i="__setTemporaryCSS(".concat(s,")"),o=n.data(i);n.css(s,o)}isWindowInsideIFrame(t){u.a.object(t);try{return t.self!==t.top}catch(t){return!0}}isPosition(t){return null!=t&&("object"==typeof t&&(void 0!==t.top&&void 0!==t.left||(void 0!==t.top&&void 0!==t.right||(void 0!==t.bottom&&void 0!==t.left||void 0!==t.bottom&&void 0!==t.right))))}isFrame(t){return null!=t&&("object"==typeof t&&(void 0===t.bottom&&(void 0===t.right&&(void 0!==t.top&&(void 0!==t.left&&(void 0!==t.width&&void 0!==t.height))))))}frameForElement(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=void 0!==s.coordinates&&s.coordinates,i=t(e);u.a.domElement(i);const o=i.offset(),r=o.top,a=o.left,c=a,l=r,d=void 0!==s.width?s.width:i.outerWidth(),h=void 0!==s.height?s.height:i.outerHeight();return n?{y:l,x:c,width:d,height:h}:{top:r,left:a,width:d,height:h}}applyToFrame(t,e){return Object(u.a)(this.isFrame(t)),a()({},t,e)}positionFromFrame(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(u.a)(this.isFrame(t));const s=void 0!==e.containerFrame?e.containerFrame:this.frameForElement("body"),n=void 0!==e.containerAnchor?e.containerAnchor:this.DIRECTIONS.TopLeft;if(Object(u.a)(this.isFrame(s)),u.a.inEnum(n,this.DIRECTIONS),n===this.DIRECTIONS.TopLeft){return{top:void 0!==t.top?t.top:s.height-t.bottom-t.height,left:void 0!==t.left?t.left:s.width-t.right-t.width}}if(n===this.DIRECTIONS.TopRight){return{top:void 0!==t.top?t.top:s.height-t.bottom-t.height,right:void 0!==t.right?t.right:s.width-t.left-t.width}}if(n===this.DIRECTIONS.BottomRight){return{bottom:void 0!==t.bottom?t.bottom:s.height-t.top-t.height,right:void 0!==t.right?t.right:s.width-t.left-t.width}}if(n===this.DIRECTIONS.BottomLeft){return{bottom:void 0!==t.bottom?t.bottom:s.height-t.top-t.height,left:void 0!==t.left?t.left:s.width-t.right-t.width}}Object(u.a)(!1,"unexpected container anchor: ".concat(n))}frameForPoint(t,e,s){Object(u.a)(this.isFrame(t)),u.a.inEnum(e,this.DIRECTIONS);const n=t.width,i=t.height;if(e===this.DIRECTIONS.Top){return{top:s.top,left:s.left-parseInt(n/2),width:n,height:i}}if(e===this.DIRECTIONS.TopLeft){return{top:s.top,left:s.left,width:n,height:i}}if(e===this.DIRECTIONS.TopRight){return{top:s.top,left:s.left-n,width:n,height:i}}if(e===this.DIRECTIONS.Bottom){return{top:s.top-i,left:s.left-parseInt(n/2),width:n,height:i}}if(e===this.DIRECTIONS.BottomLeft){return{top:s.top-i,left:s.left,width:n,height:i}}if(e===this.DIRECTIONS.BottomRight){return{top:s.top-i,left:s.left-n,width:n,height:i}}Object(u.a)(!1,"unexpected direction: ".concat(direction))}positionForPointWithinFrame(t,e){Object(u.a)(this.isFrame(t)),u.a.inEnum(e,this.DIRECTIONS);const s={top:t.top,left:t.left};return e===this.DIRECTIONS.Top?s.left+=parseInt(t.width/2):e===this.DIRECTIONS.TopRight?s.left+=t.width:e===this.DIRECTIONS.Right?(s.top+=parseInt(t.height/2),s.left+=t.width):e===this.DIRECTIONS.BottomRight?(s.top+=t.height,s.left+=t.width):e===this.DIRECTIONS.Bottom?(s.top+=t.height,s.left+=parseInt(t.width/2)):e===this.DIRECTIONS.BottomLeft?s.top+=t.height:e===this.DIRECTIONS.Left?s.top+=parseInt(t.height/2):e===this.DIRECTIONS.TopLeft||(e===this.DIRECTIONS.Center?(s.top+=parseInt(t.height/2),s.left+=parseInt(t.width/2)):Object(u.a)(!1,"unexpected direction: ".concat(e))),s}anchorPositionForElement(e,s){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};u.a.domElement(e),u.a.domElement(s);const i=void 0!==n.hints?n.hints:{},o=void 0!==n.anchorPoint?n.anchorPoint:this.DIRECTIONS.BottomLeft,r=void 0!==n.anchoredPoint?n.anchoredPoint:this.DIRECTIONS.BottomLeft,a=void 0!==n.container?n.container:"body",c=void 0!==n.containerAnchor?n.containerAnchor:this.DIRECTIONS.TopLeft,l=this.frameForElement(e),d=this.positionForPointWithinFrame(l,o);let h=this.frameForElement(s,{width:i.anchoredWidth});h=this.applyToFrame(h,d),h=this.frameForPoint(h,r,d);const g=t(a),p=this.frameForElement(g);return h=this.positionFrameToFitContainerFrame(h,p),this.positionFromFrame(h,{containerFrame:p,containerAnchor:c})}positionFrameToFitContainerFrame(t,e){Object(u.a)(this.isFrame(t)),Object(u.a)(this.isFrame(e));const s=t.width,n=t.height;let i=t.top,o=t.left,r=o+s,c=i+n;const l=e.width,d=e.height,h=e.top,g=e.left,p=g+l,b=h+d;return r>p&&(r-=r-p),c>b&&(c-=c-b),(i=c-n)<h&&(i+=h-i),(o=r-s)<g&&(o+=g-o),a()({},t,{top:i,left:o})}elementFromPoint(e,s){u.a.number(e),u.a.number(s);const n=document.elementFromPoint(e,s);return null==n?null:t(n)}intersectionForPoint(e,s,n){if(null==e)return[];const i=t(e);let o=null;return i.each((e,i)=>{if(!1!==this._isPointWithinDOMElement(i,s,n))return o=t(i),!1}),o}intersectionsForPoint(e,s,n){if(null==e)return[];const i=t(e),o=[];return i.each((e,i)=>{if(!1===this._isPointWithinDOMElement(i,s,n))return;const r=t(i);o.push(r)}),o}isPointWithinElement(t,e,s){return this.intersectionsForPoint(t,e,s).length>0}isPointWithinTopElement(e,s,n){const i=t(e),o=b.elementFromPoint(s,n);if(null==o)return!1;const r=o.closest(i).length>0,a=o.is(i);return r||a}blur(e){const s=t(e);s.blur(),this.logger.debug("blurred element: ",s)}async waitVisible(e){const s=t(e);Object(u.a)(s.length>0);const n=s[0];return new Promise(t=>{const e=new d.a(s=>{for(const i of s)if(0!==i.intersectionRatio)return e.unobserve(n),e.disconnect(),void t()});e.observe(n)})}_isPointWithinDOMElement(t,e,s){const n=t.getBoundingClientRect();return e>=n.left&&e<=n.left+n.width&&s>=n.top&&s<=n.top+n.height}async waitSelectorVisible(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u.a.object(e);const s=void 0!==e.timeout?e.timeout:20;return u.a.integer(s),new Promise(async n=>{const i=await this.waitSelectorAvailable(t,e);for(;;){if(this.isSelectorVisible(i))return n(i);await this._delay(s)}})}async waitSelectorHidden(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25;return u.a.integer(s),new Promise(async n=>{for(;;){const i=t(e);if(!this.isSelectorVisible(i))return n(i);await this._delay(s)}})}async waitSelectorAvailable(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u.a.object(s),new Promise(async n=>{let i=null;const o=s.shadowRootSelector;if(o){const e=a()({},s);delete e.shadowRootSelector;const n=(await this.waitSelectorAvailable(o,e))[0].shadowRoot;i=t(n)}const r=void 0!==s.timeout?s.timeout:20;for(u.a.integer(r);;){const s=i?t(e,i):t(e);if(s.length>0)return n(s);await this._delay(r)}})}async waitIframeLoaded(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=void 0!==e.loadedChecker?e.loadedChecker:null;let n=void 0!==e.retries?e.retries:0;const i=void 0!==e.retryUrl?e.retryUrl:null,o=void 0!==e.waitSelectorMode?e.waitSelectorMode:"visible";return new Promise(async(r,a)=>{let c=null;if("visible"===o?(c=await this.waitSelectorVisible(t,e),u.a.object(c)):"available"===o?(c=await this.waitSelectorAvailable(t,e),u.a.object(c)):Object(u.a)(!1,"unexpected wait selector mode: ".concat(o)),!(!s||!s(c)))return r(c);const l=c[0];Object(u.a)(l),c.load(()=>{try{if(s){if(!1===s(c))throw new Error("failed to load, loaded checker failed")}r(c)}catch(t){i&&n>0?(n-=1,this.logger.warn("iframe failed to load, retrying '".concat(i,"', ").concat(n," left")),c.attr("src",i)):(this.logger.error("iframe failed to load"),a(t))}})})}isSelectorVisible(e){const s=t(e);return 0!==s.length&&!1!==s.is(":visible")}getSelectedNodes(){const e=document.getSelection().getRangeAt(0),s=document.createNodeIterator(e.commonAncestorContainer,NodeFilter.SHOW_ALL,{acceptNode:t=>NodeFilter.FILTER_ACCEPT}),n=[];for(;s.nextNode();){if(0===n.length&&s.referenceNode!==e.startContainer)continue;const i=s.referenceNode,o=t(i);if(n.push(o),i===e.endContainer)break}return n}async _delay(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:25;return new Promise(e=>setTimeout(e,t))}get logger(){return h.a.scope=this,h.a}}l()(p,"CLASS",()=>"DOMUtilsClass");const b=new p;e.a=b}).call(e,s(4))},740:function(t,e){t.exports="/static/icon-bell.329dc8fb.svg"},741:function(t,e){t.exports="/static/icon-chat.aa6d3578.svg"},76:function(t,e,s){"use strict";var n=s(1),i=(s.n(n),s(6)),o=(s.n(i),s(9)),r=(s.n(o),s(2)),a=(s.n(r),s(3)),c=s.n(a),l=s(0),d=s(21);let u=!1;const h={},g={};class p extends d.a{async performTask(t,e){const s=g[t],n=s||e();Object(l.a)(n),g[t]=n;try{return await n}finally{delete g[t]}}async loadChunk(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=this._get(e,"chunkId","".concat(this._classSequentialUUID()));return await this.retry(t,{promiseId:s,retries:3,retryDelay:1e3})}async retry(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=this._get(e,"retries",2);l.a.integer(s);const n=this._get(e,"retryDelay",1e3);l.a.integer(n);const i=this._get(e,"maxRetryDelay",3e3);l.a.integer(i);const o=this._get(e,"promiseId","promise");l.a.string(o);const r=this._get(e,"shouldRetryCallback"),a=s+1;let c=a;Object(l.a)(a>=1,"unexpected total tries: ".concat(a));let d=null;for(;c>0;){let e=(a-c+1)*n;e>i&&(e=i);try{const s=await t();if(--c>0&&r&&r(s)){this.logger.warn("should retry callback rejected promise '".concat(o,"', retrying in ").concat(e,"ms, ").concat(c," retries left")),await this.wait(e),this.logger.warn("retrying '".concat(o,"' after ").concat(e,"ms delay, ").concat(c," retries left"));continue}const n=a-c;return n>1&&this.logger.warn("resolved promise '".concat(o,"' after trying ").concat(n," times")),s}catch(t){d=t;const s="string"==typeof t?t:t.message.toLowerCase(),n=s.includes("failed to load image"),i=s.includes("loading chunk")&&s.includes("failed"),r=s.includes("failed to fetch");if(!1===i&&!1===r&&!1===n)break;!1===await this._isInternetOnline()?(this.logger.warn("failed to resolve promise '".concat(o,"', internet is down"),t),await this.restoreInternetFlow(),this.logger.warn("internet is back, retrying promise ".concat(o,", ").concat(c," retries left")),c--):(this.logger.warn("failed to resolve promise '".concat(o,"', retrying in ").concat(e,"ms, ").concat(c," retries left"),t),await this.wait(e),this.logger.warn("retrying '".concat(o,"' after ").concat(e,"ms delay, ").concat(c," retries left")),c--)}}throw this.logger.error("failed to resolve promise '".concat(o,"' after ").concat(s," retries")),Object(l.a)(d,"last exception not found"),d}async debounceAcumulateArray(t,e,s){l.a.string(t),l.a.array(e),l.a.integer(s);const n=void 0!==h[t]?h[t]:[];for(const t of e)n.push(t);h[t]=n;let i=n;do{i=h[t],await this.wait(s)}while(h[t]===n&&n.length>i.length);return delete h[t],i}async restoreInternetFlow(){if(this.logger.log("internet is down, asking user to reconnect"),!0!==u){for(u=!0;!1===await this._isInternetOnline();)alert("Your Internet connection seems to be down. Please confirm you have Internet connectivity and then click OK to continue."),await this.wait(150);u=!1}else for(;u;)await this.wait(1e3);this.logger.log("internet is restored")}async _isInternetOnline(){return window.navigator&&!1===window.navigator.onLine?(this.logger.debug("isInternetOnline: window.navigator.onLine reported false"),!1):this.performTask("AsyncUtils._isInternetOnline",async()=>{try{return await fetch("/api/v2/ping"),this.logger.debug("isInternetOnline: /ping reachable"),!0}catch(t){return this.logger.debug("isInternetOnline: /ping not reacheable",t),!1}})}_logActiveTaskIds(){const t=Object.keys(g);this.logger.info("Active Task IDS: ".concat(JSON.stringify(t,null,4)))}async wait(t){l.a.integer(t),await new Promise(e=>setTimeout(e,t))}async waitCondition(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l.a.function(t);const s=this._get(e,"delay",50);for(l.a.integer(s);;){if(!0===t())return;await this.wait(s)}}}c()(p,"CLASS",()=>"AsyncUtilsClass");const b=new p;e.a=b,window.__AsyncUtils=b},86:function(t,e,s){"use strict";var n=s(42),i=(s.n(n),s(17)),o=(s.n(i),s(43));s.n(o);const r=new class{isObject(t){return null!=t&&"object"==typeof t}isFunction(t){return null!=t&&"function"==typeof t}isString(t){return void 0!==t&&"string"==typeof t}isInteger(t){return!1!==this.isNumber(t)&&parseInt(t)===t}isPositiveInteger(t){return!1!==this.isInteger(t)&&!(t<0)}isDictionary(t){return"object"==typeof t}isNumber(t){return!isNaN(t)&&"number"==typeof t}isNumberPositive(t){return!1!==this.isNumber(t)&&t>=0}isDataUrl(t){if(!1===this.isString(t))return!1;const e=t.split(",");if(2!==e.length)return!1;const s=e[0];return!1!==s.startsWith("data:")&&!1!==s.endsWith("base64")}isPromise(t){return!1!==this.isObject(t)&&!1!==this.isFunction(t.then)}};e.a=r},99:function(t,e,s){"use strict";var n=s(1),i=(s.n(n),s(6)),o=(s.n(i),s(2)),r=(s.n(o),s(3)),a=s.n(r),c=s(0),l=s(145),d=s(495),u=s(498),h=s(30),g=s(21),p=s(606),b=s(607),m=s(609),f=s(614),y=s(57),v=s(619);const _="global",I={},A={};class w{constructor(t,e,s){c.a.string(t),c.a.object(e),c.a.function(s),Object(c.a)(t===_),this.storeId=t,this.store=e,this.sagaMiddleware=s}getStore(){return this.store}getSagaMiddleware(){return this.sagaMiddleware}}class S extends g.a{constructor(){super(...arguments),a()(this,"bootstrapped",!1)}isBootstrapped(){return!0===this.bootstrapped}async bootstrap(){this.bootstrapped||(this.registerActions(m.a),this.registerReducers(f.a),this.bootstrapped=!0)}storeById(t){return Object(c.a)(t===_),I[t]}createStore(t,e){c.a.string(t),c.a.object(e),Object(c.a)(void 0===I[t]);const s=Object(d.a)({onError:(t,e)=>{let{sagaStack:s}=e;t instanceof v.a&&(t=t.getCoreException()),console.error(t),window.__Sentry&&window.__Sentry.captureException(t)}}),n=h.a.isDevelopment()&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:l.d,i=[];i.push(Object(l.a)(u.a)),i.push(Object(l.a)(s));const o=Object(l.e)((t,e)=>b.a.reduce(t,e),e,n(...i)),r=new w(t,o,s);return I[t]=r,r}ensureStore(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c.a.object(t);const e=_;c.a.string(e);let s=this.storeById(e);return s?Object.keys(t).length>0&&this.put(m.a.set("",t)):(s=this.createStore(e,t),this.subscribe(t=>{A[e]=t})),s}registerActions(t){t=Array.isArray(t)?t:[t],!1===p.a.isInitialized()&&p.a.init();for(const e of t)p.a.register(e.id(),e)}registerReducers(t){t=Array.isArray(t)?t:[t],!1===b.a.isInitialized()&&b.a.init();for(const e of t)b.a.register(e.id(),e)}subscribe(t){return this.store.subscribe(()=>{const e=this.store.getState();c.a.object(e),t(e)})}state(){return this.select()}select(){const t=A[_];return c.a.object(t),t}get(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];const e=this.state();return this._get(e,t)}put(t){this.logger.log("dispatching ".concat(t.type),t.payload),this.store.dispatch(t)}async take(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=this._get(e,"scope");t=Array.isArray(t)?t:[t];const n=[],i=()=>n.map(t=>t());return s&&s.addUnsubscriber(i),new Promise(e=>{const s=t=>{i(),e(t)};for(const e of t){const t=this.bind(e,s);n.push(t)}}).catch(()=>i())}async takeSucceeded(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=Array.isArray(t)?t:[t];c.a.object(e);const n=s.map(t=>y.a.succeededActionTypeForActionType(t));return await this.take(n,e)}async putAndWait(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=y.a.actionTypeForAction(t);c.a.string(s);const n=y.a.succeededActionTypeForActionType(s);c.a.string(n);const i=this._get(e,"resultActionType",n);return c.a.string(i),new Promise(s=>{this.take(i,e).then(t=>s(t)),this.put(t)})}get store(){const t=I[_];c.a.object(t);const e=t.getStore();return c.a.object(e),e}}a()(S,"CLASS",()=>"ReduxWrapperClass");const E=new S;e.a=E,window.__ReduxWrapper=E}},[308]);
//# sourceMappingURL=bramble_ide_modern.357e4724.js.map